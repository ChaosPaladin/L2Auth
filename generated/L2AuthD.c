/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int __thiscall sub_401000(int this);
void *__thiscall sub_401074(void *this);
int __thiscall sub_401088(_DWORD *this, void *a2);
char __thiscall sub_4012A9(void *this, SQLPOINTER rgbValue);
char __thiscall sub_401627(void *this);
char __thiscall sub_4018BB(void *this, SQLPOINTER rgbValue, SQLPOINTER a3);
char __thiscall sub_401ACF(void *this, SQLPOINTER rgbValue, char *a3);
char __thiscall sub_401B99(void *this, SQLPOINTER rgbValue, char *a3);
int sub_4020D4();
void *__thiscall sub_4020F0(void *this, char a2);
int sub_402120();
void __cdecl sub_402150(); // idb
char __cdecl sub_402160(char *a1, char a2, int a3);
int __thiscall sub_402281(int this);
int __thiscall sub_4022E9(int this);
char __thiscall sub_402340(void *this, char a2, char *a3);
char __thiscall sub_402411(void *this, char a2, char *a3, int a4, int a5, int a6, int a7);
signed int __thiscall sub_402507(void *this, char a2, int a3, int a4, char a5);
char __thiscall sub_4025DE(void *this, int a2, char a3, int a4, int a5, int a6);
char __thiscall sub_4027DF(void *this, char a2, char a3, char a4);
void __stdcall Callback(PVOID, BOOLEAN); // idb
char __thiscall sub_402BF8(void *this, char a2);
void __thiscall sub_402E5F(void *this, int a2);
void __thiscall sub_402F6E(void *this);
int __thiscall sub_40308E(void *this, PVOID Parameter, int a3);
int __thiscall sub_403167(void *this, PVOID Parameter, int a3, int a4, int a5, char *a6);
char __thiscall sub_4032CA(void *this, char a2, char *a3);
char __thiscall sub_40340F(void *this, char a2, int a3);
char __thiscall sub_4035F9(void *this, PVOID Parameter, int a3);
char __thiscall sub_4038C3(void *this, char a2);
char __thiscall sub_403AA1(void *this, int a2, char a3);
char __thiscall sub_403E28(void *this, PVOID Parameter, int a3, int a4);
char __stdcall sub_40418D(int rgbValue, time_t a2, char a3, unsigned __int8 a4, int a5, SQLPOINTER a6, int a7, int a8, int a9, char a10, int a11, int a12);
char __stdcall sub_4047E1(char rgbValue, int a2, SQLPOINTER a3);
char __stdcall sub_40481A(int a1, int a2, int rgbValue);
char __stdcall sub_40492F(char rgbValue, SQLPOINTER a2);
char __thiscall sub_404A52(void *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, signed int a9, int a10);
char __thiscall sub_404C7A(void *this, char a2, char *a3, int a4, int a5, int a6, int a7);
char __thiscall sub_404D70(void *this, char a2, char *a3, int a4, int a5, int a6);
char __thiscall sub_404E2B(void *this, const void *a2, char a3, int a4, int a5, int a6);
int __stdcall sub_404E9A(int a1);
char __stdcall sub_404F3E(int a1, int a2, char a3);
char __stdcall sub_404FDC(char rgbValue, char a2, char a3);
char __stdcall sub_4050DC(int a1, int a2, char a3, int a4, int a5);
int sub_40517C();
void *__thiscall sub_405190(void *this, char a2);
// int __thiscall unknown_libname_1(_DWORD); weak
void *__thiscall sub_405200(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_405220(void *this, int a2);
int __thiscall sub_405240(void *this, int a2);
int __thiscall sub_405260(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_4052A0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
// _DWORD __stdcall unknown_libname_3(_DWORD); weak
_DWORD *__thiscall sub_4052E0(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_405300(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_4053B0(int this, _DWORD *a2, const void *a3);
// int __thiscall unknown_libname_4(_DWORD); weak
// int __thiscall unknown_libname_5(_DWORD); weak
_DWORD *__thiscall sub_405420(void *this, _DWORD *a2, int a3);
BOOL __thiscall sub_405450(void *this, _DWORD *a2);
void *__thiscall sub_405480(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_4054B0(void *this, int a2);
int __thiscall sub_4054E0(int this, int a2);
int __thiscall sub_405500(void *this, int a2, struct Concurrency::IExecutionContext *a3);
// int __thiscall unknown_libname_6(_DWORD); weak
_DWORD *__thiscall sub_4056F0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_405F40(void *this, _DWORD *a2, int a3, char a4);
// int unknown_libname_7(void); weak
int __thiscall sub_406060(void *this, _DWORD *a2);
_DWORD *__thiscall sub_4060C0(void *this, _DWORD *a2, _DWORD *a3);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_406190(int *this);
// int __cdecl unknown_libname_9(_DWORD); weak
BOOL __thiscall sub_4061D0(void *this, _DWORD *a2);
int __thiscall sub_4061F0(int this, _DWORD *a2, _BYTE *a3);
BOOL __stdcall sub_406220(_DWORD *a1, _DWORD *a2);
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
int __cdecl sub_406270(int a1);
struct Concurrency::details::InternalContextBase *__cdecl sub_406280(int a1);
// _DWORD __cdecl unknown_libname_11(_DWORD); weak
int __cdecl sub_4062B0(int a1);
int __cdecl sub_4062C0(int a1);
int __cdecl sub_4062D0(int a1);
int __thiscall sub_4062E0(int this, _BYTE *a2, char a3, _BYTE *a4);
int __thiscall sub_406320(void *this, int a2, _DWORD *a3);
int __thiscall sub_406350(void *this, int a2, _DWORD *a3);
void *__thiscall sub_406390(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_406410(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_4068A0(int this);
int *__thiscall sub_4068C0(void *this, int a2);
int __cdecl sub_4069F0(int a1);
int __cdecl sub_406A30(int a1);
int __thiscall sub_406A70(int this);
int __thiscall sub_406A90(int this);
int *__thiscall sub_406AB0(void *this, int a2);
void __stdcall sub_406BE0(int a1);
_DWORD *__thiscall sub_406C00(int *this);
// int __thiscall unknown_libname_12(_DWORD); weak
// _DWORD __stdcall unknown_libname_13(_DWORD); weak
// int __thiscall unknown_libname_14(_DWORD); weak
int __thiscall sub_406CF0(void *this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_406D20(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_406E20(void *this, _DWORD *a2);
char *__stdcall sub_406EB0(int a1, int a2);
void *__stdcall sub_406F00(void *a1, int a2);
int *__thiscall sub_406F40(int *this);
int __thiscall sub_407010(int this, _DWORD *a2, _DWORD *a3);
char *__stdcall sub_407040(size_t a1);
int __thiscall sub_407060(int this);
int __thiscall sub_407080(void *this, _DWORD *a2);
int __cdecl sub_407110(int *a1, int *a2);
int __cdecl sub_407140(char a1, char a2, _DWORD *a3);
void sub_407170();
void *__cdecl sub_407180(void *a1, int a2);
// void *__cdecl operator new(unsigned int, void *); idb
// char *__cdecl std::_Allocate(size_t, char *); idb
_BYTE *__cdecl sub_407200(_BYTE *a1);
int __cdecl sub_407220(char a1, char a2, _DWORD *a3);
int *__cdecl sub_407260(int *a1, int *a2);
int *__cdecl sub_4077FC(unsigned int *a1, int *a2);
int *__cdecl sub_407D98(int a1, signed int a2);
int *__cdecl sub_407DE3(int a1, signed int a2);
__int16 sub_407E2E(const char *a1, ...);
int __cdecl sub_408269(int a1, int *a2, int *a3);
int __cdecl sub_4088C1(int a1, int *a2, int *a3);
int sub_408FCF();
int sub_408FDE();
void __cdecl sub_408FF0(); // idb
// int __thiscall unknown_libname_16(_DWORD); weak
// int __thiscall unknown_libname_17(_DWORD); weak
int __stdcall sub_409018(_BYTE *a1, int a2, _BYTE *a3);
int __thiscall sub_409115(char *this, _BYTE *a2, int a3);
int __stdcall sub_409242(int a1, int a2);
int __thiscall sub_4093E9(_BYTE *this, int a2, int a3);
int __thiscall sub_40952A(char *this, int a2, int a3, int a4);
int __thiscall sub_40969C(char *this, int a2, int a3, _BYTE *a4);
int __stdcall sub_409802(int a1, char a2);
void __thiscall sub_409847(_BYTE *this);
int __thiscall sub_4098D8(_BYTE *this, int a2);
int __thiscall sub_409A84(_BYTE *this);
int __stdcall sub_409BE8(int a1, int a2);
int __thiscall sub_409D36(char *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_409ED7(char *this, _BYTE *a2, _BYTE *a3);
char __thiscall sub_40A07D(char *this, _BYTE *a2, int a3);
int __thiscall sub_40A10F(_BYTE *this, _BYTE *a2);
int sub_40A1E7();
int sub_40A20F();
int sub_40A21E();
void __cdecl sub_40A230(); // idb
void *__cdecl sub_40A23F(char *a1, int a2, int a3);
int __thiscall sub_40A309(int this);
int __thiscall sub_40A32F(char *this);
int __thiscall sub_40A348(void *this, char *a2);
void *__thiscall sub_40AC55(int this, char *a2);
char __thiscall sub_40ACB4(void *this, char *a2, char a3);
int __thiscall sub_40AD2F(void *this, char *a2, int a3);
int __thiscall sub_40AD64(void *this, int a2, char *a3);
char *__stdcall sub_40AE2F(char *a1, char *a2, int a3, int a4);
int sub_40AEBF();
// int __thiscall unknown_libname_18(_DWORD); weak
int __cdecl sub_40AF20(int a1);
int __thiscall sub_40AF40(int this, int a2);
int __thiscall sub_40AF60(int this, char *a2, int a3, int a4);
std::strstreambuf *__thiscall sub_40B010(std::strstreambuf *this, char *a2, int a3);
int __thiscall sub_40B0F0(int this);
// int __thiscall unknown_libname_20(_DWORD); weak
int __thiscall sub_40B140(char *this);
int __thiscall sub_40B190(std::ios_base *this);
std::ios_base *__thiscall sub_40B1B0(std::ios_base *this);
// _DWORD __thiscall std::ios_base::ios_base(std::ios_base *__hidden this); idb
int __fastcall sub_40B240(int a1, int a2, int a3, char a4, int a5);
char *__thiscall sub_40B2E0(char *this);
_DWORD *__thiscall sub_40B300(int this);
// _DWORD __thiscall std::locale::locale(std::locale *__hidden this); idb
// void __thiscall std::locale::facet::_Incref(std::locale::facet *__hidden this); idb
// _DWORD __thiscall std::locale::~locale(std::locale *__hidden this); idb
// struct std::locale::facet *__thiscall std::locale::facet::_Decref(std::locale::facet *__hidden this); idb
int __thiscall sub_40B490(int this);
// int std::char_traits<char>::eof(void); weak
// _DWORD __cdecl std::char_traits<char>::to_int_type(_DWORD); weak
// _DWORD __cdecl std::char_traits<char>::eq_int_type(_DWORD, _DWORD); weak
// int __cdecl std::char_traits<char>::copy(void *, void *, size_t); idb
// _DWORD __cdecl std::char_traits<char>::to_char_type(_DWORD); weak
// int __thiscall std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(_DWORD); weak
void *__thiscall sub_40B890(void *this, char *a2, int a3);
void *__thiscall sub_40B8D0(int this);
void *__thiscall sub_40B900(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_40B920(void *this, int a2, char *a3);
int __thiscall sub_40B950(void *this, int a2);
int __thiscall sub_40B970(void *this, int a2, struct Concurrency::IExecutionContext *a3);
void __thiscall sub_40B9B0(Concurrency::details::_NonReentrantPPLLock *this);
void *__thiscall sub_40BA60(void *this, int a2, int a3);
// int __thiscall unknown_libname_27(_DWORD); weak
BOOL __thiscall sub_40BAE0(void *this, _DWORD *a2);
_BYTE *__thiscall sub_40BB10(_BYTE *this);
std::ios_base *__thiscall sub_40BB30(std::ios_base *this, char a2);
int __thiscall sub_40BB60(char *this, char a2);
void *__thiscall sub_40BBA0(void *this, char a2);
// _DWORD __stdcall unknown_libname_28(_DWORD); weak
int __thiscall sub_40BBF0(int this);
// _DWORD __stdcall std::basic_ios<char,std::char_traits<char>>::init(_DWORD, _DWORD); weak
void __thiscall sub_40BC90(void *this, int a2, char a3);
// int __thiscall unknown_libname_29(_DWORD); weak
// _DWORD __stdcall sub_40BCE0(_DWORD, char); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::egptr(_DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Gninc(_DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD); weak
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string<char,std::char_traits<char>,std::allocator<char>>(char *, _DWORD); weak
void *sub_40BF50();
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD); weak
void *__thiscall sub_40C020(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_40C050(void *this, int a2);
int __thiscall sub_40C080(int this, int a2);
int __thiscall sub_40C0A0(int this, int a2);
int __thiscall sub_40C0C0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
bool __stdcall sub_40C290(int a1, int a2);
_DWORD *__thiscall sub_40C2C0(void *this, _DWORD *a2, int a3, char a4);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
// _DWORD __stdcall unknown_libname_32(_DWORD); weak
int __thiscall sub_40C400(int *this);
BOOL __thiscall sub_40C420(void *this, _DWORD *a2);
// int unknown_libname_33(void); weak
int __thiscall sub_40C460(int this, _DWORD *a2, _BYTE *a3);
int __thiscall sub_40C490(void *this, int a2, char *a3);
bool __stdcall sub_40C530(char *a1, int a2);
_DWORD *__thiscall sub_40C740(_DWORD *this, char *a2);
// int __cdecl unknown_libname_34(char *); idb
// _DWORD __stdcall sub_40C790(_DWORD); weak
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
struct Concurrency::details::InternalContextBase *__cdecl sub_40C800(int a1);
// _DWORD __cdecl unknown_libname_37(_DWORD); weak
int __cdecl sub_40C830(int a1);
int __cdecl sub_40C840(int a1);
int __thiscall sub_40C850(int this, _BYTE *a2, char a3, _BYTE *a4);
// int unknown_libname_38(void); weak
_DWORD *__thiscall sub_40C8B0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
void *__thiscall sub_40D100(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_40D180(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_40D610(int this);
int __thiscall sub_40D630(int this);
int __thiscall sub_40D650(int this);
// _DWORD __stdcall unknown_libname_40(_DWORD); weak
// int __thiscall unknown_libname_41(_DWORD); weak
// _DWORD __stdcall unknown_libname_42(_DWORD); weak
_DWORD *__thiscall sub_40D6D0(void *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_43(_DWORD); weak
BOOL __thiscall sub_40D720(void *this, _DWORD *a2);
BOOL __thiscall sub_40D740(void *this, _DWORD *a2);
int __thiscall sub_40D770(void *this, int a2, char *a3);
_DWORD *__thiscall sub_40D7A0(_DWORD *this, void *a2, size_t a3);
void *__cdecl sub_40D8A0(void *a1, void *a2, size_t a3);
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Eos(_DWORD); weak
char __thiscall sub_40D950(_DWORD *this, unsigned int a2, char a3);
int __cdecl sub_40DA90(int a1);
int __cdecl sub_40DAA0(int a1);
_DWORD *__thiscall sub_40DAB0(Concurrency::details::_NonReentrantPPLLock *this);
int *__thiscall sub_40DBB0(void *this, int a2);
int __cdecl sub_40DCE0(int a1);
int __cdecl sub_40DD20(int a1);
int *__thiscall sub_40DD60(void *this, int a2);
char *__stdcall sub_40DE90(int a1, int a2);
void *__stdcall sub_40DEE0(void *a1, int a2);
void __stdcall sub_40DF00(void *a1);
int *__thiscall sub_40DF20(int *this);
// int __cdecl unknown_libname_46(_DWORD); weak
int __thiscall sub_40E010(void *this, char *a2);
bool __stdcall sub_40E0A0(int a1, char *a2);
// int std::basic_string<char,std::char_traits<char>,std::allocator<char>>::max_size(void); weak
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Copy(_DWORD); weak
_DWORD *__thiscall sub_40E280(int this);
char *__stdcall sub_40E2F0(size_t a1);
int __thiscall sub_40E310(int this);
_DWORD *__thiscall sub_40E330(int *this);
char sub_40E3F0();
int __cdecl sub_40E410(int *a1, int *a2);
void *__cdecl sub_40E440(void *a1, int a2);
void sub_40E4B0();
// void __cdecl __ExceptionPtrDestroy(void *); idb
void *__thiscall sub_40E4D0(void *this, int a2);
char *__thiscall sub_40E530(char *this, char a2);
void __cdecl sub_40E560(int a1, _BYTE *a2);
_BYTE *__cdecl sub_40E64A(_BYTE *a1, _BYTE *a2);
void __cdecl sub_40E6C2(int a1);
void __cdecl sub_40E6E3(int a1, _BYTE *a2);
void __cdecl sub_40E849(int a1, _BYTE *a2);
void __cdecl sub_40E917(int a1, _BYTE *a2);
void sub_40E9BE();
void __cdecl sub_40E9C3(int a1, _BYTE *a2);
void sub_40EA99();
void __cdecl sub_40EA9E(int a1, _BYTE *a2);
void __cdecl sub_40EB66(int a1, _BYTE *a2);
void __cdecl sub_40EDD3(int a1, _BYTE *a2);
void *__cdecl sub_40EFC9(int a1, _BYTE *a2);
DNameNode *__thiscall sub_40F25A(DNameNode *this, int a2);
void *__thiscall sub_40F2B0(void *this);
DNameNode *__cdecl sub_40F2CC(int a1);
int __thiscall sub_40F337(int this);
int __thiscall sub_40F374(int this);
int __thiscall sub_40F416(_DWORD *this, char *a2);
char *__thiscall sub_40F45D(int this);
int __thiscall sub_40F475(void *this);
int __thiscall sub_40F493(int this, int a2);
void sub_40F4A9(int arg0, char *arg4, ...);
void __thiscall sub_40F529(int this, void *a2, size_t a3);
int sub_40F59A();
int __thiscall sub_40F5B0(char *this);
void *__thiscall sub_40F5F0(void *this, char a2);
// _DWORD __cdecl unknown_libname_48(LPVOID lpMem); weak
// int __cdecl unknown_libname_49(size_t); idb
// int __thiscall unknown_libname_50(_DWORD); weak
char __cdecl sub_40F680(int a1, char a2);
char __cdecl sub_40F7B1(int a1, char a2);
char __cdecl sub_40F8B2(int a1, char a2);
char __cdecl sub_40F900(int a1, char a2);
char __cdecl sub_40FA11(int a1, char a2);
char __cdecl sub_40FAF4(int a1, char a2);
char __cdecl sub_40FB53(int a1, char a2);
char __cdecl sub_40FB7E(int a1, char a2);
char __cdecl sub_40FB97(int a1, char a2);
char __cdecl sub_40FBBE(int a1, void *a2);
char __cdecl sub_40FC7A(int a1);
char __cdecl sub_40FD0D(int a1, char a2);
char __cdecl sub_4101AC(int a1, int a2);
char __cdecl sub_41026C(int a1, char a2);
char __cdecl sub_410307(int a1, int a2);
char __cdecl sub_4103AD(int a1, char a2);
char __cdecl sub_410448(int a1, char a2);
char sub_4105CD();
char __cdecl sub_410653(int a1, char a2);
char __cdecl sub_41070C(int a1, char a2);
char __cdecl sub_41085B(int a1, char a2);
char __cdecl sub_410970(int a1);
signed int __cdecl sub_410A93(int a1, int a2, char a3);
DNameNode *__thiscall sub_410BAB(DNameNode *this, int a2);
void *__thiscall sub_410C4F(void *this);
DNameNode *__cdecl sub_410CA3(int a1);
void __thiscall sub_410D11(int this);
LONG __thiscall sub_410E7A(int this);
char *__thiscall sub_411108(int this);
void __thiscall sub_411123(void *this);
void __thiscall sub_41115C(int this, int a2);
void __cdecl sub_4111F6(int a1, int a2, char a3);
char __thiscall sub_4112BF(void *this, char a2, char *a3);
char __thiscall sub_41136F(void *this, int a2);
int sub_41146D();
int __cdecl sub_411480(int **a1);
char __cdecl sub_4114B0(_DWORD *a1);
__int16 __cdecl sub_4114E0(__int16 **a1);
_DWORD *__thiscall sub_411510(int this, _DWORD *a2);
int __cdecl sub_411530(int **a1);
int *__cdecl sub_411560(int *a1, signed int a2, _BYTE *a3);
int __thiscall sub_411590(int this);
void *__thiscall sub_4115B0(void *this);
// int __thiscall unknown_libname_51(_DWORD); weak
void *__thiscall sub_411650(void *this, char a2);
int __thiscall sub_411680(int this);
LONG __thiscall sub_4116D0(int this);
// int __thiscall unknown_libname_53(_DWORD); weak
void *__thiscall sub_411710(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_411730(void *this, int a2);
int __thiscall sub_411750(void *this, int a2);
int __thiscall sub_411770(void *this, int a2, struct Concurrency::IExecutionContext *a3);
// int __thiscall unknown_libname_54(_DWORD); weak
void __thiscall sub_4117D0(Concurrency::details::_NonReentrantPPLLock *this);
// _DWORD __stdcall unknown_libname_55(_DWORD, _DWORD); weak
// int __thiscall unknown_libname_56(_DWORD); weak
// int __thiscall unknown_libname_57(_DWORD); weak
_DWORD *__thiscall sub_4118F0(void *this, _DWORD *a2, int a3);
BOOL __thiscall sub_411920(void *this, _DWORD *a2);
void *__thiscall sub_411950(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_411980(void *this, int a2);
int __thiscall sub_4119B0(int this, int a2);
int __thiscall sub_4119D0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_411BA0(void *this, _DWORD *a2, int a3, char a4);
_DWORD *__thiscall sub_411CA0(void *this);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_411D10(int *this);
// int __cdecl unknown_libname_59(_DWORD); weak
BOOL __thiscall sub_411D50(void *this, _DWORD *a2);
int __thiscall sub_411D70(int this, _DWORD *a2, _BYTE *a3);
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
struct Concurrency::details::InternalContextBase *__cdecl sub_411DB0(int a1);
// _DWORD __cdecl unknown_libname_60(_DWORD); weak
int __cdecl sub_411DE0(int a1);
int __cdecl sub_411DF0(int a1);
int __thiscall sub_411E00(int this, _BYTE *a2, char a3, _BYTE *a4);
// int unknown_libname_61(void); weak
_DWORD *__thiscall sub_411E60(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
void *__thiscall sub_4126B0(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_412730(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_412BC0(int this);
int __thiscall sub_412BE0(int this);
int __thiscall sub_412C00(int this);
_DWORD *__thiscall sub_412C20(int *this);
// int __thiscall unknown_libname_62(_DWORD); weak
// _DWORD __stdcall unknown_libname_63(_DWORD); weak
// int __thiscall unknown_libname_64(_DWORD); weak
// int __cdecl _tolower(int);
int __cdecl sub_412D20(int a1);
_DWORD *__thiscall sub_412D30(Concurrency::details::_NonReentrantPPLLock *this);
int *__thiscall sub_412E30(void *this, int a2);
int __cdecl sub_412F60(int a1);
int __cdecl sub_412FA0(int a1);
int *__thiscall sub_412FE0(void *this, int a2);
char *__stdcall sub_413110(int a1, int a2);
void *__stdcall sub_413160(void *a1, int a2);
void __stdcall sub_413180(void *a1);
int *__thiscall sub_4131C0(int *this);
int __cdecl sub_413290(int *a1, int *a2);
void *__cdecl sub_4132C0(void *a1, int a2);
// void __cdecl __ExceptionPtrDestroy(void *); idb
// _DWORD __stdcall unknown_libname_66(_DWORD); weak
void *__thiscall sub_413370(void *this, char a2);
DNameNode *sub_4133AF();
int sub_4133BE();
void __cdecl sub_4133D0(); // idb
DNameNode *__thiscall sub_4133DF(DNameNode *this);
void *__thiscall sub_41346F(int this);
void *__thiscall sub_4134F8(int this, int a2);
char __thiscall sub_4135F2(void *this, char a2);
void *__thiscall sub_413759(void *this);
int __thiscall sub_413AC8(void *this);
char __thiscall sub_413B7E(void *this);
LSTATUS __thiscall sub_413C76(int this);
LONG __thiscall sub_413D60(void *this);
int __thiscall sub_413E9E(int this, int a2);
void __thiscall sub_413F5F(int this);
BOOL __stdcall DialogFunc(HWND, UINT, WPARAM, LPARAM); // idb
char sub_414123(int a1, char *a2, ...);
char __thiscall sub_4143F1(SQLHSTMT *this, bool *a2);
void __thiscall sub_414532(_DWORD *this, SQLSMALLINT HandleType, SQLHANDLE Handle, int a4);
int __stdcall sub_414647(SQLSMALLINT HandleType, SQLHANDLE Handle, int a3);
SQLRETURN __thiscall sub_4146F6(int this, SQLPOINTER TargetValue);
SQLRETURN __thiscall sub_414739(int this, SQLPOINTER TargetValue);
SQLRETURN __thiscall sub_41477C(int this, SQLPOINTER TargetValue, SQLINTEGER BufferLength);
SQLRETURN __thiscall sub_414804(int this, SQLPOINTER TargetValue);
SQLRETURN __thiscall sub_414A7B(int this);
int sub_414AC3();
void __stdcall sub_414AF0(int a1, int a2, int a3);
void *__thiscall sub_414B00(void *this, char a2);
int __cdecl sub_414B30(_BYTE *a1, int a2);
int __cdecl sub_414B49(_BYTE *a1, int a2, int a3);
int __cdecl sub_414B9B(_BYTE *a1, _BYTE *a2);
int __cdecl sub_414D1E(_BYTE *a1, int a2, _BYTE *a3);
int __cdecl sub_414E16(int a1, int a2, _BYTE *a3);
int __cdecl sub_414F77(int a1, int a2, int a3);
int __cdecl sub_4150DF(_BYTE *a1, int a2);
int __cdecl sub_415201(int a1, int a2);
int __cdecl sub_4153A3(int a1, int a2);
int __cdecl sub_4154CF(_BYTE *a1, _BYTE *a2);
int __cdecl sub_415657(_BYTE *a1, int a2);
int __cdecl sub_415670(_BYTE *a1);
void sub_415727();
int __cdecl sub_4157B0(int a1, char a2);
int __cdecl sub_4157F0(int a1);
int sub_415984();
int __cdecl sub_415AD1(int a1, int a2);
void *sub_415C2F();
int sub_415C3E();
void __cdecl sub_415C50(); // idb
int __cdecl sub_415CD1(LPCVOID lpAddress, LPSTR lpFilename, DWORD nSize, int, int); // idb
BOOL __cdecl sub_415DD8(HANDLE hFile, PVOID ContextRecord);
int sub_41612B(HANDLE hFile, LPCSTR arg4, ...);
char *__cdecl sub_41618B(char *a1);
LPVOID __cdecl sub_4161BE(HANDLE hFile, int a2);
LONG __thiscall TopLevelExceptionFilter(void *this, struct _EXCEPTION_POINTERS *ExceptionInfo);
int __cdecl sub_416486(char *cp, int, char *, LPCSTR lpFileName); // idb
char __cdecl sub_416943(SOCKET s, LPCSTR lpFileName);
void __cdecl sub_4169E0(int a1);
unsigned int __cdecl sub_41703B(HANDLE hFile);
HMODULE __cdecl sub_417112(HANDLE a1, HMODULE hModule);
int __cdecl sub_4172E8(LPSTR, FILETIME FileTime); // idb
int __cdecl sub_4173B0(HANDLE hFile); // idb
char *__cdecl sub_4174C8(_DWORD a1);
LONG (__stdcall *sub_417692())(struct _EXCEPTION_POINTERS *ExceptionInfo);
LPTOP_LEVEL_EXCEPTION_FILTER sub_4176A7();
void *__thiscall sub_4176C1(void *this);
int __thiscall sub_417788(void *this);
void __cdecl sub_41779D(char *a1, char a2);
signed int __cdecl sub_417A31(_DWORD **a1);
void __cdecl sub_417AB1(char a1);
void sub_417B55();
int sub_417C7F();
void *__thiscall sub_417CA0(void *this);
void sub_417CC0();
// int cleanup(void); weak
// int __cdecl cleanup_0(_DWORD); weak
void *__thiscall sub_417D00(void *this);
void *__thiscall sub_417D17(void *this);
int sub_417D3A();
int sub_417D57();
void __cdecl sub_417D69(); // idb
void sub_417DAD();
int sub_417DB2();
void __cdecl sub_417DC4(); // idb
_DWORD *sub_417DD3();
void __thiscall sub_417EC2(_DWORD *this);
void sub_417F14();
int sub_417FB4();
void *__thiscall sub_417FD0(void *this, char a2);
// void __thiscall unknown_libname_68(void *); idb
int __thiscall sub_418020(int this);
void sub_418050();
// _DWORD __thiscall DNameNode::DNameNode(DNameNode *__hidden this); idb
void *__thiscall sub_418081(void *this);
int __thiscall sub_418095(int this);
LONG __thiscall sub_4180B3(int this);
BOOL __thiscall sub_4180FB(void *this, DWORD dwNumberOfBytesTransferred, HANDLE CompletionPort);
signed int __thiscall sub_41811C(struct Concurrency::details::_Micro_queue *this, unsigned int a2, int a3);
bool __fastcall sub_418154(char a1, int a2, char a3);
void __stdcall sub_41817D(int a1, int a2, int a3);
int sub_4181B7();
void *__thiscall sub_4181D0(void *this, char a2);
DNameNode *sub_41820F();
int sub_41821E();
void __cdecl sub_418230(); // idb
DNameNode *sub_41824E();
int sub_41825D();
void __cdecl sub_41826F(); // idb
DNameNode *sub_41828D();
int sub_41829C();
void __cdecl sub_4182AE(); // idb
DNameNode *__thiscall sub_4182BD(DNameNode *this);
void *__thiscall sub_4182F0(void *this);
int __thiscall sub_41834E(int this);
int __thiscall sub_4183AA(int this, int hostshort);
LONG __thiscall sub_4184ED(int this);
BOOL __thiscall sub_418633(ULONG_PTR this);
DNameNode *__thiscall sub_41865F(DNameNode *this);
void *__thiscall sub_4186D9(int this);
int __thiscall sub_41873A(void *this, int a2, int a3);
int __thiscall sub_4188A6(int this, int hostshort, int a3, char a4);
int __thiscall sub_4188F9(int this, char a2);
char __thiscall sub_418976(int this, char a2);
void __thiscall sub_4189DE(int this, char a2);
DNameNode *__thiscall sub_418A67(DNameNode *this);
void *__thiscall sub_418A9F(int this);
LONG __thiscall sub_418AD5(int this, int a2, int a3, int a4);
int __thiscall sub_418B75(int this, int a2, int a3);
int __thiscall sub_418BF7(int this, int hostshort, int a3);
int sub_418C50();
int sub_418C6D();
void __cdecl sub_418C7F(); // idb
void sub_418CC3();
int sub_418CC8();
void __cdecl sub_418CDA(); // idb
void *sub_418CE9();
void __cdecl sub_418D8B(int a1);
int sub_418DD8();
DNameNode *__thiscall sub_418E51(DNameNode *this);
void *__thiscall sub_418F0E(void *this);
void __cdecl sub_418FA0(int a1, DWORD dwReceiveDataLength, int a3);
char __thiscall sub_419109(void *this);
DWORD __stdcall Function(LPVOID lpThreadParameter); // idb
int __thiscall sub_4191F7(int this);
// int __thiscall unknown_libname_71(_DWORD); weak
int __thiscall sub_41926B(int this);
int __thiscall sub_4192BD(ULONG_PTR this, int hostshort, int a3);
int __thiscall sub_419454(void *this, int a2, int a3);
int __thiscall sub_419532(int this, char a2);
char __thiscall sub_4195AF(int this, char a2);
int sub_4195F6();
void *__thiscall sub_419610(void *this, char a2);
void *__thiscall sub_419640(void *this, char a2);
// int __thiscall unknown_libname_72(_DWORD); weak
void *__thiscall sub_4196B0(void *this, char a2);
// void __thiscall unknown_libname_74(void *); idb
void *__thiscall sub_419700(void *this, char a2);
// int __thiscall unknown_libname_75(_DWORD); weak
void *__thiscall sub_419770(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_419790(void *this, int a2);
// int __thiscall unknown_libname_77(_DWORD); weak
int __thiscall sub_4197D0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_419810(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_419830(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_419850(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_419900(int this, _DWORD *a2, _DWORD *a3);
// int __thiscall unknown_libname_78(_DWORD); weak
BOOL __thiscall sub_419950(void *this, _DWORD *a2);
void *__thiscall sub_419980(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_4199A0(void *this, int a2);
int __thiscall sub_4199C0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
// _DWORD __stdcall unknown_libname_79(_DWORD); weak
_DWORD *__thiscall sub_419A20(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_419A40(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_419AF0(int this, _DWORD *a2, _DWORD *a3);
// int __thiscall unknown_libname_80(_DWORD); weak
BOOL __thiscall sub_419B40(void *this, _DWORD *a2);
void *__thiscall sub_419B70(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_419BA0(void *this, int a2);
int __thiscall sub_419BD0(int this, int a2);
// int unknown_libname_81(void); weak
int __thiscall sub_419C10(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_419DE0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_41A630(void *this, _DWORD *a2, int a3, char a4);
_DWORD *__thiscall sub_41A730(void *this, _DWORD *a2, _DWORD *a3);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_41A7F0(int *this);
BOOL __thiscall sub_41A810(void *this, _DWORD *a2);
void *__thiscall sub_41A830(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_41A860(void *this, int a2);
int __thiscall sub_41A890(int this, int a2);
int __thiscall sub_41A8B0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_41AA80(void *this, _DWORD *a2, int a3, char a4);
int __thiscall sub_41AB80(void *this, _DWORD *a2);
_DWORD *__thiscall sub_41ABE0(void *this, _DWORD *a2, _DWORD *a3);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_41ACA0(int *this);
BOOL __thiscall sub_41ACC0(void *this, _DWORD *a2);
int __thiscall sub_41ACE0(int this, _DWORD *a2, _BYTE *a3);
int __thiscall sub_41AD10(int this, _DWORD *a2, _BYTE *a3);
int __thiscall sub_41AD40(int this);
int sub_41AD70();
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
BOOL __stdcall sub_41AD90(_DWORD *a1, _DWORD *a2);
int __cdecl sub_41ADD0(int a1);
struct Concurrency::details::InternalContextBase *__cdecl sub_41ADE0(int a1);
// _DWORD __cdecl unknown_libname_83(_DWORD); weak
int __cdecl sub_41AE10(int a1);
int __cdecl sub_41AE20(int a1);
int __cdecl sub_41AE30(int a1);
int __thiscall sub_41AE40(int this, _BYTE *a2, char a3, _BYTE *a4);
int __thiscall sub_41AE80(void *this, int a2, _DWORD *a3);
void *__thiscall sub_41AEB0(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_41AF30(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_41B3C0(int this);
int *__thiscall sub_41B3E0(void *this, int a2);
int __cdecl sub_41B510(int a1);
int __cdecl sub_41B550(int a1);
int __thiscall sub_41B590(int this);
int __thiscall sub_41B5B0(int this);
int *__thiscall sub_41B5D0(void *this, int a2);
void __stdcall sub_41B700(int a1);
// int __thiscall unknown_libname_84(_DWORD); weak
// _DWORD __stdcall unknown_libname_85(_DWORD); weak
_DWORD *__thiscall sub_41B750(void *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_86(_DWORD); weak
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
BOOL __stdcall sub_41B7B0(_DWORD *a1, _DWORD *a2);
struct Concurrency::details::InternalContextBase *__cdecl sub_41B7F0(int a1);
// _DWORD __cdecl unknown_libname_88(_DWORD); weak
int __cdecl sub_41B820(int a1);
int __cdecl sub_41B830(int a1);
int __thiscall sub_41B840(int this, _BYTE *a2, char a3, _BYTE *a4);
// int unknown_libname_89(void); weak
_DWORD *__thiscall sub_41B8A0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
int __thiscall sub_41C0F0(void *this, int a2, _DWORD *a3);
int __thiscall sub_41C120(void *this, int a2, _DWORD *a3);
void *__thiscall sub_41C160(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_41C1E0(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_41C670(int this);
int __thiscall sub_41C690(int this);
int __thiscall sub_41C6B0(int this);
// int __thiscall unknown_libname_90(_DWORD); weak
// _DWORD __stdcall unknown_libname_91(_DWORD); weak
_DWORD *__thiscall sub_41C700(void *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_92(_DWORD); weak
_DWORD *__thiscall sub_41C750(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_41C850(void *this, _DWORD *a2);
char *__stdcall sub_41C8E0(int a1, int a2);
void *__stdcall sub_41C930(void *a1, int a2);
int *__thiscall sub_41C970(int *this);
// int __cdecl unknown_libname_94(_DWORD); weak
int __cdecl sub_41CA60(int a1);
int __cdecl sub_41CA70(int a1);
int __thiscall sub_41CA80(void *this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_41CAB0(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_41CBB0(void *this, _DWORD *a2);
int *__thiscall sub_41CC40(void *this, int a2);
int __cdecl sub_41CD70(int a1);
int __cdecl sub_41CDB0(int a1);
int *__thiscall sub_41CDF0(void *this, int a2);
char *__stdcall sub_41CF20(int a1, int a2);
void *__stdcall sub_41CF70(void *a1, int a2);
void __stdcall sub_41CF90(int a1);
int *__thiscall sub_41CFD0(int *this);
// int __cdecl unknown_libname_96(_DWORD); weak
int __thiscall sub_41D0C0(int this, _DWORD *a2, _DWORD *a3);
char *__stdcall sub_41D0F0(size_t a1);
int __thiscall sub_41D110(int this);
_DWORD *__thiscall sub_41D130(int *this);
char *__stdcall sub_41D1D0(size_t a1);
int __thiscall sub_41D1F0(int this);
int __thiscall sub_41D210(void *this, _DWORD *a2);
_DWORD *__thiscall sub_41D2A0(int *this);
int __cdecl sub_41D340(int *a1, int *a2);
int __cdecl sub_41D370(char a1, char a2, _DWORD *a3);
void sub_41D3A0();
int __cdecl sub_41D3B0(int *a1, int *a2);
void *__cdecl sub_41D3E0(void *a1, int a2);
void *__cdecl sub_41D420(void *a1, int a2);
void sub_41D460();
_BYTE *__cdecl sub_41D470(_BYTE *a1);
int __cdecl sub_41D490(char a1, char a2, _DWORD *a3);
DNameNode *__thiscall sub_41D4D0(DNameNode *this, int a2);
void *__thiscall sub_41D583(int this);
LONG __thiscall sub_41D61F(int this);
LONG __thiscall sub_41D687(ULONG_PTR this, HANDLE ExistingCompletionPort);
int __thiscall sub_41D722(void *this);
LONG __thiscall sub_41D738(void *this, int a2, int a3, char *a4);
int __thiscall sub_41D7A9(int this, int a2);
void __thiscall sub_41D80B(int this, int a2);
int __thiscall sub_41D995(int this, size_t a2);
void __thiscall sub_41DB1A(int this, int a2);
int sub_41DD84();
int sub_41DDA1();
void __cdecl sub_41DDB3(); // idb
void sub_41DDF7();
int sub_41DDFC();
void __cdecl sub_41DE0E(); // idb
DNameNode *sub_41DE1D();
void __thiscall sub_41DEDF(_DWORD *this);
void sub_41DF2E();
void __thiscall sub_41DFBC(int this, int a2, int a3, int a4);
int sub_41E052();
void *__thiscall sub_41E070(void *this, char a2);
int __thiscall sub_41E0A0(int this);
// void __thiscall unknown_libname_98(void *); idb
void sub_41E0F0();
DNameNode *__thiscall sub_41E100(DNameNode *this);
void *__thiscall sub_41E120(void *this, char a2);
// int unknown_libname_99(void); weak
void __thiscall sub_41E170(int this);
_DWORD *sub_41E1AF();
int sub_41E1BE();
void __cdecl sub_41E1D0(); // idb
void *__thiscall sub_41E1DF(void *this);
_DWORD *__thiscall sub_41E233(int this);
int __thiscall sub_41E296(void *this);
unsigned int __stdcall sub_41E2F2(int a1);
char __thiscall sub_41E346(char *this, int a2);
char __thiscall sub_41E461(char *this, int a2);
void *sub_41E56E();
int sub_41E57D();
void __cdecl sub_41E58F(); // idb
void *sub_41E5AD();
int sub_41E5BC();
void __cdecl sub_41E5CE(); // idb
signed int __thiscall sub_41E5DD(_DWORD *this, char *a2);
int __thiscall sub_41ECDF(void *this, unsigned int a2);
int sub_41EDA3();
int sub_41EDB5();
void *__thiscall sub_41EDD0(void *this, char a2);
void *__thiscall sub_41EE00(void *this);
// void __thiscall unknown_libname_101(void *); idb
int __thiscall sub_41EE60(int this);
// int __thiscall std::istrstream::`vbase destructor(_DWORD); weak
int __fastcall sub_41EEE0(int a1, int a2, _BYTE *a3, int a4);
void *__thiscall sub_41EF20(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_41EF40(void *this, int a2);
int __thiscall sub_41EF60(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_41EFA0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_41EFC0(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_41EFE0(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_41F090(int this, _DWORD *a2, _DWORD *a3);
// int __thiscall unknown_libname_103(_DWORD); weak
// int __thiscall unknown_libname_104(_DWORD); weak
BOOL __thiscall sub_41F100(void *this, _DWORD *a2);
int __thiscall sub_41F130(int this, _BYTE *a2);
int __thiscall sub_41F170(int this);
// int __thiscall unknown_libname_105(_DWORD); weak
// int __thiscall unknown_libname_106(_DWORD); weak
int __thiscall sub_41F210(void *this, int a2, int a3);
int __thiscall sub_41F260(void *this, int a2);
int __thiscall sub_41F2C0(_DWORD *this);
int __thiscall sub_41F2F0(int this, char *a2, int a3, int a4);
int __thiscall sub_41F440(int this);
int __thiscall sub_41F8C0(void *this);
void *__thiscall sub_41FCF0(void *this, char a2);
void *__thiscall sub_41FD20(void *this, char a2);
int sub_41FD50();
// int __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::append(size_t, int); idb
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::erase(_DWORD, _DWORD); weak
int __thiscall sub_41FEC0(_DWORD *this);
int __thiscall sub_41FEE0(_DWORD *this);
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD); weak
int __stdcall sub_41FFD0(char a1);
int __fastcall sub_4200F0(int a1, int a2, _BYTE *a3, int a4, char a5);
// int __thiscall unknown_libname_110(_DWORD); weak
char *__fastcall sub_420310(char *a1, int a2, int a3, char a4);
char __thiscall sub_420340(void *this);
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sgetc(_DWORD); weak
int __thiscall sub_4203B0(void *this);
char __fastcall sub_420410(int a1, int a2, char a3);
char *__thiscall sub_420620(char *this);
// _DWORD __stdcall std::ctype<char>::is(__int16, _DWORD); weak
// int __thiscall sub_4206C0(_DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sbumpc(_DWORD); weak
// int __thiscall std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::eback(_DWORD); weak
// _DWORD __stdcall std::ctype<char>::do_widen(char); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Gndec(_DWORD); weak
void *__thiscall sub_4207F0(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_420820(void *this, int a2);
int __thiscall sub_420850(int this, int a2);
int __thiscall sub_420870(void *this, int a2, struct Concurrency::IExecutionContext *a3);
BOOL __thiscall sub_420A40(void *this);
// bool __thiscall std::ios_base::fail(std::ios_base *__hidden this); idb
_DWORD *__thiscall sub_420A80(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_111(_DWORD); weak
// int __stdcall std::ios_base::getloc(_DWORD); weak
// _DWORD __thiscall std::locale::locale(std::locale *this, const struct std::locale *); idb
_DWORD *__thiscall sub_421360(void *this, _DWORD *a2, int a3, char a4);
_DWORD *__thiscall sub_421460(void *this, _DWORD *a2, _DWORD *a3);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_421530(int *this);
BOOL __thiscall sub_421550(void *this, _DWORD *a2);
unsigned int __thiscall sub_421570(int this, int a2, unsigned int a3, int a4);
int __thiscall sub_421790(_DWORD *this, int a2, int a3);
int __stdcall sub_4217E0(int a1, int a2);
// _DWORD __stdcall unknown_libname_113(_DWORD, _DWORD); weak
int __thiscall sub_421830(int this, _DWORD *a2, _BYTE *a3);
void *__thiscall sub_421860(void *this, int a2);
void *__thiscall sub_4218D0(int this, char *a2, int a3);
// int __thiscall std::basic_filebuf<char,std::char_traits<char>>::close(_DWORD); weak
_BYTE *__thiscall sub_421A20(int this);
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Grow(_DWORD, _DWORD); weak
// _DWORD __cdecl std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Psum(_DWORD, _DWORD); weak
// _DWORD __stdcall sub_421C10(_DWORD); weak
_BYTE *__thiscall sub_421C30(int this);
// int __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(char *); idb
// int __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(void *, size_t); idb
// int __thiscall unknown_libname_116(_DWORD); weak
int __thiscall sub_421D60(void *this);
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
int __cdecl sub_421DE0(int a1);
struct Concurrency::details::InternalContextBase *__cdecl sub_421DF0(int a1);
// _DWORD __cdecl unknown_libname_118(_DWORD); weak
int __cdecl sub_421E50(int a1);
int __cdecl sub_421E60(int a1);
int __cdecl sub_421E70(int a1);
int __thiscall sub_421E80(int this, _BYTE *a2, char a3, _BYTE *a4);
// int unknown_libname_121(void); weak
int __thiscall sub_421F30(void *this, int a2, _DWORD *a3);
void *__thiscall sub_421F60(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_421FE0(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_422470(int this);
int *__thiscall sub_422490(void *this, int a2);
int __cdecl sub_4225C0(int a1);
int __cdecl sub_422600(int a1);
int __thiscall sub_422640(int this);
int __thiscall sub_422660(int this);
int *__thiscall sub_422680(void *this, int a2);
void __stdcall sub_4227B0(int a1);
// int __thiscall unknown_libname_122(_DWORD); weak
// _DWORD __stdcall unknown_libname_123(_DWORD); weak
_DWORD *__thiscall sub_422800(void *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_124(_DWORD); weak
int __thiscall sub_422850(int this);
void *__stdcall sub_422890(int a1, int a2, void *a3);
int __stdcall sub_4228D0(void *, int, int); // idb
void *__stdcall sub_422910(int a1, int a2);
void __stdcall sub_422930(int a1);
// _DWORD __stdcall std::basic_filebuf<char,std::char_traits<char>>::_Init(_DWORD, _DWORD); weak
void *__thiscall sub_422A30(void *this);
// _DWORD __stdcall std::locale::operator=(_DWORD); weak
// int __thiscall sub_422BD0(_DWORD); weak
void *__thiscall sub_422BF0(void *this, _BYTE *a2);
std::locale *__thiscall sub_422DA0(int this, std::locale *a2);
_DWORD *__thiscall sub_422E30(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_422F30(void *this, _DWORD *a2);
char *__stdcall sub_422FC0(int a1, int a2);
void *__stdcall sub_423010(void *a1, int a2);
int *__thiscall sub_423050(int *this);
// int __cdecl unknown_libname_127(_DWORD); weak
void *__stdcall sub_423140(void *a1, int a2);
char *__stdcall sub_423160(int a1, int a2);
char *__stdcall sub_423180(size_t a1);
int __thiscall sub_4231A0(int this);
_DWORD *__thiscall sub_4231C0(int *this);
// int __cdecl std::use_facet(std::locale *, int, int); idb
_DWORD *__thiscall sub_423380(_DWORD *this, char a2);
void __thiscall sub_4233B0(void *this);
void __thiscall __noreturn sub_4233D0(void *this);
void *__thiscall sub_423400(void *this, char a2);
// _DWORD __stdcall unknown_libname_128(_DWORD); weak
// int __thiscall std::locale::id::operator unsigned int(_DWORD); weak
void *__thiscall sub_423600(void *this, char a2);
void *__thiscall sub_423630(void *this);
void *__thiscall sub_423650(void *this, char a2);
// int __thiscall unknown_libname_130(_DWORD); weak
void __cdecl sub_423790(); // idb
void *__thiscall sub_423890(void *this, char a2);
int __thiscall sub_4238C0(int this);
int __cdecl sub_423900(int a1, int a2, unsigned int *a3);
int __cdecl sub_423930(int a1, int a2, int a3);
int __cdecl sub_4239F0(int *a1, int *a2);
int __cdecl sub_423A20(int a1, int a2, int a3);
int __cdecl sub_423A50(int a1, int a2, int a3);
void sub_423A90();
void *__cdecl sub_423AA0(int a1);
void sub_423AD0();
const struct std::locale::facet *__cdecl sub_423AE0(std::locale *a1, int a2, int a3);
std::locale *__cdecl sub_423C00(std::locale *a1, char a2, int a3);
void *__cdecl sub_423C90(void *a1, int a2);
void *__cdecl sub_423CD0(void *a1, int a2);
// char *__cdecl std::_Allocate(int, char *); idb
_DWORD *__thiscall sub_423D30(_DWORD *this, unsigned int a2);
// _DWORD __stdcall unknown_libname_131(unsigned int); weak
void *__thiscall sub_423E20(void *this, char a2);
// int __cdecl unknown_libname_135(_DWORD); weak
void *__thiscall sub_423F00(void *this, char a2);
int __thiscall sub_423F30(void *this);
// struct Concurrency::details::_CancellationTokenState *__cdecl Concurrency::details::_CancellationTokenState::_None(); idb
std::locale::facet *__cdecl sub_423F60(std::locale::facet *a1);
std::locale::facet *__cdecl sub_423FD0(std::locale::facet *a1);
_DWORD *__thiscall sub_424040(_DWORD *this, int a2);
int __stdcall sub_424070(int a1);
void __cdecl sub_4240A0(); // idb
void __cdecl sub_424130(); // idb
int sub_4241C0();
int __cdecl sub_4241D0(int a1, int a2, unsigned int *a3);
BOOL __cdecl sub_424270(unsigned int a1, int a2);
int sub_424290();
void __cdecl sub_4242C0(); // idb
_DWORD *__cdecl sub_4242D0(int a1, int a2, _DWORD *a3);
int __cdecl sub_424300(int *a1, int a2);
_BYTE *__cdecl sub_424330(_BYTE *a1);
_DWORD *__cdecl sub_424350(int a1, int a2, _DWORD *a3);
// _DWORD __cdecl unknown_libname_137(_DWORD, _DWORD); weak
struct _RTL_CRITICAL_SECTION *sub_42439F();
int sub_4243AE();
void __cdecl sub_4243C0(); // idb
int sub_4243DE();
int sub_4243ED();
void __cdecl sub_4243FF(); // idb
void __stdcall sub_42440E(PVOID, BOOLEAN); // idb
int sub_424536();
int sub_424553();
void __cdecl sub_424565(); // idb
void sub_4245A9();
int sub_4245AE();
void __cdecl sub_4245C0(); // idb
DNameNode *sub_4245CF();
void sub_424691();
void __thiscall sub_42471F(_DWORD *this);
void __cdecl sub_42476E(int a1, int a2);
int __thiscall sub_42485B(int this);
int __thiscall sub_4248ED(int this);
char __thiscall sub_424962(void *this, char a2, _DWORD *a3);
char __thiscall sub_424A7D(void *this, char a2, char a3);
int __thiscall sub_424B6D(void *this, char a2);
int __thiscall sub_424C58(void *this, char a2);
char __thiscall sub_424D56(void *this);
int __thiscall sub_424E66(void *this, char a2, int a3);
char __thiscall sub_424F76(void *this, int a2, char a3);
char __stdcall sub_4250BF(int a1, int a2, int a3);
char __thiscall sub_4251D0(void *this, char a2, int a3, char a4, int a5, int a6);
char __thiscall sub_4253A2(void *this, int rgbValue, int a3, char a4);
char sub_425485();
char __cdecl sub_4254A0(int a1, char a2);
char __cdecl sub_4255CA(int a1, char a2);
char __cdecl sub_4257A1(int a1, char a2);
char __cdecl sub_425880(int a1, char a2);
char __cdecl sub_42593E(int a1, char a2);
char __cdecl sub_4259DF(int a1, char a2);
char __cdecl sub_425ADF(int a1, char a2);
char __cdecl sub_425CC7(int a1, char a2);
char __cdecl sub_425D86(int a1, char a2);
char __cdecl sub_425DBA(int a1, char a2);
char __cdecl sub_425E53(int a1, char a2);
int __cdecl sub_425E8B(int a1);
int __thiscall sub_425EF9(DNameNode *this, int a2);
void *__fastcall sub_425FC4(int a1);
BOOL __thiscall sub_426021(int this);
char *__thiscall sub_4260AA(int this);
char __thiscall sub_4260C2(void *this);
LONG __thiscall sub_426100(int this);
char __cdecl sub_4262FA(int a1, int a2, char a3);
char __thiscall sub_42651E(void *this, char a2, int a3, int a4, int a5, int a6, char a7, int a8);
char __thiscall sub_42666C(void *this, char a2, int a3, int a4, char a5);
char __thiscall sub_4267A2(void *this, char a2, int a3, int a4, char a5);
int sub_4268E7();
int __thiscall sub_426900(int this);
// void __thiscall unknown_libname_139(void *); idb
void sub_426950();
DNameNode *__thiscall sub_426960(DNameNode *this);
void *__thiscall sub_426980(void *this, char a2);
// int unknown_libname_140(void); weak
void *__thiscall sub_4269D0(void *this, char a2);
// int __thiscall unknown_libname_141(_DWORD); weak
// int __thiscall unknown_libname_142(_DWORD); weak
void *__thiscall sub_426A80(void *this, char a2);
void *__thiscall sub_426AB0(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_426AD0(void *this, int a2);
int __thiscall sub_426AF0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_426B30(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_426B50(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_426B70(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_426C20(int this, _DWORD *a2, _DWORD *a3);
// int __thiscall unknown_libname_145(_DWORD); weak
BOOL __thiscall sub_426C70(void *this, _DWORD *a2);
void *__thiscall sub_426CA0(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_426CC0(void *this, int a2);
int __thiscall sub_426CE0(void *this, int a2);
int __thiscall sub_426D00(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_426D40(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_426D60(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_426D80(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_426E30(int this, _DWORD *a2, _DWORD *a3);
// int __thiscall unknown_libname_146(_DWORD); weak
// int __thiscall unknown_libname_147(_DWORD); weak
BOOL __thiscall sub_426EA0(void *this, _DWORD *a2);
void *__thiscall sub_426ED0(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_426F00(void *this, int a2);
int __thiscall sub_426F30(int this, int a2);
int __thiscall sub_426F50(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_427120(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_427970(void *this, _DWORD *a2, int a3, char a4);
_DWORD *__thiscall sub_427A70(void *this, _DWORD *a2, _DWORD *a3);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_427B30(int *this);
BOOL __thiscall sub_427B50(void *this, _DWORD *a2);
void *__thiscall sub_427B70(void *this, _BYTE *a2, _BYTE *a3);
int __thiscall sub_427BA0(void *this, int a2);
int __thiscall sub_427BD0(int this, int a2);
int __thiscall sub_427BF0(void *this, int a2, struct Concurrency::IExecutionContext *a3);
_DWORD *__thiscall sub_427DC0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3);
int __thiscall sub_428610(int this, int a2);
int __thiscall sub_428630(int this, int a2);
_DWORD *__thiscall sub_428650(void *this, _DWORD *a2, int a3, char a4);
_DWORD *__thiscall sub_428750(void *this, _DWORD *a2, _DWORD *a3);
// void __thiscall Concurrency::details::_NonReentrantPPLLock::_Acquire(Concurrency::details::_NonReentrantPPLLock *this, void *); idb
int __thiscall sub_428820(int *this);
BOOL __thiscall sub_428840(void *this, _DWORD *a2);
int __thiscall sub_428860(int this, _DWORD *a2, _BYTE *a3);
int __thiscall sub_428890(int this, _DWORD *a2, _BYTE *a3);
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
int __cdecl sub_4288D0(int a1);
struct Concurrency::details::InternalContextBase *__cdecl sub_4288E0(int a1);
// _DWORD __cdecl unknown_libname_149(_DWORD); weak
int __cdecl sub_428910(int a1);
int __cdecl sub_428920(int a1);
int __cdecl sub_428930(int a1);
int __thiscall sub_428940(int this, _BYTE *a2, char a3, _BYTE *a4);
// int unknown_libname_150(void); weak
int __thiscall sub_4289A0(void *this, int a2, _DWORD *a3);
void *__thiscall sub_4289D0(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_428A50(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_428EE0(int this);
int *__thiscall sub_428F00(void *this, int a2);
int __cdecl sub_429030(int a1);
int __cdecl sub_429070(int a1);
int __thiscall sub_4290B0(int this);
int __thiscall sub_4290D0(int this);
int *__thiscall sub_4290F0(void *this, int a2);
void __stdcall sub_429220(int a1);
// int __thiscall unknown_libname_151(_DWORD); weak
// _DWORD __stdcall unknown_libname_152(_DWORD); weak
_DWORD *__thiscall sub_429270(void *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_153(_DWORD); weak
// struct Concurrency::details::InternalContextBase *__thiscall Concurrency::details::VirtualProcessor::ToInternalContext(Concurrency::details::VirtualProcessor *this, struct Concurrency::IExecutionContext *); idb
int __cdecl sub_4292F0(int a1);
struct Concurrency::details::InternalContextBase *__cdecl sub_429300(int a1);
// _DWORD __cdecl unknown_libname_155(_DWORD); weak
int __cdecl sub_429330(int a1);
int __cdecl sub_429340(int a1);
int __cdecl sub_429350(int a1);
int __thiscall sub_429360(int this, _BYTE *a2, char a3, _BYTE *a4);
// int unknown_libname_156(void); weak
int __thiscall sub_4293C0(void *this, int a2, _DWORD *a3);
void *__thiscall sub_4293F0(Concurrency::details::_NonReentrantPPLLock *this, void *a2);
int __thiscall sub_429470(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5);
int __thiscall sub_429900(int this);
int *__thiscall sub_429920(void *this, int a2);
int __cdecl sub_429A50(int a1);
int __cdecl sub_429A90(int a1);
int __thiscall sub_429AD0(int this);
int __thiscall sub_429AF0(int this);
int *__thiscall sub_429B10(void *this, int a2);
void __stdcall sub_429C40(int a1);
// int __thiscall unknown_libname_157(_DWORD); weak
// _DWORD __stdcall unknown_libname_158(_DWORD); weak
_DWORD *__thiscall sub_429C90(void *this, _DWORD *a2, int a3);
// int __thiscall unknown_libname_159(_DWORD); weak
_DWORD *__thiscall sub_429CE0(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_429DE0(void *this, _DWORD *a2);
char *__stdcall sub_429E70(int a1, int a2);
void *__stdcall sub_429EC0(void *a1, int a2);
int *__thiscall sub_429F00(int *this);
// int __cdecl unknown_libname_161(_DWORD); weak
_DWORD *__thiscall sub_429FF0(Concurrency::details::_NonReentrantPPLLock *this);
int __thiscall sub_42A0F0(void *this, _DWORD *a2);
char *__stdcall sub_42A180(int a1, int a2);
void *__stdcall sub_42A1D0(void *a1, int a2);
int *__thiscall sub_42A210(int *this);
// int __cdecl unknown_libname_163(_DWORD); weak
int __thiscall sub_42A300(int this);
_DWORD *__thiscall sub_42A320(int *this);
char *__stdcall sub_42A3C0(size_t a1);
int __thiscall sub_42A3E0(int this);
_DWORD *__thiscall sub_42A400(int *this);
int __cdecl sub_42A4A0(int *a1, int *a2);
int __cdecl sub_42A4D0(int *a1, int *a2);
void sub_42A500();
void sub_42A510();
void *__cdecl sub_42A520(void *a1, int a2);
void *__cdecl sub_42A560(void *a1, int a2);
int sub_42A5AF();
int sub_42A5BE();
void __cdecl sub_42A5D0(); // idb
void __thiscall sub_42A5FC(int this);
int __thiscall sub_42A7A4(void *this);
int __thiscall sub_42A8C8(void *this, struct Concurrency::details::_Micro_queue *a2, unsigned int a3, int a4);
signed int __thiscall sub_42A96A(void *this, char a2, char a3);
int __thiscall sub_42A9F7(int this);
void __thiscall sub_42AB4A(int this);
BOOL __thiscall sub_42ABD0(int this);
LONG __thiscall sub_42ABFF(void *this);
int sub_42AC37();
// int __thiscall unknown_libname_164(_DWORD); weak
// int __thiscall unknown_libname_165(_DWORD); weak
// int __thiscall unknown_libname_166(_DWORD); weak
int __thiscall sub_42ACF0(int this);
// _DWORD __stdcall unknown_libname_169(_DWORD); weak
int __thiscall sub_42AD70(int this);
// int __thiscall unknown_libname_170(_DWORD); weak
int __thiscall sub_42ADF0(int this);
int __thiscall sub_42AE30(void *this, _DWORD *a2);
// _DWORD __stdcall unknown_libname_171(_DWORD); weak
int __thiscall sub_42AE80(int this);
// int __cdecl unknown_libname_172();
// int __thiscall unknown_libname_173(_DWORD); weak
int __thiscall sub_42AF20(int this);
int __stdcall sub_42AF60(int a2);
int __thiscall sub_42AF80(void *this, _DWORD *a2);
int __thiscall sub_42AFB0(void *this, int a2);
_BYTE *__thiscall sub_42B010(_BYTE *this, _BYTE *a2, int a3);
// int __thiscall unknown_libname_174(_DWORD); weak
// int __thiscall unknown_libname_175(_DWORD); weak
int __thiscall sub_42B070(_BYTE *this, int a2);
int __thiscall sub_42B0B0(int this);
// int __thiscall unknown_libname_176(_DWORD); weak
// int __thiscall unknown_libname_177(_DWORD); weak
BOOL __thiscall sub_42B130(void *this);
int __thiscall sub_42B170(void *this, int a2);
int __thiscall sub_42B1A0(void *this);
int __stdcall sub_42B1C0(int a1, int a2);
// _DWORD __stdcall unknown_libname_179(LPVOID lpMem, _DWORD); weak
int __thiscall sub_42B210(int this, _BYTE *a2);
// int unknown_libname_180(void); weak
int __thiscall sub_42B270(void *this, _DWORD *a2, _DWORD *a3);
int __stdcall sub_42B2C0(int a1, int a2);
// _DWORD __stdcall unknown_libname_181(LPVOID lpMem, _DWORD); weak
int __thiscall sub_42B310(int this, _BYTE *a2);
int __thiscall sub_42B350(void *this, _DWORD *a2, _DWORD *a3);
int __stdcall sub_42B3A0(int a1, int a2);
// _DWORD __stdcall unknown_libname_182(LPVOID lpMem, _DWORD); weak
_BYTE *__thiscall sub_42B3F0(_BYTE *this, _BYTE *a2, int a3);
// _DWORD __stdcall unknown_libname_183(_DWORD); weak
int __thiscall sub_42B440(int this);
int __thiscall sub_42B480(void *this, int a2, int a3);
int __thiscall sub_42B4D0(void *this, int a2);
void __stdcall sub_42B530(int a1);
unsigned int __thiscall sub_42B550(int this, _DWORD *a2, unsigned int a3, _DWORD *a4);
void __stdcall sub_42B770(int a1);
unsigned int __thiscall sub_42B790(int this, _DWORD *a2, unsigned int a3, _DWORD *a4);
void __stdcall sub_42B9B0(int a1);
int __thiscall sub_42B9D0(int this, _BYTE *a2);
unsigned int __thiscall sub_42BA10(int this, int a2, unsigned int a3, int a4);
void *__stdcall sub_42BC30(int a1, int a2, void *a3);
int __stdcall sub_42BC70(void *, int, int); // idb
void *__stdcall sub_42BCB0(int a1, int a2);
void *__stdcall sub_42BCD0(int a1, int a2, void *a3);
int __stdcall sub_42BD10(void *, int, int); // idb
void *__stdcall sub_42BD50(int a1, int a2);
void *__stdcall sub_42BD70(int a1, int a2, void *a3);
int __stdcall sub_42BDB0(void *, int, int); // idb
void *__stdcall sub_42BDF0(int a1, int a2);
_DWORD *__stdcall sub_42BE10(void *a1, int a2);
_DWORD *__stdcall sub_42BE30(void *a1, int a2);
void *__stdcall sub_42BE50(void *a1, int a2);
_DWORD *__cdecl sub_42BE70(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __cdecl sub_42BEA0(int a1, int a2);
int __cdecl sub_42BEE0(int a1, int a2);
int __cdecl sub_42BF10(int a1, int a2, int a3);
void sub_42BF50();
int __cdecl sub_42BF60(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl sub_42BF90(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void sub_42BFC0();
int __cdecl sub_42BFD0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl sub_42C000(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void sub_42C030();
int __cdecl sub_42C040(int a1, int a2, int a3);
int __cdecl sub_42C070(int a1, int a2, int a3);
void *__cdecl sub_42C0B0(int a1);
void *__cdecl sub_42C0E0(int a1);
void *__cdecl sub_42C110(int a1);
_DWORD *__cdecl sub_42C140(void *a1, int a2);
_DWORD *__cdecl sub_42C180(void *a1, int a2);
void *__cdecl sub_42C1C0(void *a1, int a2);
int sub_42C200();
int sub_42C210();
int __cdecl sub_42C220(int a1, int a2);
int __cdecl sub_42C270(int a1, int a2);
int __cdecl sub_42C2C0(int a1, int a2, int a3, int a4, int a5);
int __cdecl sub_42C350(int a1, int a2, int a3, int a4, int a5);
bool __stdcall sub_42C390(void *a1, _DWORD *a2);
int __cdecl sub_42C3B0(int a1, int a2, int a3, int a4, int a5);
// _DWORD __thiscall Concurrency::details::_Micro_queue::_Push_finalizer::_Push_finalizer(Concurrency::details::_Micro_queue::_Push_finalizer *this, struct Concurrency::details::_Micro_queue *, unsigned int); idb
bool __thiscall sub_42C4B0(void *this, _DWORD *a2);
DNameNode *__thiscall sub_42C4D0(DNameNode *this);
void __stdcall sub_42C510(int a1, int a2, int a3);
void *__thiscall sub_42C520(void *this, char a2);
void *__thiscall sub_42C550(void *this);
LRESULT __stdcall sub_42C570(HWND hWndParent, UINT Msg, WPARAM wParam, LPARAM lParam);
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd);
BOOL __stdcall sub_42D361(HWND, UINT, WPARAM, LPARAM); // idb
int sub_42D3C0();
int __thiscall sub_42D3E0(int this, int a2);
int __thiscall sub_42D400(int this, int a2);
LPCRITICAL_SECTION __thiscall sub_42D420(struct _RTL_CRITICAL_SECTION *this, int a2, DWORD dwSpinCount);
void __thiscall sub_42D46B(struct _RTL_CRITICAL_SECTION *this);
void __thiscall sub_42D4B5(int this);
void __thiscall sub_42D4F0(int this);
LONG __thiscall sub_42D51F(LONG this);
struct _RTL_CRITICAL_SECTION *__thiscall sub_42D5C4(struct _RTL_CRITICAL_SECTION *this);
void __thiscall sub_42D5FA(struct _RTL_CRITICAL_SECTION *this);
void __fastcall sub_42D61C(int a1);
void __thiscall sub_42D67A(struct _RTL_CRITICAL_SECTION *this);
DWORD __thiscall sub_42D6C6(int this);
int __thiscall sub_42D6FF(int this);
int sub_42D748();
int sub_42D76F();
int sub_42D788();
void __cdecl sub_42D79A(); // idb
int sub_42D7B8();
int sub_42D7CC();
void __cdecl sub_42D7DE(); // idb
int sub_42D7FC();
int sub_42D810();
void __cdecl sub_42D822(); // idb
int sub_42D840();
int sub_42D854();
void __cdecl sub_42D866(); // idb
_DWORD *sub_42D884();
int sub_42D898();
void __cdecl sub_42D8AA(); // idb
void __thiscall sub_42D8D0(int this);
int __thiscall sub_42D920(int this, int a2, char *a3);
// void __thiscall Concurrency::details::SchedulingRing::SetOwningNode(Concurrency::details::SchedulingRing *this, struct Concurrency::details::SchedulingNode *); idb
BOOL __thiscall sub_42D9D3(int this);
BOOL __thiscall sub_42DB8D(int this, int a2, BOOL a3);
BOOL __thiscall sub_42DBC9(int this, char a2);
int sub_42DBFC(int arg0, int arg4, char *arg8, ...);
struct tm *__thiscall sub_42DE5D(void *this, char *a2);
int __thiscall sub_42DF47(int this, char *a2);
void __thiscall sub_42DF8F(int this);
struct tm *__thiscall sub_42DFC6(void *this, char *a2);
int sub_42E0DD(int arg0, int _528, char *arg8, ...);
_DWORD *__thiscall sub_42E261(_DWORD *this, char *a2);
void __thiscall sub_42E2C4(void *this);
int sub_42E2E0(int arg0, int _52C, char *arg8, ...);
int __thiscall sub_42E49E(void *this, char *a2);
int sub_42E649();
void *__thiscall sub_42E660(void *this, char a2);
struct _RTL_CRITICAL_SECTION *sub_42E69F();
int sub_42E6AE();
void __cdecl sub_42E6C0(); // idb
void __stdcall sub_42E6CF(PVOID, BOOLEAN); // idb
int sub_42E7E3();
int sub_42E800();
void __cdecl sub_42E812(); // idb
void sub_42E856();
int sub_42E85B();
void __cdecl sub_42E86D(); // idb
DNameNode *sub_42E87C();
void sub_42E93E();
void __thiscall sub_42E9CC(_DWORD *this);
void __cdecl sub_42EA1B(int a1, int a2);
char sub_42EB08();
void *__thiscall sub_42EB23(void *this);
int __thiscall sub_42EB84(DNameNode *this, int a2);
int __cdecl sub_42EC33(int a1);
LONG __thiscall sub_42ECA1(int this);
int __thiscall sub_42EEE1(void *this);
LONG __cdecl sub_42EFA9(int a1, int a2, char a3);
LONG __cdecl sub_42F131(int a1, int a2, char a3);
char *__thiscall sub_42F2AE(int this);
BOOL __thiscall sub_42F2D1(int this);
int sub_42F3C3();
int __thiscall sub_42F3E0(int this);
// void __thiscall unknown_libname_186(void *); idb
void sub_42F430();
DNameNode *__thiscall sub_42F440(DNameNode *this);
void *__thiscall sub_42F460(void *this, char a2);
// int unknown_libname_187(void); weak
void *__thiscall sub_42F4B0(void *this, char a2);
void __thiscall sub_42F529(int this, char *a2, int a3);
int __cdecl sub_42F6C5(int a1, int a2);
int __cdecl sub_43056E(int a1, int a2, unsigned int a3);
int __cdecl sub_43060E(int a1, int a2, unsigned int a3);
// void __cdecl und_memcpy(char *, const char *, unsigned int); idb
int __cdecl sub_4306BB(int a1, char a2, unsigned int a3);
void *sub_4306FF();
int sub_43070E();
void __cdecl sub_430720(); // idb
void *__thiscall sub_43072F(void *this);
void *__thiscall sub_4307C9(void *this);
int __thiscall sub_430828(int this);
void __thiscall sub_430855(void *this);
signed int __thiscall sub_430875(HANDLE *this);
BOOL __thiscall sub_4308CF(int this);
signed int __thiscall sub_43097B(int this, int a2);
_DWORD *__cdecl sub_4309E6(int a1);
LPVOID __thiscall sub_430A34(int this, SIZE_T dwBytes);
int __thiscall sub_430AAB(int this, int a2);
int __thiscall sub_430FEE(int this);
signed int __stdcall sub_431104(int a1);
void __cdecl sub_4312F7(int a1);
void __thiscall sub_43134E(HANDLE *this, LPVOID lpMem);
unsigned int __thiscall sub_4313A6(int this, int a2);
int __thiscall sub_431401(int this, unsigned int a2, int a3);
int sub_4319FB();
void *__thiscall sub_431A10(void *this, char a2);
void *__thiscall sub_431A40(void *this, char a2);
void __thiscall sub_431A70(int this);
void __thiscall sub_431A90(int this);
int sub_431ABF();
int sub_431ADC();
void __cdecl sub_431AEE(); // idb
void sub_431B32();
int sub_431B37();
void __cdecl sub_431B49(); // idb
DNameNode *sub_431B58();
void __thiscall sub_431C1A(_DWORD *this);
void sub_431C69();
void __thiscall sub_431CF7(int this, int a2, int a3, int a4);
int sub_431D79();
int __thiscall sub_431D90(int this);
// void __thiscall unknown_libname_188(void *); idb
void sub_431DE0();
DNameNode *__thiscall sub_431DF0(DNameNode *this);
void *__thiscall sub_431E10(void *this, char a2);
// int unknown_libname_189(void); weak
signed int __cdecl sub_431E60(int a1, _BYTE *a2, char a3);
int sub_43231B();
bool __cdecl sub_432330(char a1);
bool __cdecl sub_432360(char a1);
bool __cdecl sub_4323A0(char a1);
int __fastcall sub_4323E0(int a1, int a2, char a3);
int __thiscall sub_4324F0(void *this, char a2);
bool __cdecl sub_432580(_BYTE *a1, _BYTE *a2);
// int __usercall sub_4325A0@<eax>(int a1@<edx>, int a2, _BYTE *a3);
// int __usercall sub_4325C0@<eax>(int a1@<edx>, int a2, _BYTE *a3);
int __thiscall sub_4326E0(void *this);
BOOL __thiscall sub_432700(void *this);
int sub_43272F();
int sub_43273E();
void __cdecl sub_432750(); // idb
int __thiscall sub_43275F(int this);
void *__thiscall sub_4327B5(void *this);
int __thiscall sub_4327C9(int this, int a2);
BOOL __thiscall sub_432819(int this);
BOOL __thiscall sub_43297A(int this, int a2, int a3);
int sub_4329B9();
void *__thiscall sub_4329D0(void *this, char a2);
int sub_432A0F();
int sub_432A1E();
void __cdecl sub_432A30(); // idb
// _DWORD __thiscall Replicator::Replicator(Replicator *__hidden this); idb
// int __thiscall unknown_libname_191(_DWORD); weak
SOCKET __thiscall sub_432A61(volatile LONG *this);
signed int __thiscall sub_432AB3(_WORD *this);
int __thiscall sub_432C19(void *this);
int __thiscall sub_432D8F(void *this, char *a2, char *a3, char *a4);
int __thiscall sub_432FC9(SOCKET *this);
int __thiscall sub_433100(SOCKET *this);
int __thiscall sub_43322F(void *this);
int __thiscall sub_4333B7(SOCKET *this, int a2, int a3);
int __thiscall sub_433661(SOCKET *this);
int sub_43372D();
int sub_43374F();
int sub_43375E();
void __cdecl sub_433770(); // idb
PVOID sub_43378E();
int sub_43379D();
void __cdecl sub_4337AF(); // idb
int __thiscall sub_4337BE(int this);
void __thiscall sub_43387B(void *this);
void __thiscall sub_433921(int this);
void *__thiscall sub_434524(void *this, void *a2, int a3);
int __thiscall sub_4345A7(void *this, char a2, int a3);
int __thiscall sub_434659(void *this, int a2, char a3, char a4);
void __thiscall sub_4346C7(void *this);
void __thiscall sub_434848(void *this);
void __thiscall sub_434A4F(void *this);
int __thiscall sub_434CD9(void *this, char a2, char a3);
void __thiscall sub_434D36(void *this);
char __thiscall sub_434D97(void *this, char a2);
// void __stdcall Concurrency::details::Transmogrificator::TransmogrificationHandler(PVOID, BOOLEAN); idb
PVOID __thiscall sub_434E0F(int this);
BOOL __thiscall sub_434ECF(int this);
void __thiscall sub_434EFD(int this, unsigned __int8 a2, __int16 a3, __int16 a4);
void __thiscall sub_434F73(int this);
void __thiscall sub_434FCA(void *this);
signed int __cdecl sub_4350FC(int a1, int a2);
int __cdecl sub_435145(char a1, char a2);
char __cdecl sub_43517B(char a1);
char *__cdecl sub_4351B9(char *a1, char a2);
int __cdecl sub_43522B(int a1, char a2, char a3);
int sub_435274();
void *__thiscall sub_435290(void *this, char a2);
// int __thiscall unknown_libname_192(_DWORD); weak
// _DWORD __stdcall unknown_libname_193(_DWORD); weak
int __thiscall sub_435300(int this);
// int __cdecl unknown_libname_194(_DWORD); weak
// int __thiscall unknown_libname_195(_DWORD); weak
int __thiscall sub_4353B0(int this);
BOOL __thiscall sub_4353F0(void *this);
int __thiscall sub_435410(void *this, unsigned int a2);
int __thiscall sub_435450(void *this, int a2);
int __thiscall sub_435470(void *this, const void *a2);
int __thiscall sub_4354A0(void *this, int a2);
int __thiscall sub_435500(int this, _BYTE *a2);
int __thiscall sub_435540(void *this, char *a2, const void *a3);
int __stdcall sub_435590(int a1, int a2);
void __noreturn sub_4355C0();
void *__thiscall sub_435620(void *this, int a2);
void __thiscall __noreturn sub_4356B0(void *this);
void __thiscall sub_4356E0(void *this);
void *__thiscall sub_435740(void *this, char a2);
// _DWORD __stdcall unknown_libname_196(_DWORD); weak
void *__thiscall sub_4357A0(void *this, _BYTE *a2);
void __thiscall sub_435810(void *this);
void __thiscall __noreturn sub_435830(void *this);
void *__thiscall sub_435860(void *this, char a2);
// _DWORD __stdcall unknown_libname_197(_DWORD); weak
void *__thiscall sub_4358C0(void *this, _BYTE *a2);
void *__thiscall sub_435900(void *this, char *a2, int a3);
void *__thiscall sub_435930(int this);
// _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(_DWORD, _DWORD, _DWORD); weak
void *sub_435AC0();
// _DWORD __stdcall unknown_libname_198(LPVOID lpMem, _DWORD); weak
unsigned int __thiscall sub_435B10(int this, char *a2, unsigned int a3, const void *a4);
void __stdcall sub_435D50(int a1);
void *__stdcall sub_435D70(int a1, int a2, void *a3);
int __stdcall sub_435DB0(void *, int, int); // idb
void *__stdcall sub_435DF0(int a1, int a2);
void *__stdcall sub_435E10(void *a1, int a2);
void *__cdecl sub_435E30(const void *a1, const void *a2, void *a3);
int __cdecl sub_435E70(void *a1, void *a2, const void *a3);
char *__cdecl sub_435EA0(char *a1, char *a2, char *a3);
void sub_435EE0();
void *__cdecl sub_435EF0(int a1);
void *__cdecl sub_435F20(void *a1, int a2);
void *sub_435F7F();
int sub_435F8E();
void __cdecl sub_435FA0(); // idb
int __thiscall sub_435FAF(int this);
void __thiscall sub_435FF8(int this);
int __thiscall sub_436017(int this, int a2, int a3);
char __thiscall sub_436084(int this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23);
char __thiscall sub_43612C(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, int a19, int a20, int a21, int a22, char a23);
char __thiscall sub_4361DF(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, __int16 a19, char a20, int a21, int a22, char a23);
char __thiscall sub_4362E7(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, __int16 a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, __int16 a19, char a20, int a21, int a22, char a23);
char __thiscall sub_436452(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, __int16 a19, char a20, int a21, char a22, char a23);
void __thiscall sub_436576(void *this);
int __thiscall sub_4365A3(_DWORD *this, char a2, char a3);
int __thiscall sub_436624(void *this, char a2, char a3);
int __thiscall sub_436699(void *this, char a2, char a3);
int __thiscall sub_43670E(void *this, char a2, char a3);
int __thiscall sub_436783(_DWORD *this, char a2, char a3);
int __thiscall sub_436804(void *this, char a2, char a3);
int __thiscall sub_436885(void *this, char a2, char a3);
int __thiscall sub_436906(void *this, char a2, char a3);
int __thiscall sub_436987(int this, _DWORD *a2);
char __thiscall sub_4369B6(int this, int a2, int a3, int a4, void *a5);
char __thiscall sub_436A39(int this, char a2);
void *__thiscall sub_436B4F(void *this);
int __thiscall sub_436BC3(void *this);
char __thiscall sub_436CD0(void *this);
// int __thiscall unknown_libname_200(_DWORD); weak
void *__thiscall sub_437261(void *this, void *a2, int a3);
signed int __thiscall sub_4372E1(void *this, int a2, int a3);
int __thiscall sub_43738C(int this, char a2, char a3);
int __thiscall sub_43741A(int this, char a2, char a3);
char __thiscall sub_4374A8(void *this);
char __thiscall sub_437BB6(char *this);
// int __thiscall unknown_libname_201(_DWORD); weak
int __thiscall sub_437F68(int this, char a2, int a3, _DWORD *a4);
int __thiscall sub_437FCA(void *this);
char __thiscall sub_43808B(int this, char a2);
int sub_4380D8();
void *__thiscall sub_4380F0(void *this, char a2);
void *__thiscall sub_438120(void *this, char a2);
int sub_43815F();
int sub_43816E();
void __cdecl sub_438180(); // idb
char __cdecl sub_43818F(int a1, void *a2);
char __cdecl sub_43896C(int a1, char a2);
char __cdecl sub_438A69(int a1, char a2);
bool __cdecl sub_438D5A(int a1, char a2);
char __cdecl sub_438DA3(int a1, char a2);
signed int __cdecl sub_439142(char a1, int a2, char a3);
char __cdecl sub_439225(int a1);
char __cdecl sub_43925D(int a1, char a2);
char __cdecl sub_439436(int a1, int a2);
char __cdecl sub_439627(int a1, char a2);
void __stdcall sub_4396FC(PVOID, BOOLEAN); // idb
int __thiscall sub_439730(DNameNode *this, int a2);
void *__thiscall sub_43989F(void *this);
int __cdecl sub_4398BB(int a1);
char __thiscall sub_439929(int this);
LONG __thiscall sub_439A04(int this);
int __thiscall sub_439C87(void *this);
int __thiscall sub_439D3C(int this, int a2);
DWORD __cdecl sub_439D55(int a1, int a2, char a3);
DWORD __cdecl sub_439E5B(int a1, int a2, char a3);
void __thiscall sub_439F30(int this, void *a2, size_t a3);
LONG __thiscall sub_439FD8(int this);
int sub_43A03A();
void *__thiscall sub_43A050(void *this, char a2);
_DWORD *__thiscall sub_43A080(int this, _DWORD *a2);
// int __thiscall unknown_libname_202(_DWORD); weak
int __stdcall sub_43A0C0(int a1);
int __stdcall sub_43A0E7(int a1);
int __stdcall sub_43A201(int a1);
int __stdcall sub_43A2F1(int); // weak
signed int sub_43A4A3();
int sub_43A67A();
char *__cdecl sub_43A690(char *a1, int a2, int a3, int a4);
signed int __cdecl sub_43A9D8(_BYTE *a1, _BYTE *a2, signed int a3);
int __cdecl sub_43AA2B(int); // weak
int __cdecl sub_43AB0C(int); // weak
void sub_43ABED();
char __cdecl sub_43ABF2(char *a1, _BYTE *a2, signed int a3);
int __cdecl sub_43ACA0(_BYTE *a1, _BYTE *a2, signed int *a3);
char *__cdecl sub_43ADF4(char *a1);
void __cdecl sub_43AFA2(int a1, LPCSTR lpMultiByteStr, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl sub_43B6A8(LPCSTR lpMultiByteStr, int, LPWSTR lpWideCharStr); // idb
int *__cdecl sub_43B6F6(int a1, int a2, signed int *a3);
bool __cdecl sub_43B77E(int a1, int a2, signed int a3);
char __cdecl sub_43B878(_BYTE *a1);
char __cdecl sub_43B9BA(int a1, int a2);
char __cdecl sub_43BA17(LPCSTR lpDirectoryName, int a2, int a3);
int sub_43BAE2();
struct _RTL_CRITICAL_SECTION *sub_43BB0F();
int sub_43BB1E();
void __cdecl sub_43BB30(); // idb
void __stdcall sub_43BB3F(PVOID, BOOLEAN); // idb
int sub_43BC53();
int sub_43BC70();
void __cdecl sub_43BC82(); // idb
void sub_43BCC6();
int sub_43BCCB();
void __cdecl sub_43BCDD(); // idb
DNameNode *sub_43BCEC();
void sub_43BDAE();
void __thiscall sub_43BE3C(_DWORD *this);
void __cdecl sub_43BE8B(int a1, int a2);
char sub_43BF78();
char __cdecl sub_43BF93(int a1, char a2);
char __cdecl sub_43BFC4(int a1, char a2);
char __cdecl sub_43BFDD(int a1, char a2);
int __cdecl sub_43C072(int a1);
int __thiscall sub_43C0E0(DNameNode *this, int a2);
void *__fastcall sub_43C16A(int a1);
BOOL __thiscall sub_43C1C7(int this);
char *__thiscall sub_43C246(int this);
int __thiscall sub_43C25E(void *this);
LONG __thiscall sub_43C27C(int this);
char __cdecl sub_43C476(int a1, int a2, char a3);
int sub_43C57C();
int __thiscall sub_43C590(int this);
// void __thiscall unknown_libname_204(void *); idb
void sub_43C5E0();
DNameNode *__thiscall sub_43C5F0(DNameNode *this);
void *__thiscall sub_43C610(void *this, char a2);
// int unknown_libname_205(void); weak
void *__thiscall sub_43C660(void *this, char a2);
// SQLRETURN __stdcall SQLExecDirect(SQLHSTMT StatementHandle, SQLCHAR *StatementText, SQLINTEGER TextLength);
// SQLRETURN __stdcall SQLBindParameter(SQLHSTMT hstmt, SQLUSMALLINT ipar, SQLSMALLINT fParamType, SQLSMALLINT fCType, SQLSMALLINT fSqlType, SQLUINTEGER cbColDef, SQLSMALLINT ibScale, SQLPOINTER rgbValue, SQLINTEGER cbValueMax, SQLINTEGER *pcbValue);
// SQLRETURN __stdcall SQLBindCol(SQLHSTMT StatementHandle, SQLUSMALLINT ColumnNumber, SQLSMALLINT TargetType, SQLPOINTER TargetValue, SQLINTEGER BufferLength, SQLINTEGER *StrLen_or_Ind);
// SQLRETURN __stdcall SQLFreeHandle(SQLSMALLINT HandleType, SQLHANDLE Handle);
// SQLRETURN __stdcall SQLAllocHandle(SQLSMALLINT HandleType, SQLHANDLE InputHandle, SQLHANDLE *OutputHandle);
// SQLRETURN __stdcall SQLSetEnvAttr(SQLHENV EnvironmentHandle, SQLINTEGER Attribute, SQLPOINTER Value, SQLINTEGER StringLength);
// SQLRETURN __stdcall SQLDisconnect(SQLHDBC ConnectionHandle);
// SQLRETURN __stdcall SQLDriverConnect(SQLHDBC hdbc, SQLHWND hwnd, SQLCHAR *szConnStrIn, SQLSMALLINT cchConnStrIn, SQLCHAR *szConnStrOut, SQLSMALLINT cchConnStrOutMax, SQLSMALLINT *pcchConnStrOut, SQLUSMALLINT fDriverCompletion);
// SQLRETURN __stdcall SQLSetConnectAttr(SQLHDBC ConnectionHandle, SQLINTEGER Attribute, SQLPOINTER Value, SQLINTEGER StringLength);
// SQLRETURN __stdcall SQLFreeStmt(SQLHSTMT StatementHandle, SQLUSMALLINT Option);
// SQLRETURN __stdcall SQLFetch(SQLHSTMT StatementHandle);
// SQLRETURN __stdcall SQLGetDiagRec(SQLSMALLINT HandleType, SQLHANDLE Handle, SQLSMALLINT RecNumber, SQLCHAR *Sqlstate, SQLINTEGER *NativeError, SQLCHAR *MessageText, SQLSMALLINT BufferLength, SQLSMALLINT *TextLength);
// void __stdcall GetAcceptExSockaddrs(PVOID lpOutputBuffer, DWORD dwReceiveDataLength, DWORD dwLocalAddressLength, DWORD dwRemoteAddressLength, struct sockaddr **LocalSockaddr, LPINT LocalSockaddrLength, struct sockaddr **RemoteSockaddr, LPINT RemoteSockaddrLength);
// BOOL __stdcall AcceptEx(SOCKET sListenSocket, SOCKET sAcceptSocket, PVOID lpOutputBuffer, DWORD dwReceiveDataLength, DWORD dwLocalAddressLength, DWORD dwRemoteAddressLength, LPDWORD lpdwBytesReceived, LPOVERLAPPED lpOverlapped);
void __cdecl sub_43CA18(LPVOID lpMem);
// _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this); idb
// _DWORD __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this); idb
// _DWORD __thiscall std::istrstream::~istrstream(std::istrstream *__hidden this); idb
// void __thiscall std::strstreambuf::_Init(std::strstreambuf *this, int, char *, char *, int); idb
_DWORD *__thiscall sub_43D2E7(_DWORD *this, int a2, int a3, char a4, int a5);
// int __thiscall std::basic_iostream<char,std::char_traits<char>>::~basic_iostream<char,std::char_traits<char>>(_DWORD); weak
char *__thiscall sub_43D414(char *this, char a2);
int __thiscall sub_43D45E(void *this);
int sub_43D49D();
_BYTE *__thiscall sub_43D552(_BYTE *this, _BYTE *a2);
void __thiscall __noreturn sub_43D5C3(void *this);
// int unknown_libname_207(void); weak
void *__thiscall sub_43D61D(void *this, char a2);
_BYTE *__thiscall sub_43D639(_BYTE *this, int a2);
// int unknown_libname_208(void); weak
void __thiscall __noreturn sub_43D6D3(void *this);
void *__thiscall sub_43D6F0(void *this, char a2);
_DWORD *__thiscall sub_43D70C(_BYTE *this, int a2);
// _DWORD __thiscall std::ios_base::~ios_base(std::ios_base *__hidden this); idb
// const struct std::locale::facet *__thiscall std::locale::_Getfacet(std::locale *this, unsigned int, bool); idb
// bool __thiscall std::locale::_Iscloc(std::locale *__hidden this); idb
void __thiscall sub_43DD3E(void *this);
int sub_43DF4D();
void __noreturn sub_43DF65();
// int unknown_libname_210(void); weak
void __thiscall __noreturn sub_43DFFC(void *this);
void *__thiscall sub_43E019(void *this, char a2);
_DWORD *__thiscall sub_43E035(_DWORD *this, int a2);
void __noreturn sub_43E04D();
int sub_43E0D1();
// struct _iobuf *__cdecl std::__Fiopen(const char *, int); idb
int sub_43E18C();
// struct std::locale *__thiscall std::locale::_Addfac(std::locale *this, struct std::locale::facet *, unsigned int, unsigned int); idb
// _DWORD __thiscall std::_Locinfo::_Locinfo(std::_Locinfo *this, const char *); idb
// _DWORD __thiscall std::_Locinfo::~_Locinfo(std::_Locinfo *__hidden this); idb
int __stdcall sub_43EC89(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, bool *a8);
int __stdcall sub_43EE33(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, _WORD *a8);
int __stdcall sub_43EEFF(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, unsigned __int32 *a8);
int __stdcall sub_43F123(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, float *a8);
int __stdcall sub_43F5BF(int a1, int a2, int a3, int a4, int a5, int a6);
int __stdcall sub_43F617(int a1, int a2, int a3, int a4, int a5, int a6);
int __stdcall sub_43F66F(int, int, int, int, int, double); // idb
int __stdcall sub_43F6ED(int, int, int, int, int, double); // idb
char __thiscall sub_43F835(int this);
char __thiscall sub_43F839(int this);
void *__thiscall sub_43F8DF(void *this, char a2);
void __thiscall sub_43F8FB(void *this);
void *__thiscall sub_43F902(void *this, char a2);
void __thiscall sub_43F91E(void *this);
void *__thiscall sub_43F925(void *this, char a2);
void __thiscall sub_43F941(int this);
// _DWORD __cdecl std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *); weak
// _DWORD __cdecl std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getffld(_DWORD, _DWORD, _DWORD, std::locale *); weak
// _DWORD __cdecl unknown_libname_219(_DWORD, char, _DWORD); weak
// int __cdecl std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Fput(int, int, int, int, int, void *, int, size_t); idb
// _DWORD __cdecl unknown_libname_220(_DWORD, char, _DWORD); weak
// int __cdecl std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Iput(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __stdcall unknown_libname_221(_DWORD); weak
// _DWORD __stdcall unknown_libname_222(_DWORD); weak
// _DWORD __stdcall std::numpunct<char>::_Init(_DWORD); weak
// int __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(size_t, char); idb
// int __thiscall unknown_libname_223(_DWORD); weak
// int __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::append(int, int, size_t); idb
const struct std::locale::facet *__cdecl sub_4407E3(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_4408BF(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44099B(std::locale *a1, int a2, int a3);
// int __cdecl std::_Getloctxt(int, int, size_t, int); idb
// char *__cdecl std::_Maklocstr(const char *, char *); idb
signed int __thiscall sub_440C62(int this, int a2);
int __thiscall sub_440CA1(int this, int a2);
std::locale::facet *__cdecl sub_440CFA(std::locale::facet *a1);
std::locale::facet *__cdecl sub_440D48(std::locale::facet *a1);
std::locale::facet *__cdecl sub_440D96(std::locale::facet *a1);
void __thiscall sub_440DE4(void *this);
void __thiscall sub_440E31(void *this);
void __thiscall sub_440E7E(void *this);
int sub_440EF5();
// int __cdecl _Tolower(int, const _Ctypevec *);
// int __cdecl _Toupper(int, const _Ctypevec *);
LCID sub_44134E();
// int __cdecl wctob(wint_t);
_DWORD *__thiscall sub_4415A2(_DWORD *this, char a2);
void __thiscall sub_4415BB(int this);
void __thiscall __noreturn sub_4415C6(void *this);
void *__thiscall sub_4415E3(void *this, char a2);
_DWORD *__thiscall sub_4415FF(_DWORD *this, int a2);
void __cdecl sub_441617(); // idb
char sub_441D20();
signed int sub_441D23();
int sub_441D27();
void *__thiscall sub_441D2A(void *this, char a2);
void __thiscall sub_441D46(void *this);
_WORD *__thiscall sub_441E4A(void *this, _WORD *a2, _WORD *a3);
_WORD *__thiscall sub_441EA8(void *this, _WORD *a2, _WORD *a3);
int __stdcall sub_441F11(wint_t, int); // idb
int __stdcall sub_442026(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, bool *a8);
int __stdcall sub_4421D0(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, _WORD *a8);
int __stdcall sub_44229C(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, unsigned __int32 *a8);
int __stdcall sub_4424C0(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, float *a8);
int __stdcall sub_44296F(int a1, int a2, int a3, int a4, int a5, int a6);
int __stdcall sub_4429C7(int a1, int a2, int a3, int a4, int a5, int a6);
int __stdcall sub_442A1F(int, int, int, int, int, double); // idb
int __stdcall sub_442A9D(int, int, int, int, int, double); // idb
int __stdcall sub_442DD5(int a1, int a2);
int __stdcall sub_442F83(int a1, int a2, int a3, char a4, int a5, char a6, int a7, _DWORD *a8, int a9);
int __thiscall sub_44335F(int this);
signed int sub_44337B();
void *__thiscall sub_443656(void *this, char a2);
void __thiscall sub_443672(int this);
void *__thiscall sub_443692(void *this, char a2);
void __thiscall sub_4436AE(int this);
void *__thiscall sub_4436C8(void *this, char a2);
void __thiscall sub_4436E4(void *this);
void *__thiscall sub_4436EB(void *this, char a2);
void __thiscall sub_443707(void *this);
void *__thiscall sub_44370E(void *this, char a2);
void __thiscall sub_44372A(int this);
void *__thiscall sub_443756(void *this, char a2);
void __thiscall sub_443772(void *this);
void *__thiscall sub_443779(void *this, char a2);
void __thiscall sub_443795(int this);
void *__thiscall sub_4437B8(void *this, char a2);
void __thiscall sub_4437D4(void *this);
void *__thiscall sub_4437DB(void *this, char a2);
void __thiscall sub_4437F7(void *this);
void *__thiscall sub_4437FE(void *this, char a2);
void *__thiscall sub_44381A(void *this, char a2);
void *__thiscall sub_443836(void *this, char a2);
void __thiscall sub_443852(int this);
int sub_443875(void); // weak
void __thiscall sub_44387A(int this);
void *__thiscall sub_4438AE(void *this, char a2);
int sub_4438CA(void); // weak
// int __thiscall std::_Locinfo::_Gettnames(_DWORD, _DWORD); weak
// _DWORD __cdecl std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *); weak
// int __cdecl std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getffld(int, int, int, struct std::locale *); idb
// _DWORD __cdecl unknown_libname_239(_DWORD, char, _DWORD); weak
// int __cdecl std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Fput(int, int, int, int, int, void *, int, size_t); idb
// _DWORD __cdecl unknown_libname_240(_DWORD, char, _DWORD); weak
// int __cdecl std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Iput(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __stdcall unknown_libname_241(_DWORD); weak
// _DWORD __stdcall unknown_libname_242(_DWORD); weak
// _DWORD __stdcall std::numpunct<unsigned short>::_Init(_DWORD); weak
// _DWORD __stdcall std::money_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getmfld(_DWORD, _DWORD, _DWORD, char, _DWORD); weak
// _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(_DWORD, _DWORD); weak
int __thiscall sub_445667(int this, unsigned int a2);
int __thiscall sub_44568D(int this, int a2, int a3, char a4);
// _DWORD __stdcall std::time_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Init(std::_Locinfo *); weak
// _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::assign(_DWORD, _DWORD, _DWORD); weak
// _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::assign(_DWORD, _DWORD); weak
// _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::erase(_DWORD, _DWORD); weak
// _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(char); weak
// _DWORD __stdcall std::_Mpunct<unsigned short>::_Init(_DWORD); weak
// _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(_DWORD, _DWORD, _DWORD); weak
const struct std::locale::facet *__cdecl sub_44609B(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44615F(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44623B(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_446317(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_4463DB(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44649F(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_446563(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44663F(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44671B(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_4467EA(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_4468B9(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_44697D(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_446A41(std::locale *a1, int a2, int a3);
int __thiscall sub_446B05(int this, int a2);
// int __cdecl std::_Getloctxt(int, int, size_t, int); idb
// unsigned __int16 *__cdecl std::_Maklocstr(const char *, unsigned __int16 *); idb
// _DWORD __stdcall std::ctype<unsigned short>::ctype<unsigned short>(_DWORD); weak
int __thiscall sub_446DC3(int this, LPVOID lpMem);
// _DWORD __stdcall std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(_DWORD); weak
int __thiscall sub_446E6F(int this, int a2);
int __thiscall sub_446EC8(int this, int a2);
int __thiscall sub_446F1C(int this, int a2);
int __thiscall sub_446F8E(int this, int a2);
std::locale::facet *__cdecl sub_446FE7(std::locale::facet *a1);
std::locale::facet *__cdecl sub_447035(std::locale::facet *a1);
std::locale::facet *__cdecl sub_447083(std::locale::facet *a1);
std::locale::facet *__cdecl sub_4470D1(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44711F(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44716D(std::locale::facet *a1);
std::locale::facet *__cdecl sub_4471BB(std::locale::facet *a1);
std::locale::facet *__cdecl sub_447209(std::locale::facet *a1);
std::locale::facet *__cdecl sub_447257(std::locale::facet *a1);
std::locale::facet *__cdecl sub_4472A5(std::locale::facet *a1);
std::locale::facet *__cdecl sub_4472F3(std::locale::facet *a1);
std::locale::facet *__cdecl sub_447341(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44738F(std::locale::facet *a1);
int __thiscall sub_4473DD(int this, int a2, char a3);
void __thiscall sub_44743C(void *this);
void __thiscall sub_447489(void *this);
void __thiscall sub_4474D6(void *this);
void __thiscall sub_447523(void *this);
void __thiscall sub_447570(void *this);
void __thiscall sub_4475BD(void *this);
void __thiscall sub_44760A(void *this);
void __thiscall sub_447657(void *this);
void __thiscall sub_4476A4(void *this);
void __thiscall sub_4476F1(void *this);
void __thiscall sub_44773E(void *this);
void __thiscall sub_44778B(void *this);
void __thiscall sub_4477D8(void *this);
int __stdcall sub_447CCC(int a1, int a2);
_BYTE *__thiscall sub_447CD1(int this, _BYTE *a2, int a3, int a4, int a5, _BYTE *a6);
int __stdcall sub_447E73(int a1, int a2, int a3, char a4, int a5, char a6, int a7, _DWORD *a8, int a9);
char __thiscall sub_44813F(int this);
char __thiscall sub_448143(int this);
_BYTE *__thiscall sub_4481E9(int this, _BYTE *a2);
int __thiscall sub_44821F(int this);
signed int sub_44823B();
void *__thiscall sub_4485C0(void *this, char a2);
void __thiscall sub_4485DC(void *this);
void *__thiscall sub_4485E3(void *this, char a2);
void __thiscall sub_4485FF(int this);
void *__thiscall sub_448622(void *this, char a2);
void __thiscall sub_44863E(void *this);
void *__thiscall sub_448645(void *this, char a2);
void __thiscall sub_448661(void *this);
void *__thiscall sub_448668(void *this, char a2);
void *__thiscall sub_448684(void *this, char a2);
void *__thiscall sub_4486A0(void *this, char a2);
void __thiscall sub_4486BC(int this);
void *__thiscall sub_4486DF(void *this, char a2);
void __thiscall sub_4486FB(int this);
int sub_448715(void); // weak
void __thiscall sub_44871A(int this);
void *__thiscall sub_44874E(void *this, char a2);
int sub_44876A(void); // weak
int __thiscall sub_44876F(int this, unsigned int a2);
// _DWORD __stdcall std::money_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getmfld(_DWORD, _DWORD, _DWORD, char, _DWORD); weak
int __thiscall sub_4495DD(int this, int a2, int a3, char a4);
// int __stdcall std::time_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Init(std::_Locinfo *); idb
// _DWORD __stdcall std::_Mpunct<char>::_Init(_DWORD); weak
const struct std::locale::facet *__cdecl sub_4499C5(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449A89(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449B4D(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449C29(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449D05(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449DD4(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449EA3(std::locale *a1, int a2, int a3);
const struct std::locale::facet *__cdecl sub_449F67(std::locale *a1, int a2, int a3);
int __thiscall sub_44A02B(int this, int a2);
int __thiscall sub_44A07F(int this, int a2);
int __thiscall sub_44A0F1(int this, int a2);
int __thiscall sub_44A14A(int this, LPVOID lpMem);
std::locale::facet *__cdecl sub_44A1B7(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A205(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A253(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A2A1(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A2EF(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A33D(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A38B(std::locale::facet *a1);
std::locale::facet *__cdecl sub_44A3D9(std::locale::facet *a1);
int __thiscall sub_44A427(int this, int a2, char a3);
void __thiscall sub_44A486(void *this);
void __thiscall sub_44A4D3(void *this);
void __thiscall sub_44A520(void *this);
void __thiscall sub_44A56D(void *this);
void __thiscall sub_44A5BA(void *this);
void __thiscall sub_44A607(void *this);
void __thiscall sub_44A654(void *this);
void __thiscall sub_44A6A1(void *this);
// double __cdecl _Stod(const char *, char **, __int32);
double __cdecl sub_44A74B(char *a1, char **a2, __int32 a3);
LCID sub_44A86E();
// void *__cdecl memset(void *, int, size_t);
// void *__cdecl memcpy(void *, const void *, size_t);
// int swprintf(wchar_t *, const wchar_t *, ...);
// _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int sprintf(char *, const char *, ...);
// size_t __cdecl strlen(const char *);
// int __cdecl atoi(const char *);
// struct tm *__cdecl localtime(const time_t *);
// time_t __cdecl time(time_t *);
// char *__cdecl strcpy(char *, const char *);
// char *__cdecl strcat(char *, const char *);
// int __cdecl strcmp(const char *, const char *);
// int __cdecl memcmp(const void *, const void *, size_t);
// char *__cdecl strncpy(char *, const char *, size_t);
// int __cdecl atexit(void (__cdecl *)());
void __cdecl sub_44BDA0(LPVOID lpMem);
// void *__cdecl malloc(size_t);
LPVOID __cdecl sub_44BEC7(unsigned int a1);
// int __cdecl _read(int, void *, unsigned int);
// int __cdecl _close(int);
// void *__cdecl operator new(unsigned int); idb
// int __cdecl _stat(const char *, struct _stat *);
// int _open(const char *, int, ...);
// char *__cdecl strstr(const char *, const char *);
// void *__cdecl memcpy_0(void *, const void *, size_t);
// int __cdecl isalpha(int);
// int __cdecl isdigit(int);
// int sscanf(const char *, const char *, ...);
// int __cdecl vsprintf(char *, const char *, va_list);
// char *__cdecl strrchr(const char *, int);
// void *__cdecl memchr(const void *, int, size_t);
// int __cdecl _vsnprintf(char *, size_t, const char *, va_list);
// int _snprintf(char *, size_t, const char *, ...);
// int __stdcall `eh vector constructor iterator'(void *, unsigned int, int, int, void (__thiscall *)(void *)); idb
// int __stdcall `eh vector destructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *)); idb
void __noreturn sub_44D37C();
// size_t __cdecl strspn(const char *, const char *);
// __int32 __cdecl strtol(const char *, char **, int);
// unsigned __int32 __cdecl strtoul(const char *, char **, int);
size_t __cdecl sub_44D601(void *a1, size_t a2, size_t a3, FILE *a4);
// size_t __cdecl fwrite(const void *, size_t, size_t, FILE *);
int sub_44D9D1();
// _DWORD __cdecl flsall(_DWORD); weak
// int __cdecl fclose(FILE *);
void *__thiscall sub_44DBEE(void *this, char a2);
// _DWORD __stdcall exception::exception(_DWORD); weak
// _DWORD __stdcall exception::exception(_DWORD); weak
void __thiscall sub_44DCB0(int this);
// _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD); weak
// int __cdecl _beginthreadex(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, int, int, DWORD dwCreationFlags, LPDWORD lpThreadId); idb
// int _cinit(void); weak
// void __cdecl __noreturn exit(int);
// int fprintf(FILE *, const char *, ...);
// FILE *__cdecl fopen(const char *, const char *);
// int __cdecl strncmp(const char *, const char *, size_t);
// char *__cdecl strchr(const char *, int);
// char *__cdecl strtok(char *, const char *);
// char *__cdecl fgets(char *, int, FILE *);
// void __cdecl srand(unsigned int);
// int __cdecl rand();
// size_t __cdecl wcslen(const wchar_t *);
// int __cdecl tolower(int);
// int __cdecl toupper(int);
// void __noreturn start();
// int __cdecl _amsg_exit(DWORD NumberOfBytesWritten); idb
// int __cdecl fast_error_exit(DWORD NumberOfBytesWritten); idb
int sub_44EE45();
void *__cdecl sub_44EF8C(LPVOID lpMem, SIZE_T dwBytes);
// int *__cdecl _errno();
void **sub_44F3A0();
// _DWORD __cdecl _lock(_DWORD); weak
// _DWORD __cdecl _unlock(_DWORD); weak
int __cdecl sub_44FB46(unsigned __int8 *a1, unsigned int a2, unsigned __int8 *a3, int a4, void *a5);
// _DWORD __cdecl _expandtime(char, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int _mtinit(void); weak
SIZE_T __cdecl sub_452AF8(LPCVOID lpMem);
char __cdecl sub_452BE6(int a1);
__int32 sub_452C13();
signed int __cdecl sub_452D5B(int a1);
// _DWORD __cdecl __sbh_heap_init(_DWORD); weak
// _DWORD __cdecl __sbh_find_block(_DWORD); weak
char *__cdecl sub_452FA5(unsigned int a1, int a2);
// _DWORD __cdecl __sbh_alloc_block(_DWORD); weak
// _DWORD __cdecl __sbh_resize_block(_DWORD, _DWORD, _DWORD); weak
void **sub_453E9B();
int __cdecl sub_453FDF(LPVOID lpMem); // idb
void __cdecl sub_454035(int a1);
unsigned int __cdecl sub_4540F7(unsigned int a1, void ***a2, unsigned int *a3);
void __cdecl sub_45414E(int a1, int a2, _BYTE *a3);
int __cdecl sub_454193(unsigned int a1);
int __cdecl sub_45439B(int a1, unsigned int a2, unsigned int a3);
signed int __cdecl sub_4544BF(int a1, int a2, _BYTE *a3, unsigned int a4);
// _DWORD __cdecl _callnewh(_DWORD); weak
// int _ioinit(void); weak
// _DWORD __cdecl _lock_file(_DWORD); weak
// _DWORD __cdecl _unlock_file(_DWORD); weak
void *__cdecl sub_4567A9(int a1, int a2);
// int _wincmdln(void); weak
// int _setenvp(void); weak
// int _setargv(void); weak
// int __crtGetEnvironmentStringsA(void); weak
int sub_457FCC();
// int __cdecl _strcmpi(const char *, const char *);
__int16 __cdecl sub_459225(wchar_t a1, FILE *a2);
// int __cdecl _putwc_lk(wchar_t, FILE *); idb
signed int __cdecl sub_459DB3(unsigned __int8 a1, int a2, unsigned __int8 a3);
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_45A964(int a1, int a2);
int __cdecl sub_45A97A(int a1, int a2);
int __cdecl sub_45AA0A(int a1, int a2);
int __cdecl sub_45AA65(int a1, int a2);
// _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// HMODULE __stdcall LoadLibraryA(LPCSTR lpLibFileName);
// void __usercall sub_45C440(int a1@<ebp>);
// void __usercall sub_45C456(int a1@<ebp>);
// void __usercall sub_45C46C(int a1@<ebp>);
// void __usercall sub_45C47F(int a1@<ebp>);
// void __usercall sub_45C495(int a1@<ebp>);
// int __usercall sub_45C4B0@<eax>(int a1@<ebp>);
// int __usercall sub_45C4C6@<eax>(int a1@<ebp>);
// void __usercall sub_45C4DC(int a1@<ebp>);
// void __usercall sub_45C4E8(int a1@<ebp>);
// void __usercall sub_45C4F4(int a1@<ebp>);
// void __usercall sub_45C50A(int a1@<ebp>);
// void __usercall sub_45C520(int a1@<ebp>);
// void __usercall sub_45C533(int a1@<ebp>);
// void __usercall sub_45C546(int a1@<ebp>);
// void __usercall sub_45C559(int a1@<ebp>);
// int __usercall sub_45C570@<eax>(int a1@<ebp>);
// int __usercall sub_45C590@<eax>(int a1@<ebp>);
// int __usercall sub_45C5B0@<eax>(int a1@<ebp>);
// int __usercall sub_45C5BC@<eax>(int a1@<ebp>);
// int __usercall sub_45C5C8@<eax>(int a1@<ebp>);
// int __usercall sub_45C5D4@<eax>(int a1@<ebp>);
// int __usercall sub_45C5F0@<eax>(int a1@<ebp>);
// char *__usercall sub_45C60A@<eax>(int a1@<ebp>);
// int __usercall sub_45C620@<eax>(int a1@<ebp>);
// int __usercall sub_45C640@<eax>(int a1@<ebp>);
// int __usercall sub_45C6B0@<eax>(int a1@<ebp>);
// int __usercall sub_45C6D0@<eax>(int a1@<ebp>);
// int __usercall sub_45C6F0@<eax>(int a1@<ebp>);
// void __usercall sub_45C720(int a1@<ebp>);
// int __usercall sub_45C740@<eax>(int a1@<ebp>);
// void __usercall sub_45C760(int a1@<ebp>);
int __cdecl SEH_40E6E3(int a1, int a2, int a3, int a4);
// void *__usercall sub_45C773@<eax>(int a1@<ebp>);
int __cdecl SEH_40EB66(int a1, int a2, int a3, int a4);
// void *__usercall sub_45C789@<eax>(int a1@<ebp>);
int __cdecl SEH_40EDD3(int a1, int a2, int a3, int a4);
// void *__usercall sub_45C79F@<eax>(int a1@<ebp>);
int __cdecl SEH_40EFC9(int a1, int a2, int a3, int a4);
// void __usercall sub_45C7D0(int a1@<ebp>);
int __cdecl SEH_40FBBE(int a1, int a2, int a3, int a4);
// void __usercall sub_45C7E3(int a1@<ebp>);
int __cdecl SEH_40FC7A(int a1, int a2, int a3, int a4);
// void __usercall sub_45C7F6(int a1@<ebp>);
int __cdecl SEH_40FD0D(int a1, int a2, int a3, int a4);
// void __usercall sub_45C80C(int a1@<ebp>);
int __cdecl SEH_41070C(int a1, int a2, int a3, int a4);
// void *__usercall sub_45C81F@<eax>(int a1@<ebp>);
// void *__usercall sub_45C832@<eax>(int a1@<ebp>);
// void __usercall sub_45C85A(int a1@<ebp>);
int __cdecl SEH_410D11(int a1, int a2, int a3, int a4);
// void __usercall sub_45C86D(int a1@<ebp>);
// int __usercall sub_45C880@<eax>(int a1@<ebp>);
// int __usercall sub_45C889@<eax>(int a1@<ebp>);
// int __usercall sub_45C8A0@<eax>(int a1@<ebp>);
// int __usercall sub_45C8C0@<eax>(int a1@<ebp>);
// int __usercall sub_45C8E0@<eax>(int a1@<ebp>);
// int __usercall sub_45C900@<eax>(int a1@<ebp>);
// void __usercall sub_45C920(int a1@<ebp>);
// void *__usercall sub_45C940@<eax>(int a1@<ebp>);
// void *__usercall sub_45C953@<eax>(int a1@<ebp>);
// void __usercall sub_45C95C(int a1@<ebp>);
void sub_45C980();
void sub_45C993();
void sub_45C9A9();
void sub_45C9BC();
// void __usercall sub_45C9D0(int a1@<ebp>);
// void *__usercall sub_45C9F0@<eax>(int a1@<ebp>);
// void *__usercall sub_45CA03@<eax>(int a1@<ebp>);
// void *__usercall sub_45CA16@<eax>(int a1@<ebp>);
// void *__usercall sub_45CA29@<eax>(int a1@<ebp>);
// int __usercall sub_45CA32@<eax>(int a1@<ebp>);
// int __usercall sub_45CA51@<eax>(int a1@<ebp>);
// int __usercall sub_45CA70@<eax>(int a1@<ebp>);
// int __usercall sub_45CA90@<eax>(int a1@<ebp>);
// int __usercall sub_45CAB0@<eax>(int a1@<ebp>);
// int __usercall sub_45CAD0@<eax>(int a1@<ebp>);
// void *__usercall sub_45CAF0@<eax>(int a1@<ebp>);
// void *__usercall sub_45CB03@<eax>(int a1@<ebp>);
// int __usercall sub_45CB16@<eax>(int a1@<ebp>);
// int __usercall sub_45CB30@<eax>(int a1@<ebp>);
// int __usercall sub_45CB43@<eax>(int a1@<ebp>);
// int __usercall sub_45CB60@<eax>(int a1@<ebp>);
// int __usercall sub_45CB80@<eax>(int a1@<ebp>);
// char *__usercall sub_45CB9A@<eax>(int a1@<ebp>);
// int __usercall sub_45CBA6@<eax>(int a1@<ebp>);
// char *__usercall sub_45CBC0@<eax>(int a1@<ebp>);
// int __usercall sub_45CBE9@<eax>(int a1@<ebp>);
// int __usercall sub_45CC00@<eax>(int a1@<ebp>);
// int __usercall sub_45CC30@<eax>(int a1@<ebp>);
// int __usercall sub_45CC50@<eax>(int a1@<ebp>);
// int __usercall sub_45CC79@<eax>(int a1@<ebp>);
// int __usercall sub_45CC90@<eax>(int a1@<ebp>);
// void __usercall sub_45CC99(int a1@<ebp>);
// int __usercall sub_45CCC0@<eax>(int a1@<ebp>);
// void __usercall sub_45CCE9(int a1@<ebp>);
// int __usercall sub_45CD09@<eax>(int a1@<ebp>);
// int __usercall sub_45CD12@<eax>(int a1@<ebp>);
// int __usercall sub_45CD30@<eax>(int a1@<ebp>);
// void __usercall sub_45CD59(int a1@<ebp>);
// int __usercall sub_45CD70@<eax>(int a1@<ebp>);
// int __usercall sub_45CD79@<eax>(int a1@<ebp>);
// int __usercall sub_45CD82@<eax>(int a1@<ebp>);
// int __usercall sub_45CDB9@<eax>(int a1@<ebp>);
// int __usercall sub_45CDD0@<eax>(int a1@<ebp>);
// int __usercall sub_45CDF0@<eax>(int a1@<ebp>);
// int __usercall sub_45CE10@<eax>(int a1@<ebp>);
// int __usercall sub_45CE30@<eax>(int a1@<ebp>);
// int __usercall sub_45CE50@<eax>(int a1@<ebp>);
// int __usercall sub_45CE65@<eax>(int a1@<ebp>);
// int __usercall sub_45CE71@<eax>(int a1@<ebp>);
// void __usercall sub_45CE7D(int a1@<ebp>);
// int __usercall sub_45CE93@<eax>(int a1@<ebp>);
// int __usercall sub_45CE9F@<eax>(int a1@<ebp>);
// void __usercall sub_45CEAB(int a1@<ebp>);
// void *__usercall sub_45CED6@<eax>(int a1@<ebp>);
// void *__usercall sub_45CEE9@<eax>(int a1@<ebp>);
// int __usercall sub_45CF00@<eax>(int a1@<ebp>);
// int __usercall sub_45CF20@<eax>(int a1@<ebp>);
// int __usercall sub_45CF40@<eax>(int a1@<ebp>);
// int __usercall sub_45CF60@<eax>(int a1@<ebp>);
// void __usercall sub_45CF80(int a1@<ebp>);
// int __usercall sub_45CF8C@<eax>(int a1@<ebp>);
// int __usercall sub_45CF98@<eax>(int a1@<ebp>);
// int __usercall sub_45CFA4@<eax>(int a1@<ebp>);
// int __usercall sub_45CFB0@<eax>(int a1@<ebp>);
// void __usercall sub_45CFC5(int a1@<ebp>);
// int __usercall sub_45CFD1@<eax>(int a1@<ebp>);
// int __usercall sub_45CFDD@<eax>(int a1@<ebp>);
// int __usercall sub_45D000@<eax>(int a1@<ebp>);
// void *__usercall sub_45D015@<eax>(int a1@<ebp>);
// void *__usercall sub_45D028@<eax>(int a1@<ebp>);
// void __usercall sub_45D050(int a1@<ebp>);
// int __usercall sub_45D070@<eax>(int a1@<ebp>);
// void __usercall sub_45D0B0(int a1@<ebp>);
// void __usercall sub_45D0C6(int a1@<ebp>);
// void __usercall sub_45D0DC(int a1@<ebp>);
// void __usercall sub_45D0EF(int a1@<ebp>);
int sub_45D110();
// void __usercall sub_45D130(int a1@<ebp>);
// void __usercall sub_45D150(int a1@<ebp>);
// void __usercall sub_45D170(int a1@<ebp>);
// int __usercall sub_45D190@<eax>(int a1@<ebp>);
// int __usercall sub_45D1A6@<eax>(int a1@<ebp>);
// void __usercall sub_45D1B2(int a1@<ebp>);
// void __usercall sub_45D1C8(int a1@<ebp>);
// void __usercall sub_45D1D4(int a1@<ebp>);
// void __usercall sub_45D1EC(int a1@<ebp>);
// void __usercall sub_45D1F8(int a1@<ebp>);
// void __usercall sub_45D210(int a1@<ebp>);
// void *__usercall sub_45D230@<eax>(int a1@<ebp>);
// void __usercall sub_45D23C(int a1@<ebp>);
// void __usercall sub_45D252(int a1@<ebp>);
int __cdecl SEH_43925D(int a1, int a2, int a3, int a4);
// void __usercall sub_45D265(int a1@<ebp>);
int __cdecl SEH_439436(int a1, int a2, int a3, int a4);
// void *__usercall sub_45D278@<eax>(int a1@<ebp>);
// int __usercall sub_45D2A0@<eax>(int a1@<ebp>);
// void *__usercall sub_45D2CA@<eax>(int a1@<ebp>);
// void *__usercall sub_45D2DD@<eax>(int a1@<ebp>);
// int __usercall sub_45D322@<eax>(int a1@<ebp>);
// int __usercall sub_45D32D@<eax>(int a1@<ebp>);
// int __usercall sub_45D338@<eax>(int a1@<ebp>);
// int __usercall sub_45D37E@<eax>(int a1@<ebp>);
// int __usercall sub_45D389@<eax>(int a1@<ebp>);
// int __usercall sub_45D394@<eax>(int a1@<ebp>);
// int __usercall sub_45D3C0@<eax>(int a1@<ebp>);
// char *__usercall sub_45D412@<eax>(int a1@<ebp>);
int sub_45D428();
// void __usercall sub_45D43C(int a1@<ebp>);
// void __usercall sub_45D450(int a1@<ebp>);
// void __usercall sub_45D464(int a1@<ebp>);
// void __usercall sub_45D478(int a1@<ebp>);
// int __usercall sub_45D48C@<eax>(int a1@<ebp>);
int sub_45D4B8();
// void __usercall sub_45D4CC(int a1@<ebp>);
int sub_45D4E8();
int sub_45D4F0();
// int __usercall sub_45D504@<eax>(int a1@<ebp>);
// void __usercall sub_45D50C(int a1@<ebp>);
// int __usercall sub_45D520@<eax>(int a1@<ebp>);
// void *__usercall sub_45D534@<eax>(int a1@<ebp>);
// void *__usercall sub_45D548@<eax>(int a1@<ebp>);
// int __usercall sub_45D550@<eax>(int a1@<ebp>);
// int __usercall sub_45D55B@<eax>(int a1@<ebp>);
int sub_45D570();
// void __usercall sub_45D584(int a1@<ebp>);
int sub_45D598();
// int __usercall sub_45D5B6@<eax>(int a1@<ebp>);
// int __usercall sub_45D5D2@<eax>(int a1@<ebp>);
int sub_45D5DA();
int sub_45D5E2();
// int __usercall sub_45D5FE@<eax>(int a1@<ebp>);
int sub_45D606();
int sub_45D60E();
// void __usercall sub_45D620(int a1@<ebp>);
// int __usercall sub_45D63C@<eax>(int a1@<ebp>);
// void __usercall sub_45D644(int a1@<ebp>);
// int __usercall sub_45D64E@<eax>(int a1@<ebp>);
// void __usercall sub_45D678(int a1@<ebp>);
// int __usercall sub_45D682@<eax>(int a1@<ebp>);
// void __usercall sub_45D68A(int a1@<ebp>);
// void *__usercall sub_45D694@<eax>(int a1@<ebp>);
int sub_45D69C();
// int __usercall sub_45D6B8@<eax>(int a1@<ebp>);
// int __usercall sub_45D6C3@<eax>(int a1@<ebp>);
// int __usercall sub_45D6CB@<eax>(int a1@<ebp>);
// int __usercall sub_45D6D3@<eax>(int a1@<ebp>);
// int __usercall sub_45D6E8@<eax>(int a1@<ebp>);
// int __usercall sub_45D704@<eax>(int a1@<ebp>);
// int __usercall sub_45D70F@<eax>(int a1@<ebp>);
// int __usercall sub_45D71A@<eax>(int a1@<ebp>);
// int __usercall sub_45D738@<eax>(int a1@<ebp>);
// int __usercall sub_45D743@<eax>(int a1@<ebp>);
// int __usercall sub_45D74E@<eax>(int a1@<ebp>);
// int __usercall sub_45D76C@<eax>(int a1@<ebp>);
// int __usercall sub_45D777@<eax>(int a1@<ebp>);
int sub_45D794();
int sub_45D79C();
int sub_45D7A4();
// int __usercall sub_45D7AC@<eax>(int a1@<ebp>);
// int __usercall sub_45D7C0@<eax>(int a1@<ebp>);
// int __usercall sub_45D7D4@<eax>(int a1@<ebp>);
// int __usercall sub_45D7E8@<eax>(int a1@<ebp>);
// int __usercall sub_45D7FC@<eax>(int a1@<ebp>);
// int __usercall sub_45D810@<eax>(int a1@<ebp>);
// int __usercall sub_45D824@<eax>(int a1@<ebp>);
// int __usercall sub_45D838@<eax>(int a1@<ebp>);
// int __usercall sub_45D84C@<eax>(int a1@<ebp>);
int sub_45D868();
int sub_45D870();
int sub_45D878();
int sub_45D894();
// int __usercall sub_45D8A8@<eax>(int a1@<ebp>);
int sub_45D8C4();
// void __usercall sub_45D8E0(int a1@<ebp>);
// void *__usercall sub_45D8EA@<eax>(int a1@<ebp>);
// void __usercall sub_45D904(int a1@<ebp>);
// void *__usercall sub_45D90E@<eax>(int a1@<ebp>);
// void __usercall sub_45D928(int a1@<ebp>);
int sub_45D93C();
// int __usercall sub_45D958@<eax>(int a1@<ebp>);
// int __usercall sub_45D96C@<eax>(int a1@<ebp>);
// int __usercall sub_45D980@<eax>(int a1@<ebp>);
// int __usercall sub_45D994@<eax>(int a1@<ebp>);
// int __usercall sub_45D9A8@<eax>(int a1@<ebp>);
// int __usercall sub_45D9BC@<eax>(int a1@<ebp>);
// int __usercall sub_45D9D0@<eax>(int a1@<ebp>);
// void __usercall sub_45D9EC(int a1@<ebp>);
// void *__usercall sub_45D9F6@<eax>(int a1@<ebp>);
// void __usercall sub_45D9FE(int a1@<ebp>);
// void __usercall sub_45DA08(int a1@<ebp>);
// void __usercall sub_45DA10(int a1@<ebp>);
// void __usercall sub_45DA1A(int a1@<ebp>);
// void __usercall sub_45DA24(int a1@<ebp>);
// void __usercall sub_45DA2E(int a1@<ebp>);
// void __usercall sub_45DA36(int a1@<ebp>);
// void __usercall sub_45DA40(int a1@<ebp>);
// void __usercall sub_45DA48(int a1@<ebp>);
int sub_45DA60();
int sub_45DA7C();
void sub_45DA84();
void sub_45DA8C();
// int __usercall sub_45DA94@<eax>(int a1@<ebp>);
// int __usercall sub_45DAA8@<eax>(int a1@<ebp>);
// int __usercall sub_45DABC@<eax>(int a1@<ebp>);
// int __usercall sub_45DAD0@<eax>(int a1@<ebp>);
// int __usercall sub_45DAE4@<eax>(int a1@<ebp>);
// int __usercall sub_45DAF8@<eax>(int a1@<ebp>);
// int __usercall sub_45DB0C@<eax>(int a1@<ebp>);
// int __usercall sub_45DB20@<eax>(int a1@<ebp>);
// int __usercall sub_45DB34@<eax>(int a1@<ebp>);
void sub_45DB50();
void sub_45DB58();
void sub_45DB60();
// int __usercall sub_45DB7C@<eax>(int a1@<ebp>);
int sub_45DBA8();
void sub_45DBBC();
void sub_45DBD0();
void sub_45DBEC();
int sub_45DC08();
// int __usercall sub_45DC1C@<eax>(int a1@<ebp>);
int sub_45DC38();
// int __usercall sub_45DC54@<eax>(int a1@<ebp>);
// int __usercall sub_45DC5C@<eax>(int a1@<ebp>);
void sub_45DC64();
void sub_45DC6C();
int sub_45DC74();
int sub_45DC7F();
void sub_45DC87();
void sub_45DC92();
void sub_45DC9D();
void sub_45DCA8();
void sub_45DCB3();
void sub_45DCBE();
void sub_45DCC9();
// int __usercall sub_45DCD1@<eax>(int a1@<ebp>);
// int __usercall sub_45DCFC@<eax>(int a1@<ebp>);
// int __usercall sub_45DD04@<eax>(int a1@<ebp>);
int sub_45DD0C();
void sub_45DD17();
void sub_45DD1F();
void sub_45DD27();
void sub_45DD2F();
void sub_45DD3A();
// void __usercall sub_45DD4C(int a1@<ebp>);
// void __usercall sub_45DD74(int a1@<ebp>);
// void __usercall sub_45DD90(int a1@<ebp>);
// void *__usercall sub_45DD9A@<eax>(int a1@<ebp>);
// void __usercall sub_45DDB4(int a1@<ebp>);
// void *__usercall sub_45DDBE@<eax>(int a1@<ebp>);
// void __usercall sub_45DDD8(int a1@<ebp>);
// void __usercall sub_45DDF4(int a1@<ebp>);
// void __usercall sub_45DE10(int a1@<ebp>);
// void __usercall sub_45DE2C(int a1@<ebp>);
// void *__usercall sub_45DE36@<eax>(int a1@<ebp>);
// void __usercall sub_45DE50(int a1@<ebp>);
// void *__usercall sub_45DE5A@<eax>(int a1@<ebp>);
// void __usercall sub_45DE74(int a1@<ebp>);
// void __usercall sub_45DE90(int a1@<ebp>);
// void __usercall sub_45DEAC(int a1@<ebp>);
// void __usercall sub_45DEC8(int a1@<ebp>);
// void __usercall sub_45DEE4(int a1@<ebp>);
// int __usercall sub_45DEF8@<eax>(int a1@<ebp>, int a2);
int sub_45DF0C();
// int __usercall sub_45DF20@<eax>(int a1@<ebp>);
// void __usercall sub_45DF34(int a1@<ebp>);
// void __usercall sub_45DF3C(int a1@<ebp>);
// int __usercall sub_45DF5C@<eax>(int a1@<ebp>);
// void *__usercall sub_45DF70@<eax>(int a1@<ebp>);
// int __usercall sub_45DF8C@<eax>(int a1@<ebp>);
// int __usercall sub_45DFA8@<eax>(int a1@<ebp>);
// int __usercall sub_45DFBC@<eax>(int a1@<ebp>);
// int __usercall sub_45DFD0@<eax>(int a1@<ebp>);
// int __usercall sub_45DFE4@<eax>(int a1@<ebp>);
// int __usercall sub_45DFF8@<eax>(int a1@<ebp>);
// int __usercall sub_45E00C@<eax>(int a1@<ebp>);
// int __usercall sub_45E020@<eax>(int a1@<ebp>);
// int __usercall sub_45E034@<eax>(int a1@<ebp>);
// int __usercall sub_45E048@<eax>(int a1@<ebp>);
// int __usercall sub_45E05C@<eax>(int a1@<ebp>);
// int __usercall sub_45E070@<eax>(int a1@<ebp>);
// int __usercall sub_45E084@<eax>(int a1@<ebp>);
// int __usercall sub_45E098@<eax>(int a1@<ebp>);
// int __usercall sub_45E0AC@<eax>(int a1@<ebp>);
// int __usercall sub_45E0C8@<eax>(int a1@<ebp>);
// int __usercall sub_45E0DC@<eax>(int a1@<ebp>);
// int __usercall sub_45E0F0@<eax>(int a1@<ebp>);
// int __usercall sub_45E104@<eax>(int a1@<ebp>);
// int __usercall sub_45E118@<eax>(int a1@<ebp>);
// int __usercall sub_45E12C@<eax>(int a1@<ebp>);
// int __usercall sub_45E140@<eax>(int a1@<ebp>);
// int __usercall sub_45E154@<eax>(int a1@<ebp>);
// int __usercall sub_45E168@<eax>(int a1@<ebp>);
// int __usercall sub_45E17C@<eax>(int a1@<ebp>);
// int __usercall sub_45E190@<eax>(int a1@<ebp>);
// int __usercall sub_45E1A4@<eax>(int a1@<ebp>);
// int __usercall sub_45E1B8@<eax>(int a1@<ebp>);
// int __usercall sub_45E1CC@<eax>(int a1@<ebp>);
// void __usercall sub_45E1E8(int a1@<ebp>);
// void __usercall sub_45E1F2(int a1@<ebp>);
// void __usercall sub_45E1FA(int a1@<ebp>);
// void __usercall sub_45E204(int a1@<ebp>);
// void __usercall sub_45E20E(int a1@<ebp>);
// void __usercall sub_45E218(int a1@<ebp>);
// void __usercall sub_45E220(int a1@<ebp>);
// void __usercall sub_45E22A(int a1@<ebp>);
// void __usercall sub_45E232(int a1@<ebp>);
// int __usercall sub_45E250@<eax>(int a1@<ebp>);
int sub_45E27C();
int sub_45E290();
int sub_45E2A4();
int sub_45E2C0();
int sub_45E2D4();
// int __usercall sub_45E2F0@<eax>(int a1@<ebp>);
// int __usercall sub_45E2F8@<eax>(int a1@<ebp>);
int sub_45E300();
int sub_45E308();
int sub_45E310();
int sub_45E31B();
int sub_45E323();
int sub_45E32E();
int sub_45E339();
int sub_45E344();
int sub_45E34F();
int sub_45E35A();
int sub_45E365();
// int __usercall sub_45E380@<eax>(int a1@<ebp>);
// int __usercall sub_45E388@<eax>(int a1@<ebp>);
int sub_45E390();
int sub_45E39B();
int sub_45E3A3();
int sub_45E3AB();
int sub_45E3B3();
int sub_45E3BE();
// void __usercall sub_45E3D0(int a1@<ebp>);
// void __usercall sub_45E3EC(int a1@<ebp>);
// void __usercall sub_45E408(int a1@<ebp>);
// void __usercall sub_45E424(int a1@<ebp>);
// void *__usercall sub_45E42E@<eax>(int a1@<ebp>);
// void __usercall sub_45E448(int a1@<ebp>);
// void *__usercall sub_45E452@<eax>(int a1@<ebp>);
// void __usercall sub_45E46C(int a1@<ebp>);
// void __usercall sub_45E488(int a1@<ebp>);
// void __usercall sub_45E4A4(int a1@<ebp>);
// void __usercall sub_45E4C0(int a1@<ebp>);
// void *__usercall sub_45E4D4@<eax>(int a1@<ebp>);
// int __usercall sub_45E4F0@<eax>(int a1@<ebp>);
// int __usercall sub_45E50C@<eax>(int a1@<ebp>);
// void __usercall sub_45E520(int a1@<ebp>);
// void __usercall sub_45E528(int a1@<ebp>);
// int __usercall sub_45E540@<eax>(int a1@<ebp>);
// int __usercall sub_45E554@<eax>(int a1@<ebp>);
// int __usercall sub_45E568@<eax>(int a1@<ebp>);
// int __usercall sub_45E57C@<eax>(int a1@<ebp>);
// int __usercall sub_45E590@<eax>(int a1@<ebp>);
// int __usercall sub_45E5A4@<eax>(int a1@<ebp>);
// int __usercall sub_45E5B8@<eax>(int a1@<ebp>);
// int __usercall sub_45E5CC@<eax>(int a1@<ebp>);
// int __usercall sub_45E5E8@<eax>(int a1@<ebp>);
// int __usercall sub_45E5FC@<eax>(int a1@<ebp>);
// int __usercall sub_45E610@<eax>(int a1@<ebp>);
// int __usercall sub_45E624@<eax>(int a1@<ebp>);
// int __usercall sub_45E638@<eax>(int a1@<ebp>);
// int __usercall sub_45E64C@<eax>(int a1@<ebp>);
// int __usercall sub_45E660@<eax>(int a1@<ebp>);
// int __usercall sub_45E674@<eax>(int a1@<ebp>);
// int __usercall sub_45E688@<eax>(int a1@<ebp>);
// BOOL __stdcall GetUserNameA(LPSTR lpBuffer, LPDWORD pcbBuffer);
// LSTATUS __stdcall RegCreateKeyExA(HKEY hKey, LPCSTR lpSubKey, DWORD Reserved, LPSTR lpClass, DWORD dwOptions, REGSAM samDesired, const LPSECURITY_ATTRIBUTES lpSecurityAttributes, PHKEY phkResult, LPDWORD lpdwDisposition);
// LSTATUS __stdcall RegSetValueExA(HKEY hKey, LPCSTR lpValueName, DWORD Reserved, DWORD dwType, const BYTE *lpData, DWORD cbData);
// LSTATUS __stdcall RegOpenKeyExA(HKEY hKey, LPCSTR lpSubKey, DWORD ulOptions, REGSAM samDesired, PHKEY phkResult);
// LSTATUS __stdcall RegQueryValueExA(HKEY hKey, LPCSTR lpValueName, LPDWORD lpReserved, LPDWORD lpType, LPBYTE lpData, LPDWORD lpcbData);
// LSTATUS __stdcall RegCloseKey(HKEY hKey);
// HGDIOBJ __stdcall GetStockObject(int i);
// HGDIOBJ __stdcall SelectObject(HDC hdc, HGDIOBJ h);
// BOOL __stdcall GetTextExtentPoint32A(HDC hdc, LPCSTR lpString, int c, LPSIZE psizl);
// COLORREF __stdcall SetTextColor(HDC hdc, COLORREF color);
// BOOL __stdcall TextOutA(HDC hdc, int x, int y, LPCSTR lpString, int c);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// BOOL __stdcall ReadFile(HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToRead, LPDWORD lpNumberOfBytesRead, LPOVERLAPPED lpOverlapped);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// HANDLE __stdcall CreateFileA(LPCSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
// DWORD __stdcall GetCurrentThreadId();
// void __stdcall GetLocalTime(LPSYSTEMTIME lpSystemTime);
// DWORD __stdcall SetFilePointer(HANDLE hFile, LONG lDistanceToMove, PLONG lpDistanceToMoveHigh, DWORD dwMoveMethod);
// void __stdcall OutputDebugStringA(LPCSTR lpOutputString);
// void __stdcall GetSystemInfo(LPSYSTEM_INFO lpSystemInfo);
// BOOL __stdcall GetFileTime(HANDLE hFile, LPFILETIME lpCreationTime, LPFILETIME lpLastAccessTime, LPFILETIME lpLastWriteTime);
// DWORD __stdcall GetFileSize(HANDLE hFile, LPDWORD lpFileSizeHigh);
// BOOL __stdcall FileTimeToDosDateTime(const FILETIME *lpFileTime, LPWORD lpFatDate, LPWORD lpFatTime);
// BOOL __stdcall FileTimeToLocalFileTime(const FILETIME *lpFileTime, LPFILETIME lpLocalFileTime);
// void __stdcall GlobalMemoryStatus(LPMEMORYSTATUS lpBuffer);
// LPSTR __stdcall lstrcpyA(LPSTR lpString1, LPCSTR lpString2);
// void __stdcall GetSystemTimeAsFileTime(LPFILETIME lpSystemTimeAsFileTime);
// LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
// void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall __noreturn ExitProcess(UINT uExitCode);
// BOOL __stdcall PostQueuedCompletionStatus(HANDLE CompletionPort, DWORD dwNumberOfBytesTransferred, ULONG_PTR dwCompletionKey, LPOVERLAPPED lpOverlapped);
// LONG __stdcall InterlockedExchange(volatile LONG *Target, LONG Value);
// BOOL __stdcall InitializeCriticalSectionAndSpinCount(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount);
// HANDLE __stdcall CreateTimerQueue();
// BOOL __stdcall DeleteTimerQueueEx(HANDLE TimerQueue, HANDLE CompletionEvent);
// BOOL __stdcall QueueUserWorkItem(LPTHREAD_START_ROUTINE Function, PVOID Context, ULONG Flags);
// DWORD __stdcall GetLastError();
// HANDLE __stdcall CreateIoCompletionPort(HANDLE FileHandle, HANDLE ExistingCompletionPort, ULONG_PTR CompletionKey, DWORD NumberOfConcurrentThreads);
// DWORD __stdcall WaitForMultipleObjects(DWORD nCount, const HANDLE *lpHandles, BOOL bWaitAll, DWORD dwMilliseconds);
// BOOL __stdcall SetEvent(HANDLE hEvent);
// HANDLE __stdcall CreateEventA(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCSTR lpName);
// BOOL __stdcall SetProcessPriorityBoost(HANDLE hProcess, BOOL bDisablePriorityBoost);
// BOOL __stdcall SwitchToThread();
// HANDLE __stdcall CreateSemaphoreA(LPSECURITY_ATTRIBUTES lpSemaphoreAttributes, LONG lInitialCount, LONG lMaximumCount, LPCSTR lpName);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// BOOL __stdcall ReleaseSemaphore(HANDLE hSemaphore, LONG lReleaseCount, LPLONG lpPreviousCount);
// BOOL __stdcall HeapDestroy(HANDLE hHeap);
// BOOL __stdcall DeleteFileA(LPCSTR lpFileName);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// BOOL __stdcall VirtualFree(LPVOID lpAddress, SIZE_T dwSize, DWORD dwFreeType);
// LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
// LPVOID __stdcall VirtualAlloc(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
// LPVOID __stdcall HeapReAlloc(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem, SIZE_T dwBytes);
// BOOL __stdcall GetQueuedCompletionStatus(HANDLE CompletionPort, LPDWORD lpNumberOfBytesTransferred, PULONG_PTR lpCompletionKey, LPOVERLAPPED *lpOverlapped, DWORD dwMilliseconds);
// int __stdcall MultiByteToWideChar(UINT CodePage, DWORD dwFlags, LPCSTR lpMultiByteStr, int cbMultiByte, LPWSTR lpWideCharStr, int cchWideChar);
// BOOL __stdcall GetDiskFreeSpaceExA(LPCSTR lpDirectoryName, PULARGE_INTEGER lpFreeBytesAvailableToCaller, PULARGE_INTEGER lpTotalNumberOfBytes, PULARGE_INTEGER lpTotalNumberOfFreeBytes);
// SIZE_T __stdcall VirtualQuery(LPCVOID lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength);
// BOOL __stdcall IsBadWritePtr(LPVOID lp, UINT_PTR ucb);
// int __stdcall lstrlenA(LPCSTR lpString);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// HANDLE __stdcall GetCurrentThread();
// HANDLE __stdcall GetCurrentProcess();
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// void __stdcall Sleep(DWORD dwMilliseconds);
// DWORD __stdcall GetTickCount();
// LONG __stdcall InterlockedIncrement(volatile LONG *lpAddend);
// BOOL __stdcall CreateTimerQueueTimer(PHANDLE phNewTimer, HANDLE TimerQueue, WAITORTIMERCALLBACK Callback, PVOID Parameter, DWORD DueTime, DWORD Period, ULONG Flags);
// LONG __stdcall InterlockedDecrement(volatile LONG *lpAddend);
// BOOL __stdcall HeapFree(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem);
// HANDLE __stdcall HeapCreate(DWORD flOptions, SIZE_T dwInitialSize, SIZE_T dwMaximumSize);
// BOOL __stdcall GetVersionExA(LPOSVERSIONINFOA lpVersionInformation);
// BOOL __stdcall DeleteTimerQueueTimer(HANDLE TimerQueue, HANDLE Timer, HANDLE CompletionEvent);
// DWORD __stdcall GetEnvironmentVariableA(LPCSTR lpName, LPSTR lpBuffer, DWORD nSize);
// SIZE_T __stdcall HeapSize(HANDLE hHeap, DWORD dwFlags, LPCVOID lpMem);
// void __stdcall GetStartupInfoA(LPSTARTUPINFOA lpStartupInfo);
// DWORD __stdcall GetVersion();
// LPSTR __stdcall GetCommandLineA();
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
// INT_PTR __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// BOOL __stdcall EndDialog(HWND hDlg, INT_PTR nResult);
// BOOL __stdcall SetWindowTextA(HWND hWnd, LPCSTR lpString);
// LRESULT __stdcall SendDlgItemMessageA(HWND hDlg, int nIDDlgItem, UINT Msg, WPARAM wParam, LPARAM lParam);
// int __stdcall wvsprintfA(LPSTR, LPCSTR, va_list arglist);
// int wsprintfA(LPSTR, LPCSTR, ...);
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// BOOL __stdcall MoveWindow(HWND hWnd, int X, int Y, int nWidth, int nHeight, BOOL bRepaint);
// LRESULT __stdcall DispatchMessageA(const MSG *lpMsg);
// BOOL __stdcall TranslateMessage(const MSG *lpMsg);
// BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax);
// UINT_PTR __stdcall SetTimer(HWND hWnd, UINT_PTR nIDEvent, UINT uElapse, TIMERPROC lpTimerFunc);
// BOOL __stdcall UpdateWindow(HWND hWnd);
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// ATOM __stdcall RegisterClassExA(const WNDCLASSEXA *);
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
// HWND __stdcall FindWindowA(LPCSTR lpClassName, LPCSTR lpWindowName);
// BOOL __stdcall DestroyWindow(HWND hWnd);
// BOOL __stdcall EndPaint(HWND hWnd, const PAINTSTRUCT *lpPaint);
// int __stdcall FillRect(HDC hDC, const RECT *lprc, HBRUSH hbr);
// BOOL __stdcall GetClientRect(HWND hWnd, LPRECT lpRect);
// HDC __stdcall BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint);
// HWND __stdcall CreateDialogParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// void __stdcall PostQuitMessage(int nExitCode);
// BOOL __stdcall InvalidateRect(HWND hWnd, const RECT *lpRect, BOOL bErase);
// struct hostent *__stdcall gethostbyname(const char *name);
// int __stdcall recv(SOCKET s, char *buf, int len, int flags);
// int __stdcall bind(SOCKET s, const struct sockaddr *name, int namelen);
// char *__stdcall inet_ntoa(struct in_addr in);
// unsigned __int32 __stdcall inet_addr(const char *cp);
// int __stdcall setsockopt(SOCKET s, int level, int optname, const char *optval, int optlen);
// int __stdcall WSACleanup();
// SOCKET __stdcall socket(int af, int type, int protocol);
// int __stdcall WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);
// BOOL __stdcall WSACloseEvent(HANDLE hEvent);
// int __stdcall WSAEventSelect(SOCKET s, HANDLE hEventObject, __int32 lNetworkEvents);
// HANDLE __stdcall WSACreateEvent();
// int __stdcall listen(SOCKET s, int backlog);
// u_long __stdcall htonl(u_long hostlong);
// int __stdcall WSAGetLastError();
// SOCKET __stdcall accept(SOCKET s, struct sockaddr *addr, int *addrlen);
// BOOL __stdcall WSAResetEvent(HANDLE hEvent);
// int __stdcall WSASend(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesSent, DWORD dwFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// int __stdcall WSARecv(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesRecvd, LPDWORD lpFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// int __stdcall send(SOCKET s, const char *buf, int len, int flags);
// int __stdcall getsockname(SOCKET s, struct sockaddr *name, int *namelen);
// u_short __stdcall htons(u_short hostshort);
// int __stdcall connect(SOCKET s, const struct sockaddr *name, int namelen);
// int __stdcall closesocket(SOCKET s);
// BOOL __stdcall SymGetSymFromAddr(HANDLE hProcess, DWORD dwAddr, PDWORD pdwDisplacement, PIMAGEHLP_SYMBOL Symbol);
// BOOL __stdcall StackWalk(DWORD MachineType, HANDLE hProcess, HANDLE hThread, LPSTACKFRAME StackFrame, PVOID ContextRecord, PREAD_PROCESS_MEMORY_ROUTINE ReadMemoryRoutine, PFUNCTION_TABLE_ACCESS_ROUTINE FunctionTableAccessRoutine, PGET_MODULE_BASE_ROUTINE GetModuleBaseRoutine, PTRANSLATE_ADDRESS_ROUTINE TranslateAddress);
// PVOID __stdcall SymFunctionTableAccess(HANDLE hProcess, DWORD AddrBase);
// DWORD __stdcall SymGetModuleBase(HANDLE hProcess, DWORD dwAddr);
// DWORD __stdcall SymSetOptions(DWORD SymOptions);
// BOOL __stdcall SymCleanup(HANDLE hProcess);
// BOOL __stdcall SymInitialize(HANDLE hProcess, PCSTR UserSearchPath, BOOL fInvadeProcess);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_441B73; // weak
_UNKNOWN loc_441D4D; // weak
_UNKNOWN loc_441D54; // weak
_UNKNOWN loc_4455F6; // weak
_UNKNOWN loc_4456CD; // weak
int (__stdcall *off_45F38C[2])(int) = { &sub_4020F0, &sub_405190 }; // weak
int (__stdcall *off_45F390)(int) = &sub_405190; // weak
_UNKNOWN unk_45F3D4; // weak
_UNKNOWN unk_45F3DC; // weak
_UNKNOWN unk_45F3E8; // weak
int (__stdcall *off_45F3EC)(int) = &sub_40F5F0; // weak
int (__stdcall *off_45F484)(int) = &sub_411650; // weak
int (__stdcall *off_45F4B0)(int) = &sub_414B00; // weak
int (__stdcall *off_45F51C[2])(int) = { &sub_417FD0, &sub_4181D0 }; // weak
int (__stdcall *off_45F520)(int) = &sub_4181D0; // weak
int (__stdcall *off_45F538)(int) = &sub_419610; // weak
int (__stdcall *off_45F574)(int) = &sub_419640; // weak
int (__stdcall *off_45F590)(int) = &sub_4196B0; // weak
int (__stdcall *off_45F5AC)(int) = &sub_419700; // weak
int (__stdcall *off_45F5C8)(int) = &sub_41E070; // weak
int (__stdcall *off_45F5F4)(int) = &sub_41E120; // weak
int (__stdcall *off_45F60C[2])(int) = { &sub_41EDD0, &std::strstream::`scalar deleting destructor' }; // weak
int (__stdcall *off_45F610)(int) = &std::strstream::`scalar deleting destructor'; // weak
_UNKNOWN unk_45F614; // weak
int (__stdcall *off_45F61C[3])(int) =
{
  &sub_41FCF0,
  &std::basic_filebuf<char,std::char_traits<char>>::overflow,
  &std::basic_filebuf<char,std::char_traits<char>>::pbackfail
}; // weak
int (__stdcall *off_45F668)(int) = &sub_426980; // weak
int (__stdcall *off_45F7DC[2])(int) = { &sub_4269D0, &sub_426A80 }; // weak
int (__stdcall *off_45F7E0)(int) = &sub_426A80; // weak
int (__stdcall *off_45F82C)(int) = &sub_42C520; // weak
int (__stdcall *off_45F854)(int) = &sub_42E660; // weak
int (__cdecl *off_45F858[2])(int, int, char *, char) = { &sub_42E0DD, &sub_42E2E0 }; // weak
int (__cdecl *off_45F85C)(int, int, char *, char) = &sub_42E2E0; // weak
int (__stdcall *off_45F860)(int) = &sub_42F460; // weak
int (__stdcall *off_45F8B4)(int) = &sub_42F4B0; // weak
int (__stdcall *off_45F8E0[2])(int) = { &sub_431A10, &sub_431E10 }; // weak
int (__stdcall *off_45F8E4)(int) = &sub_431E10; // weak
int (__stdcall *off_45F8FC)(int) = &sub_4329D0; // weak
int (__stdcall *off_45F90C)(int) = &sub_435290; // weak
_UNKNOWN unk_45F91C; // weak
int (__stdcall *off_45F920)(int) = &sub_4380F0; // weak
int (__stdcall *off_45F924)(int) = &sub_438120; // weak
int (__stdcall *off_45F944)(int) = &sub_43A050; // weak
int (__stdcall *off_45F9DC)(int) = &sub_43C610; // weak
int (__stdcall *off_45FA14)(int) = &sub_43C660; // weak
int (__stdcall *off_45FA44)(int) = &sub_40BB60; // weak
int (__stdcall *off_45FA4C)(int) = &std::istrstream::`scalar deleting destructor'; // weak
int (__stdcall *off_45FA5C)(int) = &std::strstreambuf::`scalar deleting destructor'; // weak
int (__stdcall *off_45FA94[3])(int) = { &sub_40BBA0, &unknown_libname_22, &unknown_libname_23 }; // weak
int (__stdcall *off_45FACC)(int) = &sub_40BB30; // weak
int (__stdcall *off_45FADC)(char) = &sub_43D414; // weak
_UNKNOWN unk_45FAF8; // weak
int (__stdcall *off_45FB24)(char) = &sub_43D6F0; // weak
int (__stdcall *off_45FB68)(char) = &sub_43D61D; // weak
int (__stdcall *off_45FBB0)(int) = &sub_423600; // weak
int (__stdcall *off_45FBB8)(char) = &sub_43E019; // weak
int (__stdcall *off_45FBD8)(int) = &sub_435740; // weak
int (__stdcall *off_45FBE8)(int) = &sub_435860; // weak
int (__stdcall *off_45FC8C)(int) = &sub_423F00; // weak
int (__stdcall *off_45FCAC)(char) = &sub_43F925; // weak
int (__stdcall *off_45FCC8)(char) = &sub_43F902; // weak
int (__stdcall *off_45FCE8)(char) = &sub_43F8DF; // weak
int (__stdcall *off_45FD14)(int) = &sub_423890; // weak
int (__stdcall *off_45FD64)(int) = &sub_423400; // weak
int (__stdcall *off_45FD88)(char) = &sub_4415E3; // weak
int (__stdcall *off_45FD98)(char) = &sub_441D2A; // weak
int (__stdcall *off_45FDB8)(char) = &sub_443692; // weak
int (__stdcall *off_45FDC4)(char) = &sub_443836; // weak
int (__stdcall *off_45FDE4)(char) = &sub_44381A; // weak
int (__stdcall *off_45FE10)(char) = &sub_4437FE; // weak
int (__stdcall *off_45FE3C)(char) = &sub_4437DB; // weak
int (__stdcall *off_45FE4C)(char) = &sub_4437B8; // weak
int (__stdcall *off_45FE5C)(char) = &sub_443779; // weak
int (__stdcall *off_45FE70)(char) = &sub_443756; // weak
int (__stdcall *off_45FE84)(char) = &sub_44370E; // weak
int (__stdcall *off_45FEA0)(char) = &sub_4436EB; // weak
int (__stdcall *off_45FEC0)(char) = &sub_4436C8; // weak
int (__stdcall *off_45FEEC)(char) = &sub_443656; // weak
_UNKNOWN unk_45FF28; // weak
int (__stdcall *off_45FF54)(char) = &sub_4438AE; // weak
int (__stdcall *off_4600C8)(char) = &sub_4486DF; // weak
int (__stdcall *off_4600D4)(char) = &sub_4486A0; // weak
int (__stdcall *off_4600F4)(char) = &sub_448684; // weak
int (__stdcall *off_460120)(char) = &sub_448668; // weak
int (__stdcall *off_46014C)(char) = &sub_448645; // weak
int (__stdcall *off_46015C)(char) = &sub_448622; // weak
int (__stdcall *off_46016C)(char) = &sub_4485E3; // weak
int (__stdcall *off_460180)(char) = &sub_4485C0; // weak
int (__stdcall *off_460194)(char) = &sub_44874E; // weak
int (__stdcall *off_460258)(char) = &sub_44DBEE; // weak
_UNKNOWN unk_462ED8; // weak
_UNKNOWN unk_463570; // weak
_UNKNOWN unk_4635E0; // weak
_UNKNOWN unk_463A58; // weak
_UNKNOWN unk_463AC8; // weak
_UNKNOWN unk_463D10; // weak
_UNKNOWN unk_464490; // weak
char aSelectReasonMs[] = " Select reason, msg From block_msg with (nolock) Where uid = %d"; // idb
wchar_t aS[] = L"%S"; // idb
char aCallDbo_ap_gst[] = "{CALL dbo.ap_GStat (?,?,?,?,?,?,?,?,?,?) }"; // idb
char aSelectSsnFromU[] = "Select ssn From user_info with (nolock) Where account = '%s'"; // idb
char aCallDbo_ap_gpw[] = "{CALL dbo.ap_GPwd (?,?) }"; // idb
char aCallDbo_ap_g_0[] = "{CALL dbo.ap_GPwdWithFlag(?,?,?) }"; // idb
char aCallDbo_ap_sne[] = "{CALL dbo.ap_SNewPwd(?,?) }"; // idb
char aWantedUserLogo[] = "Wanted User LogOut, %s"; // idb
char aCb[3] = "cb"; // weak
char aCc[3] = "cc"; // weak
char aCdsdddd[8] = "cdsdddd"; // weak
char aCc_0[3] = "cc"; // weak
char aCddddddddd[11] = "cddddddddd"; // weak
char aCdcs[5] = "cdcs"; // weak
char aCc_1[3] = "cc"; // weak
char aCdcs_0[5] = "cdcs"; // weak
char aCdcs_1[5] = "cdcs"; // weak
char aCc_2[3] = "cc"; // weak
char aCb_0[3] = "cb"; // weak
char aD_D_D_D[] = "%d.%d.%d.%d"; // idb
char aCallDbo_ap_slo[] = "{CALL dbo.ap_SLog (?,?,?,?,?,?) }"; // idb
char aDDDDDDDDDDDDSD[] = "%d-%d-%d %d:%d:%d,%d-%d-%d %d:%d:%d,%s,%d,%s,%d,%d,%d,%06d%07d,%d,%d,%d,%d\r\n"; // idb
char aCallDbo_ap_sus[] = "{CALL dbo.ap_SUserTime (?,?) }"; // idb
char aCallDbo_ap_log[] = "{CALL dbo.ap_LogoutWithPoint( ?,?,? )}"; // idb
char aCc_3[3] = "cc"; // weak
char aCallDbo_ap_gus[] = "{CALL dbo.ap_GUserTime (?,?) }"; // idb
char aCc_4[3] = "cc"; // weak
char aSelectUser_dat[] = "SELECT user_data FROM user_data with (nolock) WHERE  uid = %d"; // idb
char aCdsdddbd[9] = "cdsdddbd"; // weak
char aCdsdddd_0[8] = "cdsdddd"; // weak
char aCc_5[3] = "cc"; // weak
char aCc_6[3] = "cc"; // weak
char aSelectUser_cha[] = "SELECT user_char_num FROM user_data with (nolock) WHERE uid = %d"; // idb
char aInsertIntoUser[] = "INSERT INTO user_char ( uid, world_id, char_id ) values ( %d, %d, %d)"; // idb
char aUpdateUser_dat[] = "update user_data set user_char_num = user_char_num + 1 WHERE uid = %d"; // idb
char aCallDbo_ap_del[] = "{CALL dbo.ap_delchar (?,?,?) }"; // idb
char aUpdateUser_cha[] = "UPDATE user_char set char_id=%d, world_id=%d WHERE uid =%d and char_id = %d and world_id = %d"; // idb
_UNKNOWN unk_4676EC; // weak
_UNKNOWN unk_467734; // weak
int dword_468734[] = { 608135816 }; // weak
int dword_468738[] = { 2242054355 }; // weak
int dword_46873C = 320440878; // weak
int dword_468740 = 57701188; // weak
int dword_468744 = 2752067618; // weak
int dword_468748 = 698298832; // weak
int dword_46874C = 137296536; // weak
int dword_468750 = 3964562569; // weak
int dword_468754 = 1160258022; // weak
int dword_468758 = 953160567; // weak
int dword_46875C = 3193202383; // weak
int dword_468760 = 887688300; // weak
int dword_468764 = 3232508343; // weak
int dword_468768 = 3380367581; // weak
int dword_46876C = 1065670069; // weak
int dword_468770 = 3041331479; // weak
int dword_468774 = 2450970073; // weak
int dword_468778 = 2306472731; // weak
int dword_46877C[] = { 3509652390 }; // weak
int dword_468780[] = { 2564797868 }; // weak
int dword_468B7C[] = { 1266315497 }; // weak
int dword_468F7C[] = { 3913112168 }; // weak
int dword_46937C[] = { 976866871 }; // weak
char dword_46977C[] = { '8', '', '\0', '\0' }; // idb
_UNKNOWN unk_469780; // weak
_UNKNOWN unk_4697C0; // weak
char byte_469800[] = { '9' }; // weak
char byte_469838[] = { '\x01' }; // weak
char byte_469848[] = { '\x0E' }; // weak
char byte_469878[] = { '\x0E' }; // weak
char byte_469A78[] = { '\x10' }; // weak
_BYTE dword_469A98[32] =
{
  128,
  0,
  0,
  0,
  64,
  0,
  0,
  0,
  32,
  0,
  0,
  0,
  16,
  0,
  0,
  0,
  8,
  0,
  0,
  0,
  4,
  0,
  0,
  0,
  2,
  0,
  0,
  0,
  1,
  0,
  0,
  0
}; // idb
int dword_469AB8[] = { 8 }; // weak
char aInsertTwiceSAt[] = "Insert twice %s at line %d in %s"; // idb
char aInvalidStateAt[] = "Invalid state at line %d in %s"; // idb
char aInvalidTokenSA[] = "Invalid token %s at line %d in %s"; // idb
char aCanTLoadS[] = "Can't load %s"; // idb
char aServerport[] = "serverPort"; // idb
char aServerexport[] = "serverExPort"; // idb
char aServerintport[] = "serverIntPort"; // idb
char aWorldport[] = "WorldPort"; // idb
char aDbconnectionnu[] = "DBConnectionNum"; // idb
char aNumserverthrea[] = "numServerThread"; // idb
char aNumserverintth[] = "numServerIntThread"; // idb
char aGameid[] = "GameID"; // idb
char aSockettimeout[] = "SocketTimeOut"; // idb
char aSocketlimit[] = "SocketLimit"; // idb
char aAcceptcallnum[] = "AcceptCallNum"; // idb
char aWaitinguserlim[] = "WaitingUserLimit"; // idb
char aPacketsizetype[] = "PacketSizeType"; // idb
char aEncrypt[] = "Encrypt"; // idb
char aLogdirectory[] = "logDirectory"; // idb
char aProtocolversio[] = "ProtocolVersion"; // idb
char aDesapply[] = "DesApply"; // idb
char aDeskey[] = "deskey"; // idb
char aReadlocalserve[] = "ReadLocalServerList"; // idb
char aOnetimelogout[] = "OneTimeLogOut"; // idb
char aGmcheckmode[] = "GMCheckMode"; // idb
char aCountrycode[] = "CountryCode"; // idb
char aUserdata[] = "UserData"; // idb
char aDevconnectoute[] = "DevConnectOuter"; // idb
char aDevserverip[] = "DevServerIP"; // idb
char aDumppacket[] = "DumpPacket"; // idb
char aPccafefirst[] = "PCCafeFirst"; // idb
char aUseipserver[] = "UseIPServer"; // idb
char aIpserver[] = "IPServer"; // idb
char aIpport[] = "IPPort"; // idb
char aIpinterval[] = "IPInterval"; // idb
char aUselogd[] = "uselogd"; // idb
char aLogdip[] = "logdip"; // idb
char aLogdport[] = "logdport"; // idb
char aLogdconnectint[] = "logdconnectinterval"; // idb
char aRestrictgmip[] = "RestrictGMIP"; // idb
char aGmip[] = "GMIP"; // idb
char aUsewantedsyste[] = "UseWantedSystem"; // idb
char aWantedip[] = "WantedIP"; // idb
char aWantedport[] = "WantedPort"; // idb
char aWantedreconnec[] = "WantedReconnectInterval"; // idb
char aIpaccesslimit[] = "IPAccessLimit"; // idb
char aFreeserver[] = "FreeServer"; // idb
char aUseforbiddenip[] = "useForbiddenIPList"; // idb
char aSupportreconne[] = "supportReconnect"; // idb
char aMailserver[] = "mailServer"; // idb
char aMailfrom[] = "mailFrom"; // idb
char aMailto[] = "mailTo"; // idb
char aNewserverlist[] = "NewServerList"; // idb
char aAutokickaccoun[] = "AutoKickAccount"; // idb
char aNewencrypt[] = "NewEncrypt"; // idb
char aYes[] = "yes"; // idb
char aTrue[] = "true"; // idb
char a1[] = "1"; // idb
char aEditorModeSD[] = "Editor Mode, %s=%d\n"; // idb
int (__cdecl *off_469E98[2])(int, int) = { &sub_40E560, &sub_40E917 }; // weak
char a0_2[2] = "0"; // idb
char a0_3[2] = "0"; // idb
char a1_7[2] = "1"; // idb
char aD_12[3] = "%d"; // idb
char a0IncorrectForm[19] = "0,incorrect format"; // weak
char aSelectUidFromU[] = "SELECT uid FROM user_account with (NOLOCK) WHERE account = '%s'"; // idb
char a0Invalidaccoun[] = "0,InvalidAccount"; // idb
char a1_0[] = "1"; // idb
char a0Invalidacco_0[] = "0,InvalidAccount"; // idb
char a0IncorrectFo_0[] = "0,Incorrect Format"; // idb
char aGmOnlyModeOff[] = "GM ONLY MODE OFF"; // idb
char a1_1[] = "1"; // idb
char aGmOnlyModeOn[] = "GM ONLY MODE ON"; // idb
char a1_2[] = "1"; // idb
char aChangeSocketli[] = "Change socketlimit, %d"; // idb
char a1_3[] = "1"; // idb
char a0[] = "0"; // idb
char aChangeGmipD_D_[] = "Change GMIP, %d.%d.%d.%d"; // idb
char a1_4[] = "1"; // idb
char a0_0[] = "0"; // idb
char aConfigFreeserv[] = "Config FreeServer is chaged to false"; // idb
char a1_5[] = "1"; // idb
char aConfigFreese_0[] = "Config FreeServer is changed to true"; // idb
char a1_6[] = "1"; // idb
char a0_1[] = "0"; // idb
char aOchk201ErrorS[] = "-OCHK\t201\tError\t%s\r\n"; // idb
char aOchk202ErrorS[] = "-OCHK\t202\tError\t%s\r\n"; // idb
char aOchkDSD[] = "+OCHK\t%d\t%s\t%d\r\n"; // idb
char aOchkDSD_0[] = "+OCHK\t%d\t%s\t%d\r\n"; // idb
char aOchk003Error[] = "-OCHK\t003\tError\r\n"; // idb
char aOchk003Error_0[] = "-OCHK\t003\tError\r\n"; // idb
char aOchk004[] = "-OCHK\t004\t\n"; // idb
char aD[] = "%d"; // idb
char aD_0[] = "%d"; // idb
char aD_1[] = "%d"; // idb
char aD_2[] = "%d"; // idb
char aD_3[] = "%d"; // idb
char aD_4[] = "%d"; // idb
char aS_0[] = "%s"; // idb
char aC[] = "%c"; // idb
char aCdcs_2[5] = "cdcs"; // weak
char aD_5[] = "%d"; // idb
char aD_6[] = "%d"; // idb
char aD_7[] = "%d"; // idb
char aD_8[] = "%d"; // idb
char aD_9[] = "%d"; // idb
char aD_10[] = "%d"; // idb
char aCloseConnectio[] = "*close connection from %s, %x(%x)"; // idb
char aD_11[] = "%d"; // idb
int (__cdecl *off_46A12C[9])(int, char) =
{
  &sub_40F680,
  &sub_40F7B1,
  &sub_40F8B2,
  &sub_40F900,
  &sub_40FA11,
  &sub_40FAF4,
  &sub_40FB53,
  &sub_40FB7E,
  &sub_40FB97
}; // weak
char aCdcs_3[5] = "cdcs"; // weak
char aCdcs_4[5] = "cdcs"; // weak
char aCddc[5] = "cddc"; // weak
char aCdcs_5[5] = "cdcs"; // weak
char aCc_7[3] = "cc"; // weak
char aQuitGameErrorU[] = "quit game error, uid %d, reason %d, usetime %d\r\n"; // idb
char aCd_2[3] = "cd"; // weak
char aUpdateUser_d_0[] = "UPDATE user_data SET user_data=? WHERE uid = %d"; // idb
char aUpdateWorldsta[] = "update worldstatus set status=1 where idx=%d"; // idb
char aSelectSsnFro_0[] = "Select ssn From user_info with (nolock) Where account = '%s'"; // idb
char aCd[3] = "cd"; // weak
char aCcddchb[8] = "ccddchb"; // weak
char aCcddc[6] = "ccddc"; // weak
char aCdccchb[8] = "cdccchb"; // weak
char aCc_8[3] = "cc"; // weak
char aCddd[5] = "cddd"; // weak
char aCc_9[3] = "cc"; // weak
char aDServeridIsMan[] = "%d serverid is manage servers (not allow protocol)"; // idb
char aUpdateWorlds_0[] = "update worldstatus set status=%d where idx=%d"; // idb
char aCb_1[3] = "cb"; // weak
char aDAssembleTooLa[] = "%d: assemble too large packet. format %s"; // idb
char aCloseConnect_0[] = "*close connection from %s, %x(%x)"; // idb
char aDDDDDDMainServ[] = "%d-%d-%d %d:%d:%d,main server connection close from %s, 0x%x\r\n"; // idb
char aUpdateWorlds_1[] = "update worldstatus set status=0 where idx=%d"; // idb
char aDBadPacketSize[] = "%d: bad packet size %d"; // idb
char aUnknownProtoco[] = "unknown protocol %d"; // idb
char aMainServerConn[] = "main server connection close. invalid status and protocol %s, errorNum :%d\r\n"; // idb
char aCdd[4] = "cdd"; // weak
char aUpdateWorlds_2[] = "update worldstatus set status=1 where idx=%d"; // idb
char aDAssembleToo_0[] = "%d: assemble too large packet. format %s"; // idb
char aCdcs_6[5] = "cdcs"; // weak
char aDbLoginFailed[] = "db login failed"; // idb
char aDbEnvAllocatio[] = "db env allocation failed"; // idb
char aHdbcAllocation[] = "hdbc allocation failed"; // idb
char aStmtAllocation[] = "stmt allocation failed"; // idb
char aHdbcConnection[] = "hdbc connection failed"; // idb
char aHdbcAllocati_0[] = "hdbc allocation failed"; // idb
char aL2conn[7] = "L2Conn"; // weak
char aSldb[5] = "sldb"; // weak
CHAR SubKey[] = "Software\\NCSoft\\L2AUTHD"; // idb
char aL2conn_0[7] = "L2Conn"; // weak
char aSldb_0[5] = "sldb"; // weak
CHAR aSoftwareNcso_0[] = "Software\\NCSoft\\L2AUTHD"; // idb
char aDbRecoverySucc[] = "db recovery succeeded"; // idb
char aDbRecoveryFail[] = "db recovery failed: env allocation"; // idb
char aDbRecoveryFa_0[] = "db recovery failed: login impossible"; // idb
char aL2conn_1[7] = "L2Conn"; // weak
char aL2OdbcConnecti[24] = "L2 ODBC Connection Info"; // weak
char aFiledsn[] = "FILEDSN="; // idb
char aUid[] = ";UID="; // idb
char aPwd[] = ";PWD="; // idb
char aFetchErrorD[] = "Fetch error = %d"; // idb
char aSqlS[] = "sql: %s"; // idb
char aSS[] = "%s:%s"; // idb
char a08s01[] = "08S01"; // idb
char a23000[] = "23000"; // idb
char aSqlS_0[] = "sql: %s"; // idb
char aSS_0[] = "%s:%s"; // idb
_UNKNOWN unk_46A8FC; // weak
_UNKNOWN unk_46A93C; // weak
char byte_46A97C[] = { '9' }; // weak
char byte_46A9B4[] = { '\x01' }; // weak
char byte_46A9C4[] = { '\x0E' }; // weak
char byte_46A9F4[] = { '\x0E' }; // weak
char byte_46ABF4[] = { '\x10' }; // weak
_BYTE dword_46AC14[32] =
{
  128,
  0,
  0,
  0,
  64,
  0,
  0,
  0,
  32,
  0,
  0,
  0,
  16,
  0,
  0,
  0,
  8,
  0,
  0,
  0,
  4,
  0,
  0,
  0,
  2,
  0,
  0,
  0,
  1,
  0,
  0,
  0
}; // idb
int dword_46AC34[] = { 8 }; // weak
char buf[] = "HELO main1.ncsoft.co.kr\r\n"; // idb
char aMailFromDarkan[] = "MAIL From: <darkangel@ncsoft.co.kr>\r\n"; // idb
char aRcptToDarkange[] = "RCPT To: <darkangel@ncsoft.co.kr>\r\n"; // idb
char aData[] = "DATA\r\n"; // idb
char a_[] = "\r\n.\r\n"; // idb
char aQuit[] = "QUIT\r\n"; // idb
CHAR aCallStackInfor[] = "\r\nCall Stack Information\r\n"; // idb
CHAR a08x08x[] = "%08x  %08x  "; // idb
CHAR aSX[] = "%s+%x "; // idb
char aUnknown[8] = "Unknown"; // weak
CHAR a04x08xS[] = "%04x:%08x %s\r\n"; // idb
CHAR aParams08x08x08[] = "Params: %08x %08x %08x %08x\r\n"; // idb
CHAR aSBytesAtCsEip[] = "[%s] Bytes at CS:EIP: "; // idb
CHAR a02x[] = "%02x "; // idb
CHAR asc_46B030[] = "\r\n\r\n"; // idb
CHAR aIntelCallStack[] = "\r\nIntel Call Stack Information\r\n"; // idb
CHAR a08x08x04x08xS[] = "%08x  %08x  %04x:%08x %s\r\n"; // idb
CHAR aBytesAtCsEip[] = "Bytes at CS:EIP: "; // idb
CHAR a02x_0[] = "%02x "; // idb
CHAR asc_46B098[] = "\r\n\r\n"; // idb
char aDarkangel_ncso[] = "darkangel@ncsoft.co.kr"; // idb
char aServer_ncsoft_[20] = "server@ncsoft.co.kr"; // weak
char aMailFromS[] = "MAIL From: <%s>\r\n"; // idb
char aRcptToS[] = "RCPT To: <%s>\r\n"; // idb
CHAR OutputString[] = "Error creating exception report"; // idb
CHAR aD04d02d02d02d0[] = "[(%d) %04d/%02d/%02d %02d:%02d:%02d]: =======================\r\n"; // idb
char aUnknown_0[8] = "Unknown"; // weak
CHAR aSInModuleSAt04[] = "%s in module %s at %04x:%08x.\r\n"; // idb
CHAR aExceptionHandl[] = "Exception handler called in the L2AuthD Server.\r\n"; // idb
CHAR aStartAtDDD02d0[] = "start at %d/%d/%d %02d:%02d:%02d\r\n"; // idb
char aReadFrom[10] = "Read from"; // weak
char aWriteTo[9] = "Write to"; // weak
CHAR aSLocation08xCa[] = "%s location %08x caused an access violation.\r\n"; // idb
CHAR aS_1[] = "%s"; // idb
CHAR asc_46B21C[] = "\r\n"; // idb
CHAR aRegisters[] = "Registers:\r\n"; // idb
CHAR aEax08xCs04xEip[] = "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n"; // idb
CHAR aEbx08xSs04xEsp[] = "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n"; // idb
CHAR aEcx08xDs04xEsi[] = "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n"; // idb
CHAR aEdx08xEs04xEdi[] = "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n"; // idb
CHAR aBytesAtCsEip_0[] = "Bytes at CS:EIP:\r\n"; // idb
CHAR a02x_1[] = "%02x "; // idb
CHAR aStackDump[] = "\r\nStack dump:\r\n"; // idb
CHAR a08x[] = "%08x: "; // idb
char asc_46B300[2] = " "; // weak
char asc_46B304[3] = "\r\n"; // weak
CHAR a08xS[] = "%08x%s"; // idb
CHAR aS_2[] = "%s"; // idb
CHAR aS_3[] = "%s"; // idb
CHAR aModuleListName[] = "\r\n\tModule list: names, addresses, sizes, time stamps and file times:\r\n"; // idb
CHAR aFileDateIs[] = " - file date is "; // idb
CHAR aSLoadedAt0x08x[] = "%s, loaded at 0x%08x - %d bytes - %08x%s\r\n"; // idb
CHAR aDDD02d02d02d[] = "%d/%d/%d %02d:%02d:%02d"; // idb
CHAR aErrorOccurredA[] = "Error occurred at %s.\r\n"; // idb
CHAR String2[] = "Unknown"; // idb
CHAR aUnknown_2[] = "Unknown"; // idb
CHAR aSRunByS_[] = "%s, run by %s.\r\n"; // idb
CHAR aDProcessorSTyp[] = "%d processor(s), type %d.\r\n"; // idb
CHAR aDMbytesPhysica[] = "%d MBytes physical memory.\r\n"; // idb
char aAControlC[12] = "a Control-C"; // weak
char aAControlBreak[16] = "a Control-Break"; // weak
char aADatatypeMisal[24] = "a Datatype Misalignment"; // weak
char aABreakpoint[13] = "a Breakpoint"; // weak
char aAnAccessViolat[20] = "an Access Violation"; // weak
char aAnInPageError[17] = "an In Page Error"; // weak
char aANoMemory[12] = "a No Memory"; // weak
char aAnIllegalInstr[23] = "an Illegal Instruction"; // weak
char aANoncontinuabl[27] = "a Noncontinuable Exception"; // weak
char aAnInvalidDispo[23] = "an Invalid Disposition"; // weak
char aAArrayBoundsEx[24] = "a Array Bounds Exceeded"; // weak
char aAFloatDenormal[25] = "a Float Denormal Operand"; // weak
char aAFloatDivideBy[23] = "a Float Divide by Zero"; // weak
char aAFloatInexactR[23] = "a Float Inexact Result"; // weak
char aAFloatInvalidO[26] = "a Float Invalid Operation"; // weak
char aAFloatOverflow[17] = "a Float Overflow"; // weak
char aAFloatStackChe[20] = "a Float Stack Check"; // weak
char aAFloatUnderflo[18] = "a Float Underflow"; // weak
char aAnIntegerDivid[26] = "an Integer Divide by Zero"; // weak
char aAnIntegerOverf[20] = "an Integer Overflow"; // weak
char aAPrivilegedIns[25] = "a Privileged Instruction"; // weak
char aAStackOverflow[17] = "a Stack Overflow"; // weak
char aADllInitializa[28] = "a DLL Initialization Failed"; // weak
char aAMicrosoftCExc[26] = "a Microsoft C++ Exception"; // weak
char aUnknownExcepti[23] = "Unknown exception type"; // weak
CHAR aL2authderror_t[] = "L2AuthDError.txt"; // idb
char aD04d02d02d02_0[] = "[(%d) %04d/%02d/%02d %02d:%02d:%02d]: "; // idb
char aDarkangel_nc_0[] = "darkangel@ncsoft.co.kr"; // idb
char aServer_ncsof_0[20] = "server@ncsoft.co.kr"; // weak
char aDarkangel_nc_1[] = "darkangel@ncsoft.co.kr"; // idb
char aServer_ncsof_1[20] = "server@ncsoft.co.kr"; // weak
volatile LONG dword_46B798 = 4294967295; // idb
volatile LONG dword_46B79C = 4294967295; // idb
char aSocketErrorD[] = "socket error %d"; // idb
char aBindErrorD[] = "bind error %d"; // idb
char aListenErrorD[] = "listen error %d"; // idb
char aRegisterwaitEr[] = "RegisterWait error on port %d"; // idb
char aAcceptErrorD[] = "accept error: %d"; // idb
char aServercloseCre[] = "ServerClose:CreateSocket Fail"; // idb
char aNewWorldServer[] = "*new world server connection from %d.%d.%d.%d"; // idb
char aNonRegisteredW[] = "non-registered world server %d.%d.%d.%d"; // idb
char aIpD_D_D_DWorld[] = "ip: %d.%d.%d.%d world server socket already used"; // idb
char aServerReadyOnP[] = "server ready on port %d"; // idb
char aAcceptErrorD_0[] = "accept error: %d"; // idb
char aNewInteractive[] = "*new interactive socket connection from %d.%d.%d.%d"; // idb
char aInteractiveSer[] = "interactive server ready on port %d"; // idb
char aCioserverexCon[] = "CIOServerEx Constructor create socket timer fails"; // idb
char aSocketErrorD_0[] = "socket error %d"; // idb
char aAcceptexErrorD[] = "AcceptEx error %d"; // idb
char aAcceptexThread[] = "AcceptEx Thread Added %d"; // idb
char aAcceptexSocket[] = "acceptex socket error %d"; // idb
char aBindPortDError[] = "bind(port %d) error %d"; // idb
char aListenErrorD_0[] = "listen error %d"; // idb
char aCreateiocomple[] = "CreateIoCompletionPort: %d %x %x\n"; // idb
char aServiceReadyOn[] = "service ready on port %d"; // idb
char aAccesslimitExp[] = "AccessLimit Expire,%d.%d.%d.%d"; // idb
volatile LONG dword_46BAFC = 4294967295; // idb
char aInitilizeCompl[] = "Initilize CompletionPort Error CloseSocket"; // idb
char aInvalidSocket[] = "Invalid Socket!"; // idb
char aDifferentWrite[] = "different write count %x(%x) %d != %d"; // idb
char aCiosocketWrite[] = "CIOSocket::WriteCallback %x(%x) err=%d"; // idb
char aCiosocketReadX[] = "CIOSocket::Read %x(%x) err = %d"; // idb
char aCiosocketWri_0[] = "CIOSocket::Write %x(%x) err=%d"; // idb
char aServerclosePac[] = "ServerClose:PacketServerClose"; // idb
char asc_46BBEC[] = " \t"; // idb
char asc_46BBF0[] = " \t"; // idb
char aIplistStartAdd[] = "IPList: start address address is greater than end address at line %d"; // idb
char aIplistAddressI[] = "IPList: address is merged with %d.%d.%d.%d-%d.%d.%d.%d at line %d"; // idb
char aIplistAddres_0[] = "IPList: address is merged with %d.%d.%d.%d-%d.%d.%d.%d at line %d"; // idb
char aIplistLoadedFr[] = "IPList loaded from %s"; // idb
char aMissingLocaleF[21] = "missing locale facet"; // weak
char aC_0[] = "C"; // idb
volatile LONG dword_46BD30 = 4294967295; // idb
int (__cdecl *off_46BD34)(int, char) = &sub_42593E; // weak
char aIpsockettimerr[] = "IPSocketTimerRoutine"; // idb
char aCsddd[6] = "csddd"; // weak
char aCddddd[7] = "cddddd"; // weak
char aCc_23[3] = "cc"; // weak
char aCallDummypacke[] = "Call DummyPacket What What What"; // idb
char aIpsocketDelete[] = "IPSocket Deleted"; // idb
char aCloseConnect_1[] = "*close connection IPServer from %s, %x(%x)"; // idb
char aCdc[4] = "cdc"; // weak
char aDBadPacketSi_0[] = "%d: bad packet size %d"; // idb
char aUnknownProto_0[] = "unknown protocol %d"; // idb
char aDAssembleToo_1[] = "%d: assemble too large packet. format %s"; // idb
char aCddddcddsd[11] = "cddddcddsd"; // weak
char aCdddcdd_0[8] = "cdddcdd"; // weak
char aCdddcdd_1[8] = "cdddcdd"; // weak
char a_5_9431Xt[21] = "_;5.]94-31==-%xT!^[$"; // weak
char aC_1[2] = "c"; // weak
CHAR WindowName[] = "AuthServer"; // idb
CHAR Caption[] = ""; // idb
CHAR Text[8] = " "; // idb
char a932X11sa4sd__a[40] = "9=3*2;x]11sa;/4sd.%+$@a*'!2z0~g`{z]?n8("; // weak
char aAuthserver_0[11] = "AuthServer"; // weak
char aWsastartupErro[] = "WSAStartup error 0x%x"; // idb
char aAuthserverD[] = "AuthServer-%d"; // idb
CHAR aReset[] = "Reset"; // idb
CHAR ClassName[] = "BUTTON"; // idb
CHAR aReload[] = "Reload"; // idb
CHAR aButton_0[] = "BUTTON"; // idb
char aEtcConfig_txt[] = "etc/config.txt"; // idb
char aTest[5] = "TEST"; // weak
char aLog[] = "log"; // idb
char aErrorLoadConfi[] = "Error load config.txt"; // idb
char aLoadedConfig[] = "LOADED Config"; // idb
char aBuildnumberD[] = "BuildNumber : %d"; // idb
char aAcceptcallnull[33] = "AcceptCallNull  0   "; // idb
char aSockettimeout0[41] = "SocketTimeOut 0 Connection  "; // idb
char aWaitinguserl_0[45] = "WaitingUserLimit 0 Connection "; // idb
char aV[8] = " "; // idb
char aLoadForbiddenI[] = "LOAD FORBIDDEN IP LIST"; // idb
char aEtcBlockips_tx[17] = "etc\\BlockIPs.txt"; // weak
char aSendmailInitia[] = "Sendmail initialize Fail"; // idb
char aUpdateWorlds_3[] = "update worldstatus set status=0"; // idb
char aReadlockFailed[] = "ReadLock failed on dataLock"; // idb
char aWriteunlockSem[] = "WriteUnlock semaphore was not locked"; // idb
COLORREF color = 0u; // idb
char aWinlog[] = "winlog"; // idb
char aUse[] = "use"; // idb
char aAct[] = "act"; // idb
char aErr[] = "err"; // idb
char aLog_0[] = "log"; // idb
CHAR String[] = "H"; // idb
char aS04d02d02d_02d[] = "%s\\%04d-%02d-%02d.%02d.%s"; // idb
char aA[] = "a"; // idb
char a02d_02d_02d02d[] = "%02d.%02d.%02d %02d:%02d.%02d: "; // idb
char aS_4[] = "%s\r\n"; // idb
char aS04d02d02d_0_0[] = "%s\\%04d-%02d-%02d.%02d.%s"; // idb
char aA_0[] = "a"; // idb
char aS04d02d02d_0_1[] = "%s\\%04d-%02d-%02d.%02d.%s"; // idb
char aS04d02d02d_0_2[] = "%s\\%04d-%02d-%02d.%02d.%s"; // idb
char aS04d02d02d1000[] = "%s\\%04d-%02d-%02d-100%02d-201-authd-in%d.%s"; // idb
char aS04d02d02d10_0[] = "%s\\%04d-%02d-%02d-100%02d-201-authd-in0.%s"; // idb
char aS04d02d02d10_1[] = "%s\\%04d-%02d-%02d-100%02d-201-authd-in1.%s"; // idb
volatile LONG dword_46CB44 = 4294967295; // idb
void *off_46CB48 = &sub_42EB08; // weak
char aCallDummypac_0[] = "Call DummyPacket What What What"; // idb
char aDeleteLogsocke[] = "DELETE LogSocket 0x%x"; // idb
char aDBadPacketSi_1[] = "%d: bad packet size %d"; // idb
char aUnknownProto_1[] = "unknown protocol %d"; // idb
char aLogdServerConn[] = "logd server connection close. invalid status and protocol %s, errorNum :%d\r\n"; // idb
char aCd_0[3] = "cd"; // weak
char aCdd_0[4] = "cdd"; // weak
char aLogdsocketCall[] = "logdsocket Call invalid"; // idb
char aDAssembleToo_2[] = "%d: assemble too large packet. format %s"; // idb
char aLogdsocketCa_0[] = "logdsocket Call invalid send2"; // idb
char aDAssembleToo_3[] = "%d: assemble too large packet. format %s"; // idb
char aCloseLogdConne[] = "*close logd connection from %s, %x(%x)"; // idb
char aDDDDDDMainSe_0[] = "%d-%d-%d %d:%d:%d,main server connection close from %s, 0x%x\r\n"; // idb
volatile LONG dword_46CEA0 = 4294967295; // idb
char aPutback[] = "putback"; // idb
char aUnexpectedChar[] = "unexpected char '%c'"; // idb
CHAR asc_46CEC4[] = "H"; // idb
char aUser6dSocket4d[] = " user %-6d  | socket %-4d | AcceptCall %-3d  | RunningThread %-3d "; // idb
char a220[] = "220"; // idb
char aMailsendErrorS[] = "mailsend error , %s"; // idb
char aHeloMail_ncsof[] = "HELO mail.ncsoft.net\r\n"; // idb
char a250[] = "250"; // idb
char aMailFromS_0[] = "MAIL From:<%s>\r\n"; // idb
char a250_0[] = "250"; // idb
char asc_46CFBC[] = ";"; // idb
char aRcptToS_0[] = "RCPT TO:<%s>\r\n"; // idb
char a250_1[] = "250"; // idb
char asc_46CFD4[] = ";"; // idb
char aData_0[] = "DATA\r\n"; // idb
char aSubjectSToS[] = "Subject:%s\r\nTo:%s\r\n\r\n"; // idb
char aS_5[] = "%s\r\n"; // idb
char a__0[] = "\r\n.\r\n"; // idb
char a__1[] = "\r\n.\r\n"; // idb
char a250_2[] = "250"; // idb
char aQuit_0[] = "QUIT\r\n"; // idb
char aRt[] = "rt"; // idb
char aEtcServerlist[] = "etc\\serverlist"; // idb
char aCanTLoadServer[] = "can't load serverlist file"; // idb
char asc_46D04C[] = ","; // idb
char asc_46D050[] = ","; // idb
char asc_46D054[] = ","; // idb
char asc_46D058[] = ","; // idb
char asc_46D05C[] = ","; // idb
char asc_46D060[] = ","; // idb
char aServerDLoadedI[] = "Server %d loaded,innerip:%s,outerip:%s,%d"; // idb
char aSelectIdNameIp[] = "Select id, name, ip, inner_ip, ageLimit, pk_flag, kind, port From server Order by id"; // idb
char aLoadingServerl[] = "loading serverlist fail, serverid is not serialized"; // idb
char aServerDLoade_0[] = "Server %d loaded, innerip:%s,outerip:%s,port:%d,agelimit:%d,pk:%d"; // idb
char aSelectIdName_0[] = "Select id, name, ip, inner_ip, ageLimit, pk_flag, kind, port From server Order by id"; // idb
char aLoadingServe_0[] = "loading serverlist fail, serverid is not serialized"; // idb
char aServerDLoade_1[] = "Server %d loaded, innerip:%s,outerip:%s, %d"; // idb
char aServerLoadFail[] = "Server load fail, please check server table or DB connection string"; // idb
wchar_t aS_6[] = L"%S"; // idb
wchar_t aS_7[] = L"%S"; // idb
char aInsertUser_cou[] = "INSERT user_count ( server_id, world_user, limit_user, auth_user, wait_user) VALUES ( %d, %d, %d, %d, %d )"; // idb
char aInvalidVectorT[] = "invalid vector<T> subscript"; // idb
wchar_t aS_8[] = L"%S"; // idb
wchar_t aS_9[] = L"%S"; // idb
char aSelectMaxKindF[] = "Select Max(kind) From server With (Nolock)"; // idb
char aLoadServerkind[] = "Load ServerKindList fail!"; // idb
char aLoadServerki_0[] = "Load ServerKindList Memory Allocation Fail"; // idb
char aLoadServerki_1[] = "Load ServerKindList Memory Allocation Fail"; // idb
char aLoadServerki_2[] = "Load ServerKindList fail!"; // idb
char aSelectIdName_1[] = "Select id, name, ip, inner_ip, ageLimit, pk_flag,kind, port From server Order by id"; // idb
char aLoadingServe_1[] = "loading serverlist fail, serverid is not serialized"; // idb
char aLoadingServe_2[] = "Loading ServerList Fail."; // idb
char aReloadServerki[] = "Reload ServerKindList Fail!"; // idb
char aSelectMaxKin_0[] = "Select Max(kind) From server With (Nolock)"; // idb
char aReloadServer_0[] = "Reload ServerKindList Fail!"; // idb
char aReloadServer_1[] = "Reload ServerKindList Fail!"; // idb
char aReloadServer_2[] = "Reload ServerKindList Fail!, Memory Allocation Fail"; // idb
char aSelectIdName_2[] = "Select id, name, ip, inner_ip, ageLimit, pk_flag,kind, port From server Order by id"; // idb
char aReloadingServe[] = "Reloading serverlist fail, serverid is not serialized"; // idb
char aReloadServerli[] = "Reload ServerList Fail."; // idb
char aReloadServer_3[] = "Reload ServerKindList Fail!"; // idb
char aReloadserverli[] = "ReLoadServerListFrame Fail!!"; // idb
int (__cdecl *off_46D690)(int, void *) = &sub_43818F; // weak
_UNKNOWN unk_46D6B4; // weak
_UNKNOWN unk_46D6B8; // weak
_UNKNOWN unk_46D6BC; // weak
_UNKNOWN unk_46D6C0; // weak
char aInsertGm_illeg[] = "INSERT gm_illegal_login ( account, ip ) VALUES ( '%s', '%d.%d.%d.%d' )"; // idb
char aCc_10[3] = "cc"; // weak
char aCc_11[3] = "cc"; // weak
char aCc_12[3] = "cc"; // weak
char aServerListErro[] = "Server List Error, Check lin2DB Server Table"; // idb
char aCc_13[3] = "cc"; // weak
char aCc_14[3] = "cc"; // weak
char aCc_15[3] = "cc"; // weak
char aMd5keyDoesNotM[] = "md5key does not matching"; // idb
char aCc_16[3] = "cc"; // weak
char aCc_17[3] = "cc"; // weak
char aCc_18[3] = "cc"; // weak
char aServerListEr_0[] = "Server List Error, Check lin2DB Server Table"; // idb
char aCc_19[3] = "cc"; // weak
char aCc_20[3] = "cc"; // weak
char aCc_21[3] = "cc"; // weak
char aCc_22[3] = "cc"; // weak
char aDAssembleToo_4[] = "%d: assemble too large packet. format %s"; // idb
char aSelectWorld_id[] = "SELECT world_id FROM user_char WITH (NOLOCK) WHERE uid = %d"; // idb
char aCd_1[3] = "cd"; // weak
char aCcdd[5] = "ccdd"; // weak
char aCcdd_0[5] = "ccdd"; // weak
char aCdchb[6] = "cdchb"; // weak
char aCcdd_1[5] = "ccdd"; // weak
char aCcdd_2[5] = "ccdd"; // weak
char aCdcd[5] = "cdcd"; // weak
char aCdch[5] = "cdch"; // weak
char aCdch_0[5] = "cdch"; // weak
char aCreateSocketTi[] = "create socket timer error"; // idb
char aDBadPacketSi_2[] = "%d: bad packet size %d"; // idb
char aUnknownProto_2[] = "unknown protocol %d"; // idb
char aCdd_1[4] = "cdd"; // weak
char aCdd_2[4] = "cdd"; // weak
char aDAssembleToo_5[] = "%d: assemble too large packet. format %s"; // idb
char aDAssembleToo_6[] = "%d: assemble too large packet. format %s"; // idb
char aTimerThreadTer[] = "Timer thread terminated"; // idb
char aTerminateIothr[] = "terminate IOThreadServer"; // idb
char aIothreadServer[] = "IOThread Server Exit"; // idb
char aTerminateIot_0[] = "terminate IOThreadInt"; // idb
wchar_t a02d02d04d02d02[] = L"%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,%d,%d,,,,,,,%s,,,\r\n"; // idb
wchar_t a02d02d04d02d_0[] = L"%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,%d,%d,,,,,,,%s,,,\r\n"; // idb
wchar_t a02d02d04d02d_1[] = L"%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,%d,%d,,,,,,,%s,,,\r\n"; // idb
wchar_t a02d02d04d02d_2[] = L"%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,,,,,,,,,%s,,,\r\n"; // idb
char aCdds[5] = "cddS"; // weak
char a02d02d04d02d_3[] = "%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,%d,%d,,,,,,,%s,,,\r\n"; // idb
char a02d02d04d02d_4[] = "%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,%d,%d,,,,,,,%s,,,\r\n"; // idb
char a02d02d04d02d_5[] = "%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,%d,%d,,,,,,,%s,,,\r\n"; // idb
char a02d02d04d02d_6[] = "%02d/%02d/%04d %02d:%02d:%02d.%03d ,%d,,%d,,,,,,%d.%d.%d.%d,,,%d,%d,%d,,,,,,,,,%s,,,\r\n"; // idb
char aS_10[] = "%s"; // idb
char aInsufficientFr[] = "Insufficient FreeSpace!!!!, %s"; // idb
char aAuthdInsuffici[] = "AuthD Insufficient FreeSpace"; // idb
char aCheckdiskfrees[] = "CheckDiskFreeSpace ErrorCode %d"; // idb
volatile LONG dword_46E160 = 4294967295; // idb
int (__cdecl *off_46E164[3])(int, char) = { &sub_43BF93, &sub_43BFC4, &sub_43BFDD }; // weak
char aCallDummypac_1[] = "Call DummyPacket What What What"; // idb
char aGetVersionD[] = "Get Version %d"; // idb
char aWantedsocketDe[] = "WantedSocket Deleted"; // idb
char aCloseConnect_2[] = "*close connection WantedSocket from %s, %x(%x)"; // idb
char aDBadPacketSi_3[] = "%d: bad packet size %d"; // idb
char aUnknownProto_3[] = "unknown protocol %d"; // idb
char aDAssembleToo_7[] = "%d: assemble too large packet. format %s"; // idb
void **off_46F018 = &off_46EFE8; // weak
void *off_46F0E0 = (void *)0x46F0EA; // idb
unsigned __int16 _ctype[] = { 0u, 32u };
void *off_46F2F8 = &off_46F300; // idb
void *off_46F478 = &off_46F478; // weak
LPVOID lpMem = &off_46F478; // idb
int dword_46F488 = 4294967295; // weak
void **off_471498 = &off_46F478; // weak
int dword_47149C = 480; // weak
_UNKNOWN unk_472170; // weak
_UNKNOWN unk_472188; // weak
int dword_472460 = 0; // weak
int dword_472464 = 0; // weak
_UNKNOWN unk_472468; // weak
u_short dword_478538; // idb
u_short dword_47853C; // idb
u_short dword_478540; // idb
int dword_478544; // weak
int dword_478548; // weak
int dword_47854C; // weak
int dword_478550; // weak
char byte_478554; // weak
int dword_478558; // weak
int dword_47855C; // weak
char byte_478560; // weak
LPCSTR lpDirectoryName; // idb
int dword_478568; // weak
char byte_47856C; // weak
char *dword_478570; // idb
char byte_478574; // weak
char byte_478575; // weak
char byte_478576; // weak
char byte_478579; // weak
char byte_47857A; // weak
int dword_478580; // weak
u_short hostshort; // idb
DWORD DueTime; // idb
int dword_47858C; // weak
int dword_478590; // weak
char dword_478594[]; // idb
DWORD Period; // idb
int dword_4785A0; // weak
int dword_4785A4; // weak
char byte_4785A8; // weak
int dword_4785AC; // weak
u_short word_4785B0; // idb
DWORD dword_4785B4; // idb
char byte_4785B8; // weak
int dword_4785BC; // weak
char byte_4785C0; // weak
int dword_4785C4; // weak
u_short word_4785C8; // idb
DWORD dword_4785CC; // idb
char byte_4785D0; // weak
char byte_4785D1; // weak
char byte_4785D2; // weak
char *name; // idb
char *dword_4785D8; // idb
char *dword_4785DC; // idb
char byte_4785E0; // weak
char byte_4785E1; // weak
char byte_4785E2; // weak
int dword_4785F4; // weak
int dword_4785F8; // weak
int dword_4785FC; // weak
int dword_478600; // weak
_UNKNOWN unk_478608; // weak
int dword_478744; // weak
CHAR Class[4]; // idb
char byte_47874C[]; // weak
char byte_47974C[]; // weak
char byte_47A74C[]; // weak
char byte_47B74C[]; // weak
char byte_47C74C[]; // weak
char byte_47D74C[]; // weak
char byte_47D783[]; // weak
char byte_47D784[]; // weak
_UNKNOWN unk_47D7BC; // weak
char byte_47DFBC[]; // weak
_UNKNOWN unk_47E01C; // weak
int dword_47E820; // weak
LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter; // idb
struct _RTL_CRITICAL_SECTION CriticalSection; // idb
char *cp; // idb
const CHAR FileName; // idb
int dword_47E948; // weak
char byte_47E94C[256]; // idb
_UNKNOWN unk_47EA4C; // weak
time_t dword_47EA50; // idb
char byte_47EA54; // weak
char byte_47EA58; // weak
char byte_47EA5C; // weak
char byte_47EA60; // weak
_UNKNOWN unk_47EA68; // weak
char byte_47ECA9; // weak
volatile LONG dword_47ECAC; // idb
_UNKNOWN unk_47ECB8; // weak
_UNKNOWN unk_47ECF8; // weak
_UNKNOWN unk_47ED38; // weak
HANDLE TimerQueue; // idb
_UNKNOWN unk_47EF80; // weak
volatile LONG dword_47EFD0; // idb
char byte_47EFD4; // weak
volatile LONG dword_47EFD8; // idb
int dword_47EFDC; // weak
int dword_47EFE0; // weak
int dword_47EFE4; // weak
int dword_47EFE8; // weak
_UNKNOWN unk_47EFF0; // weak
volatile LONG dword_47F230; // idb
char byte_47F235; // weak
volatile LONG dword_47F238; // idb
_UNKNOWN unk_47F240; // weak
_UNKNOWN unk_47F4C8; // weak
_UNKNOWN unk_47F4F8; // weak
int dword_47F528; // weak
int dword_47F52C; // weak
int dword_47F534; // weak
std::locale::facet *dword_47F538; // idb
std::locale::facet *dword_47F53C; // idb
volatile LONG dword_47F544; // idb
_UNKNOWN unk_47F548; // weak
_UNKNOWN unk_47F5B0; // weak
_UNKNOWN unk_47F7F0; // weak
char byte_47F810; // weak
char byte_47F811; // weak
HANDLE phNewTimer; // idb
volatile LONG dword_47F818; // idb
int dword_47F81C; // weak
int dword_47F820; // weak
int dword_47F824; // weak
int dword_47F828; // weak
_UNKNOWN unk_47F830; // weak
int (__cdecl *dword_47F898)(_DWORD); // weak
HWND dword_47F89C; // idb
HWND hWndParent; // idb
HWND hWnd; // idb
HWND dword_47F8A8; // idb
HWND dword_47F8AC; // idb
HWND dword_47F8B0; // idb
HINSTANCE hInstance; // idb
char byte_47F8B8; // weak
CHAR byte_47F8BC[4]; // idb
CHAR byte_47F8C0[8]; // idb
_UNKNOWN unk_47F8C8; // weak
_UNKNOWN unk_47FA00; // weak
_UNKNOWN unk_47FB68; // weak
_UNKNOWN unk_47FCA0; // weak
_UNKNOWN unk_47FDD8; // weak
_UNKNOWN unk_47FF10; // weak
volatile LONG dword_47FF34; // idb
_UNKNOWN unk_47FF38; // weak
char byte_480178; // weak
char byte_480179; // weak
char byte_48017A; // weak
HANDLE dword_48017C; // idb
volatile LONG dword_480180; // idb
_UNKNOWN unk_480184; // weak
volatile LONG dword_480188; // idb
int dword_48018C[]; // weak
volatile LONG dword_4801D0; // idb
_UNKNOWN unk_4801D8; // weak
char byte_480419; // weak
volatile LONG dword_48041C; // idb
_UNKNOWN unk_480420; // weak
volatile LONG Addend; // idb
int dword_480428; // idb
volatile LONG dword_48042C; // idb
_UNKNOWN unk_480468; // weak
_UNKNOWN unk_480880; // weak
_UNKNOWN unk_480D50; // weak
size_t dword_480DE8; // idb
void *dword_480DEC; // idb
int dword_480DF0; // weak
int dword_480DF8; // weak
int dword_480E14[]; // weak
_UNKNOWN unk_480E3C; // weak
int dword_48163C; // weak
CHAR byte_481640[8]; // idb
_UNKNOWN unk_481648; // weak
_UNKNOWN unk_481698; // weak
int dword_4816D4; // weak
int dword_4816D8; // weak
HANDLE CompletionPort; // idb
int dword_4816E0; // weak
HANDLE ExistingCompletionPort; // idb
int dword_4816EC; // weak
char byte_4816F0; // weak
volatile LONG dword_4816F4; // idb
int dword_481700; // weak
int dword_481704; // weak
volatile LONG dword_48174C; // idb
int dword_481750; // weak
_UNKNOWN unk_481758; // weak
_UNKNOWN unk_481778; // weak
char byte_4819B8; // weak
char byte_4819B9; // weak
HANDLE dword_4819BC; // idb
volatile LONG dword_4819C0; // idb
std::locale::facet *dword_481A20; // idb
LPVOID dword_481A28; // idb
_UNKNOWN unk_481A2C; // weak
_UNKNOWN unk_481A30; // weak
_UNKNOWN unk_481A38; // weak
_UNKNOWN unk_481A3C; // weak
int dword_481A40; // weak
int dword_481A44; // weak
int dword_481A48; // weak
std::locale::facet *dword_481A4C; // idb
std::locale::facet *dword_481A50; // idb
std::locale::facet *dword_481A54; // idb
_UNKNOWN unk_481A60; // weak
_UNKNOWN unk_481A6C; // weak
_UNKNOWN unk_481A70; // weak
_UNKNOWN unk_481A74; // weak
_UNKNOWN unk_481A78; // weak
_UNKNOWN unk_481A7C; // weak
_UNKNOWN unk_481A80; // weak
_UNKNOWN unk_481A84; // weak
_UNKNOWN unk_481A88; // weak
_UNKNOWN unk_481A8C; // weak
_UNKNOWN unk_481A90; // weak
_UNKNOWN unk_481A94; // weak
_UNKNOWN unk_481A98; // weak
_UNKNOWN unk_481A9C; // weak
int dword_481AA0; // weak
int dword_481AA4; // weak
int dword_481AA8; // weak
int dword_481AAC; // weak
int dword_481AB0; // weak
int dword_481AB4; // weak
int dword_481AB8; // weak
int dword_481ABC; // weak
int dword_481AC0; // weak
int dword_481AC4; // weak
int dword_481AC8; // weak
int dword_481ACC; // weak
int dword_481AD0; // weak
std::locale::facet *dword_481AD4; // idb
std::locale::facet *dword_481AD8; // idb
std::locale::facet *dword_481ADC; // idb
std::locale::facet *dword_481AE0; // idb
std::locale::facet *dword_481AE4; // idb
std::locale::facet *dword_481AE8; // idb
std::locale::facet *dword_481AEC; // idb
std::locale::facet *dword_481AF0; // idb
std::locale::facet *dword_481AF4; // idb
std::locale::facet *dword_481AF8; // idb
std::locale::facet *dword_481AFC; // idb
std::locale::facet *dword_481B00; // idb
std::locale::facet *dword_481B04; // idb
_UNKNOWN unk_481B08; // weak
_UNKNOWN unk_481B0C; // weak
_UNKNOWN unk_481B10; // weak
_UNKNOWN unk_481B14; // weak
_UNKNOWN unk_481B18; // weak
_UNKNOWN unk_481B1C; // weak
_UNKNOWN unk_481B20; // weak
_UNKNOWN unk_481B24; // weak
int dword_481B28; // weak
int dword_481B2C; // weak
int dword_481B30; // weak
int dword_481B34; // weak
int dword_481B38; // weak
int dword_481B3C; // weak
int dword_481B40; // weak
int dword_481B44; // weak
std::locale::facet *dword_481B48; // idb
std::locale::facet *dword_481B4C; // idb
std::locale::facet *dword_481B50; // idb
std::locale::facet *dword_481B54; // idb
std::locale::facet *dword_481B58; // idb
std::locale::facet *dword_481B5C; // idb
std::locale::facet *dword_481B60; // idb
std::locale::facet *dword_481B64; // idb
LCID dword_481C5C; // idb
LCID dword_481C60; // idb
int dword_481D64; // weak
int dword_481D68; // weak
char byte_481F34; // weak
char byte_481F40; // weak
char byte_482061[]; // weak
int dword_4832A8; // weak
int dword_4832AC; // weak
void *dword_4832B4; // idb
int dword_4832B8; // weak
LPVOID lp; // idb
int dword_4832C0; // weak
HANDLE hHeap; // idb
int dword_4832C8; // weak
int dword_4832CC; // weak
int dword_4832D4; // weak
volatile LONG dword_4832D8; // idb


//----- (00401000) --------------------------------------------------------
int __thiscall sub_401000(int this)
{
  int v1; // ST0C_4@1

  v1 = this;
  *(_DWORD *)this = off_45F38C;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_BYTE *)(this + 49) = 0;
  memset((void *)(this + 65), 0, 0xDu);
  *(_DWORD *)(v1 + 44) = 0;
  *(_BYTE *)(v1 + 79) = 0;
  return v1;
}
// 45F38C: using guessed type int (__stdcall *off_45F38C[2])(int);

//----- (00401074) --------------------------------------------------------
void *__thiscall sub_401074(void *this)
{
  void *result; // eax@1

  result = this;
  *(_DWORD *)this = off_45F38C;
  return result;
}
// 45F38C: using guessed type int (__stdcall *off_45F38C[2])(int);

//----- (00401088) --------------------------------------------------------
int __thiscall sub_401088(_DWORD *this, void *a2)
{
  _DWORD *v2; // ST0C_4@1
  signed int v3; // ST10_4@6
  int v5; // [sp+8h] [bp-23Ch]@1
  char TargetValue; // [sp+1Ch] [bp-228h]@1
  size_t v7; // [sp+11Ch] [bp-128h]@1
  void *v8; // [sp+120h] [bp-124h]@1
  int v9; // [sp+124h] [bp-120h]@2
  char v10; // [sp+128h] [bp-11Ch]@1
  int v11; // [sp+12Ch] [bp-118h]@1
  int v12; // [sp+130h] [bp-114h]@1
  wchar_t v13; // [sp+134h] [bp-110h]@4
  int v14; // [sp+234h] [bp-10h]@1
  int v15; // [sp+240h] [bp-4h]@1

  v2 = this;
  v12 = 1;
  v14 = 0;
  v7 = 0;
  v10 = 0;
  v8 = a2;
  v11 = 256;
  sub_413E9E((int)&v5, (int)&unk_478608);
  v15 = 0;
  sub_414804((int)&v5, &v14);
  sub_41477C((int)&v5, &TargetValue, 256);
  v8 = (char *)v8 + 1;
  if ( sub_414123((int)&v5, aSelectReasonMs, v2[5]) )
  {
    while ( sub_4143F1((SQLHSTMT *)&v5, (bool *)&v9) )
    {
      if ( (_BYTE)v9 )
        break;
      v7 = 0;
      v7 = 2 * swprintf(&v13, aS, &TargetValue) + 2;
      if ( (signed int)(v7 + v12 + 4) >= 4096 )
        break;
      memcpy(v8, &v14, 4u);
      v8 = (char *)v8 + 4;
      memcpy(v8, &v13, v7);
      v8 = (char *)v8 + v7;
      ++v10;
      v12 += v7 + 4;
    }
  }
  memcpy(a2, &v10, 1u);
  v3 = (_BYTE *)v8 - (_BYTE *)a2;
  v15 = -1;
  sub_413F5F((int)&v5);
  return v3;
}

//----- (004012A9) --------------------------------------------------------
char __thiscall sub_4012A9(void *this, SQLPOINTER rgbValue)
{
  void *v2; // ST28_4@1
  SQLINTEGER v3; // eax@1
  char result; // al@4
  SQLHSTMT hstmt; // [sp+14h] [bp-150h]@1
  SQLINTEGER v6; // [sp+28h] [bp-13Ch]@1
  SQLINTEGER v7; // [sp+2Ch] [bp-138h]@1
  SQLINTEGER v8; // [sp+30h] [bp-134h]@1
  SQLINTEGER v9; // [sp+34h] [bp-130h]@1
  SQLINTEGER v10; // [sp+38h] [bp-12Ch]@1
  SQLCHAR StatementText; // [sp+3Ch] [bp-128h]@1
  int v12; // [sp+13Ch] [bp-28h]@2
  SQLINTEGER v13; // [sp+140h] [bp-24h]@1
  SQLINTEGER pcbValue; // [sp+144h] [bp-20h]@1
  SQLINTEGER v15; // [sp+148h] [bp-1Ch]@1
  SQLINTEGER v16; // [sp+14Ch] [bp-18h]@1
  SQLINTEGER v17; // [sp+150h] [bp-14h]@1
  __int16 v18; // [sp+154h] [bp-10h]@1
  int v19; // [sp+160h] [bp-4h]@1

  v2 = this;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  v19 = 0;
  pcbValue = -3;
  v3 = strlen((const char *)rgbValue);
  SQLBindParameter(hstmt, 1u, 1, 1, 12, 0xEu, 0, rgbValue, v3, &pcbValue);
  v15 = 0;
  SQLBindParameter(hstmt, 2u, 4, -18, 4, 0, 0, (char *)v2 + 20, 0, &v15);
  v13 = 0;
  SQLBindParameter(hstmt, 3u, 4, -18, 4, 0, 0, (char *)v2 + 16, 0, &v13);
  v7 = 0;
  SQLBindParameter(hstmt, 4u, 4, -18, 4, 0, 0, (char *)v2 + 24, 0, &v7);
  v17 = 0;
  SQLBindParameter(hstmt, 5u, 4, -18, 4, 0, 0, (char *)v2 + 12, 0, &v17);
  v8 = 0;
  SQLBindParameter(hstmt, 6u, 4, -18, 4, 0, 0, (char *)v2 + 4, 0, &v8);
  v16 = 0;
  SQLBindParameter(hstmt, 7u, 4, -18, 4, 0, 0, (char *)v2 + 8, 0, &v16);
  v9 = 0;
  SQLBindParameter(hstmt, 8u, 4, -18, 4, 0, 0, (char *)v2 + 28, 0, &v9);
  v10 = 0;
  SQLBindParameter(hstmt, 9u, 4, -28, -6, 0, 0, (char *)v2 + 79, 0, &v10);
  *((_WORD *)v2 + 40) = -1;
  v6 = 0;
  SQLBindParameter(hstmt, 0xAu, 4, 93, 93, 0x17u, 3, (char *)v2 + 80, 0, &v6);
  sprintf((char *)&StatementText, aCallDbo_ap_gst);
  v18 = SQLExecDirect(hstmt, &StatementText, -3);
  if ( v18 )
  {
    sub_414532(&hstmt, 3, hstmt, (int)&StatementText);
    sub_414A7B((int)&hstmt);
    v19 = -1;
    sub_413F5F((int)&hstmt);
    result = 1;
  }
  else if ( sub_4143F1(&hstmt, (bool *)&v12) )
  {
    if ( (_BYTE)v12 )
    {
      sub_414A7B((int)&hstmt);
      v19 = -1;
      sub_413F5F((int)&hstmt);
      result = 4;
    }
    else
    {
      sub_414A7B((int)&hstmt);
      v19 = -1;
      sub_413F5F((int)&hstmt);
      result = 0;
    }
  }
  else
  {
    sub_414A7B((int)&hstmt);
    v19 = -1;
    sub_413F5F((int)&hstmt);
    result = 4;
  }
  return result;
}

//----- (00401627) --------------------------------------------------------
char __thiscall sub_401627(void *this)
{
  struct tm *v2; // eax@6
  void *v3; // [sp+0h] [bp-48h]@1
  int v4; // [sp+10h] [bp-38h]@2
  int v5; // [sp+24h] [bp-24h]@15
  struct tm *v6; // [sp+28h] [bp-20h]@9
  int v7; // [sp+2Ch] [bp-1Ch]@2
  char v8; // [sp+30h] [bp-18h]@9
  char v9; // [sp+31h] [bp-17h]@9
  int v10; // [sp+34h] [bp-14h]@15
  time_t v11; // [sp+38h] [bp-10h]@6
  int v12; // [sp+44h] [bp-4h]@2

  v3 = this;
  if ( !dword_478590 )
  {
    sub_413E9E((int)&v4, (int)&unk_478608);
    v12 = 0;
    sub_414A7B((int)&v4);
    sub_41477C((int)&v4, (char *)v3 + 65, 14);
    LOBYTE(v7) = 1;
    if ( !sub_414123((int)&v4, aSelectSsnFromU, (char *)v3 + 50) )
    {
      v12 = -1;
      sub_413F5F((int)&v4);
      return 1;
    }
    if ( !sub_4143F1((SQLHSTMT *)&v4, (bool *)&v7) )
    {
      v12 = -1;
      sub_413F5F((int)&v4);
      return 5;
    }
    if ( (_BYTE)v7 )
    {
      v12 = -1;
      sub_413F5F((int)&v4);
      return 5;
    }
    v11 = time(0);
    v2 = localtime(&v11);
    v6 = v2;
    v8 = v2->tm_year / 10 + 48;
    v9 = v2->tm_year % 10 + 48;
    *((_BYTE *)v3 + 49) = *((_BYTE *)v3 + 71) - 48;
    if ( *((_BYTE *)v3 + 71) != 49
      && *((_BYTE *)v3 + 71) != 50
      && *((_BYTE *)v3 + 71) != 53
      && *((_BYTE *)v3 + 71) != 54 )
    {
      *((_BYTE *)v3 + 48) = 10 * (*((_BYTE *)v3 + 65) - 48) + *((_BYTE *)v3 + 66) - 48;
    }
    else
    {
      *((_BYTE *)v3 + 48) = v9 - *((_BYTE *)v3 + 66) + 10 * (v8 - *((_BYTE *)v3 + 65));
    }
    v5 = v6->tm_mday + 100 * (v6->tm_mon + 1);
    v10 = 10 * (*((_BYTE *)v3 + 69) - 48)
        + 100 * (*((_BYTE *)v3 + 68) - 48)
        + 1000 * (*((_BYTE *)v3 + 67) - 48)
        + *((_BYTE *)v3 + 70)
        - 48;
    if ( v5 < v10 )
      --*((_BYTE *)v3 + 48);
    if ( (signed int)*((_BYTE *)v3 + 48) < 0 )
      *((_BYTE *)v3 + 48) = 0;
    *((_DWORD *)v3 + 10) = 10000 * (10 * (*((_BYTE *)v3 + 65) - 48) + *((_BYTE *)v3 + 66) - 48) + v10;
    *((_DWORD *)v3 + 11) = atoi((const char *)v3 + 71);
    v12 = -1;
    sub_413F5F((int)&v4);
  }
  return 0;
}
// 478590: using guessed type int dword_478590;

//----- (004018BB) --------------------------------------------------------
char __thiscall sub_4018BB(void *this, SQLPOINTER rgbValue, SQLPOINTER a3)
{
  SQLINTEGER v3; // eax@1
  char result; // al@4
  void *v5; // [sp+0h] [bp-144h]@1
  int v6; // [sp+14h] [bp-130h]@2
  SQLHSTMT hstmt; // [sp+18h] [bp-12Ch]@1
  SQLINTEGER v8; // [sp+2Ch] [bp-118h]@1
  SQLCHAR StatementText; // [sp+30h] [bp-114h]@1
  SQLINTEGER pcbValue; // [sp+130h] [bp-14h]@1
  __int16 v11; // [sp+134h] [bp-10h]@1
  int v12; // [sp+140h] [bp-4h]@1

  v5 = this;
  *(_BYTE *)a3 = 0;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  v12 = 0;
  pcbValue = -3;
  v3 = strlen((const char *)rgbValue);
  SQLBindParameter(hstmt, 1u, 1, 1, 12, 0xEu, 0, rgbValue, v3, &pcbValue);
  v8 = -3;
  SQLBindParameter(hstmt, 2u, 4, -2, -2, 0x10u, 0, a3, 16, &v8);
  sprintf((char *)&StatementText, aCallDbo_ap_gpw);
  v11 = SQLExecDirect(hstmt, &StatementText, -3);
  if ( v11 )
  {
    sub_414532(&hstmt, 3, hstmt, (int)&StatementText);
    sub_414A7B((int)&hstmt);
    v12 = -1;
    sub_413F5F((int)&hstmt);
    result = 1;
  }
  else if ( sub_4143F1(&hstmt, (bool *)&v6) )
  {
    if ( (_BYTE)v6 )
    {
      sub_414A7B((int)&hstmt);
      v12 = -1;
      sub_413F5F((int)&hstmt);
      result = 2;
    }
    else
    {
      memset((char *)v5 + 50, 0, 0xFu);
      strcpy((char *)v5 + 50, (const char *)rgbValue);
      sub_414A7B((int)&hstmt);
      v12 = -1;
      sub_413F5F((int)&hstmt);
      result = 0;
    }
  }
  else
  {
    sub_414A7B((int)&hstmt);
    v12 = -1;
    sub_413F5F((int)&hstmt);
    result = 2;
  }
  return result;
}

//----- (00401ACF) --------------------------------------------------------
char __thiscall sub_401ACF(void *this, SQLPOINTER rgbValue, char *a3)
{
  char result; // al@3
  void *v4; // [sp+0h] [bp-1Ch]@1
  char v5; // [sp+4h] [bp-18h]@1
  char v6; // [sp+4h] [bp-18h]@4
  char v7; // [sp+8h] [bp-14h]@1
  char v8; // [sp+18h] [bp-4h]@2

  v4 = this;
  v5 = sub_4018BB(this, rgbValue, &v7);
  if ( v5 )
  {
    result = v5;
  }
  else
  {
    dword_47F898(a3);
    v8 = 0;
    if ( !strcmp(a3, &v7) )
    {
      v6 = sub_4012A9(v4, rgbValue);
      if ( v6 )
      {
        result = v6;
      }
      else if ( !byte_478575 || *((_DWORD *)v4 + 6) & 0x10 || *((_DWORD *)v4 + 6) & 0x20 )
      {
        if ( *((_DWORD *)v4 + 6) & 3 )
          result = 17;
        else
          result = sub_401627(v4);
      }
      else
      {
        result = 16;
      }
    }
    else
    {
      result = 3;
    }
  }
  return result;
}
// 47F898: invalid function type has been ignored
// 478575: using guessed type char byte_478575;
// 47F898: using guessed type int (__cdecl *dword_47F898)(_DWORD);

//----- (00401B99) --------------------------------------------------------
char __thiscall sub_401B99(void *this, SQLPOINTER rgbValue, char *a3)
{
  SQLINTEGER v3; // eax@1
  char result; // al@4
  SQLINTEGER v5; // eax@15
  char v6; // ST2C_1@29
  void *v7; // [sp+0h] [bp-198h]@1
  char v8; // [sp+2Ch] [bp-16Ch]@20
  SQLHSTMT hstmt; // [sp+30h] [bp-168h]@1
  SQLINTEGER v10; // [sp+44h] [bp-154h]@1
  size_t v11; // [sp+48h] [bp-150h]@11
  int v12; // [sp+4Ch] [bp-14Ch]@2
  SQLCHAR StatementText; // [sp+50h] [bp-148h]@1
  SQLINTEGER pcbValue; // [sp+150h] [bp-48h]@1
  int i; // [sp+154h] [bp-44h]@11
  char v16; // [sp+158h] [bp-40h]@1
  char v17[16]; // [sp+15Ch] [bp-3Ch]@1
  char v18; // [sp+16Ch] [bp-2Ch]@1
  char v19; // [sp+170h] [bp-28h]@1
  __int16 v20; // [sp+184h] [bp-14h]@1
  SQLINTEGER v21; // [sp+188h] [bp-10h]@1
  int v22; // [sp+194h] [bp-4h]@1

  v7 = this;
  v16 = 0;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  v22 = 0;
  strncpy(v17, a3, 0x10u);
  v18 = 0;
  memset(&v19, 0, 0x11u);
  pcbValue = -3;
  v10 = 16;
  v21 = 0;
  v3 = strlen((const char *)rgbValue);
  SQLBindParameter(hstmt, 1u, 1, 1, 12, 0xEu, 0, rgbValue, v3, &pcbValue);
  SQLBindParameter(hstmt, 2u, 4, -2, -2, 0x10u, 0, &v19, 16, &v10);
  SQLBindParameter(hstmt, 3u, 4, -6, -6, 0, 0, &v16, 0, &v21);
  sprintf((char *)&StatementText, aCallDbo_ap_g_0);
  v20 = SQLExecDirect(hstmt, &StatementText, -3);
  if ( v20 )
  {
    sub_414532(&hstmt, 3, hstmt, (int)&StatementText);
    sub_414A7B((int)&hstmt);
    v22 = -1;
    sub_413F5F((int)&hstmt);
    return 1;
  }
  if ( !sub_4143F1(&hstmt, (bool *)&v12) )
  {
    sub_414A7B((int)&hstmt);
    v22 = -1;
    sub_413F5F((int)&hstmt);
    return 2;
  }
  if ( (_BYTE)v12 )
  {
    sub_414A7B((int)&hstmt);
    v22 = -1;
    sub_413F5F((int)&hstmt);
    return 2;
  }
  memset((char *)v7 + 50, 0, 0xFu);
  strcpy((char *)v7 + 50, (const char *)rgbValue);
  sub_414A7B((int)&hstmt);
  a3[16] = 0;
  if ( !v16 )
  {
    dword_47F898(a3);
    if ( strcmp(&v19, a3) )
    {
      v22 = -1;
      sub_413F5F((int)&hstmt);
      return 3;
    }
  }
  v11 = strlen(v17);
  for ( i = v11; i < 16; ++i )
    v17[i] = 16;
  sub_40A07D((char *)&unk_472468, v17, 16);
  if ( v16 )
  {
    if ( memcmp(&v19, v17, 0x10u) )
    {
      v22 = -1;
      sub_413F5F((int)&hstmt);
      return 3;
    }
  }
  else
  {
    pcbValue = -3;
    v10 = 16;
    v5 = strlen((const char *)rgbValue);
    SQLBindParameter(hstmt, 1u, 1, 1, 12, 0xEu, 0, rgbValue, v5, &pcbValue);
    SQLBindParameter(hstmt, 2u, 1, -2, -2, 0x10u, 0, v17, 16, &v10);
    sprintf((char *)&StatementText, aCallDbo_ap_sne);
    v20 = SQLExecDirect(hstmt, &StatementText, -3);
    if ( v20 )
    {
      sub_414532(&hstmt, 3, hstmt, (int)&StatementText);
      sub_414A7B((int)&hstmt);
      v22 = -1;
      sub_413F5F((int)&hstmt);
      return 1;
    }
    sub_414A7B((int)&hstmt);
  }
  v8 = sub_4012A9(v7, rgbValue);
  if ( v8 )
  {
    v22 = -1;
    sub_413F5F((int)&hstmt);
    result = v8;
  }
  else if ( !byte_478575 || *((_DWORD *)v7 + 6) & 0x10 || *((_DWORD *)v7 + 6) & 0x20 )
  {
    if ( *((_DWORD *)v7 + 6) & 3 )
    {
      v22 = -1;
      sub_413F5F((int)&hstmt);
      result = 17;
    }
    else
    {
      v6 = sub_401627(v7);
      v22 = -1;
      sub_413F5F((int)&hstmt);
      result = v6;
    }
  }
  else
  {
    v22 = -1;
    sub_413F5F((int)&hstmt);
    result = 16;
  }
  return result;
}
// 478575: using guessed type char byte_478575;
// 47F898: using guessed type int (__cdecl *dword_47F898)(_DWORD);
// 401B99: using guessed type char var_3C[16];

//----- (004020D4) --------------------------------------------------------
int sub_4020D4()
{
  return atexit(sub_402150);
}

//----- (004020F0) --------------------------------------------------------
void *__thiscall sub_4020F0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_401074(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00402120) --------------------------------------------------------
int sub_402120()
{
  int result; // eax@1

  result = byte_481F40 & 1;
  if ( !(byte_481F40 & 1) )
    byte_481F40 |= 1u;
  return result;
}
// 481F40: using guessed type char byte_481F40;

//----- (00402150) --------------------------------------------------------
void __cdecl sub_402150()
{
  ;
}

//----- (00402160) --------------------------------------------------------
char __cdecl sub_402160(char *a1, char a2, int a3)
{
  char result; // al@4
  time_t v4; // [sp+4h] [bp-1Ch]@6
  char v5; // [sp+8h] [bp-18h]@5
  char v6; // [sp+9h] [bp-17h]@6
  char v7; // [sp+Dh] [bp-13h]@6
  char v8; // [sp+1Bh] [bp-5h]@6
  char v9; // [sp+1Ch] [bp-4h]@6

  if ( byte_4785C0 && !byte_4819B9 && a3 > 0 )
  {
    memset(&v5, 0, 0x18u);
    if ( dword_478568 == 8 )
    {
      v5 = 2;
      memcpy(&v6, &a2, 4u);
      strcpy(&v7, a1);
      v8 = a3;
      v4 = time(0);
      memcpy(&v9, &v4, 4u);
      if ( dword_481750 && byte_4785C0 && !byte_4819B9 )
      {
        sub_42DBFC((int)&unk_47FA00, 2, aWantedUserLogo, a1);
        sub_42D61C((int)&unk_481758);
        sub_418095(dword_481750);
        sub_43C476(dword_481750, (int)aCb, 1);
        sub_4180B3(dword_481750);
        sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_481758);
      }
      result = 1;
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}
// 478568: using guessed type int dword_478568;
// 4785C0: using guessed type char byte_4785C0;
// 481750: using guessed type int dword_481750;
// 4819B9: using guessed type char byte_4819B9;

//----- (00402281) --------------------------------------------------------
int __thiscall sub_402281(int this)
{
  int v1; // ST08_4@1
  char v3; // [sp+4h] [bp-14h]@1
  char v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v1 = this;
  sub_405200((void *)(this + 4), &v3, &v4);
  v5 = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(v1 + 20), 0, 0);
  *(_DWORD *)v1 = &off_45F390;
  return v1;
}
// 45F390: using guessed type int (__stdcall *off_45F390)(int);

//----- (004022E9) --------------------------------------------------------
int __thiscall sub_4022E9(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  *(_DWORD *)this = &off_45F390;
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(this + 20));
  return unknown_libname_1(v1 + 4);
}
// 4051C0: using guessed type int __thiscall unknown_libname_1(_DWORD);
// 45F390: using guessed type int (__stdcall *off_45F390)(int);

//----- (00402340) --------------------------------------------------------
char __thiscall sub_402340(void *this, char a2, char *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  int v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@1
  char v8; // [sp+8h] [bp-Ch]@1
  HANDLE Timer; // [sp+Ch] [bp-8h]@1
  char v10; // [sp+10h] [bp-4h]@1

  v6 = (int)this;
  v10 = 0;
  Timer = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v6 + 4), &v8, &a2);
  v3 = (_DWORD *)sub_405240((void *)(v6 + 4), (int)&v7);
  if ( (unsigned __int8)sub_405450(&v8, v3) )
  {
    v4 = unknown_libname_5(&v8);
    strncpy(a3, (const char *)(v4 + 32), 0xFu);
    Timer = *(HANDLE *)(unknown_libname_5(&v8) + 48);
    *(_DWORD *)(unknown_libname_5(&v8) + 48) = 0;
    v10 = *(_BYTE *)(unknown_libname_5(&v8) + 76);
    sub_42D4F0(v6 + 20);
  }
  else
  {
    sub_42D4F0(v6 + 20);
    v10 = -1;
  }
  if ( Timer )
    DeleteTimerQueueTimer(0, Timer, 0);
  return v10;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (00402411) --------------------------------------------------------
char __thiscall sub_402411(void *this, char a2, char *a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // eax@1
  int v8; // eax@2
  int v9; // eax@2
  int v10; // eax@2
  int v11; // eax@2
  int v12; // eax@2
  int v14; // [sp+0h] [bp-14h]@1
  char v15; // [sp+4h] [bp-10h]@1
  char v16; // [sp+8h] [bp-Ch]@1
  HANDLE Timer; // [sp+Ch] [bp-8h]@1
  char v18; // [sp+10h] [bp-4h]@1

  v14 = (int)this;
  v18 = 0;
  Timer = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v14 + 4), &v16, &a2);
  v7 = (_DWORD *)sub_405240((void *)(v14 + 4), (int)&v15);
  if ( (unsigned __int8)sub_405450(&v16, v7) )
  {
    v8 = unknown_libname_5(&v16);
    strncpy(a3, (const char *)(v8 + 32), 0xFu);
    v9 = unknown_libname_5(&v16);
    *(_DWORD *)a4 = *(_DWORD *)(v9 + 64);
    v10 = unknown_libname_5(&v16);
    *(_DWORD *)a5 = *(_DWORD *)(v10 + 68);
    v11 = unknown_libname_5(&v16);
    *(_DWORD *)a6 = *(_DWORD *)(v11 + 16);
    Timer = *(HANDLE *)(unknown_libname_5(&v16) + 48);
    v12 = unknown_libname_5(&v16);
    *(_DWORD *)a7 = *(_DWORD *)(v12 + 8);
    *(_DWORD *)(unknown_libname_5(&v16) + 48) = 0;
    v18 = 1;
  }
  sub_42D4F0(v14 + 20);
  if ( Timer )
    DeleteTimerQueueTimer(0, Timer, 0);
  return v18;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (00402507) --------------------------------------------------------
signed int __thiscall sub_402507(void *this, char a2, int a3, int a4, char a5)
{
  _DWORD *v5; // eax@1
  int v6; // eax@2
  int v7; // eax@4
  int v8; // eax@4
  signed int result; // eax@4
  int v10; // [sp+0h] [bp-Ch]@1
  char v11; // [sp+4h] [bp-8h]@1
  char v12; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v10 + 4), &v12, &a2);
  v5 = (_DWORD *)sub_405240((void *)(v10 + 4), (int)&v11);
  if ( (unsigned __int8)sub_405450(&v12, v5) )
  {
    v6 = unknown_libname_5(&v12);
    if ( a4 == *(_DWORD *)(v6 + 8) )
    {
      if ( *(_DWORD *)(unknown_libname_5(&v12) + 28) == 4 )
      {
        sub_42D4F0(v10 + 20);
        result = 14;
      }
      else
      {
        v7 = unknown_libname_5(&v12);
        *(_DWORD *)(v7 + 24) = a3;
        v8 = unknown_libname_5(&v12);
        *(_BYTE *)(v8 + 77) = a5;
        *(_BYTE *)(unknown_libname_5(&v12) + 20) = 0;
        sub_42D4F0(v10 + 20);
        result = 0;
      }
    }
    else
    {
      sub_42D4F0(v10 + 20);
      result = 9;
    }
  }
  else
  {
    sub_42D4F0(v10 + 20);
    result = 10;
  }
  return result;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (004025DE) --------------------------------------------------------
char __thiscall sub_4025DE(void *this, int a2, char a3, int a4, int a5, int a6)
{
  struct Concurrency::IExecutionContext *v6; // eax@1
  int v7; // ST2C_4@4
  int v8; // ST28_4@4
  int v9; // ST24_4@4
  _DWORD *v10; // eax@4
  _DWORD *v11; // eax@5
  int v12; // ST2C_4@9
  int v13; // ST28_4@9
  int v14; // ST1C_4@9
  int v16; // [sp+0h] [bp-C8h]@1
  char v17; // [sp+4h] [bp-C4h]@5
  char v18; // [sp+8h] [bp-C0h]@5
  char v19; // [sp+Ch] [bp-BCh]@4
  char v20; // [sp+64h] [bp-64h]@1
  int v21; // [sp+B8h] [bp-10h]@5
  int v22; // [sp+BCh] [bp-Ch]@1
  char v23; // [sp+C0h] [bp-8h]@1
  int v24; // [sp+C4h] [bp-4h]@1

  v16 = (int)this;
  LOBYTE(v24) = 0;
  sub_42D4B5((int)this + 20);
  v6 = (struct Concurrency::IExecutionContext *)sub_4053B0((int)&v20, &a3, (const void *)a2);
  sub_405260((void *)(v16 + 4), (int)&v22, v6);
  LOBYTE(v24) = v23;
  sub_42D4F0(v16 + 20);
  if ( (_BYTE)v24 )
  {
    if ( *(_DWORD *)(a2 + 76) & 0x10 )
    {
      v7 = *(_DWORD *)(a2 + 12);
      v8 = *(_DWORD *)(a2 + 64);
      v9 = *(_DWORD *)(a2 + 60);
      v10 = sub_434524(&unk_480D50, &v19, 1);
      LOBYTE(v24) = sub_439142(v10[16], (int)aCdsdddd, 0) != 0;
      if ( !(_BYTE)v24 )
      {
        unknown_libname_4(&v21);
        sub_42D4B5(v16 + 20);
        v21 = *sub_4052E0((void *)(v16 + 4), &v18, &a3);
        v11 = (_DWORD *)sub_405240((void *)(v16 + 4), (int)&v17);
        if ( (unsigned __int8)sub_405450(&v21, v11) )
          unknown_libname_3(&a3);
        sub_42D4F0(v16 + 20);
        sub_439D55(a4, (int)aCc_0, 1);
      }
    }
    if ( (_BYTE)v24 )
    {
      *(_DWORD *)(a4 + 96) = 1;
      v12 = *(_DWORD *)(a2 + 60);
      v13 = *(_DWORD *)(a2 + 64);
      v14 = *(_DWORD *)(a2 + 12);
      unknown_libname_6(a4);
      sub_439D55(a4, (int)aCddddddddd, 3);
    }
  }
  else
  {
    sub_4027DF((void *)v16, a3, 7, 1);
    sub_439D55(a4, (int)aCc, 1);
  }
  return v24;
}
// 4052C0: using guessed type _DWORD __stdcall unknown_libname_3(_DWORD);
// 4053E0: using guessed type int __thiscall unknown_libname_4(_DWORD);
// 4056D0: using guessed type int __thiscall unknown_libname_6(_DWORD);

//----- (004027DF) --------------------------------------------------------
char __thiscall sub_4027DF(void *this, char a2, char a3, char a4)
{
  _DWORD *v4; // eax@1
  int v5; // eax@2
  char result; // al@23
  _DWORD *v7; // eax@24
  int v8; // [sp+0h] [bp-B8h]@1
  char v9; // [sp+4h] [bp-B4h]@24
  char v10; // [sp+5Ch] [bp-5Ch]@2
  char v11; // [sp+60h] [bp-58h]@1
  int v12; // [sp+64h] [bp-54h]@32
  int v13; // [sp+68h] [bp-50h]@26
  int v14; // [sp+6Ch] [bp-4Ch]@20
  int v15; // [sp+70h] [bp-48h]@1
  __int16 v16; // [sp+74h] [bp-44h]@1
  char v17; // [sp+78h] [bp-40h]@1
  int v18; // [sp+7Ch] [bp-3Ch]@1
  int v19; // [sp+80h] [bp-38h]@1
  int v20; // [sp+84h] [bp-34h]@1
  char v21; // [sp+88h] [bp-30h]@1
  int v22; // [sp+8Ch] [bp-2Ch]@1
  CHAR MultiByteStr; // [sp+90h] [bp-28h]@1
  char v24; // [sp+9Eh] [bp-1Ah]@2
  int v25; // [sp+A0h] [bp-18h]@1
  char v26; // [sp+A4h] [bp-14h]@1
  int v27; // [sp+A8h] [bp-10h]@1
  time_t v28; // [sp+ACh] [bp-Ch]@1
  int v29; // [sp+B0h] [bp-8h]@1
  int v30; // [sp+B4h] [bp-4h]@1

  v8 = (int)this;
  LOBYTE(v29) = 0;
  v26 = 0;
  v20 = -1;
  v22 = 0;
  v17 = 0;
  MultiByteStr = 0;
  v19 = 0;
  v25 = 0;
  v27 = 0;
  v30 = 0;
  v21 = 0;
  v16 = 0;
  v18 = 0;
  v28 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v8 + 4), &v15, &a2);
  v4 = (_DWORD *)sub_405240((void *)(v8 + 4), (int)&v11);
  if ( (unsigned __int8)sub_405450(&v15, v4) )
  {
    v20 = *(_DWORD *)(unknown_libname_5(&v15) + 24);
    v22 = *(_DWORD *)(unknown_libname_5(&v15) + 28);
    v26 = *(_BYTE *)(unknown_libname_5(&v15) + 20);
    v17 = *(_BYTE *)(unknown_libname_5(&v15) + 52);
    v19 = *(_DWORD *)(unknown_libname_5(&v15) + 56);
    v25 = *(_DWORD *)(unknown_libname_5(&v15) + 60);
    v27 = *(_DWORD *)(unknown_libname_5(&v15) + 16);
    v18 = *(_DWORD *)(unknown_libname_5(&v15) + 12);
    v28 = *(_DWORD *)(unknown_libname_5(&v15) + 4);
    v21 = *(_BYTE *)(unknown_libname_5(&v15) + 72);
    v16 = *(_WORD *)(unknown_libname_5(&v15) + 74);
    v30 = *(_DWORD *)(unknown_libname_5(&v15) + 68);
    v5 = unknown_libname_5(&v15);
    strncpy(&MultiByteStr, (const char *)(v5 + 32), 0xFu);
    sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v8 + 4), &v10, v15);
    sub_42D4F0(v8 + 20);
    LOBYTE(v29) = 1;
    v24 = 0;
  }
  else
  {
    sub_42D4F0(v8 + 20);
  }
  if ( (unsigned __int8)v29 != 1 )
    return v29;
  if ( byte_4785C0 && (v30 & 4) == 4 )
    sub_402160(&MultiByteStr, a2, v26);
  sub_43ADF4(&MultiByteStr);
  if ( strlen(&MultiByteStr) >= 2 && v17 < 7 )
    sub_43AFA2(831, &MultiByteStr, v18, v27, v21, v17, 0, 0, a2);
  if ( v22 != 4 && v22 != 3 )
  {
    if ( v27 < 1000 && v27 > 0 )
    {
      v12 = sub_424C58(&unk_47F548, a2);
      if ( v12 > 0 )
      {
        if ( byte_47857A )
          sub_4250BF(v12, v18, v27);
      }
    }
    if ( v20 != -1 && a4 )
      sub_410A93(v20, (int)aCc_1, 8);
    return v29;
  }
  if ( v22 == 4 && v26 > 0 )
    sub_40418D(a2, v28, v26, v18, dword_478568, &MultiByteStr, v27, v19, v25, v17, v21, v16);
  if ( v26 <= dword_48163C && v26 >= 1 )
  {
    v7 = sub_434524(&unk_480D50, &v9, v26);
    sub_439142(v7[16], (int)aCdcs, 1);
    if ( v27 < 1000 && v27 > 0 )
    {
      v13 = sub_424C58(&unk_47F548, a2);
      if ( v13 > 0 )
      {
        if ( byte_47857A )
          sub_4250BF(v13, v18, v27);
      }
    }
    result = v29;
  }
  else
  {
    if ( v27 < 1000 && v27 > 0 )
    {
      v14 = sub_424C58(&unk_47F548, a2);
      if ( v14 > 0 )
      {
        if ( byte_47857A )
          sub_4250BF(v14, v18, v27);
      }
    }
    result = v29;
  }
  return result;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 478568: using guessed type int dword_478568;
// 47857A: using guessed type char byte_47857A;
// 4785C0: using guessed type char byte_4785C0;
// 48163C: using guessed type int dword_48163C;

//----- (00402BDA) --------------------------------------------------------
void __stdcall Callback(PVOID a1, BOOLEAN a2)
{
  sub_402BF8(&unk_481698, (char)a1);
}

//----- (00402BF8) --------------------------------------------------------
char __thiscall sub_402BF8(void *this, char a2)
{
  _DWORD *v2; // eax@1
  int v3; // eax@2
  int v4; // eax@5
  _DWORD *v5; // eax@18
  _DWORD *v6; // eax@22
  int v8; // [sp+0h] [bp-F8h]@1
  char v9; // [sp+4h] [bp-F4h]@22
  char v10; // [sp+5Ch] [bp-9Ch]@18
  char v11; // [sp+B4h] [bp-44h]@3
  char v12; // [sp+B8h] [bp-40h]@1
  int v13; // [sp+BCh] [bp-3Ch]@11
  int v14; // [sp+C0h] [bp-38h]@1
  int v15; // [sp+C4h] [bp-34h]@1
  int v16; // [sp+C8h] [bp-30h]@3
  int v17; // [sp+CCh] [bp-2Ch]@2
  char v18; // [sp+D0h] [bp-28h]@2
  char v19; // [sp+DEh] [bp-1Ah]@5
  int v20; // [sp+E0h] [bp-18h]@1
  int v21; // [sp+E4h] [bp-14h]@1
  int v22; // [sp+E8h] [bp-10h]@1
  int v23; // [sp+ECh] [bp-Ch]@1
  int v24; // [sp+F0h] [bp-8h]@1
  int v25; // [sp+F4h] [bp-4h]@1

  v8 = (int)this;
  v14 = 0;
  LOBYTE(v24) = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  LOBYTE(v20) = 0;
  v25 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v8 + 4), &v15, &a2);
  v2 = (_DWORD *)sub_405240((void *)(v8 + 4), (int)&v12);
  if ( (unsigned __int8)sub_405450(&v15, v2) )
  {
    v17 = *(_DWORD *)(unknown_libname_5(&v15) + 28);
    v21 = *(_BYTE *)(unknown_libname_5(&v15) + 20);
    v22 = *(_BYTE *)(unknown_libname_5(&v15) + 77);
    v3 = unknown_libname_5(&v15);
    strncpy(&v18, (const char *)(v3 + 32), 0xFu);
    v25 = *(_DWORD *)(unknown_libname_5(&v15) + 68);
    if ( v17 == 4 )
    {
      *(_DWORD *)(unknown_libname_5(&v15) + 48) = 0;
    }
    else
    {
      v23 = *(_DWORD *)(unknown_libname_5(&v15) + 16);
      v16 = *(_DWORD *)(unknown_libname_5(&v15) + 12);
      sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v8 + 4), &v11, v15);
      LOBYTE(v24) = 1;
    }
  }
  sub_42D4F0(v8 + 20);
  v19 = 0;
  LOBYTE(v4) = v24;
  if ( (_BYTE)v24 )
  {
    if ( byte_4785C0 && (v25 & 4) == 4 )
      LOBYTE(v4) = sub_402160(&v18, a2, v21);
    if ( v23 < 1000 && v23 > 0 )
    {
      v4 = sub_424C58(&unk_47F548, a2);
      v13 = v4;
      if ( v4 )
        LOBYTE(v4) = sub_4250BF(v13, v16, v23);
    }
  }
  if ( v17 == 3 && (_BYTE)v24 )
  {
    if ( v22 <= dword_48163C && v22 >= 1 )
    {
      v5 = sub_434524(&unk_480D50, &v10, v22);
      sub_439142(v5[16], (int)aCdcs_0, 1);
    }
    LOBYTE(v4) = v21;
    if ( v21 <= dword_48163C && v21 >= 1 )
    {
      v6 = sub_434524(&unk_480D50, &v9, v21);
      LOBYTE(v4) = sub_439142(v6[16], (int)aCdcs_1, 1);
    }
  }
  return v4;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 4785C0: using guessed type char byte_4785C0;
// 48163C: using guessed type int dword_48163C;

//----- (00402E5F) --------------------------------------------------------
void __thiscall sub_402E5F(void *this, int a2)
{
  _DWORD *v2; // eax@2
  _DWORD *v3; // eax@6
  int v4; // ST08_4@7
  int v5; // eax@7
  int v6; // [sp+0h] [bp-18h]@1
  char v7; // [sp+4h] [bp-14h]@9
  char v8; // [sp+8h] [bp-10h]@8
  char v9; // [sp+Ch] [bp-Ch]@2
  int v10; // [sp+10h] [bp-8h]@1
  int v11; // [sp+14h] [bp-4h]@1

  v6 = (int)this;
  v11 = 0;
  sub_42D4B5((int)this + 20);
  sub_405220((void *)(v6 + 4), (int)&v10);
  while ( 1 )
  {
    v2 = (_DWORD *)sub_405240((void *)(v6 + 4), (int)&v9);
    if ( !(unsigned __int8)sub_405450(&v10, v2) )
      break;
    if ( *(_BYTE *)(unknown_libname_5(&v10) + 20) != a2 && *(_BYTE *)(unknown_libname_5(&v10) + 77) != a2 )
    {
      sub_405420(&v10, &v7, 0);
    }
    else
    {
      if ( *(_DWORD *)(unknown_libname_5(&v10) + 16) < 1000 )
      {
        v3 = (_DWORD *)unknown_libname_5(&v10);
        v11 = sub_424C58(&unk_47F548, *v3);
        if ( v11 )
        {
          v4 = *(_DWORD *)(unknown_libname_5(&v10) + 16);
          v5 = unknown_libname_5(&v10);
          sub_4250BF(v11, *(_DWORD *)(v5 + 12), v4);
        }
      }
      v10 = *sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v6 + 4), &v8, v10);
      InterlockedDecrement(&Addend);
    }
  }
  sub_42D4F0(v6 + 20);
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (00402F6E) --------------------------------------------------------
void __thiscall sub_402F6E(void *this)
{
  _DWORD *v1; // eax@2
  int v2; // eax@4
  _DWORD *v3; // eax@7
  int v4; // ST0C_4@8
  int v5; // eax@8
  int v6; // [sp+0h] [bp-18h]@1
  char v7; // [sp+4h] [bp-14h]@9
  char v8; // [sp+8h] [bp-10h]@2
  char v9; // [sp+Ch] [bp-Ch]@1
  int i; // [sp+10h] [bp-8h]@1
  int v11; // [sp+14h] [bp-4h]@1

  v6 = (int)this;
  unknown_libname_4(&i);
  v11 = 0;
  sub_42D4B5(v6 + 20);
  for ( i = *(_DWORD *)sub_405220((void *)(v6 + 4), (int)&v9);
        ;
        i = *sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v6 + 4), &v7, i) )
  {
    v1 = (_DWORD *)sub_405240((void *)(v6 + 4), (int)&v8);
    if ( !(unsigned __int8)sub_405450(&i, v1) )
      break;
    if ( *(_DWORD *)(unknown_libname_5(&i) + 24) != -1 )
    {
      v2 = unknown_libname_5(&i);
      sub_410A93(*(_DWORD *)(v2 + 24), (int)aCc_2, 6);
    }
    if ( *(_DWORD *)(unknown_libname_5(&i) + 16) < 1000 && *(_DWORD *)(unknown_libname_5(&i) + 16) > 0 )
    {
      v3 = (_DWORD *)unknown_libname_5(&i);
      v11 = sub_424C58(&unk_47F548, *v3);
      if ( v11 )
      {
        v4 = *(_DWORD *)(unknown_libname_5(&i) + 16);
        v5 = unknown_libname_5(&i);
        sub_4250BF(v11, *(_DWORD *)(v5 + 12), v4);
      }
    }
  }
  sub_42D4F0(v6 + 20);
  Addend = 0;
}
// 4053E0: using guessed type int __thiscall unknown_libname_4(_DWORD);
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (0040308E) --------------------------------------------------------
int __thiscall sub_40308E(void *this, PVOID Parameter, int a3)
{
  _DWORD *v3; // eax@3
  int v4; // eax@4
  int v6; // [sp+0h] [bp-18h]@1
  char v7; // [sp+4h] [bp-14h]@3
  HANDLE Timer; // [sp+8h] [bp-10h]@1
  char v9; // [sp+Ch] [bp-Ch]@3
  HANDLE phNewTimer; // [sp+10h] [bp-8h]@1
  int v11; // [sp+14h] [bp-4h]@1

  v6 = (int)this;
  v11 = 0;
  phNewTimer = 0;
  Timer = 0;
  if ( (_BYTE)a3 )
    CreateTimerQueueTimer(&phNewTimer, 0, Callback, Parameter, 0x493E0u, 0, 0);
  sub_42D4B5(v6 + 20);
  sub_4052E0((void *)(v6 + 4), &v9, &Parameter);
  v3 = (_DWORD *)sub_405240((void *)(v6 + 4), (int)&v7);
  if ( (unsigned __int8)sub_405450(&v9, v3) )
  {
    v11 = *(_DWORD *)(unknown_libname_5(&v9) + 24);
    Timer = *(HANDLE *)(unknown_libname_5(&v9) + 48);
    v4 = unknown_libname_5(&v9);
    *(_DWORD *)(v4 + 48) = phNewTimer;
  }
  sub_42D4F0(v6 + 20);
  if ( Timer )
    DeleteTimerQueueTimer(0, Timer, 0);
  return v11;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (00403167) --------------------------------------------------------
int __thiscall sub_403167(void *this, PVOID Parameter, int a3, int a4, int a5, char *a6)
{
  _DWORD *v6; // eax@3
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@5
  int v10; // eax@5
  int v11; // eax@6
  int v12; // eax@6
  int v14; // [sp+0h] [bp-18h]@1
  char v15; // [sp+4h] [bp-14h]@3
  HANDLE Timer; // [sp+8h] [bp-10h]@1
  char v17; // [sp+Ch] [bp-Ch]@3
  HANDLE phNewTimer; // [sp+10h] [bp-8h]@1
  int v19; // [sp+14h] [bp-4h]@1

  v14 = (int)this;
  v19 = 0;
  phNewTimer = 0;
  Timer = 0;
  if ( (_BYTE)a4 )
    CreateTimerQueueTimer(&phNewTimer, 0, Callback, Parameter, 0x493E0u, 0, 0);
  *(_BYTE *)a5 = 0;
  sub_42D4B5(v14 + 20);
  sub_4052E0((void *)(v14 + 4), &v17, &Parameter);
  v6 = (_DWORD *)sub_405240((void *)(v14 + 4), (int)&v15);
  if ( (unsigned __int8)sub_405450(&v17, v6) )
  {
    v19 = *(_DWORD *)(unknown_libname_5(&v17) + 24);
    Timer = *(HANDLE *)(unknown_libname_5(&v17) + 48);
    v7 = unknown_libname_5(&v17);
    *(_DWORD *)(v7 + 48) = phNewTimer;
    v8 = unknown_libname_5(&v17);
    if ( a3 == *(_BYTE *)(v8 + 77) )
    {
      v11 = unknown_libname_5(&v17);
      *(_BYTE *)(v11 + 20) = a3;
      *(_DWORD *)(unknown_libname_5(&v17) + 28) = 3;
      v12 = unknown_libname_5(&v17);
      strncpy(a6, (const char *)(v12 + 32), 0xEu);
    }
    else
    {
      v9 = unknown_libname_5(&v17);
      *(_BYTE *)a5 = *(_BYTE *)(v9 + 77);
      v10 = unknown_libname_5(&v17);
      strncpy(a6, (const char *)(v10 + 32), 0xEu);
    }
    *(_BYTE *)(unknown_libname_5(&v17) + 77) = 0;
  }
  sub_42D4F0(v14 + 20);
  if ( Timer )
    DeleteTimerQueueTimer(0, Timer, 0);
  return v19;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (004032CA) --------------------------------------------------------
char __thiscall sub_4032CA(void *this, char a2, char *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  int v6; // [sp+0h] [bp-28h]@1
  char v7; // [sp+4h] [bp-24h]@2
  char v8; // [sp+8h] [bp-20h]@1
  int v9; // [sp+Ch] [bp-1Ch]@8
  int v10; // [sp+10h] [bp-18h]@1
  int v11; // [sp+14h] [bp-14h]@2
  int v12; // [sp+18h] [bp-10h]@1
  int v13; // [sp+1Ch] [bp-Ch]@1
  int v14; // [sp+20h] [bp-8h]@1
  int v15; // [sp+24h] [bp-4h]@1

  v6 = (int)this;
  LOBYTE(v14) = 0;
  v12 = 0;
  v13 = 0;
  v15 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v6 + 4), &v10, &a2);
  v3 = (_DWORD *)sub_405240((void *)(v6 + 4), (int)&v8);
  if ( (unsigned __int8)sub_405450(&v10, v3) )
  {
    v4 = unknown_libname_5(&v10);
    strncpy(a3, (const char *)(v4 + 32), 0xFu);
    v15 = *(_DWORD *)(unknown_libname_5(&v10) + 68);
    v13 = *(_DWORD *)(unknown_libname_5(&v10) + 16);
    v11 = *(_DWORD *)(unknown_libname_5(&v10) + 12);
    sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v6 + 4), &v7, v10);
    LOBYTE(v14) = 1;
  }
  sub_42D4F0(v6 + 20);
  a3[14] = 0;
  if ( (_BYTE)v14 )
  {
    if ( byte_4785C0 && (v15 & 4) == 4 )
      sub_402160(a3, a2, v12);
    if ( v13 < 1000 )
    {
      v9 = sub_424C58(&unk_47F548, a2);
      if ( v9 )
        sub_4250BF(v9, v11, v13);
    }
  }
  return v14;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 4785C0: using guessed type char byte_4785C0;

//----- (0040340F) --------------------------------------------------------
char __thiscall sub_40340F(void *this, char a2, int a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@3
  int v5; // eax@4
  int v7; // [sp+0h] [bp-40h]@1
  char v8; // [sp+4h] [bp-3Ch]@4
  char v9; // [sp+8h] [bp-38h]@1
  int v10; // [sp+Ch] [bp-34h]@7
  int v11; // [sp+10h] [bp-30h]@1
  int v12; // [sp+14h] [bp-2Ch]@1
  int v13; // [sp+18h] [bp-28h]@4
  int v14; // [sp+1Ch] [bp-24h]@1
  CHAR MultiByteStr; // [sp+20h] [bp-20h]@4
  char v16; // [sp+2Eh] [bp-12h]@5
  int v17; // [sp+30h] [bp-10h]@4
  int v18; // [sp+34h] [bp-Ch]@1
  int v19; // [sp+38h] [bp-8h]@1
  int v20; // [sp+3Ch] [bp-4h]@1

  v7 = (int)this;
  LOBYTE(v19) = 0;
  v14 = 0;
  v12 = 0;
  v18 = 0;
  v20 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v7 + 4), &v11, &a2);
  v3 = (_DWORD *)sub_405240((void *)(v7 + 4), (int)&v9);
  if ( (unsigned __int8)sub_405450(&v11, v3) )
  {
    if ( *(_DWORD *)(unknown_libname_5(&v11) + 28) != 3 )
    {
      v4 = unknown_libname_5(&v11);
      if ( *(_DWORD *)(v4 + 24) == a3 )
      {
        v17 = *(_DWORD *)(unknown_libname_5(&v11) + 16);
        v13 = *(_DWORD *)(unknown_libname_5(&v11) + 12);
        v5 = unknown_libname_5(&v11);
        strcpy(&MultiByteStr, (const char *)(v5 + 32));
        v14 = *(_BYTE *)(unknown_libname_5(&v11) + 72);
        v12 = *(_BYTE *)(unknown_libname_5(&v11) + 52);
        v18 = *(_BYTE *)(unknown_libname_5(&v11) + 20);
        v20 = *(_DWORD *)(unknown_libname_5(&v11) + 68);
        sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v7 + 4), &v8, v11);
        LOBYTE(v19) = 1;
      }
    }
  }
  sub_42D4F0(v7 + 20);
  v16 = 0;
  if ( v17 < 1000 )
  {
    if ( (_BYTE)v19 )
    {
      v10 = sub_424C58(&unk_47F548, a2);
      if ( v10 )
        sub_4250BF(v10, v13, v17);
    }
  }
  if ( (unsigned __int8)v19 == 1 )
  {
    if ( byte_4785C0 && (v20 & 4) == 4 )
      sub_402160(&MultiByteStr, a2, v18);
    if ( strlen(&MultiByteStr) >= 2 && v12 < 7 )
      sub_43AFA2(831, &MultiByteStr, v13, v17, v14, v12, 0, 0, a2);
  }
  return 1;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 4785C0: using guessed type char byte_4785C0;

//----- (004035F9) --------------------------------------------------------
char __thiscall sub_4035F9(void *this, PVOID Parameter, int a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  int v6; // eax@7
  int v7; // [sp+10h] [bp-5Ch]@1
  char v8; // [sp+14h] [bp-58h]@7
  char v9; // [sp+18h] [bp-54h]@1
  int v10; // [sp+1Ch] [bp-50h]@14
  int v11; // [sp+20h] [bp-4Ch]@1
  char v12; // [sp+24h] [bp-48h]@7
  int v13; // [sp+28h] [bp-44h]@7
  int v14; // [sp+2Ch] [bp-40h]@1
  int v15; // [sp+30h] [bp-3Ch]@1
  CHAR MultiByteStr; // [sp+34h] [bp-38h]@7
  char v17; // [sp+42h] [bp-2Ah]@8
  int v18; // [sp+44h] [bp-28h]@1
  int v19; // [sp+48h] [bp-24h]@1
  int v20; // [sp+4Ch] [bp-20h]@1
  int v21; // [sp+50h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+54h] [bp-18h]@1

  v7 = (int)this;
  LOBYTE(v21) = 0;
  ms_exc.registration.TryLevel = 0;
  v18 = 0;
  v14 = 0;
  v15 = 0;
  v19 = 0;
  v20 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v7 + 4), &v11, &Parameter);
  v3 = (_DWORD *)sub_405240((void *)(v7 + 4), (int)&v9);
  if ( (unsigned __int8)sub_405450(&v11, v3) )
  {
    v4 = unknown_libname_5(&v11);
    if ( *(_DWORD *)(v4 + 8) == a3 )
    {
      if ( *(_DWORD *)(unknown_libname_5(&v11) + 28) == 4 )
      {
        sub_42D4F0(v7 + 20);
        LOBYTE(v21) = sub_403E28(&unk_481698, Parameter, 0, 0);
        if ( (_BYTE)v21 )
          LOBYTE(v21) = sub_4038C3(&unk_481698, (char)Parameter);
        ms_exc.registration.TryLevel = -1;
        return v21;
      }
      v6 = unknown_libname_5(&v11);
      strncpy(&MultiByteStr, (const char *)(v6 + 32), 0xFu);
      v13 = *(_DWORD *)(unknown_libname_5(&v11) + 12);
      v18 = *(_DWORD *)(unknown_libname_5(&v11) + 16);
      v12 = *(_BYTE *)(unknown_libname_5(&v11) + 52);
      v14 = *(_DWORD *)(unknown_libname_5(&v11) + 56);
      v15 = *(_BYTE *)(unknown_libname_5(&v11) + 72);
      v19 = *(_BYTE *)(unknown_libname_5(&v11) + 20);
      v20 = *(_DWORD *)(unknown_libname_5(&v11) + 68);
      sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v7 + 4), &v8, v11);
      LOBYTE(v21) = 1;
    }
  }
  sub_42D4F0(v7 + 20);
  v17 = 0;
  if ( (_BYTE)v21 )
  {
    if ( byte_4785C0 && (v20 & 4) == 4 )
      sub_402160(&MultiByteStr, (char)Parameter, v19);
    if ( v18 < 1000 && v18 > 0 )
    {
      v10 = sub_424C58(&unk_47F548, (char)Parameter);
      if ( v10 )
        sub_4250BF(v10, v13, v18);
    }
    if ( strlen(&MultiByteStr) >= 2 && v12 < 7 )
      sub_43AFA2(831, &MultiByteStr, v13, v18, v15, v12, 0, 0, (int)Parameter);
  }
  return v21;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 4785C0: using guessed type char byte_4785C0;

//----- (004038C3) --------------------------------------------------------
char __thiscall sub_4038C3(void *this, char a2)
{
  _DWORD *v2; // eax@1
  int v3; // eax@2
  int v5; // [sp+0h] [bp-44h]@1
  char v6; // [sp+4h] [bp-40h]@2
  char v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@10
  int v9; // [sp+10h] [bp-34h]@1
  char v10; // [sp+14h] [bp-30h]@1
  int v11; // [sp+18h] [bp-2Ch]@2
  int v12; // [sp+1Ch] [bp-28h]@1
  int v13; // [sp+20h] [bp-24h]@1
  CHAR MultiByteStr; // [sp+24h] [bp-20h]@2
  char v15; // [sp+32h] [bp-12h]@4
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v5 = (int)this;
  LOBYTE(v18) = 0;
  v10 = 0;
  v16 = 0;
  v12 = 0;
  v13 = 0;
  v17 = 0;
  v19 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v5 + 4), &v9, &a2);
  v2 = (_DWORD *)sub_405240((void *)(v5 + 4), (int)&v7);
  if ( (unsigned __int8)sub_405450(&v9, v2) )
  {
    v3 = unknown_libname_5(&v9);
    strncpy(&MultiByteStr, (const char *)(v3 + 32), 0xFu);
    v11 = *(_DWORD *)(unknown_libname_5(&v9) + 12);
    v10 = *(_BYTE *)(unknown_libname_5(&v9) + 52);
    v16 = *(_DWORD *)(unknown_libname_5(&v9) + 16);
    v12 = *(_DWORD *)(unknown_libname_5(&v9) + 56);
    v13 = *(_BYTE *)(unknown_libname_5(&v9) + 72);
    v17 = *(_BYTE *)(unknown_libname_5(&v9) + 20);
    sub_4052A0((Concurrency::details::_NonReentrantPPLLock *)(v5 + 4), &v6, v9);
    sub_42D4F0(v5 + 20);
    LOBYTE(v18) = 1;
  }
  else
  {
    sub_42D4F0(v5 + 20);
  }
  v15 = 0;
  if ( (_BYTE)v18 )
  {
    if ( byte_4785C0 && (v19 & 4) == 4 )
      sub_402160(&MultiByteStr, a2, v17);
    if ( v16 < 1000 && v16 > 0 )
    {
      v8 = sub_424C58(&unk_47F548, a2);
      if ( v8 )
        sub_4250BF(v8, v11, v16);
    }
    if ( strlen(&MultiByteStr) >= 2 && v10 < 7 )
      sub_43AFA2(831, &MultiByteStr, v11, v16, v13, v10, 0, 0, a2);
  }
  return v18;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 4785C0: using guessed type char byte_4785C0;

//----- (00403AA1) --------------------------------------------------------
char __thiscall sub_403AA1(void *this, int a2, char a3)
{
  _DWORD *v3; // eax@1
  time_t v4; // esi@2
  int v5; // eax@2
  int v6; // eax@2
  int v8; // [sp+Ch] [bp-74h]@1
  char v9; // [sp+10h] [bp-70h]@1
  time_t v10; // [sp+14h] [bp-6Ch]@17
  char v11; // [sp+18h] [bp-68h]@15
  char v12; // [sp+19h] [bp-67h]@17
  char v13; // [sp+1Dh] [bp-63h]@17
  char v14; // [sp+2Bh] [bp-55h]@17
  char v15; // [sp+2Ch] [bp-54h]@17
  char v16; // [sp+30h] [bp-50h]@17
  char v17; // [sp+34h] [bp-4Ch]@1
  char v18; // [sp+38h] [bp-48h]@1
  int v19; // [sp+3Ch] [bp-44h]@1
  HANDLE Timer; // [sp+40h] [bp-40h]@1
  int v21; // [sp+44h] [bp-3Ch]@1
  int v22; // [sp+48h] [bp-38h]@2
  CHAR MultiByteStr; // [sp+4Ch] [bp-34h]@1
  int v24; // [sp+5Ch] [bp-24h]@1
  int v25; // [sp+60h] [bp-20h]@1
  int v26; // [sp+64h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+68h] [bp-18h]@1

  v8 = (int)this;
  LOBYTE(v26) = 0;
  ms_exc.registration.TryLevel = 0;
  Timer = 0;
  memset(&MultiByteStr, 0, 0xFu);
  v18 = 0;
  v19 = 0;
  v24 = 0;
  v21 = 0;
  v25 = 0;
  sub_42D4B5(v8 + 20);
  sub_4052E0((void *)(v8 + 4), &v17, &a2);
  v3 = (_DWORD *)sub_405240((void *)(v8 + 4), (int)&v9);
  if ( (unsigned __int8)sub_405450(&v17, v3) )
  {
    v4 = time(0);
    *(_DWORD *)(unknown_libname_5(&v17) + 4) = v4;
    v5 = unknown_libname_5(&v17);
    *(_BYTE *)(v5 + 20) = a3;
    *(_DWORD *)(unknown_libname_5(&v17) + 28) = 4;
    Timer = *(HANDLE *)(unknown_libname_5(&v17) + 48);
    *(_DWORD *)(unknown_libname_5(&v17) + 48) = 0;
    *(_BYTE *)(unknown_libname_5(&v17) + 77) = 0;
    v6 = unknown_libname_5(&v17);
    strncpy(&MultiByteStr, (const char *)(v6 + 32), 0xFu);
    v22 = *(_DWORD *)(unknown_libname_5(&v17) + 12);
    v18 = *(_BYTE *)(unknown_libname_5(&v17) + 52);
    v24 = *(_DWORD *)(unknown_libname_5(&v17) + 16);
    v19 = *(_DWORD *)(unknown_libname_5(&v17) + 56);
    v21 = *(_BYTE *)(unknown_libname_5(&v17) + 72);
    v25 = *(_DWORD *)(unknown_libname_5(&v17) + 68);
    LOBYTE(v26) = 1;
  }
  sub_42D4F0(v8 + 20);
  if ( v24 < 1000 && v24 > 0 && (_BYTE)v26 )
    sub_4267A2(&unk_47F548, a2, v22, v24, a3);
  if ( Timer )
    DeleteTimerQueueTimer(0, Timer, 0);
  if ( (_BYTE)v26 )
  {
    InterlockedIncrement(&Addend);
    sub_43AFA2(802, &MultiByteStr, v22, v24, v21, v18, 0, Addend, a2);
  }
  if ( dword_481750 && byte_4785C0 && (v25 & 4) == 4 && (_BYTE)v26 )
  {
    memset(&v11, 0, 0x1Cu);
    if ( dword_478568 == 8 )
      v11 = 2;
    memcpy(&v12, &a2, 4u);
    strncpy(&v13, &MultiByteStr, 0xEu);
    v14 = a3;
    v10 = time(0);
    memcpy(&v15, &v10, 4u);
    memcpy(&v16, &v22, 4u);
    if ( byte_4785C0 && !byte_4819B9 )
    {
      sub_42D61C((int)&unk_481758);
      sub_418095(dword_481750);
      sub_43C476(dword_481750, (int)aCb_0, 0);
      sub_4180B3(dword_481750);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_481758);
    }
  }
  return v26;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 478568: using guessed type int dword_478568;
// 4785C0: using guessed type char byte_4785C0;
// 481750: using guessed type int dword_481750;
// 4819B9: using guessed type char byte_4819B9;

//----- (00403E28) --------------------------------------------------------
char __thiscall sub_403E28(void *this, PVOID Parameter, int a3, int a4)
{
  _DWORD *v4; // eax@3
  int v5; // eax@4
  int v6; // esi@6
  int v7; // eax@6
  int v9; // [sp+Ch] [bp-80h]@1
  char v10; // [sp+10h] [bp-7Ch]@3
  char v11; // [sp+14h] [bp-78h]@3
  int v12; // [sp+18h] [bp-74h]@1
  time_t v13; // [sp+1Ch] [bp-70h]@6
  int v14; // [sp+24h] [bp-68h]@13
  int v15; // [sp+28h] [bp-64h]@13
  char v16; // [sp+2Ch] [bp-60h]@11
  char v17; // [sp+38h] [bp-54h]@11
  char v18; // [sp+46h] [bp-46h]@10
  char v19; // [sp+4Ch] [bp-40h]@13
  int v20; // [sp+50h] [bp-3Ch]@13
  int v21; // [sp+54h] [bp-38h]@13
  int v22; // [sp+5Ch] [bp-30h]@10
  char v23; // [sp+60h] [bp-2Ch]@13
  __int16 v24; // [sp+62h] [bp-2Ah]@13
  HANDLE phNewTimer; // [sp+6Ch] [bp-20h]@1
  int v26; // [sp+70h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+74h] [bp-18h]@1

  v9 = (int)this;
  LOBYTE(v26) = 0;
  ms_exc.registration.TryLevel = 0;
  unknown_libname_4(&v12);
  phNewTimer = 0;
  if ( byte_478560 != 1 )
    CreateTimerQueueTimer(&phNewTimer, 0, Callback, Parameter, Period, 0, 0);
  sub_42D4B5(v9 + 20);
  v12 = *sub_4052E0((void *)(v9 + 4), &v11, &Parameter);
  v4 = (_DWORD *)sub_405240((void *)(v9 + 4), (int)&v10);
  if ( (unsigned __int8)sub_405450(&v12, v4) )
  {
    v5 = unknown_libname_5(&v12);
    if ( *(_BYTE *)(v5 + 20) == a4 || !a4 )
    {
      qmemcpy(&v13, (const void *)(unknown_libname_5(&v12) + 4), 0x50u);
      *(_DWORD *)(unknown_libname_5(&v12) + 28) = 1;
      v6 = unknown_libname_5(&v12);
      *(_BYTE *)(unknown_libname_5(&v12) + 76) = *(_BYTE *)(v6 + 20);
      *(_BYTE *)(unknown_libname_5(&v12) + 20) = 0;
      v7 = unknown_libname_5(&v12);
      *(_DWORD *)(v7 + 48) = phNewTimer;
      LOBYTE(v26) = 1;
    }
    sub_42D4F0(v9 + 20);
  }
  else
  {
    sub_42D4F0(v9 + 20);
  }
  if ( (_BYTE)v26 )
  {
    v18 = 0;
    if ( (v22 & 4) == 4 )
      sub_402160(&v17, (char)Parameter, v16);
    if ( v16 > 0 )
      sub_40418D((int)Parameter, v13, v16, v14, dword_478568, &v17, v15, v20, v21, v19, v23, v24);
  }
  return v26;
}
// 4053E0: using guessed type int __thiscall unknown_libname_4(_DWORD);
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);
// 478560: using guessed type char byte_478560;
// 478568: using guessed type int dword_478568;

//----- (0040418D) --------------------------------------------------------
char __stdcall sub_40418D(int rgbValue, time_t a2, char a3, unsigned __int8 a4, int a5, SQLPOINTER a6, int a7, int a8, int a9, char a10, int a11, int a12)
{
  SQLINTEGER v12; // eax@1
  SQLINTEGER v13; // eax@13
  SQLHSTMT Handle; // [sp+Ch] [bp-408h]@13
  int v16; // [sp+20h] [bp-3F4h]@13
  SQLINTEGER v17; // [sp+24h] [bp-3F0h]@13
  SQLCHAR v18; // [sp+28h] [bp-3ECh]@13
  SQLINTEGER v19; // [sp+128h] [bp-2ECh]@13
  SQLINTEGER v20; // [sp+12Ch] [bp-2E8h]@13
  __int16 v21; // [sp+130h] [bp-2E4h]@13
  SQLHSTMT StatementHandle; // [sp+134h] [bp-2E0h]@8
  SQLCHAR v23; // [sp+148h] [bp-2CCh]@8
  SQLINTEGER v24; // [sp+248h] [bp-1CCh]@8
  SQLINTEGER v25; // [sp+24Ch] [bp-1C8h]@8
  __int16 v26; // [sp+250h] [bp-1C4h]@8
  SQLHSTMT hstmt; // [sp+254h] [bp-1C0h]@1
  SQLINTEGER v28; // [sp+268h] [bp-1ACh]@1
  SQLINTEGER v29; // [sp+26Ch] [bp-1A8h]@1
  SQLINTEGER v30; // [sp+270h] [bp-1A4h]@1
  SQLCHAR StatementText; // [sp+274h] [bp-1A0h]@1
  SQLINTEGER v32; // [sp+374h] [bp-A0h]@1
  SQLINTEGER pcbValue; // [sp+378h] [bp-9Ch]@1
  SQLINTEGER v34; // [sp+37Ch] [bp-98h]@1
  __int16 v35; // [sp+380h] [bp-94h]@1
  char v36; // [sp+384h] [bp-90h]@1
  int v37; // [sp+394h] [bp-80h]@1
  int v38; // [sp+398h] [bp-7Ch]@1
  int v39; // [sp+39Ch] [bp-78h]@1
  int v40; // [sp+3A0h] [bp-74h]@1
  int v41; // [sp+3A4h] [bp-70h]@1
  int v42; // [sp+3A8h] [bp-6Ch]@1
  int v43; // [sp+3B8h] [bp-5Ch]@1
  int v44; // [sp+3BCh] [bp-58h]@1
  int v45; // [sp+3C0h] [bp-54h]@1
  int v46; // [sp+3C4h] [bp-50h]@1
  int v47; // [sp+3C8h] [bp-4Ch]@1
  int v48; // [sp+3CCh] [bp-48h]@1
  int v49; // [sp+3D0h] [bp-44h]@4
  __int16 v50; // [sp+3DCh] [bp-38h]@1
  __int16 v51; // [sp+3DEh] [bp-36h]@1
  __int16 v52; // [sp+3E0h] [bp-34h]@1
  __int16 v53; // [sp+3E2h] [bp-32h]@1
  __int16 v54; // [sp+3E4h] [bp-30h]@1
  __int16 v55; // [sp+3E6h] [bp-2Eh]@1
  int v56; // [sp+3E8h] [bp-2Ch]@1
  int v57; // [sp+3ECh] [bp-28h]@1
  int v58; // [sp+3F0h] [bp-24h]@4
  time_t v59; // [sp+3F4h] [bp-20h]@1
  __int16 v60; // [sp+3F8h] [bp-1Ch]@1
  __int16 v61; // [sp+3FAh] [bp-1Ah]@1
  __int16 v62; // [sp+3FCh] [bp-18h]@1
  __int16 v63; // [sp+3FEh] [bp-16h]@1
  __int16 v64; // [sp+400h] [bp-14h]@1
  __int16 v65; // [sp+402h] [bp-12h]@1
  int v66; // [sp+404h] [bp-10h]@1
  int v67; // [sp+410h] [bp-4h]@1
  unsigned __int8 v68; // [sp+429h] [bp+15h]@1
  unsigned __int8 v69; // [sp+42Ah] [bp+16h]@1
  unsigned __int8 v70; // [sp+42Bh] [bp+17h]@1

  sprintf(&v36, aD_D_D_D, a4, v68, v69, v70);
  v59 = time(0);
  v57 = v59 - a2;
  sub_43AFA2(804, (LPCSTR)a6, a4, a7, a11, a10, 0, v59 - a2, rgbValue);
  qmemcpy(&v43, localtime(&v59), 0x24u);
  qmemcpy(&v37, localtime(&a2), 0x24u);
  v60 = v48 + 1900;
  v61 = v47 + 1;
  v62 = v46;
  v63 = v45;
  v64 = v44;
  v65 = v43;
  v66 = 0;
  v50 = v42 + 1900;
  v51 = v41 + 1;
  v52 = v40;
  v53 = v39;
  v54 = v38;
  v55 = v37;
  v56 = 0;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  v67 = 0;
  pcbValue = 0;
  SQLBindParameter(hstmt, 1u, 1, -18, 4, 0, 0, &rgbValue, 0, &pcbValue);
  v34 = 0;
  SQLBindParameter(hstmt, 2u, 1, 93, 11, 0x13u, 0, &v50, 0, &v34);
  v28 = 0;
  SQLBindParameter(hstmt, 3u, 1, 93, 11, 0x13u, 0, &v60, 0, &v28);
  v32 = 0;
  SQLBindParameter(hstmt, 4u, 1, -18, 4, 0, 0, &a5, 0, &v32);
  v30 = 0;
  SQLBindParameter(hstmt, 5u, 1, -28, -6, 0, 0, &a3, 0, &v30);
  v29 = -3;
  v12 = strlen(&v36);
  SQLBindParameter(hstmt, 6u, 1, 1, 12, 0xFu, 0, &v36, v12, &v29);
  sprintf((char *)&StatementText, aCallDbo_ap_slo);
  v35 = SQLExecDirect(hstmt, &StatementText, -3);
  if ( v35 )
  {
    sub_414532(&hstmt, 3, hstmt, (int)&StatementText);
    sub_414A7B((int)&hstmt);
  }
  else
  {
    sub_414A7B((int)&hstmt);
  }
  v67 = -1;
  sub_413F5F((int)&hstmt);
  sub_42E0DD(
    (int)&unk_47FB68,
    0,
    aDDDDDDDDDDDDSD,
    v48 + 1900,
    v47 + 1,
    v46,
    v45,
    v44,
    v43,
    v42 + 1900,
    v41 + 1,
    v40,
    v39,
    v38,
    v37,
    a6,
    (unsigned __int8)a3,
    &v36,
    a7,
    v57,
    v57,
    a8,
    a9,
    a10,
    v49,
    a11,
    a12);
  v58 = a7 % 1000 / 100;
  if ( a7 >= 1000 || a7 <= 0 )
  {
    if ( v58 == 2 )
    {
      sub_413E9E((int)&StatementHandle, (int)&unk_478608);
      v67 = 1;
      v25 = 0;
      SQLBindParameter(StatementHandle, 1u, 1, -18, 4, 0, 0, &v57, 0, &v25);
      v24 = 0;
      SQLBindParameter(StatementHandle, 2u, 1, -18, 4, 0, 0, &rgbValue, 0, &v24);
      sprintf((char *)&v23, aCallDbo_ap_sus);
      v26 = SQLExecDirect(StatementHandle, &v23, -3);
      if ( v26 )
      {
        sub_414532(&StatementHandle, 3, StatementHandle, (int)&v23);
        sub_414A7B((int)&StatementHandle);
      }
      else
      {
        sub_414A7B((int)&StatementHandle);
      }
      v67 = -1;
      sub_413F5F((int)&StatementHandle);
    }
    else if ( v58 == 3 )
    {
      sub_413E9E((int)&Handle, (int)&unk_478608);
      v67 = 2;
      v19 = 0;
      v16 = 0;
      v13 = strlen((const char *)a6);
      SQLBindParameter(Handle, 1u, 1, 1, 12, 0xEu, 0, a6, v13, &v19);
      v20 = 0;
      SQLBindParameter(Handle, 2u, 1, 93, 11, 0x13u, 0, &v50, 0, &v20);
      v17 = 0;
      SQLBindParameter(Handle, 3u, 1, 93, 11, 0x13u, 0, &v60, 0, &v17);
      sprintf((char *)&v18, aCallDbo_ap_log);
      v21 = SQLExecDirect(Handle, &v18, -3);
      if ( v21 )
      {
        sub_414532(&Handle, 3, Handle, (int)&v18);
        sub_414A7B((int)&Handle);
      }
      else
      {
        sub_414A7B((int)&Handle);
      }
      v67 = -1;
      sub_413F5F((int)&Handle);
    }
  }
  else
  {
    sub_42651E(&unk_47F548, rgbValue, a4, a7, v57, a2, a3, (int)a6);
  }
  InterlockedDecrement(&Addend);
  return 1;
}

//----- (004047E1) --------------------------------------------------------
char __stdcall sub_4047E1(char rgbValue, int a2, SQLPOINTER a3)
{
  char v4; // [sp+4h] [bp-4h]@1

  v4 = sub_40492F(rgbValue, a3);
  if ( v4 )
    v4 = 19;
  return v4;
}

//----- (0040481A) --------------------------------------------------------
char __stdcall sub_40481A(int a1, int a2, int rgbValue)
{
  char result; // al@8
  char v4; // [sp+4h] [bp-20h]@6
  int v5; // [sp+18h] [bp-Ch]@1
  int v6; // [sp+1Ch] [bp-8h]@1
  char v7; // [sp+20h] [bp-4h]@1

  v7 = 0;
  v5 = *(_DWORD *)(a2 + 12) % 1000 / 100;
  v6 = 0;
  if ( *(_DWORD *)(a2 + 12) )
  {
    if ( v5 == 2 )
    {
      v7 = sub_4047E1(rgbValue, a2, &v6);
    }
    else if ( v5 == 3 )
    {
      sub_413E9E((int)&v4, (int)&unk_478608);
      sub_413F5F((int)&v4);
    }
  }
  else
  {
    v7 = 18;
  }
  if ( v7 )
  {
    sub_439D55(a1, (int)aCc_3, 1);
    result = v7;
  }
  else
  {
    if ( sub_4025DE(&unk_481698, a2, rgbValue, a1, v6, 0) )
    {
      *(_DWORD *)(a1 + 120) = GetTickCount();
      sub_43AFA2(
        801,
        (LPCSTR)(a2 + 28),
        *(_DWORD *)(a2 + 8),
        *(_DWORD *)(a2 + 12),
        *(_BYTE *)(a2 + 68),
        *(_BYTE *)(a2 + 48),
        0,
        dword_480428,
        rgbValue);
    }
    result = v7;
  }
  return result;
}

//----- (0040492F) --------------------------------------------------------
char __stdcall sub_40492F(char rgbValue, SQLPOINTER a2)
{
  char v2; // ST2C_1@6
  SQLHSTMT hstmt; // [sp+8h] [bp-134h]@1
  SQLCHAR StatementText; // [sp+1Ch] [bp-120h]@1
  char v6; // [sp+11Ch] [bp-20h]@2
  char v7; // [sp+120h] [bp-1Ch]@1
  SQLINTEGER pcbValue; // [sp+124h] [bp-18h]@1
  __int16 v9; // [sp+128h] [bp-14h]@1
  SQLINTEGER v10; // [sp+12Ch] [bp-10h]@1
  int v11; // [sp+138h] [bp-4h]@1

  v7 = 0;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  v11 = 0;
  pcbValue = 0;
  SQLBindParameter(hstmt, 1u, 1, -18, 4, 0, 0, &rgbValue, 0, &pcbValue);
  v10 = 0;
  SQLBindParameter(hstmt, 2u, 4, -18, 4, 0, 0, a2, 0, &v10);
  sprintf((char *)&StatementText, aCallDbo_ap_gus);
  v9 = SQLExecDirect(hstmt, &StatementText, -3);
  if ( v9 )
  {
    v7 = 1;
  }
  else
  {
    sub_4143F1(&hstmt, (bool *)&v6);
    if ( *(_DWORD *)a2 <= 0 )
      v7 = 19;
  }
  sub_414A7B((int)&hstmt);
  v2 = v7;
  v11 = -1;
  sub_413F5F((int)&hstmt);
  return v2;
}

//----- (00404A52) --------------------------------------------------------
char __thiscall sub_404A52(void *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, signed int a9, int a10)
{
  char result; // al@3
  _DWORD *v11; // eax@8
  _DWORD *v12; // eax@13
  void *v13; // [sp+0h] [bp-F4h]@1
  char v14; // [sp+4h] [bp-F0h]@13
  char v15; // [sp+5Ch] [bp-98h]@8
  SQLINTEGER StrLen_or_Ind; // [sp+B4h] [bp-40h]@5
  char TargetValue; // [sp+B8h] [bp-3Ch]@5
  int v18; // [sp+C8h] [bp-2Ch]@5
  SQLHSTMT StatementHandle; // [sp+CCh] [bp-28h]@5
  char v20; // [sp+E0h] [bp-14h]@1
  int v21; // [sp+E4h] [bp-10h]@1
  int v22; // [sp+F0h] [bp-4h]@5

  v13 = this;
  v20 = 0;
  v21 = 0;
  if ( sub_43517B(a9) || !a8 )
  {
    if ( byte_478576 )
    {
      memset(&TargetValue, 0, 0x10u);
      sub_413E9E((int)&StatementHandle, (int)&unk_478608);
      v22 = 0;
      StrLen_or_Ind = 0;
      SQLBindCol(StatementHandle, 1u, -2, &TargetValue, 16, &StrLen_or_Ind);
      sub_414123((int)&StatementHandle, aSelectUser_dat, a2);
      sub_4143F1(&StatementHandle, 0);
      v18 = 16;
      if ( a9 <= dword_48163C && a9 >= 1 )
      {
        v11 = sub_434524(&unk_480D50, &v15, a9);
        v21 = sub_439142(v11[16], (int)aCdsdddbd, 0);
      }
      v22 = -1;
      sub_413F5F((int)&StatementHandle);
    }
    else if ( a9 <= dword_48163C && a9 >= 1 )
    {
      v12 = sub_434524(&unk_480D50, &v14, a9);
      v21 = sub_439142(v12[16], (int)aCdsdddd_0, 0);
    }
    if ( a8 )
    {
      if ( v21 )
      {
        v20 = sub_402507(v13, a2, *(_DWORD *)(a8 + 88), a7, a9);
        if ( v20 )
          sub_439D55(a8, (int)aCc_6, 6);
      }
      else
      {
        v20 = 8;
        sub_439D55(a8, (int)aCc_5, 6);
      }
    }
    result = v20;
  }
  else
  {
    sub_439D55(a8, (int)aCc_4, 6);
    result = 8;
  }
  return result;
}
// 478576: using guessed type char byte_478576;
// 48163C: using guessed type int dword_48163C;

//----- (00404C7A) --------------------------------------------------------
char __thiscall sub_404C7A(void *this, char a2, char *a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // eax@1
  int v8; // eax@2
  int v9; // eax@2
  int v10; // eax@2
  int v11; // eax@2
  int v12; // eax@2
  int v14; // [sp+0h] [bp-14h]@1
  char v15; // [sp+4h] [bp-10h]@1
  char v16; // [sp+8h] [bp-Ch]@1
  HANDLE Timer; // [sp+Ch] [bp-8h]@1
  char v18; // [sp+10h] [bp-4h]@1

  v14 = (int)this;
  v18 = 0;
  Timer = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v14 + 4), &v16, &a2);
  v7 = (_DWORD *)sub_405240((void *)(v14 + 4), (int)&v15);
  if ( (unsigned __int8)sub_405450(&v16, v7) )
  {
    v8 = unknown_libname_5(&v16);
    strncpy(a3, (const char *)(v8 + 32), 0xFu);
    v9 = unknown_libname_5(&v16);
    *(_DWORD *)a4 = *(_DWORD *)(v9 + 64);
    v10 = unknown_libname_5(&v16);
    *(_DWORD *)a5 = *(_DWORD *)(v10 + 68);
    v11 = unknown_libname_5(&v16);
    *(_DWORD *)a7 = *(_DWORD *)(v11 + 24);
    v12 = unknown_libname_5(&v16);
    *(_DWORD *)a6 = *(_DWORD *)(v12 + 8);
    Timer = *(HANDLE *)(unknown_libname_5(&v16) + 48);
    *(_DWORD *)(unknown_libname_5(&v16) + 48) = 0;
    v18 = 1;
  }
  sub_42D4F0(v14 + 20);
  if ( Timer )
    DeleteTimerQueueTimer(0, Timer, 0);
  return v18;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (00404D70) --------------------------------------------------------
char __thiscall sub_404D70(void *this, char a2, char *a3, int a4, int a5, int a6)
{
  _DWORD *v6; // eax@1
  int v7; // eax@2
  int v8; // eax@2
  int v9; // eax@2
  int v10; // eax@2
  int v12; // [sp+0h] [bp-10h]@1
  char v13; // [sp+4h] [bp-Ch]@1
  char v14; // [sp+8h] [bp-8h]@1
  char v15; // [sp+Ch] [bp-4h]@1

  v12 = (int)this;
  v15 = 0;
  sub_42D4B5((int)this + 20);
  sub_4052E0((void *)(v12 + 4), &v14, &a2);
  v6 = (_DWORD *)sub_405240((void *)(v12 + 4), (int)&v13);
  if ( (unsigned __int8)sub_405450(&v14, v6) )
  {
    v7 = unknown_libname_5(&v14);
    strncpy(a3, (const char *)(v7 + 32), 0xFu);
    v8 = unknown_libname_5(&v14);
    *(_DWORD *)a4 = *(_DWORD *)(v8 + 16);
    v9 = unknown_libname_5(&v14);
    *(_DWORD *)a5 = *(_DWORD *)(v9 + 12);
    v10 = unknown_libname_5(&v14);
    *(_DWORD *)a6 = *(_DWORD *)(v10 + 4);
    sub_42D4F0(v12 + 20);
    v15 = 1;
  }
  else
  {
    sub_42D4F0(v12 + 20);
  }
  return v15;
}
// 405400: using guessed type int __thiscall unknown_libname_5(_DWORD);

//----- (00404E2B) --------------------------------------------------------
char __thiscall sub_404E2B(void *this, const void *a2, char a3, int a4, int a5, int a6)
{
  struct Concurrency::IExecutionContext *v6; // eax@1
  int v8; // [sp+0h] [bp-64h]@1
  char v9; // [sp+4h] [bp-60h]@1
  int v10; // [sp+58h] [bp-Ch]@1
  char v11; // [sp+5Ch] [bp-8h]@1
  int v12; // [sp+60h] [bp-4h]@1

  v8 = (int)this;
  LOBYTE(v12) = 0;
  sub_42D4B5((int)this + 20);
  v6 = (struct Concurrency::IExecutionContext *)sub_4053B0((int)&v9, &a3, a2);
  sub_405260((void *)(v8 + 4), (int)&v10, v6);
  LOBYTE(v12) = v11;
  sub_42D4F0(v8 + 20);
  if ( !(_BYTE)v12 )
    sub_4027DF((void *)v8, a3, 7, 1);
  return v12;
}

//----- (00404E9A) --------------------------------------------------------
int __stdcall sub_404E9A(int a1)
{
  int v1; // ST10_4@4
  char v3; // [sp+8h] [bp-28h]@2
  int v4; // [sp+Ch] [bp-24h]@1
  int TargetValue; // [sp+20h] [bp-10h]@1
  int v6; // [sp+2Ch] [bp-4h]@1

  TargetValue = 0;
  sub_413E9E((int)&v4, (int)&unk_478608);
  v6 = 0;
  sub_414804((int)&v4, &TargetValue);
  if ( sub_414123((int)&v4, aSelectUser_cha, a1) )
  {
    v3 = 0;
    sub_4143F1((SQLHSTMT *)&v4, (bool *)&v3);
  }
  else
  {
    TargetValue = -1;
  }
  v1 = TargetValue;
  v6 = -1;
  sub_413F5F((int)&v4);
  return v1;
}

//----- (00404F3E) --------------------------------------------------------
char __stdcall sub_404F3E(int a1, int a2, char a3)
{
  char v3; // ST18_1@3
  int v5; // [sp+8h] [bp-24h]@1
  char v6; // [sp+1Ch] [bp-10h]@1
  int v7; // [sp+28h] [bp-4h]@1

  v6 = 0;
  sub_413E9E((int)&v5, (int)&unk_478608);
  v7 = 0;
  if ( sub_414123((int)&v5, aInsertIntoUser, a1, a3, a2) )
  {
    sub_414123((int)&v5, aUpdateUser_dat, a1);
    v6 = 1;
  }
  v3 = v6;
  v7 = -1;
  sub_413F5F((int)&v5);
  return v3;
}

//----- (00404FDC) --------------------------------------------------------
char __stdcall sub_404FDC(char rgbValue, char a2, char a3)
{
  char v3; // ST2C_1@4
  SQLHSTMT hstmt; // [sp+8h] [bp-128h]@1
  SQLCHAR StatementText; // [sp+1Ch] [bp-114h]@1
  char v7; // [sp+11Ch] [bp-14h]@1
  SQLINTEGER v8; // [sp+120h] [bp-10h]@1
  SQLINTEGER v9; // [sp+124h] [bp-Ch]@1
  SQLINTEGER pcbValue; // [sp+128h] [bp-8h]@1
  __int16 v11; // [sp+12Ch] [bp-4h]@1

  v7 = 0;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  pcbValue = 0;
  v9 = 0;
  v8 = 0;
  SQLBindParameter(hstmt, 1u, 1, -18, 4, 0, 0, &rgbValue, 0, &pcbValue);
  SQLBindParameter(hstmt, 2u, 1, -18, 4, 0, 0, &a2, 0, &v9);
  SQLBindParameter(hstmt, 3u, 1, -6, -6, 0, 0, &a3, 0, &v8);
  sprintf((char *)&StatementText, aCallDbo_ap_del);
  v11 = SQLExecDirect(hstmt, &StatementText, -3);
  if ( !v11 || v11 == 1 )
    v7 = 1;
  v3 = v7;
  sub_413F5F((int)&hstmt);
  return v3;
}

//----- (004050DC) --------------------------------------------------------
char __stdcall sub_4050DC(int a1, int a2, char a3, int a4, int a5)
{
  char v5; // ST20_1@3
  int v7; // [sp+8h] [bp-24h]@1
  char v8; // [sp+1Ch] [bp-10h]@1
  int v9; // [sp+28h] [bp-4h]@1

  v8 = 0;
  sub_413E9E((int)&v7, (int)&unk_478608);
  v9 = 0;
  if ( sub_414123((int)&v7, aUpdateUser_cha, a4, a5, a1, a2, a3) )
    v8 = 1;
  v5 = v8;
  v9 = -1;
  sub_413F5F((int)&v7);
  return v5;
}

//----- (0040517C) --------------------------------------------------------
int sub_40517C()
{
  return atexit(sub_402150);
}

//----- (00405190) --------------------------------------------------------
void *__thiscall sub_405190(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4022E9((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00405200) --------------------------------------------------------
void *__thiscall sub_405200(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_405480(this, a2, a3);
  return v3;
}

//----- (00405220) --------------------------------------------------------
int __thiscall sub_405220(void *this, int a2)
{
  sub_4054B0(this, a2);
  return a2;
}

//----- (00405240) --------------------------------------------------------
int __thiscall sub_405240(void *this, int a2)
{
  sub_4054E0((int)this, a2);
  return a2;
}

//----- (00405260) --------------------------------------------------------
int __thiscall sub_405260(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_405500(this, (int)&v4, a3);
  sub_4061F0(a2, &v4, &v5);
  return a2;
}

//----- (004052A0) --------------------------------------------------------
_DWORD *__thiscall sub_4052A0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  sub_4056F0(this, a2, a3);
  return a2;
}

//----- (004052E0) --------------------------------------------------------
_DWORD *__thiscall sub_4052E0(void *this, _DWORD *a2, _DWORD *a3)
{
  sub_4060C0(this, a2, a3);
  return a2;
}

//----- (00405300) --------------------------------------------------------
void __thiscall sub_405300(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_4054E0((int)this, (int)&v6);
  v2 = (int *)sub_4054B0((void *)v3, (int)&v5);
  sub_405F40((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_472464 )
  {
    v8 = (void *)dword_472460;
    dword_472460 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 472460: using guessed type int dword_472460;
// 472464: using guessed type int dword_472464;

//----- (004053B0) --------------------------------------------------------
int __thiscall sub_4053B0(int this, _DWORD *a2, const void *a3)
{
  *(_DWORD *)this = *a2;
  qmemcpy((void *)(this + 4), a3, 0x50u);
  return this;
}

//----- (00405420) --------------------------------------------------------
_DWORD *__thiscall sub_405420(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_9(this);
  *a2 = v3;
  return a2;
}
// 4061B0: using guessed type int __cdecl unknown_libname_9(_DWORD);

//----- (00405450) --------------------------------------------------------
BOOL __thiscall sub_405450(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_4061D0(this, a2) == 0;
}

//----- (00405480) --------------------------------------------------------
void *__thiscall sub_405480(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_4062E0((int)this, a2, 0, a3);
  return v3;
}

//----- (004054B0) --------------------------------------------------------
int __thiscall sub_4054B0(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_4068A0((int)this);
  unknown_libname_13(*v2);
  return a2;
}
// 406CB0: using guessed type _DWORD __stdcall unknown_libname_13(_DWORD);

//----- (004054E0) --------------------------------------------------------
int __thiscall sub_4054E0(int this, int a2)
{
  unknown_libname_13(*(_DWORD *)(this + 4));
  return a2;
}
// 406CB0: using guessed type _DWORD __stdcall unknown_libname_13(_DWORD);

//----- (00405500) --------------------------------------------------------
int __thiscall sub_405500(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_406A90((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_472460 )
  {
    v25 = v26;
    v3 = sub_406280(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_406220(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_11(v26);
    else
      v13 = *(_DWORD *)sub_4062C0(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_406410(v14, (int)&v22, v26, v25, a3);
    sub_4061F0(a2, v5, &v23);
    return a2;
  }
  unknown_libname_13(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_4054B0(v14, (int)&v21);
    if ( (unsigned __int8)sub_4061D0(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_406410(v14, (int)&v19, v26, v25, a3);
      sub_4061F0(a2, v8, &v20);
      return a2;
    }
    unknown_libname_14(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_12(&v28);
  v11 = sub_406280(v10);
  if ( (unsigned __int8)sub_406220(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_406410(v14, (int)&v16, v26, v25, a3);
    sub_4061F0(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_4061F0(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 406CA0: using guessed type int __thiscall unknown_libname_12(_DWORD);
// 406CB0: using guessed type _DWORD __stdcall unknown_libname_13(_DWORD);
// 406CD0: using guessed type int __thiscall unknown_libname_14(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (004056F0) --------------------------------------------------------
_DWORD *__thiscall sub_4056F0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  int v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_405420(&a3, &v76, 0);
  v81 = (void *)unknown_libname_12(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_11(v81) == dword_472460 )
  {
    v82 = *(_DWORD *)sub_4062C0((int)v81);
  }
  else if ( *(_DWORD *)sub_4062C0((int)v81) == dword_472460 )
  {
    v82 = *(_DWORD *)unknown_libname_11(v81);
  }
  else
  {
    v4 = (int *)sub_4062C0((int)v81);
    v81 = (void *)sub_406A30(*v4);
    v82 = *(_DWORD *)sub_4062C0((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_4062B0((int)v81);
    *(_DWORD *)sub_4062B0(v82) = *v27;
    v28 = (void **)sub_406A90((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_406A90((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_4062B0((int)v80);
      v31 = (void **)unknown_libname_11(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_4062B0((int)v80);
        v33 = (_DWORD *)unknown_libname_11(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_4062B0((int)v80);
        v35 = (_DWORD *)sub_4062C0(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_4068A0((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_4062C0((int)v80) == dword_472460 )
      {
        v37 = (_DWORD *)sub_4062B0((int)v80);
        *(_DWORD *)sub_4068A0((int)v75) = *v37;
      }
      else
      {
        v38 = sub_406A30(v82);
        *(_DWORD *)sub_4068A0((int)v75) = v38;
      }
    }
    v39 = (void **)sub_406A70((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_11(v80) == dword_472460 )
      {
        v40 = (_DWORD *)sub_4062B0((int)v80);
        *(_DWORD *)sub_406A70((int)v75) = *v40;
      }
      else
      {
        v41 = sub_4069F0(v82);
        *(_DWORD *)sub_406A70((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_11(v80);
    v6 = (void **)sub_4062B0(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_11(v80);
    *(_DWORD *)unknown_libname_11(v81) = *v7;
    v8 = (void **)sub_4062C0((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_4062B0(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_4062B0((int)v81);
      *(_DWORD *)sub_4062B0(v82) = *v10;
      v11 = (_DWORD *)sub_4062B0((int)v81);
      v12 = (_DWORD *)unknown_libname_11(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_4062C0((int)v80);
      *(_DWORD *)sub_4062C0((int)v81) = *v13;
      v14 = (int *)sub_4062C0((int)v80);
      v15 = (void **)sub_4062B0(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_406A90((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_406A90((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_4062B0((int)v80);
      v19 = (void **)unknown_libname_11(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_4062B0((int)v80);
        v21 = (void **)unknown_libname_11(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_4062B0((int)v80);
        v23 = (void **)sub_4062C0(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_4062B0((int)v80);
    *(_DWORD *)sub_4062B0((int)v81) = *v24;
    v25 = (int *)sub_406270((int)v80);
    v26 = (int *)sub_406270((int)v81);
    sub_407110(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_406270((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_406A90((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_406270(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_4062B0(v82);
      v44 = (_DWORD *)unknown_libname_11(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_4062B0(v82);
        v78 = *(_DWORD *)sub_4062C0(*v45);
        if ( !*(_DWORD *)sub_406270(v78) )
        {
          *(_DWORD *)sub_406270(v78) = 1;
          v46 = (int *)sub_4062B0(v82);
          *(_DWORD *)sub_406270(*v46) = 0;
          v47 = (int *)sub_4062B0(v82);
          sub_4068C0((void *)v75, *v47);
          v48 = (int *)sub_4062B0(v82);
          v78 = *(_DWORD *)sub_4062C0(*v48);
        }
        v49 = (int *)unknown_libname_11(v78);
        if ( *(_DWORD *)sub_406270(*v49) != 1 || (v50 = (int *)sub_4062C0(v78), *(_DWORD *)sub_406270(*v50) != 1) )
        {
          v51 = (int *)sub_4062C0(v78);
          if ( *(_DWORD *)sub_406270(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_11(v78);
            *(_DWORD *)sub_406270(*v52) = 1;
            *(_DWORD *)sub_406270(v78) = 0;
            sub_406AB0((void *)v75, v78);
            v53 = (int *)sub_4062B0(v82);
            v78 = *(_DWORD *)sub_4062C0(*v53);
          }
          v54 = (int *)sub_4062B0(v82);
          v55 = (_DWORD *)sub_406270(*v54);
          *(_DWORD *)sub_406270(v78) = *v55;
          v56 = (int *)sub_4062B0(v82);
          *(_DWORD *)sub_406270(*v56) = 1;
          v57 = (int *)sub_4062C0(v78);
          *(_DWORD *)sub_406270(*v57) = 1;
          v58 = (int *)sub_4062B0(v82);
          sub_4068C0((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_406270(v78) = 0;
        v82 = *(_DWORD *)sub_4062B0(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_4062B0(v82);
        v77 = *(_DWORD *)unknown_libname_11(*v59);
        if ( !*(_DWORD *)sub_406270(v77) )
        {
          *(_DWORD *)sub_406270(v77) = 1;
          v60 = (int *)sub_4062B0(v82);
          *(_DWORD *)sub_406270(*v60) = 0;
          v61 = (int *)sub_4062B0(v82);
          sub_406AB0((void *)v75, *v61);
          v62 = (_DWORD *)sub_4062B0(v82);
          v77 = *(_DWORD *)unknown_libname_11(*v62);
        }
        v63 = (int *)sub_4062C0(v77);
        if ( *(_DWORD *)sub_406270(*v63) != 1
          || (v64 = (int *)unknown_libname_11(v77), *(_DWORD *)sub_406270(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_11(v77);
          if ( *(_DWORD *)sub_406270(*v65) == 1 )
          {
            v66 = (int *)sub_4062C0(v77);
            *(_DWORD *)sub_406270(*v66) = 1;
            *(_DWORD *)sub_406270(v77) = 0;
            sub_4068C0((void *)v75, v77);
            v67 = (_DWORD *)sub_4062B0(v82);
            v77 = *(_DWORD *)unknown_libname_11(*v67);
          }
          v68 = (int *)sub_4062B0(v82);
          v69 = (_DWORD *)sub_406270(*v68);
          *(_DWORD *)sub_406270(v77) = *v69;
          v70 = (int *)sub_4062B0(v82);
          *(_DWORD *)sub_406270(*v70) = 1;
          v71 = (int *)unknown_libname_11(v77);
          *(_DWORD *)sub_406270(*v71) = 1;
          v72 = (int *)sub_4062B0(v82);
          sub_406AB0((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_406270(v77) = 0;
        v82 = *(_DWORD *)sub_4062B0(v82);
      }
    }
    *(_DWORD *)sub_406270(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = sub_4062D0((int)v81);
  sub_406BE0(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 406CA0: using guessed type int __thiscall unknown_libname_12(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00405F40) --------------------------------------------------------
_DWORD *__thiscall sub_405F40(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_7()
    || (v4 = (_DWORD *)sub_4054B0((void *)v9, (int)&v13), (unsigned __int8)sub_405450(&a3, v4))
    || (v5 = (_DWORD *)sub_4054E0(v9, (int)&v12), (unsigned __int8)sub_405450(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_405450(&a3, &a4) )
    {
      v6 = sub_405420(&a3, &v11, 0);
      sub_4056F0((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_406A90(v9);
    sub_406390((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_406A90(v9) = dword_472460;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_4068A0(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_406A70(v9) = *(_DWORD *)(v9 + 4);
    sub_4054B0((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 406040: using guessed type int unknown_libname_7(void);
// 472460: using guessed type int dword_472460;

//----- (00406060) --------------------------------------------------------
int __thiscall sub_406060(void *this, _DWORD *a2)
{
  void *v2; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v2 = this;
  sub_406350(this, (int)&v6, a2);
  v5 = 0;
  sub_407140(v6, v7, &v5);
  sub_405F40(v2, &v4, v6, v7);
  return v5;
}

//----- (004060C0) --------------------------------------------------------
_DWORD *__thiscall sub_4060C0(void *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  char *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  char *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_406320(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_4054E0(v8, (int)&v10);
  if ( (unsigned __int8)sub_4061D0(&v12, v3)
    || (v4 = unknown_libname_12(&v12), v5 = sub_406280(v4), (unsigned __int8)sub_406220(a3, v5)) )
  {
    v7 = (char *)sub_4054E0(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 406CA0: using guessed type int __thiscall unknown_libname_12(_DWORD);

//----- (00406190) --------------------------------------------------------
int __thiscall sub_406190(int *this)
{
  return sub_4062D0(*this);
}

//----- (004061D0) --------------------------------------------------------
BOOL __thiscall sub_4061D0(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (004061F0) --------------------------------------------------------
int __thiscall sub_4061F0(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (00406220) --------------------------------------------------------
BOOL __stdcall sub_406220(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (00406270) --------------------------------------------------------
int __cdecl sub_406270(int a1)
{
  return a1 + 96;
}

//----- (00406280) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_406280(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_4062D0(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (004062B0) --------------------------------------------------------
int __cdecl sub_4062B0(int a1)
{
  return a1 + 4;
}

//----- (004062C0) --------------------------------------------------------
int __cdecl sub_4062C0(int a1)
{
  return a1 + 8;
}

//----- (004062D0) --------------------------------------------------------
int __cdecl sub_4062D0(int a1)
{
  return a1 + 12;
}

//----- (004062E0) --------------------------------------------------------
int __thiscall sub_4062E0(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_406D20((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (00406320) --------------------------------------------------------
int __thiscall sub_406320(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_406E20(this, a3);
  unknown_libname_13(v3);
  return a2;
}
// 406CB0: using guessed type _DWORD __stdcall unknown_libname_13(_DWORD);

//----- (00406350) --------------------------------------------------------
int __thiscall sub_406350(void *this, int a2, _DWORD *a3)
{
  void *v3; // ST0C_4@1
  _DWORD *v4; // ST08_4@1
  _DWORD *v5; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = (_DWORD *)sub_406CF0(this, (int)&v8, a3);
  v5 = (_DWORD *)sub_406320(v3, (int)&v7, a3);
  sub_407010(a2, v5, v4);
  return a2;
}

//----- (00406390) --------------------------------------------------------
void *__thiscall sub_406390(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  int v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_472460; a2 = i )
  {
    v3 = (void **)sub_4062C0((int)i);
    sub_406390(*v3);
    i = *(void **)unknown_libname_11(i);
    v4 = sub_4062D0((int)a2);
    sub_406BE0(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00406410) --------------------------------------------------------
int __thiscall sub_406410(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_406EB0(a4, 0);
  *(_DWORD *)unknown_libname_11(v48) = dword_472460;
  *(_DWORD *)sub_4062C0((int)v48) = dword_472460;
  v5 = (void *)sub_4062D0((int)v48);
  sub_406F00(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_472460
    || (v6 = sub_406280(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_406220(v7, v6)) )
  {
    v8 = (char **)unknown_libname_11(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_406A90(v46);
      *v9 = v48;
      v10 = (char **)sub_406A70(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_4068A0(v46) )
    {
      v11 = (char **)sub_4068A0(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_4062C0(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_406A70(v46) )
    {
      v13 = (char **)sub_406A70(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_406A90(v46) )
  {
    v14 = (int *)sub_4062B0((int)v49);
    if ( *(_DWORD *)sub_406270(*v14) )
      break;
    v15 = (_DWORD *)sub_4062B0((int)v49);
    v16 = (int *)sub_4062B0((int)v49);
    v17 = (_DWORD *)sub_4062B0(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_11(*v17) )
    {
      v18 = (int *)sub_4062B0((int)v49);
      v19 = (int *)sub_4062B0(*v18);
      v20 = (int *)sub_4062C0(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_406270(*v20) )
      {
        v25 = (int *)sub_4062B0((int)v49);
        if ( v49 == *(char **)sub_4062C0(*v25) )
        {
          v49 = *(char **)sub_4062B0((int)v49);
          sub_4068C0((void *)v46, (int)v49);
        }
        v26 = (int *)sub_4062B0((int)v49);
        *(_DWORD *)sub_406270(*v26) = 1;
        v27 = (int *)sub_4062B0((int)v49);
        v28 = (int *)sub_4062B0(*v27);
        *(_DWORD *)sub_406270(*v28) = 0;
        v29 = (int *)sub_4062B0((int)v49);
        v30 = (int *)sub_4062B0(*v29);
        sub_406AB0((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_4062B0((int)v49);
        *(_DWORD *)sub_406270(*v21) = 1;
        *(_DWORD *)sub_406270(v50) = 1;
        v22 = (int *)sub_4062B0((int)v49);
        v23 = (int *)sub_4062B0(*v22);
        *(_DWORD *)sub_406270(*v23) = 0;
        v24 = (int *)sub_4062B0((int)v49);
        v49 = *(char **)sub_4062B0(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_4062B0((int)v49);
      v32 = (_DWORD *)sub_4062B0(*v31);
      v33 = (int *)unknown_libname_11(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_406270(*v33) )
      {
        v38 = (_DWORD *)sub_4062B0((int)v49);
        if ( v49 == *(char **)unknown_libname_11(*v38) )
        {
          v49 = *(char **)sub_4062B0((int)v49);
          sub_406AB0((void *)v46, (int)v49);
        }
        v39 = (int *)sub_4062B0((int)v49);
        *(_DWORD *)sub_406270(*v39) = 1;
        v40 = (int *)sub_4062B0((int)v49);
        v41 = (int *)sub_4062B0(*v40);
        *(_DWORD *)sub_406270(*v41) = 0;
        v42 = (int *)sub_4062B0((int)v49);
        v43 = (int *)sub_4062B0(*v42);
        sub_4068C0((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_4062B0((int)v49);
        *(_DWORD *)sub_406270(*v34) = 1;
        *(_DWORD *)sub_406270(v51) = 1;
        v35 = (int *)sub_4062B0((int)v49);
        v36 = (int *)sub_4062B0(*v35);
        *(_DWORD *)sub_406270(*v36) = 0;
        v37 = (int *)sub_4062B0((int)v49);
        v49 = *(char **)sub_4062B0(*v37);
      }
    }
  }
  v44 = (int *)sub_406A90(v46);
  *(_DWORD *)sub_406270(*v44) = 1;
  unknown_libname_13(v48);
  return a2;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 406CB0: using guessed type _DWORD __stdcall unknown_libname_13(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (004068A0) --------------------------------------------------------
int __thiscall sub_4068A0(int this)
{
  return unknown_libname_11(*(_DWORD *)(this + 4));
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (004068C0) --------------------------------------------------------
int *__thiscall sub_4068C0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_4062C0(a2);
  v2 = (_DWORD *)unknown_libname_11(v10);
  *(_DWORD *)sub_4062C0(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_11(v10) != dword_472460 )
  {
    v3 = (int *)unknown_libname_11(v10);
    *(_DWORD *)sub_4062B0(*v3) = a2;
  }
  v4 = (_DWORD *)sub_4062B0(a2);
  *(_DWORD *)sub_4062B0(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_406A90(v9) )
  {
    *(_DWORD *)sub_406A90(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_4062B0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_11(*v5) )
    {
      v6 = (_DWORD *)sub_4062B0(a2);
      *(_DWORD *)unknown_libname_11(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_4062B0(a2);
      *(_DWORD *)sub_4062C0(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_11(v10) = a2;
  result = (int *)sub_4062B0(a2);
  *result = v10;
  return result;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (004069F0) --------------------------------------------------------
int __cdecl sub_4069F0(int a1)
{
  while ( *(_DWORD *)sub_4062C0(a1) != dword_472460 )
    a1 = *(_DWORD *)sub_4062C0(a1);
  return a1;
}
// 472460: using guessed type int dword_472460;

//----- (00406A30) --------------------------------------------------------
int __cdecl sub_406A30(int a1)
{
  while ( *(_DWORD *)unknown_libname_11(a1) != dword_472460 )
    a1 = *(_DWORD *)unknown_libname_11(a1);
  return a1;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00406A70) --------------------------------------------------------
int __thiscall sub_406A70(int this)
{
  return sub_4062C0(*(_DWORD *)(this + 4));
}

//----- (00406A90) --------------------------------------------------------
int __thiscall sub_406A90(int this)
{
  return sub_4062B0(*(_DWORD *)(this + 4));
}

//----- (00406AB0) --------------------------------------------------------
int *__thiscall sub_406AB0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_11(a2);
  v2 = (_DWORD *)sub_4062C0(v10);
  *(_DWORD *)unknown_libname_11(a2) = *v2;
  if ( *(_DWORD *)sub_4062C0(v10) != dword_472460 )
  {
    v3 = (int *)sub_4062C0(v10);
    *(_DWORD *)sub_4062B0(*v3) = a2;
  }
  v4 = (_DWORD *)sub_4062B0(a2);
  *(_DWORD *)sub_4062B0(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_406A90(v9) )
  {
    *(_DWORD *)sub_406A90(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_4062B0(a2);
    if ( a2 == *(_DWORD *)sub_4062C0(*v5) )
    {
      v6 = (int *)sub_4062B0(a2);
      *(_DWORD *)sub_4062C0(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_4062B0(a2);
      *(_DWORD *)unknown_libname_11(*v7) = v10;
    }
  }
  *(_DWORD *)sub_4062C0(v10) = a2;
  result = (int *)sub_4062B0(a2);
  *result = v10;
  return result;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00406BE0) --------------------------------------------------------
void __stdcall sub_406BE0(int a1)
{
  sub_407170();
}

//----- (00406C00) --------------------------------------------------------
_DWORD *__thiscall sub_406C00(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_4062C0(*this) == dword_472460 )
  {
    while ( 1 )
    {
      v3 = (int *)sub_4062B0(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_4062C0(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_4062C0(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_4062C0(*v4);
    result = (_DWORD *)sub_406A30(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 472460: using guessed type int dword_472460;

//----- (00406CF0) --------------------------------------------------------
int __thiscall sub_406CF0(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_407080(this, a3);
  unknown_libname_13(v3);
  return a2;
}
// 406CB0: using guessed type _DWORD __stdcall unknown_libname_13(_DWORD);

//----- (00406D20) --------------------------------------------------------
_DWORD *__thiscall sub_406D20(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_406EB0(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_472460 )
  {
    dword_472460 = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_11(dword_472460) = 0;
    *(_DWORD *)sub_4062C0(dword_472460) = 0;
  }
  ++dword_472464;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_406EB0(dword_472460, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_4068A0((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_406A70((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;
// 472464: using guessed type int dword_472464;

//----- (00406E20) --------------------------------------------------------
int __thiscall sub_406E20(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_407060((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_472460 )
  {
    v3 = sub_406280(v6);
    if ( (unsigned __int8)sub_406220(v3, a2) )
    {
      v6 = *(_DWORD *)sub_4062C0(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_11(v6);
    }
  }
  return v5;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00406EB0) --------------------------------------------------------
char *__stdcall sub_406EB0(int a1, int a2)
{
  char *result; // eax@1

  result = sub_407040(0x64u);
  *(_DWORD *)sub_4062B0((int)result) = a1;
  *(_DWORD *)sub_406270((int)result) = a2;
  return result;
}

//----- (00406F00) --------------------------------------------------------
void *__stdcall sub_406F00(void *a1, int a2)
{
  return sub_407180(a1, a2);
}

//----- (00406F40) --------------------------------------------------------
int *__thiscall sub_406F40(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_406270(*this) || (v1 = (int *)sub_4062B0(*v5), *(_DWORD *)sub_4062B0(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_11(*v5) == dword_472460 )
    {
      while ( 1 )
      {
        v4 = (int **)sub_4062B0(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_11(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_11(*v5);
      result = (int *)sub_4069F0(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_4062C0(*v5);
    *v5 = *result;
  }
  return result;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00407010) --------------------------------------------------------
int __thiscall sub_407010(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (00407040) --------------------------------------------------------
char *__stdcall sub_407040(size_t a1)
{
  return std::_Allocate(a1, 0);
}

//----- (00407060) --------------------------------------------------------
int __thiscall sub_407060(int this)
{
  return sub_4062B0(*(_DWORD *)(this + 4));
}

//----- (00407080) --------------------------------------------------------
int __thiscall sub_407080(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_407060((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_472460 )
  {
    v3 = sub_406280(v6);
    if ( (unsigned __int8)sub_406220(a2, v3) )
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_11(v6);
    }
    else
    {
      v6 = *(_DWORD *)sub_4062C0(v6);
    }
  }
  return v5;
}
// 4062A0: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);
// 472460: using guessed type int dword_472460;

//----- (00407110) --------------------------------------------------------
int __cdecl sub_407110(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (00407140) --------------------------------------------------------
int __cdecl sub_407140(char a1, char a2, _DWORD *a3)
{
  int v3; // ecx@0
  char v4; // dl@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = v3;
  v4 = *sub_407200(&v6);
  return sub_407220(a1, a2, a3);
}

//----- (00407170) --------------------------------------------------------
void sub_407170()
{
  ;
}

//----- (00407180) --------------------------------------------------------
void *__cdecl sub_407180(void *a1, int a2)
{
  void *result; // eax@1

  result = operator new(0x54u, a1);
  if ( result )
    qmemcpy(result, (const void *)a2, 0x54u);
  return result;
}

//----- (00407200) --------------------------------------------------------
_BYTE *__cdecl sub_407200(_BYTE *a1)
{
  char v2; // [sp+4h] [bp-4h]@1

  *a1 = v2;
  return a1;
}

//----- (00407220) --------------------------------------------------------
int __cdecl sub_407220(char a1, char a2, _DWORD *a3)
{
  int result; // eax@1
  int savedregs; // [sp+0h] [bp+0h]@0

  while ( 1 )
  {
    result = (unsigned __int8)sub_405450(&a1, &a2);
    if ( !result )
      break;
    ++*a3;
    unknown_libname_9(savedregs);
  }
  return result;
}
// 4061B0: using guessed type int __cdecl unknown_libname_9(_DWORD);

//----- (00407260) --------------------------------------------------------
int *__cdecl sub_407260(int *a1, int *a2)
{
  unsigned int v2; // ST04_4@1
  unsigned int v3; // ST00_4@1
  unsigned int v4; // ST04_4@1
  unsigned int v5; // ST00_4@1
  unsigned int v6; // ST04_4@1
  unsigned int v7; // ST00_4@1
  unsigned int v8; // ST04_4@1
  unsigned int v9; // ST00_4@1
  unsigned int v10; // ST04_4@1
  unsigned int v11; // ST00_4@1
  unsigned int v12; // ST04_4@1
  unsigned int v13; // ST00_4@1
  unsigned int v14; // ST04_4@1
  unsigned int v15; // ST00_4@1
  unsigned int v16; // ST04_4@1
  unsigned int v17; // ST00_4@1
  int v18; // ST04_4@1
  int v19; // ST00_4@1
  int *result; // eax@1

  v2 = dword_468734[0] ^ *a1;
  v3 = dword_468738[0] ^ (dword_46937C[(unsigned __int8)v2]
                        + (dword_468F7C[(unsigned __int16)v2 >> 8] ^ (dword_468B7C[(v2 >> 16) & 0xFF]
                                                                    + dword_46877C[v2 >> 24]))) ^ *a2;
  v4 = dword_46873C ^ (dword_46937C[(unsigned __int8)v3]
                     + (dword_468F7C[(unsigned __int16)v3 >> 8] ^ (dword_468B7C[(v3 >> 16) & 0xFF]
                                                                 + dword_46877C[v3 >> 24]))) ^ v2;
  v5 = dword_468740 ^ (dword_46937C[(unsigned __int8)v4]
                     + (dword_468F7C[(unsigned __int16)v4 >> 8] ^ (dword_468B7C[(v4 >> 16) & 0xFF]
                                                                 + dword_46877C[v4 >> 24]))) ^ v3;
  v6 = dword_468744 ^ (dword_46937C[(unsigned __int8)v5]
                     + (dword_468F7C[(unsigned __int16)v5 >> 8] ^ (dword_468B7C[(v5 >> 16) & 0xFF]
                                                                 + dword_46877C[v5 >> 24]))) ^ v4;
  v7 = dword_468748 ^ (dword_46937C[(unsigned __int8)v6]
                     + (dword_468F7C[(unsigned __int16)v6 >> 8] ^ (dword_468B7C[(v6 >> 16) & 0xFF]
                                                                 + dword_46877C[v6 >> 24]))) ^ v5;
  v8 = dword_46874C ^ (dword_46937C[(unsigned __int8)v7]
                     + (dword_468F7C[(unsigned __int16)v7 >> 8] ^ (dword_468B7C[(v7 >> 16) & 0xFF]
                                                                 + dword_46877C[v7 >> 24]))) ^ v6;
  v9 = dword_468750 ^ (dword_46937C[(unsigned __int8)v8]
                     + (dword_468F7C[(unsigned __int16)v8 >> 8] ^ (dword_468B7C[(v8 >> 16) & 0xFF]
                                                                 + dword_46877C[v8 >> 24]))) ^ v7;
  v10 = dword_468754 ^ (dword_46937C[(unsigned __int8)v9]
                      + (dword_468F7C[(unsigned __int16)v9 >> 8] ^ (dword_468B7C[(v9 >> 16) & 0xFF]
                                                                  + dword_46877C[v9 >> 24]))) ^ v8;
  v11 = dword_468758 ^ (dword_46937C[(unsigned __int8)v10]
                      + (dword_468F7C[(unsigned __int16)v10 >> 8] ^ (dword_468B7C[(v10 >> 16) & 0xFF]
                                                                   + dword_46877C[v10 >> 24]))) ^ v9;
  v12 = dword_46875C ^ (dword_46937C[(unsigned __int8)v11]
                      + (dword_468F7C[(unsigned __int16)v11 >> 8] ^ (dword_468B7C[(v11 >> 16) & 0xFF]
                                                                   + dword_46877C[v11 >> 24]))) ^ v10;
  v13 = dword_468760 ^ (dword_46937C[(unsigned __int8)v12]
                      + (dword_468F7C[(unsigned __int16)v12 >> 8] ^ (dword_468B7C[(v12 >> 16) & 0xFF]
                                                                   + dword_46877C[v12 >> 24]))) ^ v11;
  v14 = dword_468764 ^ (dword_46937C[(unsigned __int8)v13]
                      + (dword_468F7C[(unsigned __int16)v13 >> 8] ^ (dword_468B7C[(v13 >> 16) & 0xFF]
                                                                   + dword_46877C[v13 >> 24]))) ^ v12;
  v15 = dword_468768 ^ (dword_46937C[(unsigned __int8)v14]
                      + (dword_468F7C[(unsigned __int16)v14 >> 8] ^ (dword_468B7C[(v14 >> 16) & 0xFF]
                                                                   + dword_46877C[v14 >> 24]))) ^ v13;
  v16 = dword_46876C ^ (dword_46937C[(unsigned __int8)v15]
                      + (dword_468F7C[(unsigned __int16)v15 >> 8] ^ (dword_468B7C[(v15 >> 16) & 0xFF]
                                                                   + dword_46877C[v15 >> 24]))) ^ v14;
  v17 = dword_468770 ^ (dword_46937C[(unsigned __int8)v16]
                      + (dword_468F7C[(unsigned __int16)v16 >> 8] ^ (dword_468B7C[(v16 >> 16) & 0xFF]
                                                                   + dword_46877C[v16 >> 24]))) ^ v15;
  v18 = dword_468774 ^ (dword_46937C[(unsigned __int8)v17]
                      + (dword_468F7C[(unsigned __int16)v17 >> 8] ^ (dword_468B7C[(v17 >> 16) & 0xFF]
                                                                   + dword_46877C[v17 >> 24]))) ^ v16;
  v19 = dword_468778 ^ v17;
  *a2 = v18;
  result = a1;
  *a1 = v19;
  return result;
}
// 468734: using guessed type int dword_468734[];
// 468738: using guessed type int dword_468738[];
// 46873C: using guessed type int dword_46873C;
// 468740: using guessed type int dword_468740;
// 468744: using guessed type int dword_468744;
// 468748: using guessed type int dword_468748;
// 46874C: using guessed type int dword_46874C;
// 468750: using guessed type int dword_468750;
// 468754: using guessed type int dword_468754;
// 468758: using guessed type int dword_468758;
// 46875C: using guessed type int dword_46875C;
// 468760: using guessed type int dword_468760;
// 468764: using guessed type int dword_468764;
// 468768: using guessed type int dword_468768;
// 46876C: using guessed type int dword_46876C;
// 468770: using guessed type int dword_468770;
// 468774: using guessed type int dword_468774;
// 468778: using guessed type int dword_468778;
// 46877C: using guessed type int dword_46877C[];
// 468B7C: using guessed type int dword_468B7C[];
// 468F7C: using guessed type int dword_468F7C[];
// 46937C: using guessed type int dword_46937C[];

//----- (004077FC) --------------------------------------------------------
int *__cdecl sub_4077FC(unsigned int *a1, int *a2)
{
  unsigned int v2; // ST04_4@1
  unsigned int v3; // ST00_4@1
  unsigned int v4; // ST04_4@1
  unsigned int v5; // ST00_4@1
  unsigned int v6; // ST04_4@1
  unsigned int v7; // ST00_4@1
  unsigned int v8; // ST04_4@1
  unsigned int v9; // ST00_4@1
  unsigned int v10; // ST04_4@1
  unsigned int v11; // ST00_4@1
  unsigned int v12; // ST04_4@1
  unsigned int v13; // ST00_4@1
  unsigned int v14; // ST04_4@1
  unsigned int v15; // ST00_4@1
  unsigned int v16; // ST04_4@1
  unsigned int v17; // ST00_4@1
  int v18; // ST04_4@1
  int *result; // eax@1

  v2 = dword_468778 ^ *a1;
  v3 = dword_468774 ^ (dword_46937C[(unsigned __int8)v2]
                     + (dword_468F7C[(unsigned __int16)v2 >> 8] ^ (dword_468B7C[(v2 >> 16) & 0xFF]
                                                                 + dword_46877C[v2 >> 24]))) ^ *a2;
  v4 = dword_468770 ^ (dword_46937C[(unsigned __int8)v3]
                     + (dword_468F7C[(unsigned __int16)v3 >> 8] ^ (dword_468B7C[(v3 >> 16) & 0xFF]
                                                                 + dword_46877C[v3 >> 24]))) ^ v2;
  v5 = dword_46876C ^ (dword_46937C[(unsigned __int8)v4]
                     + (dword_468F7C[(unsigned __int16)v4 >> 8] ^ (dword_468B7C[(v4 >> 16) & 0xFF]
                                                                 + dword_46877C[v4 >> 24]))) ^ v3;
  v6 = dword_468768 ^ (dword_46937C[(unsigned __int8)v5]
                     + (dword_468F7C[(unsigned __int16)v5 >> 8] ^ (dword_468B7C[(v5 >> 16) & 0xFF]
                                                                 + dword_46877C[v5 >> 24]))) ^ v4;
  v7 = dword_468764 ^ (dword_46937C[(unsigned __int8)v6]
                     + (dword_468F7C[(unsigned __int16)v6 >> 8] ^ (dword_468B7C[(v6 >> 16) & 0xFF]
                                                                 + dword_46877C[v6 >> 24]))) ^ v5;
  v8 = dword_468760 ^ (dword_46937C[(unsigned __int8)v7]
                     + (dword_468F7C[(unsigned __int16)v7 >> 8] ^ (dword_468B7C[(v7 >> 16) & 0xFF]
                                                                 + dword_46877C[v7 >> 24]))) ^ v6;
  v9 = dword_46875C ^ (dword_46937C[(unsigned __int8)v8]
                     + (dword_468F7C[(unsigned __int16)v8 >> 8] ^ (dword_468B7C[(v8 >> 16) & 0xFF]
                                                                 + dword_46877C[v8 >> 24]))) ^ v7;
  v10 = dword_468758 ^ (dword_46937C[(unsigned __int8)v9]
                      + (dword_468F7C[(unsigned __int16)v9 >> 8] ^ (dword_468B7C[(v9 >> 16) & 0xFF]
                                                                  + dword_46877C[v9 >> 24]))) ^ v8;
  v11 = dword_468754 ^ (dword_46937C[(unsigned __int8)v10]
                      + (dword_468F7C[(unsigned __int16)v10 >> 8] ^ (dword_468B7C[(v10 >> 16) & 0xFF]
                                                                   + dword_46877C[v10 >> 24]))) ^ v9;
  v12 = dword_468750 ^ (dword_46937C[(unsigned __int8)v11]
                      + (dword_468F7C[(unsigned __int16)v11 >> 8] ^ (dword_468B7C[(v11 >> 16) & 0xFF]
                                                                   + dword_46877C[v11 >> 24]))) ^ v10;
  v13 = dword_46874C ^ (dword_46937C[(unsigned __int8)v12]
                      + (dword_468F7C[(unsigned __int16)v12 >> 8] ^ (dword_468B7C[(v12 >> 16) & 0xFF]
                                                                   + dword_46877C[v12 >> 24]))) ^ v11;
  v14 = dword_468748 ^ (dword_46937C[(unsigned __int8)v13]
                      + (dword_468F7C[(unsigned __int16)v13 >> 8] ^ (dword_468B7C[(v13 >> 16) & 0xFF]
                                                                   + dword_46877C[v13 >> 24]))) ^ v12;
  v15 = dword_468744 ^ (dword_46937C[(unsigned __int8)v14]
                      + (dword_468F7C[(unsigned __int16)v14 >> 8] ^ (dword_468B7C[(v14 >> 16) & 0xFF]
                                                                   + dword_46877C[v14 >> 24]))) ^ v13;
  v16 = dword_468740 ^ (dword_46937C[(unsigned __int8)v15]
                      + (dword_468F7C[(unsigned __int16)v15 >> 8] ^ (dword_468B7C[(v15 >> 16) & 0xFF]
                                                                   + dword_46877C[v15 >> 24]))) ^ v14;
  v17 = dword_46873C ^ (dword_46937C[(unsigned __int8)v16]
                      + (dword_468F7C[(unsigned __int16)v16 >> 8] ^ (dword_468B7C[(v16 >> 16) & 0xFF]
                                                                   + dword_46877C[v16 >> 24]))) ^ v15;
  v18 = dword_468738[0] ^ (dword_46937C[(unsigned __int8)v17]
                         + (dword_468F7C[(unsigned __int16)v17 >> 8] ^ (dword_468B7C[(v17 >> 16) & 0xFF]
                                                                      + dword_46877C[v17 >> 24]))) ^ v16;
  *a1 = dword_468734[0] ^ v17;
  result = a2;
  *a2 = v18;
  return result;
}
// 468734: using guessed type int dword_468734[];
// 468738: using guessed type int dword_468738[];
// 46873C: using guessed type int dword_46873C;
// 468740: using guessed type int dword_468740;
// 468744: using guessed type int dword_468744;
// 468748: using guessed type int dword_468748;
// 46874C: using guessed type int dword_46874C;
// 468750: using guessed type int dword_468750;
// 468754: using guessed type int dword_468754;
// 468758: using guessed type int dword_468758;
// 46875C: using guessed type int dword_46875C;
// 468760: using guessed type int dword_468760;
// 468764: using guessed type int dword_468764;
// 468768: using guessed type int dword_468768;
// 46876C: using guessed type int dword_46876C;
// 468770: using guessed type int dword_468770;
// 468774: using guessed type int dword_468774;
// 468778: using guessed type int dword_468778;
// 46877C: using guessed type int dword_46877C[];
// 468B7C: using guessed type int dword_468B7C[];
// 468F7C: using guessed type int dword_468F7C[];
// 46937C: using guessed type int dword_46937C[];

//----- (00407D98) --------------------------------------------------------
int *__cdecl sub_407D98(int a1, signed int a2)
{
  int *result; // eax@1
  signed int i; // [sp+0h] [bp-8h]@1

  result = (int *)(a2 >> 3);
  for ( i = 0; i < a2 >> 3; ++i )
  {
    result = sub_4077FC((unsigned int *)a1, (int *)(a1 + 4));
    a1 += 8;
  }
  return result;
}

//----- (00407DE3) --------------------------------------------------------
int *__cdecl sub_407DE3(int a1, signed int a2)
{
  int *result; // eax@1
  signed int i; // [sp+0h] [bp-8h]@1

  result = (int *)(a2 >> 3);
  for ( i = 0; i < a2 >> 3; ++i )
  {
    result = sub_407260((int *)a1, (int *)(a1 + 4));
    a1 += 8;
  }
  return result;
}

//----- (00407E2E) --------------------------------------------------------
__int16 sub_407E2E(const char *a1, ...)
{
  int v1; // edx@3
  int v2; // edx@3
  __int16 v4; // [sp+0h] [bp-18h]@1
  __int16 l; // [sp+0h] [bp-18h]@9
  __int16 i; // [sp+4h] [bp-14h]@1
  __int16 j; // [sp+4h] [bp-14h]@4
  __int16 k; // [sp+4h] [bp-14h]@7
  int v9; // [sp+8h] [bp-10h]@4
  int v10; // [sp+Ch] [bp-Ch]@3
  int v11; // [sp+10h] [bp-8h]@3
  int v12; // [sp+14h] [bp-4h]@4
  va_list va; // [sp+24h] [bp+Ch]@1

  va_start(va, a1);
  memcpy(dword_468734, &unk_4676EC, 0x48u);
  memcpy(dword_46877C, &unk_467734, 0x1000u);
  v4 = 0;
  for ( i = 0; i < 18; ++i )
  {
    v10 = 0;
    v10 = (a1[(v4 + 1) % *(signed __int16 *)(int *)va] << 16) | (a1[v4] << 24) & 0xFF00FFFF;
    v1 = v10;
    BYTE1(v1) = 0;
    v10 = (a1[(v4 + 2) % *(signed __int16 *)(int *)va] << 8) | v1;
    v2 = v10;
    LOBYTE(v2) = 0;
    v10 = a1[(v4 + 3) % *(signed __int16 *)(int *)va] | v2;
    v11 = v10;
    dword_468734[i] ^= v10;
    v4 = (v4 + 4) % *(signed __int16 *)(int *)va;
  }
  v12 = 0;
  v9 = 0;
  for ( j = 0; j < 18; j += 2 )
  {
    sub_407260(&v12, &v9);
    dword_468734[j] = v12;
    dword_468738[j] = v9;
  }
  for ( k = 0; k < 4; ++k )
  {
    for ( l = 0; l < 256; l += 2 )
    {
      sub_407260(&v12, &v9);
      *(&dword_46877C[256 * k] + l) = v12;
      *(&dword_468780[256 * k] + l) = v9;
    }
  }
  return 0;
}
// 468734: using guessed type int dword_468734[];
// 468738: using guessed type int dword_468738[];
// 46877C: using guessed type int dword_46877C[];
// 468780: using guessed type int dword_468780[];

//----- (00408269) --------------------------------------------------------
int __cdecl sub_408269(int a1, int *a2, int *a3)
{
  unsigned int v3; // ST04_4@1
  unsigned int v4; // ST00_4@1
  unsigned int v5; // ST04_4@1
  unsigned int v6; // ST00_4@1
  unsigned int v7; // ST04_4@1
  unsigned int v8; // ST00_4@1
  unsigned int v9; // ST04_4@1
  unsigned int v10; // ST00_4@1
  unsigned int v11; // ST04_4@1
  unsigned int v12; // ST00_4@1
  unsigned int v13; // ST04_4@1
  unsigned int v14; // ST00_4@1
  unsigned int v15; // ST04_4@1
  unsigned int v16; // ST00_4@1
  unsigned int v17; // ST04_4@1
  unsigned int v18; // ST00_4@1
  int v19; // ST04_4@1
  int v20; // ST00_4@1
  int result; // eax@1

  v3 = *(_DWORD *)(a1 + 4096) ^ *a2;
  v4 = *(_DWORD *)(a1 + 4100) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v3 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v3 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v3 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v3 >> 24))))) ^ *a3;
  v5 = *(_DWORD *)(a1 + 4104) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v4 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v4 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v4 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v4 >> 24))))) ^ v3;
  v6 = *(_DWORD *)(a1 + 4108) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v5 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v5 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v5 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v5 >> 24))))) ^ v4;
  v7 = *(_DWORD *)(a1 + 4112) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v6 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v6 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v6 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v6 >> 24))))) ^ v5;
  v8 = *(_DWORD *)(a1 + 4116) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v7 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v7 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v7 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v7 >> 24))))) ^ v6;
  v9 = *(_DWORD *)(a1 + 4120) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v8 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v8 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v8 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v8 >> 24))))) ^ v7;
  v10 = *(_DWORD *)(a1 + 4124) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v9 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v9 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v9 >> 16) & 0xFF) + 1024)
                                                                                             + *(_DWORD *)(a1 + 4 * (v9 >> 24))))) ^ v8;
  v11 = *(_DWORD *)(a1 + 4128) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v10 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v10 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v10 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v10 >> 24))))) ^ v9;
  v12 = *(_DWORD *)(a1 + 4132) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v11 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v11 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v11 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v11 >> 24))))) ^ v10;
  v13 = *(_DWORD *)(a1 + 4136) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v12 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v12 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v12 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v12 >> 24))))) ^ v11;
  v14 = *(_DWORD *)(a1 + 4140) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v13 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v13 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v13 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v13 >> 24))))) ^ v12;
  v15 = *(_DWORD *)(a1 + 4144) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v14 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v14 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v14 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v14 >> 24))))) ^ v13;
  v16 = *(_DWORD *)(a1 + 4148) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v15 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v15 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v15 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v15 >> 24))))) ^ v14;
  v17 = *(_DWORD *)(a1 + 4152) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v16 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v16 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v16 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v16 >> 24))))) ^ v15;
  v18 = *(_DWORD *)(a1 + 4156) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v17 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v17 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v17 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v17 >> 24))))) ^ v16;
  v19 = *(_DWORD *)(a1 + 4160) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v18 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v18 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v18 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v18 >> 24))))) ^ v17;
  v20 = *(_DWORD *)(a1 + 4164) ^ v18;
  result = v19;
  *a3 = v19;
  *a2 = v20;
  return result;
}

//----- (004088C1) --------------------------------------------------------
int __cdecl sub_4088C1(int a1, int *a2, int *a3)
{
  unsigned int v3; // ST04_4@1
  unsigned int v4; // ST00_4@1
  unsigned int v5; // ST04_4@1
  unsigned int v6; // ST00_4@1
  unsigned int v7; // ST04_4@1
  unsigned int v8; // ST00_4@1
  unsigned int v9; // ST04_4@1
  unsigned int v10; // ST00_4@1
  unsigned int v11; // ST04_4@1
  unsigned int v12; // ST00_4@1
  unsigned int v13; // ST04_4@1
  unsigned int v14; // ST00_4@1
  unsigned int v15; // ST04_4@1
  unsigned int v16; // ST00_4@1
  unsigned int v17; // ST04_4@1
  unsigned int v18; // ST00_4@1
  int v19; // ST04_4@1
  int result; // eax@1

  v3 = *(_DWORD *)(a1 + 4164) ^ *a2;
  v4 = *(_DWORD *)(a1 + 4160) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v3 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v3 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v3 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v3 >> 24))))) ^ *a3;
  v5 = *(_DWORD *)(a1 + 4156) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v4 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v4 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v4 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v4 >> 24))))) ^ v3;
  v6 = *(_DWORD *)(a1 + 4152) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v5 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v5 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v5 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v5 >> 24))))) ^ v4;
  v7 = *(_DWORD *)(a1 + 4148) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v6 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v6 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v6 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v6 >> 24))))) ^ v5;
  v8 = *(_DWORD *)(a1 + 4144) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v7 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v7 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v7 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v7 >> 24))))) ^ v6;
  v9 = *(_DWORD *)(a1 + 4140) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v8 + 3072)
                               + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v8 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v8 >> 16) & 0xFF) + 1024)
                                                                                            + *(_DWORD *)(a1 + 4 * (v8 >> 24))))) ^ v7;
  v10 = *(_DWORD *)(a1 + 4136) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v9 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v9 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v9 >> 16) & 0xFF) + 1024)
                                                                                             + *(_DWORD *)(a1 + 4 * (v9 >> 24))))) ^ v8;
  v11 = *(_DWORD *)(a1 + 4132) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v10 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v10 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v10 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v10 >> 24))))) ^ v9;
  v12 = *(_DWORD *)(a1 + 4128) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v11 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v11 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v11 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v11 >> 24))))) ^ v10;
  v13 = *(_DWORD *)(a1 + 4124) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v12 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v12 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v12 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v12 >> 24))))) ^ v11;
  v14 = *(_DWORD *)(a1 + 4120) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v13 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v13 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v13 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v13 >> 24))))) ^ v12;
  v15 = *(_DWORD *)(a1 + 4116) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v14 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v14 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v14 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v14 >> 24))))) ^ v13;
  v16 = *(_DWORD *)(a1 + 4112) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v15 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v15 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v15 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v15 >> 24))))) ^ v14;
  v17 = *(_DWORD *)(a1 + 4108) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v16 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v16 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v16 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v16 >> 24))))) ^ v15;
  v18 = *(_DWORD *)(a1 + 4104) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v17 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v17 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v17 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v17 >> 24))))) ^ v16;
  v19 = *(_DWORD *)(a1 + 4100) ^ (*(_DWORD *)(a1 + 4 * (unsigned __int8)v18 + 3072)
                                + (*(_DWORD *)(a1 + 4 * ((unsigned __int16)v18 >> 8) + 2048) ^ (*(_DWORD *)(a1 + 4 * ((v18 >> 16) & 0xFF) + 1024)
                                                                                              + *(_DWORD *)(a1 + 4 * (v18 >> 24))))) ^ v17;
  result = *(_DWORD *)(a1 + 4096) ^ v18;
  *a2 = result;
  *a3 = v19;
  return result;
}

//----- (00408FCF) --------------------------------------------------------
int sub_408FCF()
{
  return unknown_libname_16(&unk_472468);
}
// 408FFF: using guessed type int __thiscall unknown_libname_16(_DWORD);

//----- (00408FDE) --------------------------------------------------------
int sub_408FDE()
{
  return atexit(sub_408FF0);
}

//----- (00408FF0) --------------------------------------------------------
void __cdecl sub_408FF0()
{
  unknown_libname_17(&unk_472468);
}
// 40900D: using guessed type int __thiscall unknown_libname_17(_DWORD);

//----- (00409018) --------------------------------------------------------
int __stdcall sub_409018(_BYTE *a1, int a2, _BYTE *a3)
{
  int result; // eax@1
  _BYTE *v4; // [sp+4h] [bp-18h]@4
  signed int v5; // [sp+8h] [bp-14h]@4
  signed int v6; // [sp+Ch] [bp-10h]@1
  signed int i; // [sp+Ch] [bp-10h]@6
  _BYTE *v8; // [sp+10h] [bp-Ch]@1
  _BYTE *v9; // [sp+10h] [bp-Ch]@6
  _BYTE *v10; // [sp+14h] [bp-8h]@6
  _BYTE *v11; // [sp+18h] [bp-4h]@6

  v6 = 0;
  result = (int)a3;
  v8 = a3;
  while ( v6 < 8 )
  {
    *v8 = 0;
    result = (int)(v8++ + 1);
    ++v6;
  }
  v4 = a1;
  v5 = 0;
  while ( v5 < 16 )
  {
    v9 = a3;
    v11 = (_BYTE *)((v5 << 7) + a2 + 8 * (((signed int)*v4 >> 4) & 0xF));
    v10 = (_BYTE *)(((v5 + 1) << 7) + a2 + 8 * (*v4 & 0xF));
    for ( i = 0; i < 8; ++i )
      *v9++ |= *v10++ | *v11++;
    v5 += 2;
    result = (int)(v4++ + 1);
  }
  return result;
}

//----- (00409115) --------------------------------------------------------
int __thiscall sub_409115(char *this, _BYTE *a2, int a3)
{
  int result; // eax@1
  char *v4; // ST10_4@3
  _BYTE *v5; // [sp+4h] [bp-10h]@1
  signed int v6; // [sp+8h] [bp-Ch]@1

  *(_BYTE *)a3 = 0;
  *(_BYTE *)(a3 + 1) = 0;
  *(_BYTE *)(a3 + 2) = 0;
  *(_BYTE *)(a3 + 3) = 0;
  result = (int)a2;
  v5 = a2;
  v6 = 0;
  while ( v6 < 4 )
  {
    v4 = &this[1024 * v6 + 20592] + 4 * *v5;
    *(_BYTE *)a3 |= *v4++;
    *(_BYTE *)(a3 + 1) |= *v4++;
    *(_BYTE *)(a3 + 2) |= *v4;
    *(_BYTE *)(a3 + 3) |= v4[1];
    result = a3 + 4;
    ++v6;
    ++v5;
  }
  return result;
}

//----- (00409242) --------------------------------------------------------
int __stdcall sub_409242(int a1, int a2)
{
  char v2; // ST04_1@1
  char v3; // ST18_1@1
  char v4; // ST10_1@1
  char v5; // ST0C_1@1

  v2 = *(_BYTE *)a1;
  v3 = *(_BYTE *)(a1 + 1);
  v4 = *(_BYTE *)(a1 + 2);
  v5 = *(_BYTE *)(a1 + 3);
  *(_BYTE *)a2 = ((v2 & 0x18) >> 3) | ((v2 & 0xF8) >> 1) | ((v5 & 1) << 7);
  *(_BYTE *)(a2 + 1) = ((v3 & 0xE0) >> 5) | 8 * (v2 & 1) | ((v3 & 0x80) >> 3) | 32 * (v2 & 7);
  *(_BYTE *)(a2 + 2) = ((v4 & 0x80) >> 7) | 2 * (v3 & 0x1F) | 8 * (v3 & 0x18);
  *(_BYTE *)(a2 + 3) = ((v4 & 0x18) >> 3) | ((v4 & 0xF8) >> 1) | ((v3 & 1) << 7);
  *(_BYTE *)(a2 + 4) = ((v5 & 0xE0) >> 5) | 8 * (v4 & 1) | ((v5 & 0x80) >> 3) | 32 * (v4 & 7);
  *(_BYTE *)(a2 + 5) = ((v2 & 0x80) >> 7) | 2 * (v5 & 0x1F) | 8 * (v5 & 0x18);
  return a2 + 6;
}

//----- (004093E9) --------------------------------------------------------
int __thiscall sub_4093E9(_BYTE *this, int a2, int a3)
{
  signed int v3; // ST14_4@1
  unsigned __int8 v4; // ST10_1@1
  __int16 v5; // ST0C_2@1
  signed int v6; // ST08_4@1
  unsigned __int8 v7; // ST04_1@1

  v3 = *(_BYTE *)(a2 + 1);
  v4 = *(_BYTE *)(a2 + 2);
  v5 = *(_BYTE *)(a2 + 3);
  v6 = *(_BYTE *)(a2 + 4);
  v7 = *(_BYTE *)(a2 + 5);
  *(_BYTE *)a3 = this[(((v3 >> 4) & 0xF | (unsigned __int16)(16 * *(_BYTE *)a2)) & 0xFFF) + 4208];
  *(_BYTE *)(a3 + 1) = this[((v4 | (unsigned __int16)((_WORD)v3 << 8)) & 0xFFF) + 8304];
  *(_BYTE *)(a3 + 2) = this[(((v6 >> 4) & 0xF | (unsigned __int16)(16 * v5)) & 0xFFF) + 12400];
  *(_BYTE *)(a3 + 3) = this[((v7 | (unsigned __int16)((_WORD)v6 << 8)) & 0xFFF) + 16496];
  return a3 + 4;
}

//----- (0040952A) --------------------------------------------------------
int __thiscall sub_40952A(char *this, int a2, int a3, int a4)
{
  char *v4; // ST08_4@1
  char v6; // [sp+4h] [bp-20h]@1
  char v7; // [sp+8h] [bp-1Ch]@1
  char *v8; // [sp+10h] [bp-14h]@1
  char *v9; // [sp+14h] [bp-10h]@1
  char *v10; // [sp+18h] [bp-Ch]@1
  char v11; // [sp+1Ch] [bp-8h]@1

  v4 = this;
  v8 = &this[6 * a3 + 24688];
  v10 = &v7;
  v9 = &v11;
  sub_409242(a2, (int)&v7);
  *v9++ = *v8++ ^ *v10;
  *v9++ = *v8 ^ *++v10;
  *v9++ = *++v8 ^ *++v10;
  *v9++ = *++v8 ^ *++v10;
  *v9++ = *++v8 ^ *++v10;
  *v9++ = *++v8 ^ *++v10;
  ++v8;
  ++v10;
  sub_4093E9(v4, (int)&v11, (int)&v6);
  return sub_409115(v4, &v6, a4);
}

//----- (0040969C) --------------------------------------------------------
int __thiscall sub_40969C(char *this, int a2, int a3, _BYTE *a4)
{
  char v5; // [sp+8h] [bp-Ch]@1
  _BYTE *v6; // [sp+Ch] [bp-8h]@1
  char *v7; // [sp+10h] [bp-4h]@1

  v6 = a4;
  sub_40952A(this, a3 + 4, a2, (int)&v5);
  *v6++ = *(_BYTE *)(a3 + 4);
  *v6++ = *(_BYTE *)(a3 + 5);
  *v6++ = *(_BYTE *)(a3 + 6);
  *v6++ = *(_BYTE *)(a3 + 7);
  v7 = &v5;
  *v6++ = v5 ^ *(_BYTE *)a3;
  *v6++ = *++v7 ^ *(_BYTE *)(a3 + 1);
  *v6 = *++v7 ^ *(_BYTE *)(a3 + 2);
  *++v6 = v7[1] ^ *(_BYTE *)(a3 + 3);
  return (int)(v6 + 1);
}

//----- (00409802) --------------------------------------------------------
int __stdcall sub_409802(int a1, char a2)
{
  return *(&byte_469878[64 * a1] + 16 * (a2 & 1 | ((a2 & 0x20) >> 4)) + ((a2 & 0x1F) >> 1));
}

//----- (00409847) --------------------------------------------------------
void __thiscall sub_409847(_BYTE *this)
{
  int v1; // ebx@5
  _BYTE *v2; // [sp+4h] [bp-Ch]@1
  signed int j; // [sp+8h] [bp-8h]@3
  signed int i; // [sp+Ch] [bp-4h]@1

  v2 = this;
  for ( i = 0; i < 4; ++i )
  {
    for ( j = 0; j < 4096; ++j )
    {
      v1 = 16 * sub_409802(2 * i, j >> 6);
      *(&v2[4096 * i + 4208] + j) = sub_409802(2 * i + 1, j & 0x3F) & 0xF | v1;
    }
  }
}

//----- (004098D8) --------------------------------------------------------
int __thiscall sub_4098D8(_BYTE *this, int a2)
{
  int result; // eax@3
  int v3; // [sp+4h] [bp-18h]@15
  signed int v4; // [sp+10h] [bp-Ch]@14
  signed int i; // [sp+14h] [bp-8h]@1
  signed int k; // [sp+14h] [bp-8h]@6
  signed int m; // [sp+14h] [bp-8h]@12
  signed int n; // [sp+14h] [bp-8h]@18
  signed int j; // [sp+18h] [bp-4h]@4
  signed int l; // [sp+18h] [bp-4h]@10

  for ( i = 0; i < 56; ++i )
  {
    this[i] = (*(_DWORD *)&dword_469A98[4 * ((byte_469800[i] - 1) & 7)] & *(_BYTE *)(a2 + ((byte_469800[i] - 1) >> 3))) != 0;
    result = i + 1;
  }
  for ( j = 0; j < 16; ++j )
  {
    for ( k = 0; k < 6; ++k )
      *(&this[6 * j + 24688] + k) = 0;
    result = j + 1;
  }
  for ( l = 0; l < 16; ++l )
  {
    for ( m = 0; m < 56; ++m )
    {
      v4 = byte_469838[l] + m;
      if ( v4 >= (m >= 28 ? 56 : 28) )
        v3 = v4 - 28;
      else
        v3 = byte_469838[l] + m;
      this[m + 56] = this[v3];
      result = m + 1;
    }
    for ( n = 0; n < 48; ++n )
    {
      result = byte_469848[n];
      if ( this[result + 55] )
      {
        result = (int)&this[6 * l + 24688];
        LOBYTE(result) = dword_469A98[4 * (n & 7)] | *(_BYTE *)(result + (n >> 3));
        *(&this[6 * l + 24688] + (n >> 3)) = result;
      }
    }
  }
  return result;
}

//----- (00409A84) --------------------------------------------------------
int __thiscall sub_409A84(_BYTE *this)
{
  int result; // eax@9
  signed int v2; // [sp+Ch] [bp-10h]@17
  signed int k; // [sp+10h] [bp-Ch]@5
  signed int n; // [sp+10h] [bp-Ch]@14
  signed int j; // [sp+14h] [bp-8h]@3
  signed int m; // [sp+14h] [bp-8h]@12
  signed int i; // [sp+18h] [bp-4h]@1
  signed int l; // [sp+18h] [bp-4h]@10

  for ( i = 0; i < 4; ++i )
  {
    for ( j = 0; j < 256; ++j )
    {
      for ( k = 0; k < 4; ++k )
        *(&this[1024 * i + 20592] + 4 * j + k) = 0;
    }
    result = i + 1;
  }
  for ( l = 0; l < 4; ++l )
  {
    for ( m = 0; m < 256; ++m )
    {
      for ( n = 0; n < 32; ++n )
      {
        v2 = byte_469A78[n] - 1;
        if ( v2 >> 3 == l && *(_DWORD *)&dword_469A98[4 * (v2 & 7)] & m )
          *(&this[1024 * l + 20592] + 4 * m + (n >> 3)) |= dword_469A98[4 * (n & 7)];
        result = n + 1;
      }
    }
  }
  return result;
}

//----- (00409BE8) --------------------------------------------------------
int __stdcall sub_409BE8(int a1, int a2)
{
  int result; // eax@9
  signed int v3; // [sp+Ch] [bp-10h]@17
  signed int k; // [sp+10h] [bp-Ch]@5
  signed int n; // [sp+10h] [bp-Ch]@14
  signed int j; // [sp+14h] [bp-8h]@3
  signed int m; // [sp+14h] [bp-8h]@12
  signed int i; // [sp+18h] [bp-4h]@1
  signed int l; // [sp+18h] [bp-4h]@10

  for ( i = 0; i < 16; ++i )
  {
    for ( j = 0; j < 16; ++j )
    {
      for ( k = 0; k < 8; ++k )
        *(_BYTE *)((i << 7) + a1 + k + 8 * j) = 0;
    }
    result = i + 1;
  }
  for ( l = 0; l < 16; ++l )
  {
    for ( m = 0; m < 16; ++m )
    {
      for ( n = 0; n < 64; ++n )
      {
        v3 = *(_BYTE *)(n + a2) - 1;
        if ( v3 >> 2 == l && dword_469AB8[v3 & 3] & m )
          *(_BYTE *)((l << 7) + a1 + 8 * m + (n >> 3)) |= dword_469A98[4 * (n & 7)];
        result = n + 1;
      }
    }
  }
  return result;
}
// 469AB8: using guessed type int dword_469AB8[];

//----- (00409D36) --------------------------------------------------------
int __thiscall sub_409D36(char *this, _BYTE *a2, _BYTE *a3)
{
  char *v4; // [sp+0h] [bp-A0h]@1
  char v5; // [sp+4h] [bp-9Ch]@4
  char v6; // [sp+5h] [bp-9Bh]@4
  char v7; // [sp+6h] [bp-9Ah]@4
  char v8; // [sp+7h] [bp-99h]@4
  char v9; // [sp+8h] [bp-98h]@4
  char v10; // [sp+9h] [bp-97h]@4
  char v11; // [sp+Ah] [bp-96h]@4
  char v12; // [sp+Bh] [bp-95h]@4
  int i; // [sp+Ch] [bp-94h]@1
  char v14[8]; // [sp+10h] [bp-90h]@1
  char v15[120]; // [sp+18h] [bp-88h]@3
  char v16; // [sp+90h] [bp-10h]@4
  char v17; // [sp+91h] [bp-Fh]@4
  char v18; // [sp+92h] [bp-Eh]@4
  char v19; // [sp+93h] [bp-Dh]@4
  char v20; // [sp+94h] [bp-Ch]@4
  char v21; // [sp+95h] [bp-Bh]@4
  char v22; // [sp+96h] [bp-Ah]@4
  char v23; // [sp+97h] [bp-9h]@4
  char *v24; // [sp+98h] [bp-8h]@4
  int *v25; // [sp+9Ch] [bp-4h]@4

  v4 = this;
  sub_409018(a2, (int)(this + 112), v14);
  for ( i = 0; i < 16; ++i )
    sub_40969C(v4, i, (int)&v14[8 * i], &v15[8 * i]);
  v5 = v20;
  v6 = v21;
  v7 = v22;
  v8 = v23;
  v9 = v16;
  v10 = v17;
  v11 = v18;
  v12 = v19;
  v25 = &i;
  v24 = &v20;
  return sub_409018(&v5, (int)(v4 + 2160), a3);
}
// 409D36: using guessed type char var_90[8];
// 409D36: using guessed type char var_88[120];

//----- (00409ED7) --------------------------------------------------------
int __thiscall sub_409ED7(char *this, _BYTE *a2, _BYTE *a3)
{
  char *v4; // [sp+0h] [bp-A0h]@1
  char v5; // [sp+4h] [bp-9Ch]@4
  char v6; // [sp+5h] [bp-9Bh]@4
  char v7; // [sp+6h] [bp-9Ah]@4
  char v8; // [sp+7h] [bp-99h]@4
  char v9; // [sp+8h] [bp-98h]@4
  char v10; // [sp+9h] [bp-97h]@4
  char v11; // [sp+Ah] [bp-96h]@4
  char v12; // [sp+Bh] [bp-95h]@4
  int i; // [sp+Ch] [bp-94h]@1
  char v14[8]; // [sp+10h] [bp-90h]@1
  char v15[120]; // [sp+18h] [bp-88h]@3
  char v16; // [sp+90h] [bp-10h]@4
  char v17; // [sp+91h] [bp-Fh]@4
  char v18; // [sp+92h] [bp-Eh]@4
  char v19; // [sp+93h] [bp-Dh]@4
  char v20; // [sp+94h] [bp-Ch]@4
  char v21; // [sp+95h] [bp-Bh]@4
  char v22; // [sp+96h] [bp-Ah]@4
  char v23; // [sp+97h] [bp-9h]@4
  char *v24; // [sp+98h] [bp-8h]@4
  int *v25; // [sp+9Ch] [bp-4h]@4

  v4 = this;
  sub_409018(a2, (int)(this + 112), v14);
  for ( i = 0; i < 16; ++i )
    sub_40969C(v4, 15 - i, (int)&v14[8 * i], &v15[8 * i]);
  v5 = v20;
  v6 = v21;
  v7 = v22;
  v8 = v23;
  v9 = v16;
  v10 = v17;
  v11 = v18;
  v12 = v19;
  v25 = &i;
  v24 = &v20;
  return sub_409018(&v5, (int)(v4 + 2160), a3);
}
// 409ED7: using guessed type char var_90[8];
// 409ED7: using guessed type char var_88[120];

//----- (0040A07D) --------------------------------------------------------
char __thiscall sub_40A07D(char *this, _BYTE *a2, int a3)
{
  int v3; // eax@1
  char *v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@1
  _BYTE *v7; // [sp+8h] [bp-4h]@1

  v5 = this;
  v3 = a3;
  LOBYTE(v3) = a3 & 0xF8;
  v6 = v3;
  v7 = a2;
  while ( v6 > 0 )
  {
    sub_409D36(v5, v7, v7);
    v6 -= 8;
    LOBYTE(v3) = (_BYTE)v7 + 8;
    v7 += 8;
  }
  return v3;
}

//----- (0040A10F) --------------------------------------------------------
int __thiscall sub_40A10F(_BYTE *this, _BYTE *a2)
{
  _BYTE *v3; // [sp+0h] [bp-14h]@1
  signed int i; // [sp+4h] [bp-10h]@1
  char v5[8]; // [sp+Ch] [bp-8h]@1

  v3 = this;
  memset(v5, 0, 8u);
  for ( i = 0; *a2 && i < 40; ++i )
    v5[i % 8] ^= *a2++;
  sub_409BE8((int)(v3 + 112), (int)&unk_469780);
  sub_409BE8((int)(v3 + 2160), (int)&unk_4697C0);
  sub_4098D8(v3, (int)v5);
  sub_409847(v3);
  return sub_409A84(v3);
}
// 40A10F: using guessed type char var_8[8];

//----- (0040A1E7) --------------------------------------------------------
int sub_40A1E7()
{
  return atexit(sub_402150);
}

//----- (0040A20F) --------------------------------------------------------
int sub_40A20F()
{
  return sub_40A309((int)&dword_478538);
}

//----- (0040A21E) --------------------------------------------------------
int sub_40A21E()
{
  return atexit(sub_40A230);
}

//----- (0040A230) --------------------------------------------------------
void __cdecl sub_40A230()
{
  sub_40A32F((char *)&dword_478538);
}

//----- (0040A23F) --------------------------------------------------------
void *__cdecl sub_40A23F(char *a1, int a2, int a3)
{
  void *result; // eax@2
  _off_t v4; // [sp+4h] [bp-30h]@3
  struct _stat v5; // [sp+8h] [bp-2Ch]@3
  void *v6; // [sp+2Ch] [bp-8h]@5
  int v7; // [sp+30h] [bp-4h]@1

  v7 = _open(a1, 0x8000, 0);
  if ( v7 >= 0 )
  {
    _stat(a1, &v5);
    v4 = v5.st_size;
    if ( (_BYTE)a3 )
      v4 = v5.st_size + 1;
    v6 = operator new(v4);
    if ( v6 )
    {
      _read(v7, v6, v5.st_size);
      _close(v7);
      if ( a2 )
        *(_DWORD *)a2 = v5.st_size;
      if ( (_BYTE)a3 )
        *((_BYTE *)v6 + v5.st_size) = 0;
      result = v6;
    }
    else
    {
      _close(v7);
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0040A309) --------------------------------------------------------
int __thiscall sub_40A309(int this)
{
  int v1; // ST08_4@1
  char v3; // [sp+4h] [bp-8h]@1
  char v4; // [sp+8h] [bp-4h]@1

  v1 = this;
  sub_40B900((void *)(this + 172), &v3, &v4);
  return v1;
}

//----- (0040A32F) --------------------------------------------------------
int __thiscall sub_40A32F(char *this)
{
  return unknown_libname_18(this + 172);
}
// 40AEE0: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (0040A348) --------------------------------------------------------
int __thiscall sub_40A348(void *this, char *a2)
{
  struct Concurrency::IExecutionContext *v2; // ST18_4@17
  int v3; // eax@17
  int v4; // edx@17
  int v5; // eax@17
  int result; // eax@28
  int v7; // [sp+14h] [bp-1ACh]@1
  int v8; // [sp+18h] [bp-1A8h]@28
  int v9; // [sp+1Ch] [bp-1A4h]@28
  int v10; // [sp+20h] [bp-1A0h]@28
  int v11; // [sp+24h] [bp-19Ch]@28
  char *v12; // [sp+28h] [bp-198h]@26
  char v13; // [sp+2Ch] [bp-194h]@17
  char v14; // [sp+34h] [bp-18Ch]@17
  char v15; // [sp+38h] [bp-188h]@17
  char v16; // [sp+48h] [bp-178h]@17
  char v17; // [sp+4Ch] [bp-174h]@17
  char v18; // [sp+5Ch] [bp-164h]@17
  char v19; // [sp+7Ch] [bp-144h]@16
  int v20; // [sp+C4h] [bp-FCh]@5
  int v21; // [sp+C8h] [bp-F8h]@6
  int v22; // [sp+CCh] [bp-F4h]@2
  char v23; // [sp+158h] [bp-68h]@6
  char v24[4]; // [sp+1A0h] [bp-20h]@5
  int v25; // [sp+1A4h] [bp-1Ch]@5
  int v26; // [sp+1A8h] [bp-18h]@17
  char *v27; // [sp+1ACh] [bp-14h]@1
  int v28; // [sp+1B0h] [bp-10h]@1
  int v29; // [sp+1BCh] [bp-4h]@2

  v7 = (int)this;
  v27 = (char *)sub_40A23F(a2, (int)&v28, 0);
  if ( v27 )
  {
    sub_40AF60((int)&v22, v27, v28, 1);
    v29 = 0;
    if ( &v22 )
      sub_40AF20((int)&v22 + *(_DWORD *)(v22 + 4));
    else
      sub_40AF20(0);
    *(_DWORD *)v24 = 1;
    v20 = 0;
    sub_40BB10(&v25);
    while ( 1 )
    {
      v21 = sub_431E60((int)&v22, &v23, 1);
      if ( v21 == 13 )
        break;
      if ( v20 == 3 )
      {
        if ( v21 == 11 )
          v20 = 0;
      }
      else
      {
        switch ( v21 )
        {
          case 0:
            if ( v20 )
            {
              if ( v20 == 2 )
              {
                sub_40B890(&v17, &v23, (int)&v16);
                LOBYTE(v29) = 1;
                sub_40B890(&v15, &v19, (int)&v14);
                LOBYTE(v29) = 2;
                v2 = (struct Concurrency::IExecutionContext *)sub_40BA60(&v18, (int)&v15, (int)&v17);
                LOBYTE(v29) = 3;
                v3 = sub_40B970((void *)(v7 + 172), (int)&v13, v2);
                v4 = *(_DWORD *)v3;
                v5 = *(_DWORD *)(v3 + 4);
                v25 = v4;
                v26 = v5;
                LOBYTE(v29) = 2;
                sub_40B140(&v18);
                LOBYTE(v29) = 1;
                unknown_libname_20(&v15);
                LOBYTE(v29) = 0;
                unknown_libname_20(&v17);
                if ( !(_BYTE)v26 )
                  sub_42DBFC((int)&unk_47FA00, 3, aInsertTwiceSAt, &v19, *(_DWORD *)v24, a2);
              }
              else if ( v20 != 3 )
              {
                sub_42DBFC((int)&unk_47FA00, 3, aInvalidStateAt, *(_DWORD *)v24, a2);
              }
            }
            else
            {
              strcpy(&v19, &v23);
            }
            break;
          case 6:
            v20 = 2;
            break;
          case 5:
            v20 = 3;
            break;
          case 11:
            v20 = 0;
            ++*(_DWORD *)v24;
            break;
          default:
            if ( v20 != 3 )
              sub_42DBFC((int)&unk_47FA00, 3, aInvalidTokenSA, &v23, *(_DWORD *)v24, a2);
            break;
        }
      }
    }
    v12 = v27;
    sub_43CA18(v27);
    v29 = -1;
    sub_40B0F0((int)&v22);
  }
  else
  {
    sub_42DBFC((int)&unk_47FA00, 3, aCanTLoadS, a2);
  }
  *(_DWORD *)v7 = sub_40AD2F((void *)v7, aServerport, 0);
  *(_DWORD *)(v7 + 4) = sub_40AD2F((void *)v7, aServerexport, 0);
  *(_DWORD *)(v7 + 8) = sub_40AD2F((void *)v7, aServerintport, 0);
  *(_DWORD *)(v7 + 12) = sub_40AD2F((void *)v7, aWorldport, 0);
  *(_DWORD *)(v7 + 16) = sub_40AD2F((void *)v7, aDbconnectionnu, 0);
  *(_DWORD *)(v7 + 20) = sub_40AD2F((void *)v7, aNumserverthrea, 0);
  *(_DWORD *)(v7 + 24) = sub_40AD2F((void *)v7, aNumserverintth, 0);
  *(_DWORD *)(v7 + 48) = sub_40AD2F((void *)v7, aGameid, 0);
  *(_DWORD *)(v7 + 100) = 1000 * sub_40AD2F((void *)v7, aSockettimeout, 0);
  *(_DWORD *)(v7 + 92) = sub_40AD2F((void *)v7, aSocketlimit, 0);
  *(_DWORD *)(v7 + 104) = sub_40AD2F((void *)v7, aAcceptcallnum, 0);
  *(_DWORD *)(v7 + 108) = sub_40AD2F((void *)v7, aWaitinguserlim, 0);
  *(_DWORD *)(v7 + 32) = sub_40AD2F((void *)v7, aPacketsizetype, 0);
  *(_BYTE *)(v7 + 28) = sub_40ACB4((void *)v7, aEncrypt, 0);
  *(_DWORD *)(v7 + 44) = sub_40AC55(v7, aLogdirectory);
  *(_DWORD *)(v7 + 36) = sub_40AD2F((void *)v7, aProtocolversio, 0);
  *(_BYTE *)(v7 + 52) = sub_40ACB4((void *)v7, aDesapply, 0);
  *(_DWORD *)(v7 + 56) = sub_40AC55(v7, aDeskey);
  *(_BYTE *)(v7 + 60) = sub_40ACB4((void *)v7, aReadlocalserve, 0);
  *(_BYTE *)(v7 + 40) = sub_40ACB4((void *)v7, aOnetimelogout, 0);
  *(_BYTE *)(v7 + 61) = sub_40ACB4((void *)v7, aGmcheckmode, 0);
  *(_DWORD *)(v7 + 88) = sub_40AD2F((void *)v7, aCountrycode, 0);
  *(_BYTE *)(v7 + 62) = sub_40ACB4((void *)v7, aUserdata, 0);
  *(_BYTE *)(v7 + 63) = sub_40ACB4((void *)v7, aDevconnectoute, 0);
  *(_DWORD *)(v7 + 68) = sub_40AC55(v7, aDevserverip);
  *(_BYTE *)(v7 + 64) = sub_40ACB4((void *)v7, aDumppacket, 0);
  *(_BYTE *)(v7 + 65) = sub_40ACB4((void *)v7, aPccafefirst, 0);
  *(_BYTE *)(v7 + 66) = sub_40ACB4((void *)v7, aUseipserver, 0);
  *(_DWORD *)(v7 + 72) = *(_DWORD *)sub_40AD64((void *)v7, (int)&v11, aIpserver);
  *(_DWORD *)(v7 + 76) = sub_40AD2F((void *)v7, aIpport, 0);
  *(_DWORD *)(v7 + 80) = 1000 * sub_40AD2F((void *)v7, aIpinterval, 0);
  *(_BYTE *)(v7 + 112) = sub_40ACB4((void *)v7, aUselogd, 0);
  *(_DWORD *)(v7 + 116) = *(_DWORD *)sub_40AD64((void *)v7, (int)&v10, aLogdip);
  *(_DWORD *)(v7 + 120) = sub_40AD2F((void *)v7, aLogdport, 0);
  *(_DWORD *)(v7 + 124) = 1000 * sub_40AD2F((void *)v7, aLogdconnectint, 60);
  *(_BYTE *)(v7 + 128) = sub_40ACB4((void *)v7, aRestrictgmip, 0);
  *(_DWORD *)(v7 + 132) = *(_DWORD *)sub_40AD64((void *)v7, (int)&v9, aGmip);
  *(_BYTE *)(v7 + 136) = sub_40ACB4((void *)v7, aUsewantedsyste, 0);
  *(_DWORD *)(v7 + 140) = *(_DWORD *)sub_40AD64((void *)v7, (int)&v8, aWantedip);
  *(_DWORD *)(v7 + 144) = sub_40AD2F((void *)v7, aWantedport, 2122);
  *(_DWORD *)(v7 + 148) = 1000 * sub_40AD2F((void *)v7, aWantedreconnec, 1800);
  *(_DWORD *)(v7 + 84) = sub_40AD2F((void *)v7, aIpaccesslimit, 0);
  *(_BYTE *)(v7 + 152) = sub_40ACB4((void *)v7, aFreeserver, 0);
  *(_BYTE *)(v7 + 153) = sub_40ACB4((void *)v7, aUseforbiddenip, 0);
  *(_BYTE *)(v7 + 154) = sub_40ACB4((void *)v7, aSupportreconne, 0);
  *(_DWORD *)(v7 + 156) = sub_40AC55(v7, aMailserver);
  *(_DWORD *)(v7 + 160) = sub_40AC55(v7, aMailfrom);
  *(_DWORD *)(v7 + 164) = sub_40AC55(v7, aMailto);
  *(_BYTE *)(v7 + 168) = sub_40ACB4((void *)v7, aNewserverlist, 0);
  *(_BYTE *)(v7 + 169) = sub_40ACB4((void *)v7, aAutokickaccoun, 0);
  LOBYTE(result) = sub_40ACB4((void *)v7, aNewencrypt, 0);
  *(_BYTE *)(v7 + 170) = result;
  return result;
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0040AC55) --------------------------------------------------------
void *__thiscall sub_40AC55(int this, char *a2)
{
  int v2; // ST08_4@1
  _DWORD *v3; // eax@1
  int v4; // eax@2
  void *result; // eax@2
  char v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v2 = this;
  sub_40B920((void *)(this + 172), (int)&v7, a2);
  v3 = (_DWORD *)sub_40B950((void *)(v2 + 172), (int)&v6);
  if ( (unsigned __int8)sub_40BAE0(&v7, v3) )
  {
    v4 = unknown_libname_27(&v7);
    result = sub_40B8D0(v4 + 16);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 40BAC0: using guessed type int __thiscall unknown_libname_27(_DWORD);

//----- (0040ACB4) --------------------------------------------------------
char __thiscall sub_40ACB4(void *this, char *a2, char a3)
{
  char result; // al@7
  bool v4; // [sp+0h] [bp-Ch]@5
  char *v5; // [sp+8h] [bp-4h]@1

  v5 = (char *)sub_40AC55((int)this, a2);
  if ( v5 )
  {
    v4 = !_strcmpi(v5, aYes) || !_strcmpi(v5, aTrue) || !_strcmpi(v5, a1);
    result = v4;
  }
  else
  {
    result = a3;
  }
  return result;
}

//----- (0040AD2F) --------------------------------------------------------
int __thiscall sub_40AD2F(void *this, char *a2, int a3)
{
  int result; // eax@2
  char *v4; // [sp+4h] [bp-4h]@1

  v4 = (char *)sub_40AC55((int)this, a2);
  if ( v4 )
    result = atoi(v4);
  else
    result = a3;
  return result;
}

//----- (0040AD64) --------------------------------------------------------
int __thiscall sub_40AD64(void *this, int a2, char *a3)
{
  char *cp; // [sp+4h] [bp-8h]@1
  unsigned __int32 v5; // [sp+8h] [bp-4h]@2

  cp = (char *)sub_40AC55((int)this, a3);
  if ( cp )
    v5 = inet_addr(cp);
  else
    v5 = 0;
  *(_DWORD *)a2 = v5;
  return a2;
}

//----- (0040AE2F) --------------------------------------------------------
char *__stdcall sub_40AE2F(char *a1, char *a2, int a3, int a4)
{
  char *result; // eax@1
  char *v5; // [sp+4h] [bp-4h]@2

  result = strstr(a1, a2);
  if ( result )
  {
    v5 = &result[strlen(a2)];
    result = (char *)*v5;
    if ( (signed int)result >= 48 && *v5 <= 57 )
    {
      *(_DWORD *)a4 = atoi(v5);
      result = (char *)sub_42DBFC((int)&unk_47FA00, 2, aEditorModeSD, a3, *(_DWORD *)a4);
    }
  }
  return result;
}

//----- (0040AEBF) --------------------------------------------------------
int sub_40AEBF()
{
  return atexit(sub_402150);
}

//----- (0040AF20) --------------------------------------------------------
int __cdecl sub_40AF20(int a1)
{
  sub_40AF40(a1, 1);
  return a1;
}

//----- (0040AF40) --------------------------------------------------------
int __thiscall sub_40AF40(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 12) &= ~a2;
  return result;
}

//----- (0040AF60) --------------------------------------------------------
int __thiscall sub_40AF60(int this, char *a2, int a3, int a4)
{
  int v5; // [sp+0h] [bp-14h]@1

  v5 = this;
  if ( a4 )
  {
    *(_DWORD *)this = &unk_45F3D4;
    sub_40B1B0((std::ios_base *)(this + 88));
  }
  sub_40B240(v5, v5 + 8, v5 + 8, 0, 0);
  sub_40B010((std::strstreambuf *)(v5 + 8), a2, a3);
  *(_DWORD *)(v5 + *(_DWORD *)(*(_DWORD *)v5 + 4)) = &off_45FA4C;
  return v5;
}
// 45FA4C: using guessed type int (__stdcall *off_45FA4C)(int);

//----- (0040B010) --------------------------------------------------------
std::strstreambuf *__thiscall sub_40B010(std::strstreambuf *this, char *a2, int a3)
{
  std::strstreambuf *v3; // ST10_4@1

  v3 = this;
  sub_40B300((int)this);
  *(_DWORD *)v3 = &off_45FA5C;
  std::strstreambuf::_Init(v3, a3, a2, 0, 2);
  return v3;
}
// 45FA5C: using guessed type int (__stdcall *off_45FA5C)(int);

//----- (0040B0F0) --------------------------------------------------------
int __thiscall sub_40B0F0(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  std::istrstream::~istrstream((std::istrstream *)(this + 88));
  return sub_40B190((std::ios_base *)(v1 + 88));
}

//----- (0040B140) --------------------------------------------------------
int __thiscall sub_40B140(char *this)
{
  char *v1; // ST00_4@1

  v1 = this;
  unknown_libname_20(this + 16);
  return unknown_libname_20(v1);
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0040B190) --------------------------------------------------------
int __thiscall sub_40B190(std::ios_base *this)
{
  *(_DWORD *)this = &off_45FACC;
  return std::ios_base::~ios_base(this);
}
// 45FACC: using guessed type int (__stdcall *off_45FACC)(int);

//----- (0040B1B0) --------------------------------------------------------
std::ios_base *__thiscall sub_40B1B0(std::ios_base *this)
{
  std::ios_base *v1; // ST00_4@1

  v1 = this;
  std::ios_base::ios_base(this);
  *(_DWORD *)v1 = &off_45FACC;
  return v1;
}
// 45FACC: using guessed type int (__stdcall *off_45FACC)(int);

//----- (0040B240) --------------------------------------------------------
int __fastcall sub_40B240(int a1, int a2, int a3, char a4, int a5)
{
  int v5; // ecx@3
  unsigned __int8 v6; // cf@3
  int v8; // [sp+0h] [bp-14h]@1

  v8 = a1;
  if ( a5 )
  {
    *(_DWORD *)a1 = &unk_45F3DC;
    sub_40B1B0((std::ios_base *)(a1 + 8));
  }
  *(_DWORD *)(v8 + 4) = 0;
  v5 = *(_DWORD *)v8;
  *(_DWORD *)(v8 + *(_DWORD *)(*(_DWORD *)v8 + 4)) = &off_45FA44;
  LOBYTE(v5) = a4;
  v6 = __CFADD__(*(_DWORD *)(*(_DWORD *)v8 + 4), v8);
  std::basic_ios<char,std::char_traits<char>>::init(a3, v5);
  return v8;
}
// 40BC20: using guessed type _DWORD __stdcall std::basic_ios<char,std::char_traits<char>>::init(_DWORD, _DWORD);
// 45FA44: using guessed type int (__stdcall *off_45FA44)(int);

//----- (0040B2E0) --------------------------------------------------------
char *__thiscall sub_40B2E0(char *this)
{
  char *result; // eax@1

  result = this;
  *(_DWORD *)&this[*(_DWORD *)(*((_DWORD *)this - 2) + 4) - 8] = &off_45FA44;
  return result;
}
// 45FA44: using guessed type int (__stdcall *off_45FA44)(int);

//----- (0040B300) --------------------------------------------------------
_DWORD *__thiscall sub_40B300(int this)
{
  _DWORD *v1; // ST00_4@1

  v1 = (_DWORD *)this;
  std::locale::locale((std::locale *)(this + 52));
  *v1 = off_45FA94;
  std::basic_streambuf<char,std::char_traits<char>>::_Init(v1);
  return v1;
}
// 40BE70: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 45FA94: using guessed type int (__stdcall *off_45FA94[3])(int);

//----- (0040B490) --------------------------------------------------------
int __thiscall sub_40B490(int this)
{
  *(_DWORD *)this = off_45FA94;
  return std::locale::~locale((std::locale *)(this + 52));
}
// 45FA94: using guessed type int (__stdcall *off_45FA94[3])(int);

//----- (0040B890) --------------------------------------------------------
void *__thiscall sub_40B890(void *this, char *a2, int a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string<char,std::char_traits<char>,std::allocator<char>>(
    a2,
    a3);
  return v3;
}
// 40BF20: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string<char,std::char_traits<char>,std::allocator<char>>(char *, _DWORD);

//----- (0040B8D0) --------------------------------------------------------
void *__thiscall sub_40B8D0(int this)
{
  void *v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = *(void **)(this + 4);
  else
    v2 = sub_40BF50();
  return v2;
}

//----- (0040B900) --------------------------------------------------------
void *__thiscall sub_40B900(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_40C020(this, a2, a3);
  return v3;
}

//----- (0040B920) --------------------------------------------------------
int __thiscall sub_40B920(void *this, int a2, char *a3)
{
  int v3; // eax@1
  int v5; // [sp+4h] [bp-4h]@1

  v3 = sub_40C490(this, (int)&v5, a3);
  unknown_libname_32(v3);
  return a2;
}
// 40C3E0: using guessed type _DWORD __stdcall unknown_libname_32(_DWORD);

//----- (0040B950) --------------------------------------------------------
int __thiscall sub_40B950(void *this, int a2)
{
  sub_40C0A0((int)this, a2);
  return a2;
}

//----- (0040B970) --------------------------------------------------------
int __thiscall sub_40B970(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_40C0C0(this, (int)&v4, a3);
  sub_40C460(a2, &v4, &v5);
  return a2;
}

//----- (0040B9B0) --------------------------------------------------------
void __thiscall sub_40B9B0(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_40C080((int)this, (int)&v6);
  v2 = (int *)sub_40C050((void *)v3, (int)&v5);
  sub_40C2C0((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_4785F8 )
  {
    v8 = (void *)dword_4785F4;
    dword_4785F4 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 4785F4: using guessed type int dword_4785F4;
// 4785F8: using guessed type int dword_4785F8;

//----- (0040BA60) --------------------------------------------------------
void *__thiscall sub_40BA60(void *this, int a2, int a3)
{
  void *v3; // ST04_4@1

  v3 = this;
  unknown_libname_28(a2);
  unknown_libname_28(a3);
  return v3;
}
// 40BBD0: using guessed type _DWORD __stdcall unknown_libname_28(_DWORD);

//----- (0040BAE0) --------------------------------------------------------
BOOL __thiscall sub_40BAE0(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_40C420(this, a2) == 0;
}

//----- (0040BB10) --------------------------------------------------------
_BYTE *__thiscall sub_40BB10(_BYTE *this)
{
  _BYTE *v1; // ST00_4@1

  v1 = this;
  unknown_libname_33();
  v1[4] = 0;
  return v1;
}
// 40C440: using guessed type int unknown_libname_33(void);

//----- (0040BB30) --------------------------------------------------------
std::ios_base *__thiscall sub_40BB30(std::ios_base *this, char a2)
{
  std::ios_base *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_40B190(this);
  if ( a2 & 1 )
    sub_43CA18((LPVOID)v3);
  return v3;
}

//----- (0040BB60) --------------------------------------------------------
int __thiscall sub_40BB60(char *this, char a2)
{
  char *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_40BBF0((int)(this - 8));
  if ( a2 & 1 )
    sub_43CA18(v3 - 8);
  return (int)(v3 - 8);
}

//----- (0040BBA0) --------------------------------------------------------
void *__thiscall sub_40BBA0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_40B490((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0040BBF0) --------------------------------------------------------
int __thiscall sub_40BBF0(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  sub_40B2E0((char *)(this + 8));
  return sub_40B190((std::ios_base *)(v1 + 8));
}

//----- (0040BC90) --------------------------------------------------------
void __thiscall sub_40BC90(void *this, int a2, char a3)
{
  int v3; // eax@2

  if ( a2 )
  {
    v3 = unknown_libname_29(this);
    sub_40BCE0(a2 | v3, a3);
  }
}
// 40BCC0: using guessed type int __thiscall unknown_libname_29(_DWORD);
// 40BCE0: using guessed type _DWORD __stdcall sub_40BCE0(_DWORD, char);

//----- (0040BF50) --------------------------------------------------------
void *sub_40BF50()
{
  return &unk_45F3E8;
}

//----- (0040C020) --------------------------------------------------------
void *__thiscall sub_40C020(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_40C850((int)this, a2, 0, a3);
  return v3;
}

//----- (0040C050) --------------------------------------------------------
int __thiscall sub_40C050(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_40D610((int)this);
  unknown_libname_42(*v2);
  return a2;
}
// 40D6B0: using guessed type _DWORD __stdcall unknown_libname_42(_DWORD);

//----- (0040C080) --------------------------------------------------------
int __thiscall sub_40C080(int this, int a2)
{
  unknown_libname_42(*(_DWORD *)(this + 4));
  return a2;
}
// 40D6B0: using guessed type _DWORD __stdcall unknown_libname_42(_DWORD);

//----- (0040C0A0) --------------------------------------------------------
int __thiscall sub_40C0A0(int this, int a2)
{
  unknown_libname_40(*(_DWORD *)(this + 4));
  return a2;
}
// 40D680: using guessed type _DWORD __stdcall unknown_libname_40(_DWORD);

//----- (0040C0C0) --------------------------------------------------------
int __thiscall sub_40C0C0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_40D650((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_4785F4 )
  {
    v25 = v26;
    v3 = sub_40C800(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_40C290((int)v4, (int)v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_37(v26);
    else
      v13 = *(_DWORD *)sub_40C830(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_40D180(v14, (int)&v22, v26, v25, a3);
    sub_40C460(a2, v5, &v23);
    return a2;
  }
  unknown_libname_42(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_40C050(v14, (int)&v21);
    if ( (unsigned __int8)sub_40D720(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_40D180(v14, (int)&v19, v26, v25, a3);
      sub_40C460(a2, v8, &v20);
      return a2;
    }
    unknown_libname_43(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_41(&v28);
  v11 = sub_40C800(v10);
  if ( sub_40C290((int)v11, (int)v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_40D180(v14, (int)&v16, v26, v25, a3);
    sub_40C460(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_40C460(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 40D6A0: using guessed type int __thiscall unknown_libname_41(_DWORD);
// 40D6B0: using guessed type _DWORD __stdcall unknown_libname_42(_DWORD);
// 40D700: using guessed type int __thiscall unknown_libname_43(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040C290) --------------------------------------------------------
bool __stdcall sub_40C290(int a1, int a2)
{
  const char *v2; // ST04_4@1
  const char *v3; // eax@1

  v2 = (const char *)sub_40B8D0(a2);
  v3 = (const char *)sub_40B8D0(a1);
  return _strcmpi(v3, v2) < 0;
}

//----- (0040C2C0) --------------------------------------------------------
_DWORD *__thiscall sub_40C2C0(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_38()
    || (v4 = (_DWORD *)sub_40C050((void *)v9, (int)&v13), (unsigned __int8)sub_40D740(&a3, v4))
    || (v5 = (_DWORD *)sub_40C080(v9, (int)&v12), (unsigned __int8)sub_40D740(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_40D740(&a3, &a4) )
    {
      v6 = sub_40D6D0(&a3, &v11, 0);
      sub_40C8B0((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_40D650(v9);
    sub_40D100((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_40D650(v9) = dword_4785F4;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_40D610(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_40D630(v9) = *(_DWORD *)(v9 + 4);
    sub_40C050((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 40C890: using guessed type int unknown_libname_38(void);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040C400) --------------------------------------------------------
int __thiscall sub_40C400(int *this)
{
  return sub_40C840(*this);
}

//----- (0040C420) --------------------------------------------------------
BOOL __thiscall sub_40C420(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (0040C460) --------------------------------------------------------
int __thiscall sub_40C460(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (0040C490) --------------------------------------------------------
int __thiscall sub_40C490(void *this, int a2, char *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  int *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  int *v11; // [sp+10h] [bp-8h]@5
  int v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_40D770(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_40C080(v8, (int)&v10);
  if ( (unsigned __int8)sub_40D720(&v12, v3)
    || (v4 = unknown_libname_41(&v12), v5 = sub_40C800(v4), sub_40C530(a3, (int)v5)) )
  {
    v7 = (int *)sub_40C080(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *(_DWORD *)a2 = *v7;
  return a2;
}
// 40D6A0: using guessed type int __thiscall unknown_libname_41(_DWORD);

//----- (0040C530) --------------------------------------------------------
bool __stdcall sub_40C530(char *a1, int a2)
{
  const char *v2; // eax@1

  v2 = (const char *)sub_40B8D0(a2);
  return _strcmpi(a1, v2) < 0;
}

//----- (0040C740) --------------------------------------------------------
_DWORD *__thiscall sub_40C740(_DWORD *this, char *a2)
{
  _DWORD *v2; // ST08_4@1
  size_t v3; // eax@1

  v2 = this;
  v3 = unknown_libname_34(a2);
  return sub_40D7A0(v2, a2, v3);
}

//----- (0040C800) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_40C800(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_40C840(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (0040C830) --------------------------------------------------------
int __cdecl sub_40C830(int a1)
{
  return a1 + 8;
}

//----- (0040C840) --------------------------------------------------------
int __cdecl sub_40C840(int a1)
{
  return a1 + 12;
}

//----- (0040C850) --------------------------------------------------------
int __thiscall sub_40C850(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_40DAB0((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (0040C8B0) --------------------------------------------------------
_DWORD *__thiscall sub_40C8B0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  void *v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_40D6D0(&a3, &v76, 0);
  v81 = (void *)unknown_libname_41(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_37(v81) == dword_4785F4 )
  {
    v82 = *(_DWORD *)sub_40C830((int)v81);
  }
  else if ( *(_DWORD *)sub_40C830((int)v81) == dword_4785F4 )
  {
    v82 = *(_DWORD *)unknown_libname_37(v81);
  }
  else
  {
    v4 = (int *)sub_40C830((int)v81);
    v81 = (void *)sub_40DD20(*v4);
    v82 = *(_DWORD *)sub_40C830((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_40DAA0((int)v81);
    *(_DWORD *)sub_40DAA0(v82) = *v27;
    v28 = (void **)sub_40D650((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_40D650((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_40DAA0((int)v80);
      v31 = (void **)unknown_libname_37(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_40DAA0((int)v80);
        v33 = (_DWORD *)unknown_libname_37(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_40DAA0((int)v80);
        v35 = (_DWORD *)sub_40C830(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_40D610((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_40C830((int)v80) == dword_4785F4 )
      {
        v37 = (_DWORD *)sub_40DAA0((int)v80);
        *(_DWORD *)sub_40D610((int)v75) = *v37;
      }
      else
      {
        v38 = sub_40DD20(v82);
        *(_DWORD *)sub_40D610((int)v75) = v38;
      }
    }
    v39 = (void **)sub_40D630((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_37(v80) == dword_4785F4 )
      {
        v40 = (_DWORD *)sub_40DAA0((int)v80);
        *(_DWORD *)sub_40D630((int)v75) = *v40;
      }
      else
      {
        v41 = sub_40DCE0(v82);
        *(_DWORD *)sub_40D630((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_37(v80);
    v6 = (void **)sub_40DAA0(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_37(v80);
    *(_DWORD *)unknown_libname_37(v81) = *v7;
    v8 = (void **)sub_40C830((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_40DAA0(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_40DAA0((int)v81);
      *(_DWORD *)sub_40DAA0(v82) = *v10;
      v11 = (_DWORD *)sub_40DAA0((int)v81);
      v12 = (_DWORD *)unknown_libname_37(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_40C830((int)v80);
      *(_DWORD *)sub_40C830((int)v81) = *v13;
      v14 = (int *)sub_40C830((int)v80);
      v15 = (void **)sub_40DAA0(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_40D650((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_40D650((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_40DAA0((int)v80);
      v19 = (void **)unknown_libname_37(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_40DAA0((int)v80);
        v21 = (void **)unknown_libname_37(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_40DAA0((int)v80);
        v23 = (void **)sub_40C830(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_40DAA0((int)v80);
    *(_DWORD *)sub_40DAA0((int)v81) = *v24;
    v25 = (int *)sub_40DA90((int)v80);
    v26 = (int *)sub_40DA90((int)v81);
    sub_40E410(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_40DA90((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_40D650((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_40DA90(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_40DAA0(v82);
      v44 = (_DWORD *)unknown_libname_37(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_40DAA0(v82);
        v78 = *(_DWORD *)sub_40C830(*v45);
        if ( !*(_DWORD *)sub_40DA90(v78) )
        {
          *(_DWORD *)sub_40DA90(v78) = 1;
          v46 = (int *)sub_40DAA0(v82);
          *(_DWORD *)sub_40DA90(*v46) = 0;
          v47 = (int *)sub_40DAA0(v82);
          sub_40DBB0((void *)v75, *v47);
          v48 = (int *)sub_40DAA0(v82);
          v78 = *(_DWORD *)sub_40C830(*v48);
        }
        v49 = (int *)unknown_libname_37(v78);
        if ( *(_DWORD *)sub_40DA90(*v49) != 1 || (v50 = (int *)sub_40C830(v78), *(_DWORD *)sub_40DA90(*v50) != 1) )
        {
          v51 = (int *)sub_40C830(v78);
          if ( *(_DWORD *)sub_40DA90(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_37(v78);
            *(_DWORD *)sub_40DA90(*v52) = 1;
            *(_DWORD *)sub_40DA90(v78) = 0;
            sub_40DD60((void *)v75, v78);
            v53 = (int *)sub_40DAA0(v82);
            v78 = *(_DWORD *)sub_40C830(*v53);
          }
          v54 = (int *)sub_40DAA0(v82);
          v55 = (_DWORD *)sub_40DA90(*v54);
          *(_DWORD *)sub_40DA90(v78) = *v55;
          v56 = (int *)sub_40DAA0(v82);
          *(_DWORD *)sub_40DA90(*v56) = 1;
          v57 = (int *)sub_40C830(v78);
          *(_DWORD *)sub_40DA90(*v57) = 1;
          v58 = (int *)sub_40DAA0(v82);
          sub_40DBB0((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_40DA90(v78) = 0;
        v82 = *(_DWORD *)sub_40DAA0(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_40DAA0(v82);
        v77 = *(_DWORD *)unknown_libname_37(*v59);
        if ( !*(_DWORD *)sub_40DA90(v77) )
        {
          *(_DWORD *)sub_40DA90(v77) = 1;
          v60 = (int *)sub_40DAA0(v82);
          *(_DWORD *)sub_40DA90(*v60) = 0;
          v61 = (int *)sub_40DAA0(v82);
          sub_40DD60((void *)v75, *v61);
          v62 = (_DWORD *)sub_40DAA0(v82);
          v77 = *(_DWORD *)unknown_libname_37(*v62);
        }
        v63 = (int *)sub_40C830(v77);
        if ( *(_DWORD *)sub_40DA90(*v63) != 1
          || (v64 = (int *)unknown_libname_37(v77), *(_DWORD *)sub_40DA90(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_37(v77);
          if ( *(_DWORD *)sub_40DA90(*v65) == 1 )
          {
            v66 = (int *)sub_40C830(v77);
            *(_DWORD *)sub_40DA90(*v66) = 1;
            *(_DWORD *)sub_40DA90(v77) = 0;
            sub_40DBB0((void *)v75, v77);
            v67 = (_DWORD *)sub_40DAA0(v82);
            v77 = *(_DWORD *)unknown_libname_37(*v67);
          }
          v68 = (int *)sub_40DAA0(v82);
          v69 = (_DWORD *)sub_40DA90(*v68);
          *(_DWORD *)sub_40DA90(v77) = *v69;
          v70 = (int *)sub_40DAA0(v82);
          *(_DWORD *)sub_40DA90(*v70) = 1;
          v71 = (int *)unknown_libname_37(v77);
          *(_DWORD *)sub_40DA90(*v71) = 1;
          v72 = (int *)sub_40DAA0(v82);
          sub_40DD60((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_40DA90(v77) = 0;
        v82 = *(_DWORD *)sub_40DAA0(v82);
      }
    }
    *(_DWORD *)sub_40DA90(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = (void *)sub_40C840((int)v81);
  sub_40DF00(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 40D6A0: using guessed type int __thiscall unknown_libname_41(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040D100) --------------------------------------------------------
void *__thiscall sub_40D100(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  void *v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_4785F4; a2 = i )
  {
    v3 = (void **)sub_40C830((int)i);
    sub_40D100(*v3);
    i = *(void **)unknown_libname_37(i);
    v4 = (void *)sub_40C840((int)a2);
    sub_40DF00(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040D180) --------------------------------------------------------
int __thiscall sub_40D180(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_40DE90(a4, 0);
  *(_DWORD *)unknown_libname_37(v48) = dword_4785F4;
  *(_DWORD *)sub_40C830((int)v48) = dword_4785F4;
  v5 = (void *)sub_40C840((int)v48);
  sub_40DEE0(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_4785F4
    || (v6 = sub_40C800(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        sub_40C290((int)v7, (int)v6)) )
  {
    v8 = (char **)unknown_libname_37(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_40D650(v46);
      *v9 = v48;
      v10 = (char **)sub_40D630(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_40D610(v46) )
    {
      v11 = (char **)sub_40D610(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_40C830(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_40D630(v46) )
    {
      v13 = (char **)sub_40D630(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_40D650(v46) )
  {
    v14 = (int *)sub_40DAA0((int)v49);
    if ( *(_DWORD *)sub_40DA90(*v14) )
      break;
    v15 = (_DWORD *)sub_40DAA0((int)v49);
    v16 = (int *)sub_40DAA0((int)v49);
    v17 = (_DWORD *)sub_40DAA0(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_37(*v17) )
    {
      v18 = (int *)sub_40DAA0((int)v49);
      v19 = (int *)sub_40DAA0(*v18);
      v20 = (int *)sub_40C830(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_40DA90(*v20) )
      {
        v25 = (int *)sub_40DAA0((int)v49);
        if ( v49 == *(char **)sub_40C830(*v25) )
        {
          v49 = *(char **)sub_40DAA0((int)v49);
          sub_40DBB0((void *)v46, (int)v49);
        }
        v26 = (int *)sub_40DAA0((int)v49);
        *(_DWORD *)sub_40DA90(*v26) = 1;
        v27 = (int *)sub_40DAA0((int)v49);
        v28 = (int *)sub_40DAA0(*v27);
        *(_DWORD *)sub_40DA90(*v28) = 0;
        v29 = (int *)sub_40DAA0((int)v49);
        v30 = (int *)sub_40DAA0(*v29);
        sub_40DD60((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_40DAA0((int)v49);
        *(_DWORD *)sub_40DA90(*v21) = 1;
        *(_DWORD *)sub_40DA90(v50) = 1;
        v22 = (int *)sub_40DAA0((int)v49);
        v23 = (int *)sub_40DAA0(*v22);
        *(_DWORD *)sub_40DA90(*v23) = 0;
        v24 = (int *)sub_40DAA0((int)v49);
        v49 = *(char **)sub_40DAA0(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_40DAA0((int)v49);
      v32 = (_DWORD *)sub_40DAA0(*v31);
      v33 = (int *)unknown_libname_37(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_40DA90(*v33) )
      {
        v38 = (_DWORD *)sub_40DAA0((int)v49);
        if ( v49 == *(char **)unknown_libname_37(*v38) )
        {
          v49 = *(char **)sub_40DAA0((int)v49);
          sub_40DD60((void *)v46, (int)v49);
        }
        v39 = (int *)sub_40DAA0((int)v49);
        *(_DWORD *)sub_40DA90(*v39) = 1;
        v40 = (int *)sub_40DAA0((int)v49);
        v41 = (int *)sub_40DAA0(*v40);
        *(_DWORD *)sub_40DA90(*v41) = 0;
        v42 = (int *)sub_40DAA0((int)v49);
        v43 = (int *)sub_40DAA0(*v42);
        sub_40DBB0((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_40DAA0((int)v49);
        *(_DWORD *)sub_40DA90(*v34) = 1;
        *(_DWORD *)sub_40DA90(v51) = 1;
        v35 = (int *)sub_40DAA0((int)v49);
        v36 = (int *)sub_40DAA0(*v35);
        *(_DWORD *)sub_40DA90(*v36) = 0;
        v37 = (int *)sub_40DAA0((int)v49);
        v49 = *(char **)sub_40DAA0(*v37);
      }
    }
  }
  v44 = (int *)sub_40D650(v46);
  *(_DWORD *)sub_40DA90(*v44) = 1;
  unknown_libname_42(v48);
  return a2;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 40D6B0: using guessed type _DWORD __stdcall unknown_libname_42(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040D610) --------------------------------------------------------
int __thiscall sub_40D610(int this)
{
  return unknown_libname_37(*(_DWORD *)(this + 4));
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);

//----- (0040D630) --------------------------------------------------------
int __thiscall sub_40D630(int this)
{
  return sub_40C830(*(_DWORD *)(this + 4));
}

//----- (0040D650) --------------------------------------------------------
int __thiscall sub_40D650(int this)
{
  return sub_40DAA0(*(_DWORD *)(this + 4));
}

//----- (0040D6D0) --------------------------------------------------------
_DWORD *__thiscall sub_40D6D0(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_46(this);
  *a2 = v3;
  return a2;
}
// 40DFF0: using guessed type int __cdecl unknown_libname_46(_DWORD);

//----- (0040D720) --------------------------------------------------------
BOOL __thiscall sub_40D720(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (0040D740) --------------------------------------------------------
BOOL __thiscall sub_40D740(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_40D720(this, a2) == 0;
}

//----- (0040D770) --------------------------------------------------------
int __thiscall sub_40D770(void *this, int a2, char *a3)
{
  int v3; // eax@1

  v3 = sub_40E010(this, a3);
  unknown_libname_42(v3);
  return a2;
}
// 40D6B0: using guessed type _DWORD __stdcall unknown_libname_42(_DWORD);

//----- (0040D7A0) --------------------------------------------------------
_DWORD *__thiscall sub_40D7A0(_DWORD *this, void *a2, size_t a3)
{
  _DWORD *v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  if ( sub_40D950(this, a3, 1) )
  {
    std::char_traits<char>::copy((void *)v4[1], a2, a3);
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Eos(a3);
  }
  return v4;
}
// 40D900: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Eos(_DWORD);

//----- (0040D8A0) --------------------------------------------------------
void *__cdecl sub_40D8A0(void *a1, void *a2, size_t a3)
{
  return memcpy_0(a1, a2, a3);
}

//----- (0040D950) --------------------------------------------------------
char __thiscall sub_40D950(_DWORD *this, unsigned int a2, char a3)
{
  _BYTE *v3; // eax@7
  char result; // al@7
  _DWORD *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  if ( std::basic_string<char,std::char_traits<char>,std::allocator<char>>::max_size() < a2 )
    sub_43DF65();
  if ( v5[1] && *(_BYTE *)sub_40C790(v5[1]) && *(_BYTE *)sub_40C790(v5[1]) != 255 )
  {
    if ( a2 )
    {
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Copy(a2);
      result = 1;
    }
    else
    {
      v3 = (_BYTE *)sub_40C790(v5[1]);
      --*v3;
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
      result = 0;
    }
  }
  else if ( a2 )
  {
    if ( a3 && (v5[3] > 0x1Fu || v5[3] < a2) )
    {
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Copy(a2);
    }
    else if ( !a3 && v5[3] < a2 )
    {
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Copy(a2);
    }
    result = 1;
  }
  else
  {
    if ( a3 )
    {
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
    }
    else if ( v5[1] )
    {
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Eos(0);
    }
    result = 0;
  }
  return result;
}
// 40BF60: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 40C790: using guessed type _DWORD __stdcall sub_40C790(_DWORD);
// 40D900: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Eos(_DWORD);
// 40E0D0: using guessed type int std::basic_string<char,std::char_traits<char>,std::allocator<char>>::max_size(void);
// 40E140: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Copy(_DWORD);

//----- (0040DA90) --------------------------------------------------------
int __cdecl sub_40DA90(int a1)
{
  return a1 + 44;
}

//----- (0040DAA0) --------------------------------------------------------
int __cdecl sub_40DAA0(int a1)
{
  return a1 + 4;
}

//----- (0040DAB0) --------------------------------------------------------
_DWORD *__thiscall sub_40DAB0(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_40DE90(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_4785F4 )
  {
    dword_4785F4 = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_37(dword_4785F4) = 0;
    *(_DWORD *)sub_40C830(dword_4785F4) = 0;
  }
  ++dword_4785F8;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_40DE90(dword_4785F4, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_40D610((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_40D630((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;
// 4785F8: using guessed type int dword_4785F8;

//----- (0040DBB0) --------------------------------------------------------
int *__thiscall sub_40DBB0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_40C830(a2);
  v2 = (_DWORD *)unknown_libname_37(v10);
  *(_DWORD *)sub_40C830(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_37(v10) != dword_4785F4 )
  {
    v3 = (int *)unknown_libname_37(v10);
    *(_DWORD *)sub_40DAA0(*v3) = a2;
  }
  v4 = (_DWORD *)sub_40DAA0(a2);
  *(_DWORD *)sub_40DAA0(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_40D650(v9) )
  {
    *(_DWORD *)sub_40D650(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_40DAA0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_37(*v5) )
    {
      v6 = (_DWORD *)sub_40DAA0(a2);
      *(_DWORD *)unknown_libname_37(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_40DAA0(a2);
      *(_DWORD *)sub_40C830(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_37(v10) = a2;
  result = (int *)sub_40DAA0(a2);
  *result = v10;
  return result;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040DCE0) --------------------------------------------------------
int __cdecl sub_40DCE0(int a1)
{
  while ( *(_DWORD *)sub_40C830(a1) != dword_4785F4 )
    a1 = *(_DWORD *)sub_40C830(a1);
  return a1;
}
// 4785F4: using guessed type int dword_4785F4;

//----- (0040DD20) --------------------------------------------------------
int __cdecl sub_40DD20(int a1)
{
  while ( *(_DWORD *)unknown_libname_37(a1) != dword_4785F4 )
    a1 = *(_DWORD *)unknown_libname_37(a1);
  return a1;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040DD60) --------------------------------------------------------
int *__thiscall sub_40DD60(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_37(a2);
  v2 = (_DWORD *)sub_40C830(v10);
  *(_DWORD *)unknown_libname_37(a2) = *v2;
  if ( *(_DWORD *)sub_40C830(v10) != dword_4785F4 )
  {
    v3 = (int *)sub_40C830(v10);
    *(_DWORD *)sub_40DAA0(*v3) = a2;
  }
  v4 = (_DWORD *)sub_40DAA0(a2);
  *(_DWORD *)sub_40DAA0(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_40D650(v9) )
  {
    *(_DWORD *)sub_40D650(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_40DAA0(a2);
    if ( a2 == *(_DWORD *)sub_40C830(*v5) )
    {
      v6 = (int *)sub_40DAA0(a2);
      *(_DWORD *)sub_40C830(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_40DAA0(a2);
      *(_DWORD *)unknown_libname_37(*v7) = v10;
    }
  }
  *(_DWORD *)sub_40C830(v10) = a2;
  result = (int *)sub_40DAA0(a2);
  *result = v10;
  return result;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040DE90) --------------------------------------------------------
char *__stdcall sub_40DE90(int a1, int a2)
{
  char *result; // eax@1

  result = sub_40E2F0(0x30u);
  *(_DWORD *)sub_40DAA0((int)result) = a1;
  *(_DWORD *)sub_40DA90((int)result) = a2;
  return result;
}

//----- (0040DEE0) --------------------------------------------------------
void *__stdcall sub_40DEE0(void *a1, int a2)
{
  return sub_40E440(a1, a2);
}

//----- (0040DF00) --------------------------------------------------------
void __stdcall sub_40DF00(void *a1)
{
  __ExceptionPtrDestroy(a1);
}

//----- (0040DF20) --------------------------------------------------------
int *__thiscall sub_40DF20(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_40DA90(*this) || (v1 = (int *)sub_40DAA0(*v5), *(_DWORD *)sub_40DAA0(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_37(*v5) == dword_4785F4 )
    {
      while ( 1 )
      {
        v4 = (int **)sub_40DAA0(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_37(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_37(*v5);
      result = (int *)sub_40DCE0(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_40C830(*v5);
    *v5 = *result;
  }
  return result;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040E010) --------------------------------------------------------
int __thiscall sub_40E010(void *this, char *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_40E310((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_4785F4 )
  {
    v3 = sub_40C800(v6);
    if ( sub_40E0A0((int)v3, a2) )
    {
      v6 = *(_DWORD *)sub_40C830(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_37(v6);
    }
  }
  return v5;
}
// 40C820: using guessed type _DWORD __cdecl unknown_libname_37(_DWORD);
// 4785F4: using guessed type int dword_4785F4;

//----- (0040E0A0) --------------------------------------------------------
bool __stdcall sub_40E0A0(int a1, char *a2)
{
  const char *v2; // eax@1

  v2 = (const char *)sub_40B8D0(a1);
  return _strcmpi(v2, a2) < 0;
}

//----- (0040E280) --------------------------------------------------------
_DWORD *__thiscall sub_40E280(int this)
{
  _DWORD *result; // eax@1
  char *v2; // ST08_4@4
  int v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  result = (_DWORD *)this;
  if ( *(_DWORD *)(this + 4) )
  {
    result = (_DWORD *)sub_40C790(*(_DWORD *)(this + 4));
    if ( *(_BYTE *)result )
    {
      result = (_DWORD *)sub_40C790(*(_DWORD *)(v3 + 4));
      if ( *(_BYTE *)result != 255 )
      {
        v2 = *(char **)(v3 + 4);
        std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
        result = sub_40C740((_DWORD *)v3, v2);
      }
    }
  }
  return result;
}
// 40BF60: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 40C790: using guessed type _DWORD __stdcall sub_40C790(_DWORD);

//----- (0040E2F0) --------------------------------------------------------
char *__stdcall sub_40E2F0(size_t a1)
{
  return std::_Allocate(a1, 0);
}

//----- (0040E310) --------------------------------------------------------
int __thiscall sub_40E310(int this)
{
  return sub_40DAA0(*(_DWORD *)(this + 4));
}

//----- (0040E330) --------------------------------------------------------
_DWORD *__thiscall sub_40E330(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_40C830(*this) == dword_4785F4 )
  {
    while ( 1 )
    {
      v3 = (int *)sub_40DAA0(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_40C830(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_40C830(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_40C830(*v4);
    result = (_DWORD *)sub_40DD20(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 4785F4: using guessed type int dword_4785F4;

//----- (0040E3F0) --------------------------------------------------------
char sub_40E3F0()
{
  return 1;
}

//----- (0040E410) --------------------------------------------------------
int __cdecl sub_40E410(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (0040E440) --------------------------------------------------------
void *__cdecl sub_40E440(void *a1, int a2)
{
  void *result; // eax@1

  result = operator new(0x20u, a1);
  if ( result )
    result = sub_40E4D0(result, a2);
  return result;
}

//----- (0040E4B0) --------------------------------------------------------
void sub_40E4B0()
{
  ;
}

//----- (0040E4D0) --------------------------------------------------------
void *__thiscall sub_40E4D0(void *this, int a2)
{
  void *v2; // ST04_4@1

  v2 = this;
  unknown_libname_28(a2);
  unknown_libname_28(a2 + 16);
  return v2;
}
// 40BBD0: using guessed type _DWORD __stdcall unknown_libname_28(_DWORD);

//----- (0040E530) --------------------------------------------------------
char *__thiscall sub_40E530(char *this, char a2)
{
  char *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_40B140(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0040E560) --------------------------------------------------------
void __cdecl sub_40E560(int a1, _BYTE *a2)
{
  char v2[256]; // [sp+0h] [bp-10Ch]@1
  int v3; // [sp+100h] [bp-Ch]@3
  int i; // [sp+104h] [bp-8h]@3
  int v5; // [sp+108h] [bp-4h]@1
  _BYTE *v6; // [sp+118h] [bp+Ch]@1

  v5 = 0;
  v6 = sub_40E64A(v2, a2);
  if ( v6 )
  {
    sub_40E64A(v2, v6);
    v3 = strlen(v2);
    for ( i = 0; i < v3; ++i )
    {
      if ( !isdigit(v2[i]) )
      {
        sub_40F4A9(a1, a0_3);
        return;
      }
    }
    v5 = atoi(v2);
    sub_4027DF(&unk_481698, v5, 11, 1);
    sub_40F4A9(a1, a1_7);
  }
  else
  {
    sub_40F4A9(a1, a0_2);
  }
}
// 40E560: using guessed type char var_10C[256];

//----- (0040E64A) --------------------------------------------------------
_BYTE *__cdecl sub_40E64A(_BYTE *a1, _BYTE *a2)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 255; ++i )
  {
    *a1 = *a2++;
    if ( !*a1 )
      return 0;
    if ( *a1 == 9 || *a1 == 13 )
    {
      *a1 = 0;
      return a2;
    }
    ++a1;
  }
  *a1 = 0;
  return 0;
}

//----- (0040E6C2) --------------------------------------------------------
void __cdecl sub_40E6C2(int a1)
{
  int v1; // eax@1

  v1 = sub_40F5B0((char *)&unk_481698);
  sub_40F4A9(a1, aD_12, v1);
}

//----- (0040E6E3) --------------------------------------------------------
void __cdecl sub_40E6E3(int a1, _BYTE *a2)
{
  char v2; // [sp+0h] [bp-128h]@1
  char v3; // [sp+Eh] [bp-11Ah]@3
  int v4; // [sp+100h] [bp-28h]@3
  int TargetValue; // [sp+104h] [bp-24h]@1
  int v6; // [sp+108h] [bp-20h]@3
  int v7; // [sp+124h] [bp-4h]@3
  _BYTE *v8; // [sp+134h] [bp+Ch]@1

  TargetValue = 0;
  memset(&v2, 0, 0x20u);
  v8 = sub_40E64A(&v2, a2);
  if ( v8 )
  {
    sub_40E64A(&v2, v8);
    v3 = 0;
    sub_413E9E((int)&v6, (int)&unk_478608);
    v7 = 0;
    sub_414804((int)&v6, &TargetValue);
    sub_414123((int)&v6, aSelectUidFromU, &v2);
    LOBYTE(v4) = 1;
    if ( sub_4143F1((SQLHSTMT *)&v6, (bool *)&v4) )
    {
      if ( (_BYTE)v4 )
      {
        sub_40F4A9(a1, a0Invalidaccoun);
        v7 = -1;
        sub_413F5F((int)&v6);
      }
      else
      {
        sub_4027DF(&unk_481698, TargetValue, 11, 1);
        sub_40F4A9(a1, a1_0);
        v7 = -1;
        sub_413F5F((int)&v6);
      }
    }
    else
    {
      sub_40F4A9(a1, a0Invalidacco_0);
      v7 = -1;
      sub_413F5F((int)&v6);
    }
  }
  else
  {
    sub_40F529(a1, a0IncorrectForm, 0x13u);
  }
}

//----- (0040E849) --------------------------------------------------------
void __cdecl sub_40E849(int a1, _BYTE *a2)
{
  char v2; // [sp+0h] [bp-100h]@1
  _BYTE *v3; // [sp+10Ch] [bp+Ch]@1

  v3 = sub_40E64A(&v2, a2);
  if ( v3 )
  {
    memset(&v2, 0, 0x20u);
    sub_40E64A(&v2, v3);
    if ( v2 == 48 )
    {
      byte_478575 = 0;
      sub_42DBFC((int)&unk_47FA00, 2, aGmOnlyModeOff);
      sub_40F4A9(a1, a1_1);
    }
    else
    {
      byte_478575 = 1;
      sub_42DBFC((int)&unk_47FA00, 2, aGmOnlyModeOn);
      sub_40F4A9(a1, a1_2);
    }
  }
  else
  {
    sub_40F4A9(a1, a0IncorrectFo_0);
  }
}
// 478575: using guessed type char byte_478575;

//----- (0040E917) --------------------------------------------------------
void __cdecl sub_40E917(int a1, _BYTE *a2)
{
  int v2; // [sp+0h] [bp-104h]@2
  char v3; // [sp+4h] [bp-100h]@1
  _BYTE *v4; // [sp+110h] [bp+Ch]@1

  v4 = sub_40E64A(&v3, a2);
  if ( v4 )
  {
    sub_40E64A(&v3, v4);
    v2 = atoi(&v3);
    if ( v2 > 0 && v2 < 12000 )
    {
      *(_DWORD *)dword_478594 = v2;
      sub_42DBFC((int)&unk_47FA00, 2, aChangeSocketli, v2);
      sub_40F4A9(a1, a1_3);
    }
  }
}

//----- (0040E9BE) --------------------------------------------------------
void sub_40E9BE()
{
  ;
}

//----- (0040E9C3) --------------------------------------------------------
void __cdecl sub_40E9C3(int a1, _BYTE *a2)
{
  char cp; // [sp+0h] [bp-104h]@1
  char v3; // [sp+10h] [bp-F4h]@3
  unsigned __int32 v4; // [sp+100h] [bp-4h]@3
  _BYTE *v5; // [sp+110h] [bp+Ch]@1

  v5 = sub_40E64A(&cp, a2);
  if ( v5 )
  {
    sub_40E64A(&cp, v5);
    v3 = 0;
    v4 = inet_addr(&cp);
    if ( v4 == -1 )
    {
      sub_40F4A9(a1, a0_0);
    }
    else
    {
      dword_4785BC = v4;
      sub_42DBFC((int)&unk_47FA00, 2, aChangeGmipD_D_, (unsigned __int8)v4, BYTE1(v4), BYTE2(v4), BYTE3(v4));
      sub_40F4A9(a1, a1_4);
    }
  }
  else
  {
    sub_40F4A9(a1, a0);
  }
}
// 4785BC: using guessed type int dword_4785BC;

//----- (0040EA99) --------------------------------------------------------
void sub_40EA99()
{
  ;
}

//----- (0040EA9E) --------------------------------------------------------
void __cdecl sub_40EA9E(int a1, _BYTE *a2)
{
  char v2; // [sp+0h] [bp-100h]@1
  _BYTE *v3; // [sp+10Ch] [bp+Ch]@1

  v3 = sub_40E64A(&v2, a2);
  if ( !v3 )
    goto LABEL_9;
  sub_40E64A(&v2, v3);
  if ( v2 == 48 )
  {
    byte_4785D0 = 0;
    sub_42DBFC((int)&unk_47FA00, 2, aConfigFreeserv);
    sub_40F4A9(a1, a1_5);
    return;
  }
  if ( v2 == 49 )
  {
    byte_4785D0 = 1;
    sub_42DBFC((int)&unk_47FA00, 2, aConfigFreese_0);
    sub_40F4A9(a1, a1_6);
  }
  else
  {
LABEL_9:
    sub_40F4A9(a1, a0_1);
  }
}
// 4785D0: using guessed type char byte_4785D0;

//----- (0040EB66) --------------------------------------------------------
void __cdecl sub_40EB66(int a1, _BYTE *a2)
{
  char v2; // [sp+0h] [bp-1D4h]@4
  int v3; // [sp+4h] [bp-1D0h]@11
  int v4; // [sp+8h] [bp-1CCh]@12
  int v5; // [sp+14h] [bp-1C0h]@13
  char v6[4]; // [sp+18h] [bp-1BCh]@13
  char v7; // [sp+60h] [bp-174h]@1
  char v8; // [sp+74h] [bp-160h]@1
  char v9; // [sp+174h] [bp-60h]@1
  char rgbValue; // [sp+1B4h] [bp-20h]@3
  char v11; // [sp+1C4h] [bp-10h]@5
  int v12; // [sp+1D0h] [bp-4h]@4
  _BYTE *v13; // [sp+1E0h] [bp+Ch]@1
  _BYTE *v14; // [sp+1E0h] [bp+Ch]@2
  _BYTE *v15; // [sp+1E0h] [bp+Ch]@3

  memset(&v9, 0, 0x40u);
  memset(&v7, 0, 0x14u);
  v13 = sub_40E64A(&v8, a2);
  if ( v13 )
  {
    v14 = sub_40E64A(&v8, v13);
    if ( v14 )
    {
      strncpy(&rgbValue, &v8, 0x10u);
      v15 = sub_40E64A(&v8, v14);
      if ( v15 )
      {
        strncpy(&v7, &v8, 0x14u);
        sub_40E64A(&v8, v15);
        strncpy(&v9, &v8, 0x3Fu);
        sub_401000((int)&v2);
        v12 = 0;
        if ( byte_4785E2 )
          v11 = sub_401B99(&v2, &rgbValue, &v7);
        else
          v11 = sub_401ACF(&v2, &rgbValue, &v7);
        if ( v11 == 4 )
        {
          sub_40F4A9(a1, aOchk201ErrorS, &v9);
          v12 = -1;
          sub_401074(&v2);
        }
        else if ( v11 == 3 )
        {
          sub_40F4A9(a1, aOchk202ErrorS, &v9);
          v12 = -1;
          sub_401074(&v2);
        }
        else
        {
          if ( v3 || v4 )
            sub_40F4A9(a1, aOchkDSD_0, *(_DWORD *)v6 | 0x80000000, &v9, v5);
          else
            sub_40F4A9(a1, aOchkDSD, *(_DWORD *)v6, &v9, v5);
          v12 = -1;
          sub_401074(&v2);
        }
      }
      else
      {
        sub_40F4A9(a1, aOchk003Error);
      }
    }
    else
    {
      sub_40F4A9(a1, aOchk003Error_0);
    }
  }
  else
  {
    sub_40F4A9(a1, aOchk004);
  }
}
// 4785E2: using guessed type char byte_4785E2;

//----- (0040EDD3) --------------------------------------------------------
void __cdecl sub_40EDD3(int a1, _BYTE *a2)
{
  char v2; // [sp+0h] [bp-194h]@5
  char v3; // [sp+60h] [bp-134h]@1
  char v4; // [sp+74h] [bp-120h]@1
  char v5; // [sp+84h] [bp-110h]@5
  char rgbValue; // [sp+174h] [bp-20h]@1
  char v7; // [sp+182h] [bp-12h]@3
  char v8; // [sp+184h] [bp-10h]@6
  int v9; // [sp+190h] [bp-4h]@5
  _BYTE *v10; // [sp+1A0h] [bp+Ch]@1
  _BYTE *v11; // [sp+1A0h] [bp+Ch]@2

  memset(&rgbValue, 0, 0xFu);
  memset(&v3, 0, 0x11u);
  v10 = sub_40E64A(&v4, a2);
  if ( v10 )
  {
    v4 = 0;
    v11 = sub_40E64A(&v4, v10);
    if ( v11 )
    {
      strncpy(&rgbValue, &v4, 0xEu);
      v7 = 0;
      if ( sub_43B878(&rgbValue) )
      {
        v4 = 0;
        if ( sub_40E64A(&v4, v11) )
        {
          v5 = 0;
          strncpy(&v3, &v4, 0x10u);
          sub_401000((int)&v2);
          v9 = 0;
          if ( byte_4785E2 )
            v8 = sub_401B99(&v2, &rgbValue, &v3);
          else
            v8 = sub_401ACF(&v2, &rgbValue, &v3);
          if ( v8 )
            sub_40F4A9(a1, aD_0, 3);
          else
            sub_40F4A9(a1, aD, 0);
          v9 = -1;
          sub_401074(&v2);
        }
        else
        {
          sub_40F4A9(a1, aD_1, 1);
        }
      }
      else
      {
        sub_40F4A9(a1, aD_2, 2);
      }
    }
    else
    {
      sub_40F4A9(a1, aD_3, 1);
    }
  }
  else
  {
    sub_40F4A9(a1, aD_4, 1);
  }
}
// 4785E2: using guessed type char byte_4785E2;

//----- (0040EFC9) --------------------------------------------------------
void *__cdecl sub_40EFC9(int a1, _BYTE *a2)
{
  int v2; // eax@5
  char v4; // [sp+0h] [bp-1E0h]@8
  char v5; // [sp+58h] [bp-188h]@3
  int v6; // [sp+5Ch] [bp-184h]@8
  char rgbValue; // [sp+60h] [bp-180h]@1
  char v8; // [sp+6Eh] [bp-172h]@2
  char v9; // [sp+70h] [bp-170h]@1
  char v10; // [sp+170h] [bp-70h]@1
  int v11; // [sp+1D0h] [bp-10h]@1
  int v12; // [sp+1DCh] [bp-4h]@1
  _BYTE *v13; // [sp+1ECh] [bp+Ch]@1
  _BYTE *v14; // [sp+1ECh] [bp+Ch]@2
  _BYTE *v15; // [sp+1ECh] [bp+Ch]@5

  v11 = 0;
  sub_401000((int)&v10);
  v12 = 0;
  sub_42DBFC((int)&unk_47FA00, 1, aS_0, a2);
  memset(&rgbValue, 0, 0xFu);
  v13 = sub_40E64A(&v9, a2);
  if ( v13 )
  {
    v9 = 0;
    v14 = sub_40E64A(&v9, v13);
    strncpy(&rgbValue, &v9, 0xEu);
    v8 = 0;
    if ( sub_43B878(&rgbValue) )
    {
      v5 = sub_4012A9(&v10, &rgbValue);
      if ( v5 )
      {
        sub_40F4A9(a1, aC, 2);
      }
      else
      {
        v9 = 0;
        v15 = sub_40E64A(&v9, v14);
        v10 = 0;
        v2 = strlen(&v9);
        if ( sub_43B9BA((int)&v9, v2) )
        {
          v11 = atoi(&v9);
          sub_40E64A(&v9, v15);
          if ( v11 <= 0 || v11 > dword_48163C )
          {
            sub_40F4A9(a1, aD_7, 4);
          }
          else
          {
            v6 = *((_DWORD *)sub_434524(&unk_480D50, &v4, v11) + 16);
            if ( sub_418976((int)&unk_47EF80, v6) )
            {
              sub_439142(v6, (int)aCdcs_2, 1);
              sub_40F4A9(a1, aD_5, 0);
            }
            else
            {
              sub_40F4A9(a1, aD_6, 5);
            }
          }
        }
        else
        {
          sub_40F4A9(a1, aD_8, 4);
        }
      }
    }
    else
    {
      sub_40F4A9(a1, aD_9, 2);
    }
  }
  else
  {
    sub_40F4A9(a1, aD_10, 1);
  }
  v12 = -1;
  return sub_401074(&v10);
}
// 48163C: using guessed type int dword_48163C;

//----- (0040F25A) --------------------------------------------------------
DNameNode *__thiscall sub_40F25A(DNameNode *this, int a2)
{
  DNameNode *v2; // ST04_4@1

  v2 = this;
  sub_41D4D0(this, a2);
  *(_DWORD *)v2 = &off_45F3EC;
  *((_DWORD *)v2 + 23) = a2;
  *((_DWORD *)v2 + 27) = 0;
  *((_DWORD *)v2 + 28) = 0;
  *((_DWORD *)v2 + 25) = 0;
  *((_DWORD *)v2 + 26) = off_469E98;
  return v2;
}
// 45F3EC: using guessed type int (__stdcall *off_45F3EC)(int);
// 469E98: using guessed type int (__cdecl *off_469E98[2])(int, int);

//----- (0040F2B0) --------------------------------------------------------
void *__thiscall sub_40F2B0(void *this)
{
  *(_DWORD *)this = &off_45F3EC;
  return sub_41D583((int)this);
}
// 45F3EC: using guessed type int (__stdcall *off_45F3EC)(int);

//----- (0040F2CC) --------------------------------------------------------
DNameNode *__cdecl sub_40F2CC(int a1)
{
  DNameNode *v2; // [sp+0h] [bp-18h]@2
  DNameNode *v3; // [sp+4h] [bp-14h]@1

  v3 = (DNameNode *)unknown_libname_49(0x78u);
  if ( v3 )
    v2 = sub_40F25A(v3, a1);
  else
    v2 = 0;
  return v2;
}

//----- (0040F337) --------------------------------------------------------
int __thiscall sub_40F337(int this)
{
  int v1; // ST14_4@1
  int v2; // ST10_4@1
  char *v3; // eax@1

  *(_DWORD *)(this + 100) = 2;
  v1 = this;
  v2 = *(_DWORD *)(this + 92);
  v3 = sub_40F45D(this);
  return sub_42DBFC((int)&unk_47FA00, 0, aCloseConnectio, v3, v2, v1);
}

//----- (0040F374) --------------------------------------------------------
int __thiscall sub_40F374(int this)
{
  int v1; // edx@2
  int v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+4h] [bp-Ch]@1
  signed int v5; // [sp+8h] [bp-8h]@1
  char *v6; // [sp+Ch] [bp-4h]@1

  v3 = this;
  v6 = (char *)(*(_DWORD *)(this + 72) + 4);
  v5 = 0;
  v4 = *(_DWORD *)(*(_DWORD *)(this + 72) + 8196);
  while ( 1 )
  {
    v1 = v4--;
    if ( v1 <= 0 )
      break;
    if ( v5 < 255 && v6[v5] != 10 )
    {
      ++v5;
    }
    else
    {
      v6[v5] = 0;
      *(_DWORD *)(v3 + 116) = 60;
      sub_40F416((_DWORD *)v3, v6);
      v6 += v5 + 1;
      v5 = 0;
    }
  }
  return sub_41D995(v3, v5);
}

//----- (0040F416) --------------------------------------------------------
int __thiscall sub_40F416(_DWORD *this, char *a2)
{
  int result; // eax@1
  _DWORD *v3; // [sp+0h] [bp-8h]@1
  int v4; // [sp+4h] [bp-4h]@1

  v3 = this;
  result = sscanf(a2, aD_11, &v4);
  if ( v4 >= 0 && (unsigned int)v4 < 0xC )
    result = (*(int (__cdecl **)(void *, char *))(v3[26] + 4 * v4))(v3, a2);
  return result;
}

//----- (0040F45D) --------------------------------------------------------
char *__thiscall sub_40F45D(int this)
{
  return inet_ntoa(*(struct in_addr *)(this + 108));
}

//----- (0040F475) --------------------------------------------------------
int __thiscall sub_40F475(void *this)
{
  void *v1; // ST00_4@1

  v1 = this;
  sub_418095((int)this);
  return (*(int (__thiscall **)(void *))(*(_DWORD *)v1 + 32))(v1);
}

//----- (0040F493) --------------------------------------------------------
int __thiscall sub_40F493(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 108) = a2;
  return result;
}

//----- (0040F4A9) --------------------------------------------------------
void sub_40F4A9(int a1, char *a2, ...)
{
  int v2; // [sp+0h] [bp-Ch]@3
  _DWORD *v3; // [sp+8h] [bp-4h]@2
  va_list va; // [sp+1Ch] [bp+10h]@1

  va_start(va, a2);
  if ( *(_DWORD *)(a1 + 100) != 2 )
  {
    v3 = sub_417DD3();
    if ( vsprintf((char *)v3 + 4, a2, va) <= 0 )
      v2 = 0;
    else
      v2 = vsprintf((char *)v3 + 4, a2, va);
    v3[2049] = v2;
    sub_41DB1A(a1, (int)v3);
  }
}

//----- (0040F529) --------------------------------------------------------
void __thiscall sub_40F529(int this, void *a2, size_t a3)
{
  _DWORD *v3; // ST10_4@4
  int v4; // [sp+0h] [bp-8h]@1

  v4 = this;
  if ( *(_DWORD *)(this + 100) != 2 && (signed int)a3 > 0 && (signed int)a3 <= 0x2000 )
  {
    v3 = sub_417DD3();
    memcpy(v3 + 1, a2, a3);
    v3[2049] = a3;
    sub_41DB1A(v4, (int)v3);
  }
}

//----- (0040F59A) --------------------------------------------------------
int sub_40F59A()
{
  return atexit(sub_402150);
}

//----- (0040F5B0) --------------------------------------------------------
int __thiscall sub_40F5B0(char *this)
{
  char *v1; // ST00_4@1
  int v2; // ST04_4@1

  v1 = this;
  sub_42D4B5((int)(this + 20));
  v2 = unknown_libname_50(v1 + 4);
  sub_42D4F0((int)(v1 + 20));
  return v2;
}
// 40F660: using guessed type int __thiscall unknown_libname_50(_DWORD);

//----- (0040F5F0) --------------------------------------------------------
void *__thiscall sub_40F5F0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_40F2B0(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0040F680) --------------------------------------------------------
char __cdecl sub_40F680(int a1, char a2)
{
  _DWORD *v2; // eax@6
  char result; // al@7
  int v4; // ST18_4@10
  char v5; // [sp+0h] [bp-78h]@6
  int v6; // [sp+58h] [bp-20h]@1
  PVOID Parameter; // [sp+5Ch] [bp-1Ch]@1
  char v8; // [sp+60h] [bp-18h]@1
  char v9; // [sp+6Eh] [bp-Ah]@1
  int v10; // [sp+70h] [bp-8h]@1
  int v11; // [sp+74h] [bp-4h]@1

  Parameter = (PVOID)sub_411480((int **)&a2);
  v6 = sub_411480((int **)&a2);
  LOBYTE(v11) = 0;
  memset(&v8, 0, 0xEu);
  v10 = sub_403167(&unk_481698, Parameter, *(_BYTE *)(a1 + 96), 1, (int)&v11, &v8);
  v9 = 0;
  if ( v10 && Parameter && (_BYTE)v11 )
  {
    sub_4027DF(&unk_481698, (char)Parameter, 14, 1);
    if ( (char)v11 > 0 && (char)v11 <= dword_48163C )
    {
      v2 = sub_434524(&unk_480D50, &v5, (char)v11);
      sub_439142(v2[16], (int)aCdcs_3, 1);
    }
    sub_4111F6(a1, (int)aCdcs_4, 1);
    result = 0;
  }
  else
  {
    if ( v10 && Parameter )
    {
      v4 = *(_BYTE *)(a1 + 96);
      sub_410A93(v10, (int)aCddc, 7);
    }
    result = 0;
  }
  return result;
}
// 48163C: using guessed type int dword_48163C;

//----- (0040F7B1) --------------------------------------------------------
char __cdecl sub_40F7B1(int a1, char a2)
{
  int v3; // [sp+0h] [bp-2Ch]@1
  PVOID Parameter; // [sp+4h] [bp-28h]@1
  int v5; // [sp+8h] [bp-24h]@1
  char v6; // [sp+Ch] [bp-20h]@1
  char v7; // [sp+1Ch] [bp-10h]@1
  int v8; // [sp+20h] [bp-Ch]@1
  int v9; // [sp+24h] [bp-8h]@1
  int v10; // [sp+28h] [bp-4h]@1

  v7 = sub_4114B0(&a2);
  Parameter = (PVOID)sub_411480((int **)&a2);
  v8 = sub_40308E(&unk_481698, Parameter, 0);
  v9 = 0;
  LOBYTE(v10) = sub_404D70(&unk_481698, (char)Parameter, &v6, (int)&v9, (int)&v5, (int)&v3);
  if ( (_BYTE)v10 && v9 < 1000 && v9 > 0 )
    sub_42651E(&unk_47F548, (char)Parameter, v5, v9, 0, v3, *(_BYTE *)(a1 + 96), (int)&v6);
  if ( byte_4785E1 && v7 == 14 )
    sub_4111F6(a1, (int)aCdcs_5, 1);
  if ( v8 && Parameter )
    sub_410A93(v8, (int)aCc_7, 6);
  return 0;
}
// 4785E1: using guessed type char byte_4785E1;

//----- (0040F8B2) --------------------------------------------------------
char __cdecl sub_40F8B2(int a1, char a2)
{
  char result; // al@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = sub_411480((int **)&a2);
  if ( sub_403AA1(&unk_481698, v3, *(_BYTE *)(a1 + 96)) )
  {
    result = 0;
  }
  else
  {
    sub_4027DF(&unk_481698, v3, 10, 1);
    result = 0;
  }
  return result;
}

//----- (0040F900) --------------------------------------------------------
char __cdecl sub_40F900(int a1, char a2)
{
  PVOID Parameter; // [sp+Ch] [bp-24h]@1
  int v4; // [sp+10h] [bp-20h]@1
  __int16 v5; // [sp+14h] [bp-1Ch]@1

  Parameter = (PVOID)sub_411480((int **)&a2);
  v5 = sub_4114E0((__int16 **)&a2);
  v4 = sub_411480((int **)&a2);
  if ( !sub_403E28(&unk_481698, Parameter, 0, *(_BYTE *)(a1 + 96)) )
    sub_42E0DD((int)&unk_47F8C8, 3, aQuitGameErrorU, Parameter, v5, v4);
  if ( byte_478560 )
    sub_4038C3(&unk_481698, (char)Parameter);
  return 0;
}
// 478560: using guessed type char byte_478560;

//----- (0040FA11) --------------------------------------------------------
char __cdecl sub_40FA11(int a1, char a2)
{
  char v3; // [sp+Ch] [bp-30h]@1
  PVOID Parameter; // [sp+1Ch] [bp-20h]@1
  __int16 v5; // [sp+20h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+24h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  Parameter = (PVOID)sub_411480((int **)&a2);
  v5 = sub_4114E0((__int16 **)&a2);
  sub_403E28(&unk_481698, Parameter, 0, *(_BYTE *)(a1 + 96));
  memset(&v3, 0, 0xFu);
  sub_4032CA(&unk_481698, (char)Parameter, &v3);
  return 0;
}

//----- (0040FAF4) --------------------------------------------------------
char __cdecl sub_40FAF4(int a1, char a2)
{
  int v2; // eax@1
  char v3; // ST08_1@1
  char v4; // ST04_1@1
  int *v5; // eax@1
  char v7; // [sp+0h] [bp-8h]@1
  int v8; // [sp+4h] [bp-4h]@1

  v2 = sub_411480((int **)&a2);
  v8 = v2;
  v3 = *(_BYTE *)(a1 + 96);
  v4 = v2;
  v5 = sub_411510(a1, &v7);
  sub_43522B(*v5, v4, v3);
  sub_434EFD((int)&unk_480880, *(_BYTE *)(a1 + 96), v8, SHIWORD(v8));
  return 0;
}

//----- (0040FB53) --------------------------------------------------------
char __cdecl sub_40FB53(int a1, char a2)
{
  sub_411480((int **)&a2);
  sub_4114E0((__int16 **)&a2);
  return 0;
}

//----- (0040FB7E) --------------------------------------------------------
char __cdecl sub_40FB7E(int a1, char a2)
{
  sub_411480((int **)&a2);
  return 0;
}

//----- (0040FB97) --------------------------------------------------------
char __cdecl sub_40FB97(int a1, char a2)
{
  sub_411480((int **)&a2);
  sub_4111F6(a1, (int)aCd_2, 4);
  return 0;
}

//----- (0040FBBE) --------------------------------------------------------
char __cdecl sub_40FBBE(int a1, void *a2)
{
  char rgbValue; // [sp+4h] [bp-3Ch]@1
  char v4; // [sp+14h] [bp-2Ch]@1
  SQLINTEGER pcbValue; // [sp+18h] [bp-28h]@1
  char v6[4]; // [sp+1Ch] [bp-24h]@1
  SQLHSTMT hstmt; // [sp+20h] [bp-20h]@1
  int v8; // [sp+3Ch] [bp-4h]@1

  *(_DWORD *)v6 = sub_411480((int **)&a2);
  memcpy(&rgbValue, a2, 0x10u);
  a2 = (char *)a2 + 16;
  v4 = 0;
  sub_413E9E((int)&hstmt, (int)&unk_478608);
  v8 = 0;
  pcbValue = 16;
  SQLBindParameter(hstmt, 1u, 1, -2, -2, 0x10u, 0, &rgbValue, 16, &pcbValue);
  sub_414123((int)&hstmt, aUpdateUser_d_0, *(_DWORD *)v6);
  v8 = -1;
  sub_413F5F((int)&hstmt);
  return 0;
}

//----- (0040FC7A) --------------------------------------------------------
char __cdecl sub_40FC7A(int a1)
{
  int v2; // [sp+4h] [bp-20h]@1
  int v3; // [sp+20h] [bp-4h]@1

  sub_41136F((void *)(a1 + 108), a1);
  sub_413E9E((int)&v2, (int)&unk_478608);
  v3 = 0;
  sub_414123((int)&v2, aUpdateWorldsta, *(_BYTE *)(a1 + 96));
  sub_435145(*(_BYTE *)(a1 + 96), 1);
  *(_BYTE *)(a1 + 104) = 1;
  v3 = -1;
  sub_413F5F((int)&v2);
  return 0;
}

//----- (0040FD0D) --------------------------------------------------------
char __cdecl sub_40FD0D(int a1, char a2)
{
  int v3; // [sp+10h] [bp-90h]@5
  int v4; // [sp+24h] [bp-7Ch]@21
  int v5; // [sp+28h] [bp-78h]@21
  void *v6; // [sp+2Ch] [bp-74h]@27
  int v7; // [sp+30h] [bp-70h]@1
  int v8; // [sp+34h] [bp-6Ch]@1
  struct tm *v9; // [sp+38h] [bp-68h]@1
  int v10; // [sp+3Ch] [bp-64h]@1
  int v11; // [sp+40h] [bp-60h]@1
  int v12; // [sp+44h] [bp-5Ch]@1
  int v13; // [sp+48h] [bp-58h]@1
  int v14; // [sp+4Ch] [bp-54h]@4
  char TargetValue; // [sp+50h] [bp-50h]@5
  char v16; // [sp+51h] [bp-4Fh]@19
  char v17; // [sp+52h] [bp-4Eh]@21
  char v18; // [sp+53h] [bp-4Dh]@21
  char v19; // [sp+54h] [bp-4Ch]@21
  char v20; // [sp+55h] [bp-4Bh]@21
  char v21; // [sp+56h] [bp-4Ah]@15
  int v22; // [sp+60h] [bp-40h]@25
  int v23; // [sp+64h] [bp-3Ch]@1
  int v24; // [sp+68h] [bp-38h]@1
  char v25; // [sp+6Ch] [bp-34h]@4
  char v26; // [sp+7Ch] [bp-24h]@1
  char v27; // [sp+7Dh] [bp-23h]@1
  int v28; // [sp+80h] [bp-20h]@1
  int v29; // [sp+84h] [bp-1Ch]@25
  time_t v30; // [sp+88h] [bp-18h]@1
  int i; // [sp+8Ch] [bp-14h]@1
  int v32; // [sp+90h] [bp-10h]@1
  int v33; // [sp+9Ch] [bp-4h]@5

  v8 = sub_411480((int **)&a2);
  i = 0;
  v32 = 0;
  v10 = 0;
  v13 = 0;
  v23 = 0;
  v7 = 0;
  LOBYTE(v11) = 0;
  LOBYTE(v28) = 0;
  v12 = 0;
  v24 = 0;
  v30 = time(0);
  v9 = localtime(&v30);
  v26 = v9->tm_year / 10 + 48;
  v27 = v9->tm_year % 10 + 48;
  for ( i = 0; i < v8; ++i )
  {
    memset(&v25, 0, 0xFu);
    sub_411560((int *)&a2, 14, &v25);
    v23 = sub_411480((int **)&a2);
    v13 = sub_411480((int **)&a2);
    v14 = sub_411530((int **)&a2);
    v32 = sub_411480((int **)&a2);
    v10 = sub_411480((int **)&a2);
    if ( dword_478590 )
    {
      v22 = 0;
      v29 = 0;
      v12 = 0;
      v24 = 0;
    }
    else
    {
      sub_413E9E((int)&v3, (int)&unk_478608);
      v33 = 0;
      sub_414A7B((int)&v3);
      sub_41477C((int)&v3, &TargetValue, 14);
      LOBYTE(v28) = 1;
      if ( sub_414123((int)&v3, aSelectSsnFro_0, &v25) )
      {
        if ( sub_4143F1((SQLHSTMT *)&v3, (bool *)&v11) )
        {
          if ( (_BYTE)v11 )
            LOBYTE(v28) = 0;
        }
        else
        {
          LOBYTE(v28) = 0;
        }
      }
      else
      {
        LOBYTE(v28) = 0;
      }
      if ( !(_BYTE)v28 )
      {
        v33 = -1;
        sub_413F5F((int)&v3);
        continue;
      }
      v12 = v21 - 48;
      if ( v21 != 49 && v21 != 50 && v21 != 53 && v21 != 54 )
        v24 = 10 * (TargetValue - 48) + v16 - 48;
      else
        v24 = v27 - v16 + 10 * (v26 - TargetValue);
      v4 = v9->tm_mday + 100 * (v9->tm_mon + 1);
      v5 = 10 * (v19 - 48) + 100 * (v18 - 48) + 1000 * (v17 - 48) + v20 - 48;
      if ( v4 < v5 )
        --v24;
      if ( v24 < 0 )
        v24 = 0;
      v22 = 10000 * (10 * (TargetValue - 48) + v16 - 48) + v5;
      v29 = atoi(&v21);
      sub_414A7B((int)&v3);
      v33 = -1;
      sub_413F5F((int)&v3);
    }
    v6 = operator new(0x50u);
    strncpy((char *)v6 + 28, &v25, 0xEu);
    *((_BYTE *)v6 + 42) = 0;
    *((_WORD *)v6 + 35) = 0;
    *((_BYTE *)v6 + 72) = *(_BYTE *)(a1 + 96);
    *((_DWORD *)v6 + 15) = v32;
    *((_DWORD *)v6 + 16) = v10;
    *((_DWORD *)v6 + 6) = 4;
    *((_DWORD *)v6 + 2) = v14;
    *(_DWORD *)v6 = v30;
    *((_BYTE *)v6 + 16) = *(_BYTE *)(a1 + 96);
    *((_BYTE *)v6 + 73) = 0;
    *((_DWORD *)v6 + 5) = -1;
    *((_DWORD *)v6 + 1) = 0;
    *((_DWORD *)v6 + 11) = 0;
    *((_DWORD *)v6 + 3) = v13;
    *((_BYTE *)v6 + 48) = v12;
    *((_DWORD *)v6 + 13) = v22;
    *((_DWORD *)v6 + 14) = v29;
    *((_BYTE *)v6 + 68) = v24;
    if ( sub_404E2B(&unk_481698, v6, v23, a1, 0, 0) )
    {
      sub_43CA18(v6);
    }
    else
    {
      sub_43CA18(v6);
      sub_4112BF((void *)(a1 + 108), v23, &v25);
    }
  }
  sub_4111F6(a1, (int)aCd, 5);
  return 0;
}
// 478590: using guessed type int dword_478590;

//----- (004101AC) --------------------------------------------------------
char __cdecl sub_4101AC(int a1, int a2)
{
  char v2; // ST38_1@1
  PVOID Parameter; // ST30_4@1
  int v4; // ST2C_4@1
  int v5; // ST34_4@1
  int v6; // ST18_4@1

  v2 = sub_411480((int **)&a2);
  Parameter = (PVOID)sub_411480((int **)&a2);
  v4 = sub_411480((int **)&a2);
  sub_4114E0((__int16 **)&a2);
  sub_404F3E((int)Parameter, v4, *(_BYTE *)(a1 + 96));
  v5 = sub_40308E(&unk_481698, Parameter, 0);
  v6 = *(_BYTE *)(a1 + 96);
  sub_410A93(v5, (int)aCcddchb, 11);
  return 0;
}

//----- (0041026C) --------------------------------------------------------
char __cdecl sub_41026C(int a1, char a2)
{
  void *rgbValue; // ST20_4@1
  char v3; // ST1C_1@1
  int v4; // ST24_4@1
  int v5; // ST18_4@1

  sub_4114B0(&a2);
  rgbValue = (void *)sub_411480((int **)&a2);
  v3 = sub_411480((int **)&a2);
  sub_404FDC((char)rgbValue, v3, *(_BYTE *)(a1 + 96));
  v4 = sub_40308E(&unk_481698, rgbValue, 0);
  v5 = *(_BYTE *)(a1 + 96);
  sub_410A93(v4, (int)aCcddc, 12);
  return 0;
}

//----- (00410307) --------------------------------------------------------
char __cdecl sub_410307(int a1, int a2)
{
  char v2; // ST34_1@1
  char result; // al@2
  int v4; // ST38_4@3
  int v5; // ST18_4@3
  PVOID Parameter; // [sp+8h] [bp-Ch]@1

  Parameter = (PVOID)sub_411480((int **)&a2);
  v2 = sub_4114B0(&a2);
  sub_4114E0((__int16 **)&a2);
  if ( v2 > 0 )
  {
    v4 = sub_40308E(&unk_481698, Parameter, 0);
    v5 = *(_BYTE *)(a1 + 96);
    sub_410A93(v4, (int)aCdccchb, 10);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004103AD) --------------------------------------------------------
char __cdecl sub_4103AD(int a1, char a2)
{
  int v2; // ST14_4@1
  int v3; // ST28_4@1
  char v4; // ST18_1@1
  int v5; // ST24_4@1
  int v6; // ST20_4@1

  v2 = sub_411480((int **)&a2);
  v3 = sub_411480((int **)&a2);
  v4 = sub_411480((int **)&a2);
  v5 = sub_411480((int **)&a2);
  v6 = sub_411480((int **)&a2);
  sub_4050DC(v2, v3, v4, v5, v6);
  return 0;
}

//----- (00410448) --------------------------------------------------------
char __cdecl sub_410448(int a1, char a2)
{
  char v3; // [sp+Ch] [bp-130h]@4
  char v4; // [sp+64h] [bp-D8h]@4
  char v5; // [sp+BCh] [bp-80h]@4
  int v6; // [sp+10Ch] [bp-30h]@5
  PVOID Parameter; // [sp+114h] [bp-28h]@1
  int v8; // [sp+118h] [bp-24h]@1
  int v9; // [sp+11Ch] [bp-20h]@1
  char v10; // [sp+120h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+124h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  Parameter = (PVOID)sub_411480((int **)&a2);
  v8 = sub_411480((int **)&a2);
  v10 = sub_4114B0(&a2);
  v9 = sub_40308E(&unk_481698, Parameter, 1);
  if ( v10 >= 1 || v10 <= sub_411590((int)&unk_480D50) )
  {
    qmemcpy(&v4, sub_4351B9(&v3, v10), 0x58u);
    qmemcpy(&v5, &v4, 0x58u);
    if ( v5 <= 0 || v6 & 0x80000000 )
      sub_410A93(v9, (int)aCc_9, 6);
    else
      sub_410A93(v9, (int)aCddd, 13);
  }
  else
  {
    sub_410A93(v9, (int)aCc_8, 6);
  }
  return 0;
}

//----- (004105CD) --------------------------------------------------------
char sub_4105CD()
{
  return 0;
}

//----- (00410653) --------------------------------------------------------
char __cdecl sub_410653(int a1, char a2)
{
  char v2; // ST1C_1@1

  v2 = sub_411480((int **)&a2);
  sub_4114B0(&a2);
  sub_4038C3(&unk_481698, v2);
  return 0;
}

//----- (0041070C) --------------------------------------------------------
char __cdecl sub_41070C(int a1, char a2)
{
  char v3; // [sp+8h] [bp-130h]@3
  char v4; // [sp+60h] [bp-D8h]@3
  int v5; // [sp+B8h] [bp-80h]@10
  char v6; // [sp+CCh] [bp-6Ch]@3
  int v7; // [sp+11Ch] [bp-1Ch]@5
  char v8; // [sp+124h] [bp-14h]@1
  char v9; // [sp+128h] [bp-10h]@1
  int v10; // [sp+134h] [bp-4h]@10

  v9 = sub_4114B0(&a2);
  v8 = sub_4114B0(&a2);
  if ( v9 > 0 && v9 <= dword_48163C )
  {
    qmemcpy(&v4, sub_4351B9(&v3, v9), 0x58u);
    qmemcpy(&v6, &v4, 0x58u);
    if ( v6 > 0 && v6 <= dword_48163C )
    {
      if ( !(v7 & 0x80000000) || v8 )
      {
        if ( !v8 )
          sub_402E5F(&unk_481698, v6);
        sub_413E9E((int)&v5, (int)&unk_478608);
        v10 = 0;
        sub_414123((int)&v5, aUpdateWorlds_0, v6, v8);
        sub_435145(v6, v8);
        v10 = -1;
        sub_413F5F((int)&v5);
      }
      else
      {
        sub_42DBFC((int)&unk_47FA00, 3, aDServeridIsMan, v6);
      }
    }
  }
  return 0;
}
// 48163C: using guessed type int dword_48163C;

//----- (0041085B) --------------------------------------------------------
char __cdecl sub_41085B(int a1, char a2)
{
  char v3; // [sp+Ch] [bp-128h]@3
  char v4; // [sp+64h] [bp-D0h]@3
  char v5; // [sp+BCh] [bp-78h]@3
  int v6; // [sp+F8h] [bp-3Ch]@5
  int v7; // [sp+114h] [bp-20h]@1
  char v8; // [sp+118h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+11Ch] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  v7 = sub_411480((int **)&a2);
  v8 = sub_4114B0(&a2);
  if ( v8 > 0 && v8 <= dword_48163C )
  {
    qmemcpy(&v4, sub_4351B9(&v3, v8), 0x58u);
    qmemcpy(&v5, &v4, 0x58u);
    if ( v5 > 0 && v5 <= dword_48163C )
      sub_43522B(v6, v7, v5);
  }
  return 0;
}
// 48163C: using guessed type int dword_48163C;

//----- (00410970) --------------------------------------------------------
char __cdecl sub_410970(int a1)
{
  char v2[2048]; // [sp+Ch] [bp-824h]@2
  int v3; // [sp+80Ch] [bp-24h]@1
  size_t v4; // [sp+810h] [bp-20h]@1
  void *v5; // [sp+814h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+818h] [bp-18h]@1

  v4 = 0;
  v3 = 0;
  v5 = 0;
  ms_exc.registration.TryLevel = 0;
  if ( byte_4785E0 )
  {
    v4 = sub_437F68((int)&unk_481648, 0, 0, &v5);
    memcpy(v2, v5, v4);
  }
  else
  {
    v4 = dword_480E14[0];
    memcpy(v2, dword_480DEC, dword_480E14[0]);
  }
  v2[v4] = 0;
  sub_4111F6(a1, (int)aCb_1, 9);
  return 0;
}
// 4785E0: using guessed type char byte_4785E0;
// 480E14: using guessed type int dword_480E14[];
// 410970: using guessed type char var_824[2048];

//----- (00410A93) --------------------------------------------------------
signed int __cdecl sub_410A93(int a1, int a2, char a3)
{
  signed int result; // eax@2
  int v4; // ST18_4@8
  int v5; // [sp+0h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-14h]@3
  char *v7; // [sp+Ch] [bp-10h]@3
  char *v8; // [sp+10h] [bp-Ch]@8
  int v9; // [sp+14h] [bp-8h]@3
  _DWORD *v10; // [sp+18h] [bp-4h]@3

  v5 = sub_419532((int)&unk_47ECB8, a1);
  if ( v5 )
  {
    v10 = sub_417DD3();
    v6 = (int)(v10 + 1);
    v7 = sub_43A690((char *)v10 + 6, 8190, a2, (int)&a3);
    v9 = 0;
    if ( v7 )
      --v7;
    else
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleTooLa, a1, a2);
    if ( *((_BYTE *)v10 + 6) == 7 )
      *(_DWORD *)(v5 + 96) = 3;
    v8 = v7 + 1;
    (*(void (__cdecl **)(int, int, int *))(v5 + 124))(v6 + 2, v5 + 104, (int *)&v8);
    v4 = (int)&v8[dword_478558 - 1];
    *(_BYTE *)v6 = (_BYTE)v8 + dword_478558 - 1;
    *(_BYTE *)(v6 + 1) = BYTE1(v4);
    v10[2049] = v8 + 2;
    sub_41DB1A(v5, (int)v10);
    sub_4180B3(v5);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (00410BAB) --------------------------------------------------------
DNameNode *__thiscall sub_410BAB(DNameNode *this, int a2)
{
  DNameNode *v2; // ST04_4@1

  v2 = this;
  sub_41D4D0(this, a2);
  sub_4115B0((char *)v2 + 108);
  *(_DWORD *)v2 = &off_45F484;
  *((_DWORD *)v2 + 23) = a2;
  *((_DWORD *)v2 + 42) = 0;
  *((_DWORD *)v2 + 43) = 0;
  *((_DWORD *)v2 + 40) = 0;
  *((_DWORD *)v2 + 41) = off_46A12C;
  *((_DWORD *)v2 + 25) = 0;
  return v2;
}
// 45F484: using guessed type int (__stdcall *off_45F484)(int);
// 46A12C: using guessed type int (__cdecl *off_46A12C[9])(int, char);

//----- (00410C4F) --------------------------------------------------------
void *__thiscall sub_410C4F(void *this)
{
  int v1; // ST00_4@1

  v1 = (int)this;
  *(_DWORD *)this = &off_45F484;
  sub_411680((int)this + 108);
  return sub_41D583(v1);
}
// 45F484: using guessed type int (__stdcall *off_45F484)(int);

//----- (00410CA3) --------------------------------------------------------
DNameNode *__cdecl sub_410CA3(int a1)
{
  DNameNode *v2; // [sp+0h] [bp-18h]@2
  DNameNode *v3; // [sp+4h] [bp-14h]@1

  v3 = (DNameNode *)unknown_libname_49(0xB0u);
  if ( v3 )
    v2 = sub_410BAB(v3, a1);
  else
    v2 = 0;
  return v2;
}

//----- (00410D11) --------------------------------------------------------
void __thiscall sub_410D11(int this)
{
  int v1; // ST24_4@1
  char *v2; // eax@1
  int v3; // ST28_4@1
  char *v4; // eax@1
  int v5; // [sp+8h] [bp-4Ch]@1
  int v6; // [sp+Ch] [bp-48h]@5
  int v7; // [sp+20h] [bp-34h]@1
  int v8; // [sp+24h] [bp-30h]@1
  int v9; // [sp+28h] [bp-2Ch]@1
  int v10; // [sp+2Ch] [bp-28h]@1
  int v11; // [sp+30h] [bp-24h]@1
  int v12; // [sp+34h] [bp-20h]@1
  time_t v13; // [sp+44h] [bp-10h]@1
  int v14; // [sp+50h] [bp-4h]@5

  v5 = this;
  *(_DWORD *)(this + 160) = 2;
  v13 = time(0);
  qmemcpy(&v7, localtime(&v13), 0x24u);
  v1 = *(_DWORD *)(v5 + 92);
  v2 = sub_411108(v5);
  sub_42DBFC((int)&unk_47FA00, 3, aCloseConnect_0, v2, v1, v5);
  v3 = *(_DWORD *)(v5 + 92);
  v4 = sub_411108(v5);
  sub_42E0DD((int)&unk_47F8C8, 0, aDDDDDDMainServ, v12 + 1900, v11 + 1, v10, v9, v8, v7, v4, v3);
  if ( (signed int)*(_BYTE *)(v5 + 96) > 0 )
    sub_402E5F(&unk_481698, *(_BYTE *)(v5 + 96));
  if ( sub_4350FC(*(_DWORD *)(v5 + 168), *(_DWORD *)(v5 + 92)) > 0 )
    sub_4189DE((int)&unk_47EF80, *(_DWORD *)(v5 + 168));
  sub_413E9E((int)&v6, (int)&unk_478608);
  v14 = 0;
  sub_414123((int)&v6, aUpdateWorlds_1, *(_BYTE *)(v5 + 96));
  sub_435145(*(_BYTE *)(v5 + 96), 0);
  v14 = -1;
  sub_413F5F((int)&v6);
}

//----- (00410E7A) --------------------------------------------------------
LONG __thiscall sub_410E7A(int this)
{
  LONG result; // eax@2
  DNameNode *v2; // ST20_4@16
  int v3; // ST10_4@20
  char *v4; // eax@20
  int v5; // [sp+8h] [bp-40h]@1
  char v6; // [sp+10h] [bp-38h]@20
  int v7; // [sp+34h] [bp-14h]@1
  time_t v8; // [sp+38h] [bp-10h]@20
  int v9; // [sp+3Ch] [bp-Ch]@1
  int v10; // [sp+40h] [bp-8h]@1
  DWORD dwNumberOfBytesTransferred; // [sp+44h] [bp-4h]@1

  v5 = this;
  dwNumberOfBytesTransferred = 0;
  v9 = *(_DWORD *)(*(_DWORD *)(this + 72) + 8196);
  v10 = 0;
  v7 = *(_DWORD *)(this + 72) + 4;
  if ( *(_DWORD *)(this + 160) == 2 )
  {
    result = sub_41D61F(this);
  }
  else
  {
    while ( 1 )
    {
      while ( 1 )
      {
        if ( (signed int)dwNumberOfBytesTransferred >= v9 )
        {
          dwNumberOfBytesTransferred = 0;
          return sub_41D995(v5, 0);
        }
        if ( *(_DWORD *)(v5 + 160) )
          break;
        if ( (signed int)(dwNumberOfBytesTransferred + 3) > v9 )
          return sub_41D995(v5, v9 - dwNumberOfBytesTransferred);
        *(_DWORD *)(v5 + 156) = *(_BYTE *)(dwNumberOfBytesTransferred + v7)
                              + (*(_BYTE *)(dwNumberOfBytesTransferred + v7 + 1) << 8)
                              + 1
                              - dword_478558;
        if ( *(_DWORD *)(v5 + 156) <= 0 || *(_DWORD *)(v5 + 156) > 0x2000 )
        {
          v10 = 1;
          sub_42DBFC((int)&unk_47FA00, 3, aDBadPacketSize, *(_DWORD *)(v5 + 92), *(_DWORD *)(v5 + 156));
          goto LABEL_20;
        }
        dwNumberOfBytesTransferred += 2;
        *(_DWORD *)(v5 + 160) = 1;
      }
      if ( *(_DWORD *)(v5 + 160) != 1 )
        break;
      if ( (signed int)(*(_DWORD *)(v5 + 156) + dwNumberOfBytesTransferred) > v9 )
        return sub_41D995(v5, v9 - dwNumberOfBytesTransferred);
      if ( (signed int)*(_BYTE *)(dwNumberOfBytesTransferred + v7) >= 22 )
      {
        sub_42DBFC((int)&unk_47FA00, 3, aUnknownProtoco, *(_BYTE *)(dwNumberOfBytesTransferred + v7));
        v10 = 2;
        goto LABEL_20;
      }
      v2 = sub_41DE1D();
      *((_DWORD *)v2 + 2) = v5;
      *((_DWORD *)v2 + 3) = *(_DWORD *)(v5 + 72);
      *((_DWORD *)v2 + 4) = *(_DWORD *)(*(_DWORD *)(v5 + 164) + 4 * *(_BYTE *)(dwNumberOfBytesTransferred + v7));
      sub_418095(v5);
      sub_4116D0(*(_DWORD *)(v5 + 72));
      InterlockedIncrement(&dword_47F230);
      sub_4180FB((void *)v2, dwNumberOfBytesTransferred, CompletionPort);
      dwNumberOfBytesTransferred += *(_DWORD *)(v5 + 156);
      *(_DWORD *)(v5 + 160) = 0;
    }
    v10 = 3;
LABEL_20:
    v8 = time(0);
    qmemcpy(&v6, localtime(&v8), 0x24u);
    v3 = v10;
    v4 = sub_411108(v5);
    sub_42E0DD((int)&unk_47F8C8, 0, aMainServerConn, v4, v3);
    result = sub_41D61F(v5);
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (00411108) --------------------------------------------------------
char *__thiscall sub_411108(int this)
{
  return inet_ntoa(*(struct in_addr *)(this + 168));
}

//----- (00411123) --------------------------------------------------------
void __thiscall sub_411123(void *this)
{
  int v1; // ST14_4@1

  v1 = (int)this;
  sub_418095((int)this);
  (*(void (__thiscall **)(int))(*(_DWORD *)v1 + 32))(v1);
  sub_4111F6(v1, (int)aCdd, 3);
}

//----- (0041115C) --------------------------------------------------------
void __thiscall sub_41115C(int this, int a2)
{
  int v2; // [sp+0h] [bp-24h]@1
  int v3; // [sp+4h] [bp-20h]@2
  int v4; // [sp+20h] [bp-4h]@2

  v2 = this;
  *(_DWORD *)(this + 168) = a2;
  if ( !byte_4785D2 )
  {
    sub_413E9E((int)&v3, (int)&unk_478608);
    v4 = 0;
    sub_414123((int)&v3, aUpdateWorlds_2, *(_BYTE *)(v2 + 96));
    sub_435145(*(_BYTE *)(v2 + 96), 1);
    *(_BYTE *)(v2 + 104) = 1;
    v4 = -1;
    sub_413F5F((int)&v3);
  }
}
// 4785D2: using guessed type char byte_4785D2;

//----- (004111F6) --------------------------------------------------------
void __cdecl sub_4111F6(int a1, int a2, char a3)
{
  char *v3; // [sp+4h] [bp-Ch]@2
  _DWORD *v4; // [sp+Ch] [bp-4h]@2

  if ( *(_DWORD *)(a1 + 160) != 2 )
  {
    v4 = sub_417DD3();
    v3 = sub_43A690((char *)v4 + 6, 8190, a2, (int)&a3);
    if ( v3 )
    {
      v3 = &v3[dword_478558 - 1];
      *((_BYTE *)v4 + 4) = (_BYTE)v3;
      *((_BYTE *)v4 + 5) = BYTE1(v3);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_0, *(_DWORD *)(a1 + 92), a2);
    }
    v4[2049] = &v3[-dword_478558 + 3];
    sub_41DB1A(a1, (int)v4);
  }
}
// 478558: using guessed type int dword_478558;

//----- (004112BF) --------------------------------------------------------
char __thiscall sub_4112BF(void *this, char a2, char *a3)
{
  void *v3; // ST10_4@1
  struct Concurrency::IExecutionContext *v4; // eax@1
  char v6; // [sp+Ch] [bp-40h]@1
  char v7; // [sp+10h] [bp-3Ch]@1
  char v8; // [sp+20h] [bp-2Ch]@1
  char v9; // [sp+34h] [bp-18h]@1
  char v10; // [sp+38h] [bp-14h]@1
  char v11; // [sp+3Ch] [bp-10h]@1
  int v12; // [sp+48h] [bp-4h]@1

  v3 = this;
  v11 = 0;
  sub_42D4B5((int)this + 16);
  sub_40B890(&v7, a3, (int)&v6);
  v12 = 0;
  v4 = (struct Concurrency::IExecutionContext *)unknown_libname_55(&a2, &v7);
  LOBYTE(v12) = 1;
  sub_411770(v3, (int)&v9, v4);
  LOBYTE(v12) = 0;
  unknown_libname_53(&v8);
  v12 = -1;
  unknown_libname_20(&v7);
  sub_42D4F0((int)v3 + 16);
  return v10;
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);
// 4116F0: using guessed type int __thiscall unknown_libname_53(_DWORD);
// 411880: using guessed type _DWORD __stdcall unknown_libname_55(_DWORD, _DWORD);

//----- (0041136F) --------------------------------------------------------
char __thiscall sub_41136F(void *this, int a2)
{
  _DWORD *v2; // eax@2
  int v3; // eax@3
  const char *v4; // eax@3
  void *v6; // [sp+0h] [bp-2Ch]@1
  char v7; // [sp+4h] [bp-28h]@2
  char v8; // [sp+8h] [bp-24h]@5
  char v9; // [sp+Ch] [bp-20h]@1
  int i; // [sp+10h] [bp-1Ch]@1
  int v11; // [sp+14h] [bp-18h]@1
  char v12; // [sp+18h] [bp-14h]@3
  char v13; // [sp+28h] [bp-4h]@1

  v6 = this;
  v13 = 0;
  unknown_libname_56(&i);
  v11 = 0;
  sub_42D4B5((int)v6 + 16);
  for ( i = *(_DWORD *)sub_411730(v6, (int)&v9); ; sub_4118F0(&i, &v8, 0) )
  {
    v2 = (_DWORD *)sub_411750(v6, (int)&v7);
    if ( !(unsigned __int8)sub_411920(&i, v2) )
      break;
    v11 = 0;
    v11 = *(_DWORD *)unknown_libname_57(&i);
    memset(&v12, 0, 0xFu);
    v3 = unknown_libname_57(&i);
    v4 = (const char *)sub_40B8D0(v3 + 4);
    strncpy(&v12, v4, 0xEu);
    if ( v11 > 0 )
      sub_4111F6(a2, (int)aCdcs_6, 1);
  }
  unknown_libname_54(v6);
  sub_42D4F0((int)v6 + 16);
  return v13;
}
// 4117B0: using guessed type int __thiscall unknown_libname_54(_DWORD);
// 4118B0: using guessed type int __thiscall unknown_libname_56(_DWORD);
// 4118D0: using guessed type int __thiscall unknown_libname_57(_DWORD);

//----- (0041146D) --------------------------------------------------------
int sub_41146D()
{
  return atexit(sub_402150);
}

//----- (00411480) --------------------------------------------------------
int __cdecl sub_411480(int **a1)
{
  int v1; // ST00_4@1

  v1 = **a1;
  ++*a1;
  return v1;
}

//----- (004114B0) --------------------------------------------------------
char __cdecl sub_4114B0(_DWORD *a1)
{
  return *(_BYTE *)(*a1)++;
}

//----- (004114E0) --------------------------------------------------------
__int16 __cdecl sub_4114E0(__int16 **a1)
{
  __int16 v1; // ST00_2@1

  v1 = **a1;
  ++*a1;
  return v1;
}

//----- (00411510) --------------------------------------------------------
_DWORD *__thiscall sub_411510(int this, _DWORD *a2)
{
  *a2 = *(_DWORD *)(this + 168);
  return a2;
}

//----- (00411530) --------------------------------------------------------
int __cdecl sub_411530(int **a1)
{
  int v1; // ST00_4@1

  v1 = **a1;
  ++*a1;
  return v1;
}

//----- (00411560) --------------------------------------------------------
int *__cdecl sub_411560(int *a1, signed int a2, _BYTE *a3)
{
  int v3; // edx@1
  int *result; // eax@1

  v3 = sub_43A9D8(a3, (_BYTE *)*a1, a2) + *a1;
  result = a1;
  *a1 = v3;
  return result;
}

//----- (00411590) --------------------------------------------------------
int __thiscall sub_411590(int this)
{
  return *(_DWORD *)(this + 2284);
}

//----- (004115B0) --------------------------------------------------------
void *__thiscall sub_4115B0(void *this)
{
  void *v1; // ST08_4@1
  char v3; // [sp+4h] [bp-14h]@1
  char v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v1 = this;
  sub_411710(this, &v3, &v4);
  v5 = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)((char *)v1 + 16), 0, 0);
  return v1;
}

//----- (00411650) --------------------------------------------------------
void *__thiscall sub_411650(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_410C4F(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (00411680) --------------------------------------------------------
int __thiscall sub_411680(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(this + 16));
  return unknown_libname_51(v1);
}
// 411610: using guessed type int __thiscall unknown_libname_51(_DWORD);

//----- (004116D0) --------------------------------------------------------
LONG __thiscall sub_4116D0(int this)
{
  return InterlockedIncrement((volatile LONG *)(this + 8204));
}

//----- (00411710) --------------------------------------------------------
void *__thiscall sub_411710(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_411950(this, a2, a3);
  return v3;
}

//----- (00411730) --------------------------------------------------------
int __thiscall sub_411730(void *this, int a2)
{
  sub_411980(this, a2);
  return a2;
}

//----- (00411750) --------------------------------------------------------
int __thiscall sub_411750(void *this, int a2)
{
  sub_4119B0((int)this, a2);
  return a2;
}

//----- (00411770) --------------------------------------------------------
int __thiscall sub_411770(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_4119D0(this, (int)&v4, a3);
  sub_411D70(a2, &v4, &v5);
  return a2;
}

//----- (004117D0) --------------------------------------------------------
void __thiscall sub_4117D0(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_4119B0((int)this, (int)&v6);
  v2 = (int *)sub_411980((void *)v3, (int)&v5);
  sub_411BA0((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_478600 )
  {
    v8 = (void *)dword_4785FC;
    dword_4785FC = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 4785FC: using guessed type int dword_4785FC;
// 478600: using guessed type int dword_478600;

//----- (004118F0) --------------------------------------------------------
_DWORD *__thiscall sub_4118F0(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_59(this);
  *a2 = v3;
  return a2;
}
// 411D30: using guessed type int __cdecl unknown_libname_59(_DWORD);

//----- (00411920) --------------------------------------------------------
BOOL __thiscall sub_411920(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_411D50(this, a2) == 0;
}

//----- (00411950) --------------------------------------------------------
void *__thiscall sub_411950(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_411E00((int)this, a2, 0, a3);
  return v3;
}

//----- (00411980) --------------------------------------------------------
int __thiscall sub_411980(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_412BC0((int)this);
  unknown_libname_63(*v2);
  return a2;
}
// 412CD0: using guessed type _DWORD __stdcall unknown_libname_63(_DWORD);

//----- (004119B0) --------------------------------------------------------
int __thiscall sub_4119B0(int this, int a2)
{
  unknown_libname_63(*(_DWORD *)(this + 4));
  return a2;
}
// 412CD0: using guessed type _DWORD __stdcall unknown_libname_63(_DWORD);

//----- (004119D0) --------------------------------------------------------
int __thiscall sub_4119D0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_412C00((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_4785FC )
  {
    v25 = v26;
    v3 = sub_411DB0(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_406220(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_60(v26);
    else
      v13 = *(_DWORD *)sub_411DE0(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_412730(v14, (int)&v22, v26, v25, a3);
    sub_411D70(a2, v5, &v23);
    return a2;
  }
  unknown_libname_63(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_411980(v14, (int)&v21);
    if ( (unsigned __int8)sub_411D50(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_412730(v14, (int)&v19, v26, v25, a3);
      sub_411D70(a2, v8, &v20);
      return a2;
    }
    unknown_libname_64(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_62(&v28);
  v11 = sub_411DB0(v10);
  if ( (unsigned __int8)sub_406220(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_412730(v14, (int)&v16, v26, v25, a3);
    sub_411D70(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_411D70(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 412CC0: using guessed type int __thiscall unknown_libname_62(_DWORD);
// 412CD0: using guessed type _DWORD __stdcall unknown_libname_63(_DWORD);
// 412CF0: using guessed type int __thiscall unknown_libname_64(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00411BA0) --------------------------------------------------------
_DWORD *__thiscall sub_411BA0(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_61()
    || (v4 = (_DWORD *)sub_411980((void *)v9, (int)&v13), (unsigned __int8)sub_411920(&a3, v4))
    || (v5 = (_DWORD *)sub_4119B0(v9, (int)&v12), (unsigned __int8)sub_411920(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_411920(&a3, &a4) )
    {
      v6 = sub_4118F0(&a3, &v11, 0);
      sub_411E60((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_412C00(v9);
    sub_4126B0((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_412C00(v9) = dword_4785FC;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_412BC0(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_412BE0(v9) = *(_DWORD *)(v9 + 4);
    sub_411980((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 411E40: using guessed type int unknown_libname_61(void);
// 4785FC: using guessed type int dword_4785FC;

//----- (00411CA0) --------------------------------------------------------
_DWORD *__thiscall sub_411CA0(void *this)
{
  void *v1; // ST0C_4@1
  int v2; // ST08_4@1
  int *v3; // eax@1
  char v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@1
  char v7; // [sp+Ch] [bp-4h]@1

  v1 = this;
  v2 = *(_DWORD *)sub_4119B0((int)this, (int)&v7);
  v3 = (int *)sub_411980(v1, (int)&v6);
  return sub_411BA0(v1, &v5, *v3, v2);
}

//----- (00411D10) --------------------------------------------------------
int __thiscall sub_411D10(int *this)
{
  return sub_411DF0(*this);
}

//----- (00411D50) --------------------------------------------------------
BOOL __thiscall sub_411D50(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (00411D70) --------------------------------------------------------
int __thiscall sub_411D70(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (00411DB0) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_411DB0(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_411DF0(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (00411DE0) --------------------------------------------------------
int __cdecl sub_411DE0(int a1)
{
  return a1 + 8;
}

//----- (00411DF0) --------------------------------------------------------
int __cdecl sub_411DF0(int a1)
{
  return a1 + 12;
}

//----- (00411E00) --------------------------------------------------------
int __thiscall sub_411E00(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_412D30((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (00411E60) --------------------------------------------------------
_DWORD *__thiscall sub_411E60(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  int *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  _DWORD *v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  _DWORD *v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  _DWORD *v28; // eax@16
  int *v29; // eax@17
  _DWORD *v30; // eax@18
  _DWORD *v31; // eax@18
  _DWORD *v32; // eax@19
  int *v33; // eax@19
  int *v34; // eax@20
  int *v35; // eax@20
  _DWORD *v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  _DWORD *v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  void *v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  int v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_4118F0(&a3, &v76, 0);
  v81 = (void *)unknown_libname_62(v3);
  v80 = (int)v81;
  if ( *(_DWORD *)unknown_libname_60(v81) == dword_4785FC )
  {
    v82 = *(_DWORD *)sub_411DE0((int)v81);
  }
  else if ( *(_DWORD *)sub_411DE0((int)v81) == dword_4785FC )
  {
    v82 = *(_DWORD *)unknown_libname_60(v81);
  }
  else
  {
    v4 = (int *)sub_411DE0((int)v81);
    v81 = (void *)sub_412FA0(*v4);
    v82 = *(_DWORD *)sub_411DE0((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == (void *)v80 )
  {
    v27 = (_DWORD *)sub_412D20((int)v81);
    *(_DWORD *)sub_412D20(v82) = *v27;
    v28 = (_DWORD *)sub_412C00((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (int *)sub_412C00((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_412D20(v80);
      v31 = (_DWORD *)unknown_libname_60(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_412D20(v80);
        v33 = (int *)unknown_libname_60(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_412D20(v80);
        v35 = (int *)sub_411DE0(*v34);
        *v35 = v82;
      }
    }
    v36 = (_DWORD *)sub_412BC0((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_411DE0(v80) == dword_4785FC )
      {
        v37 = (_DWORD *)sub_412D20(v80);
        *(_DWORD *)sub_412BC0((int)v75) = *v37;
      }
      else
      {
        v38 = sub_412FA0(v82);
        *(_DWORD *)sub_412BC0((int)v75) = v38;
      }
    }
    v39 = (_DWORD *)sub_412BE0((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_60(v80) == dword_4785FC )
      {
        v40 = (_DWORD *)sub_412D20(v80);
        *(_DWORD *)sub_412BE0((int)v75) = *v40;
      }
      else
      {
        v41 = sub_412F60(v82);
        *(_DWORD *)sub_412BE0((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_60(v80);
    v6 = (void **)sub_412D20(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_60(v80);
    *(_DWORD *)unknown_libname_60(v81) = *v7;
    v8 = (void **)sub_411DE0(v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_412D20(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_412D20((int)v81);
      *(_DWORD *)sub_412D20(v82) = *v10;
      v11 = (_DWORD *)sub_412D20((int)v81);
      v12 = (int *)unknown_libname_60(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_411DE0(v80);
      *(_DWORD *)sub_411DE0((int)v81) = *v13;
      v14 = (int *)sub_411DE0(v80);
      v15 = (void **)sub_412D20(*v14);
      *v15 = v81;
    }
    v16 = (_DWORD *)sub_412C00((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_412C00((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_412D20(v80);
      v19 = (_DWORD *)unknown_libname_60(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_412D20(v80);
        v21 = (void **)unknown_libname_60(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_412D20(v80);
        v23 = (void **)sub_411DE0(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_412D20(v80);
    *(_DWORD *)sub_412D20((int)v81) = *v24;
    v25 = (int *)_tolower(v80);
    v26 = (int *)_tolower((int)v81);
    sub_413290(v26, v25);
    v81 = (void *)v80;
  }
  if ( *(_DWORD *)_tolower((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_412C00((int)v75);
      if ( v82 == *v42 || *(_DWORD *)_tolower(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_412D20(v82);
      v44 = (_DWORD *)unknown_libname_60(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_412D20(v82);
        v78 = *(_DWORD *)sub_411DE0(*v45);
        if ( !*(_DWORD *)_tolower(v78) )
        {
          *(_DWORD *)_tolower(v78) = 1;
          v46 = (int *)sub_412D20(v82);
          *(_DWORD *)_tolower(*v46) = 0;
          v47 = (int *)sub_412D20(v82);
          sub_412E30((void *)v75, *v47);
          v48 = (int *)sub_412D20(v82);
          v78 = *(_DWORD *)sub_411DE0(*v48);
        }
        v49 = (int *)unknown_libname_60(v78);
        if ( *(_DWORD *)_tolower(*v49) != 1 || (v50 = (int *)sub_411DE0(v78), *(_DWORD *)_tolower(*v50) != 1) )
        {
          v51 = (int *)sub_411DE0(v78);
          if ( *(_DWORD *)_tolower(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_60(v78);
            *(_DWORD *)_tolower(*v52) = 1;
            *(_DWORD *)_tolower(v78) = 0;
            sub_412FE0((void *)v75, v78);
            v53 = (int *)sub_412D20(v82);
            v78 = *(_DWORD *)sub_411DE0(*v53);
          }
          v54 = (int *)sub_412D20(v82);
          v55 = (_DWORD *)_tolower(*v54);
          *(_DWORD *)_tolower(v78) = *v55;
          v56 = (int *)sub_412D20(v82);
          *(_DWORD *)_tolower(*v56) = 1;
          v57 = (int *)sub_411DE0(v78);
          *(_DWORD *)_tolower(*v57) = 1;
          v58 = (int *)sub_412D20(v82);
          sub_412E30((void *)v75, *v58);
          break;
        }
        *(_DWORD *)_tolower(v78) = 0;
        v82 = *(_DWORD *)sub_412D20(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_412D20(v82);
        v77 = *(_DWORD *)unknown_libname_60(*v59);
        if ( !*(_DWORD *)_tolower(v77) )
        {
          *(_DWORD *)_tolower(v77) = 1;
          v60 = (int *)sub_412D20(v82);
          *(_DWORD *)_tolower(*v60) = 0;
          v61 = (int *)sub_412D20(v82);
          sub_412FE0((void *)v75, *v61);
          v62 = (_DWORD *)sub_412D20(v82);
          v77 = *(_DWORD *)unknown_libname_60(*v62);
        }
        v63 = (int *)sub_411DE0(v77);
        if ( *(_DWORD *)_tolower(*v63) != 1 || (v64 = (int *)unknown_libname_60(v77), *(_DWORD *)_tolower(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_60(v77);
          if ( *(_DWORD *)_tolower(*v65) == 1 )
          {
            v66 = (int *)sub_411DE0(v77);
            *(_DWORD *)_tolower(*v66) = 1;
            *(_DWORD *)_tolower(v77) = 0;
            sub_412E30((void *)v75, v77);
            v67 = (_DWORD *)sub_412D20(v82);
            v77 = *(_DWORD *)unknown_libname_60(*v67);
          }
          v68 = (int *)sub_412D20(v82);
          v69 = (_DWORD *)_tolower(*v68);
          *(_DWORD *)_tolower(v77) = *v69;
          v70 = (int *)sub_412D20(v82);
          *(_DWORD *)_tolower(*v70) = 1;
          v71 = (int *)unknown_libname_60(v77);
          *(_DWORD *)_tolower(*v71) = 1;
          v72 = (int *)sub_412D20(v82);
          sub_412FE0((void *)v75, *v72);
          break;
        }
        *(_DWORD *)_tolower(v77) = 0;
        v82 = *(_DWORD *)sub_412D20(v82);
      }
    }
    *(_DWORD *)_tolower(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = (void *)sub_411DF0((int)v81);
  sub_413180(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 412CC0: using guessed type int __thiscall unknown_libname_62(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (004126B0) --------------------------------------------------------
void *__thiscall sub_4126B0(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  void *v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_4785FC; a2 = i )
  {
    v3 = (void **)sub_411DE0((int)i);
    sub_4126B0(*v3);
    i = *(void **)unknown_libname_60(i);
    v4 = (void *)sub_411DF0((int)a2);
    sub_413180(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00412730) --------------------------------------------------------
int __thiscall sub_412730(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_413110(a4, 0);
  *(_DWORD *)unknown_libname_60(v48) = dword_4785FC;
  *(_DWORD *)sub_411DE0((int)v48) = dword_4785FC;
  v5 = (void *)sub_411DF0((int)v48);
  sub_413160(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_4785FC
    || (v6 = sub_411DB0(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_406220(v7, v6)) )
  {
    v8 = (char **)unknown_libname_60(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_412C00(v46);
      *v9 = v48;
      v10 = (char **)sub_412BE0(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_412BC0(v46) )
    {
      v11 = (char **)sub_412BC0(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_411DE0(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_412BE0(v46) )
    {
      v13 = (char **)sub_412BE0(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_412C00(v46) )
  {
    v14 = (int *)sub_412D20((int)v49);
    if ( *(_DWORD *)_tolower(*v14) )
      break;
    v15 = (_DWORD *)sub_412D20((int)v49);
    v16 = (int *)sub_412D20((int)v49);
    v17 = (_DWORD *)sub_412D20(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_60(*v17) )
    {
      v18 = (int *)sub_412D20((int)v49);
      v19 = (int *)sub_412D20(*v18);
      v20 = (int *)sub_411DE0(*v19);
      v50 = *v20;
      if ( *(_DWORD *)_tolower(*v20) )
      {
        v25 = (int *)sub_412D20((int)v49);
        if ( v49 == *(char **)sub_411DE0(*v25) )
        {
          v49 = *(char **)sub_412D20((int)v49);
          sub_412E30((void *)v46, (int)v49);
        }
        v26 = (int *)sub_412D20((int)v49);
        *(_DWORD *)_tolower(*v26) = 1;
        v27 = (int *)sub_412D20((int)v49);
        v28 = (int *)sub_412D20(*v27);
        *(_DWORD *)_tolower(*v28) = 0;
        v29 = (int *)sub_412D20((int)v49);
        v30 = (int *)sub_412D20(*v29);
        sub_412FE0((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_412D20((int)v49);
        *(_DWORD *)_tolower(*v21) = 1;
        *(_DWORD *)_tolower(v50) = 1;
        v22 = (int *)sub_412D20((int)v49);
        v23 = (int *)sub_412D20(*v22);
        *(_DWORD *)_tolower(*v23) = 0;
        v24 = (int *)sub_412D20((int)v49);
        v49 = *(char **)sub_412D20(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_412D20((int)v49);
      v32 = (_DWORD *)sub_412D20(*v31);
      v33 = (int *)unknown_libname_60(*v32);
      v51 = *v33;
      if ( *(_DWORD *)_tolower(*v33) )
      {
        v38 = (_DWORD *)sub_412D20((int)v49);
        if ( v49 == *(char **)unknown_libname_60(*v38) )
        {
          v49 = *(char **)sub_412D20((int)v49);
          sub_412FE0((void *)v46, (int)v49);
        }
        v39 = (int *)sub_412D20((int)v49);
        *(_DWORD *)_tolower(*v39) = 1;
        v40 = (int *)sub_412D20((int)v49);
        v41 = (int *)sub_412D20(*v40);
        *(_DWORD *)_tolower(*v41) = 0;
        v42 = (int *)sub_412D20((int)v49);
        v43 = (int *)sub_412D20(*v42);
        sub_412E30((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_412D20((int)v49);
        *(_DWORD *)_tolower(*v34) = 1;
        *(_DWORD *)_tolower(v51) = 1;
        v35 = (int *)sub_412D20((int)v49);
        v36 = (int *)sub_412D20(*v35);
        *(_DWORD *)_tolower(*v36) = 0;
        v37 = (int *)sub_412D20((int)v49);
        v49 = *(char **)sub_412D20(*v37);
      }
    }
  }
  v44 = (int *)sub_412C00(v46);
  *(_DWORD *)_tolower(*v44) = 1;
  unknown_libname_63(v48);
  return a2;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 412CD0: using guessed type _DWORD __stdcall unknown_libname_63(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00412BC0) --------------------------------------------------------
int __thiscall sub_412BC0(int this)
{
  return unknown_libname_60(*(_DWORD *)(this + 4));
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);

//----- (00412BE0) --------------------------------------------------------
int __thiscall sub_412BE0(int this)
{
  return sub_411DE0(*(_DWORD *)(this + 4));
}

//----- (00412C00) --------------------------------------------------------
int __thiscall sub_412C00(int this)
{
  return sub_412D20(*(_DWORD *)(this + 4));
}

//----- (00412C20) --------------------------------------------------------
_DWORD *__thiscall sub_412C20(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_411DE0(*this) == dword_4785FC )
  {
    while ( 1 )
    {
      v3 = (int *)sub_412D20(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_411DE0(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_411DE0(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_411DE0(*v4);
    result = (_DWORD *)sub_412FA0(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 4785FC: using guessed type int dword_4785FC;

//----- (00412D20) --------------------------------------------------------
int __cdecl sub_412D20(int a1)
{
  return a1 + 4;
}

//----- (00412D30) --------------------------------------------------------
_DWORD *__thiscall sub_412D30(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_413110(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_4785FC )
  {
    dword_4785FC = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_60(dword_4785FC) = 0;
    *(_DWORD *)sub_411DE0(dword_4785FC) = 0;
  }
  ++dword_478600;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_413110(dword_4785FC, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_412BC0((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_412BE0((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 4785FC: using guessed type int dword_4785FC;
// 478600: using guessed type int dword_478600;

//----- (00412E30) --------------------------------------------------------
int *__thiscall sub_412E30(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_411DE0(a2);
  v2 = (_DWORD *)unknown_libname_60(v10);
  *(_DWORD *)sub_411DE0(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_60(v10) != dword_4785FC )
  {
    v3 = (int *)unknown_libname_60(v10);
    *(_DWORD *)sub_412D20(*v3) = a2;
  }
  v4 = (_DWORD *)sub_412D20(a2);
  *(_DWORD *)sub_412D20(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_412C00(v9) )
  {
    *(_DWORD *)sub_412C00(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_412D20(a2);
    if ( a2 == *(_DWORD *)unknown_libname_60(*v5) )
    {
      v6 = (_DWORD *)sub_412D20(a2);
      *(_DWORD *)unknown_libname_60(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_412D20(a2);
      *(_DWORD *)sub_411DE0(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_60(v10) = a2;
  result = (int *)sub_412D20(a2);
  *result = v10;
  return result;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00412F60) --------------------------------------------------------
int __cdecl sub_412F60(int a1)
{
  while ( *(_DWORD *)sub_411DE0(a1) != dword_4785FC )
    a1 = *(_DWORD *)sub_411DE0(a1);
  return a1;
}
// 4785FC: using guessed type int dword_4785FC;

//----- (00412FA0) --------------------------------------------------------
int __cdecl sub_412FA0(int a1)
{
  while ( *(_DWORD *)unknown_libname_60(a1) != dword_4785FC )
    a1 = *(_DWORD *)unknown_libname_60(a1);
  return a1;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00412FE0) --------------------------------------------------------
int *__thiscall sub_412FE0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_60(a2);
  v2 = (_DWORD *)sub_411DE0(v10);
  *(_DWORD *)unknown_libname_60(a2) = *v2;
  if ( *(_DWORD *)sub_411DE0(v10) != dword_4785FC )
  {
    v3 = (int *)sub_411DE0(v10);
    *(_DWORD *)sub_412D20(*v3) = a2;
  }
  v4 = (_DWORD *)sub_412D20(a2);
  *(_DWORD *)sub_412D20(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_412C00(v9) )
  {
    *(_DWORD *)sub_412C00(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_412D20(a2);
    if ( a2 == *(_DWORD *)sub_411DE0(*v5) )
    {
      v6 = (int *)sub_412D20(a2);
      *(_DWORD *)sub_411DE0(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_412D20(a2);
      *(_DWORD *)unknown_libname_60(*v7) = v10;
    }
  }
  *(_DWORD *)sub_411DE0(v10) = a2;
  result = (int *)sub_412D20(a2);
  *result = v10;
  return result;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00413110) --------------------------------------------------------
char *__stdcall sub_413110(int a1, int a2)
{
  char *result; // eax@1

  result = sub_40E2F0(0x24u);
  *(_DWORD *)sub_412D20((int)result) = a1;
  *(_DWORD *)_tolower((int)result) = a2;
  return result;
}

//----- (00413160) --------------------------------------------------------
void *__stdcall sub_413160(void *a1, int a2)
{
  return sub_4132C0(a1, a2);
}

//----- (00413180) --------------------------------------------------------
void __stdcall sub_413180(void *a1)
{
  __ExceptionPtrDestroy(a1);
}

//----- (004131C0) --------------------------------------------------------
int *__thiscall sub_4131C0(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)_tolower(*this) || (v1 = (int *)sub_412D20(*v5), *(_DWORD *)sub_412D20(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_60(*v5) == dword_4785FC )
    {
      while ( 1 )
      {
        v4 = (int **)sub_412D20(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_60(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_60(*v5);
      result = (int *)sub_412F60(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_411DE0(*v5);
    *v5 = *result;
  }
  return result;
}
// 411DD0: using guessed type _DWORD __cdecl unknown_libname_60(_DWORD);
// 4785FC: using guessed type int dword_4785FC;

//----- (00413290) --------------------------------------------------------
int __cdecl sub_413290(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (004132C0) --------------------------------------------------------
void *__cdecl sub_4132C0(void *a1, int a2)
{
  void *result; // eax@1

  result = operator new(0x14u, a1);
  if ( result )
    result = (void *)unknown_libname_66(a2);
  return result;
}
// 413340: using guessed type _DWORD __stdcall unknown_libname_66(_DWORD);

//----- (00413370) --------------------------------------------------------
void *__thiscall sub_413370(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_53(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}
// 4116F0: using guessed type int __thiscall unknown_libname_53(_DWORD);

//----- (004133AF) --------------------------------------------------------
DNameNode *sub_4133AF()
{
  return sub_4133DF((DNameNode *)&unk_478608);
}

//----- (004133BE) --------------------------------------------------------
int sub_4133BE()
{
  return atexit(sub_4133D0);
}

//----- (004133D0) --------------------------------------------------------
void __cdecl sub_4133D0()
{
  sub_41346F((int)&unk_478608);
}

//----- (004133DF) --------------------------------------------------------
DNameNode *__thiscall sub_4133DF(DNameNode *this)
{
  DNameNode *v1; // ST08_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  sub_42D420((struct _RTL_CRITICAL_SECTION *)((char *)v1 + 8), 2, 0);
  *(_DWORD *)v1 = &off_45F4B0;
  *((_DWORD *)v1 + 10) = 0;
  *((_DWORD *)v1 + 11) = 0;
  *((_DWORD *)v1 + 12) = 0;
  *((_DWORD *)v1 + 77) = 0;
  *((_DWORD *)v1 + 1) = 1;
  return v1;
}
// 45F4B0: using guessed type int (__stdcall *off_45F4B0)(int);

//----- (0041346F) --------------------------------------------------------
void *__thiscall sub_41346F(int this)
{
  int v2; // [sp+0h] [bp-14h]@1

  v2 = this;
  *(_DWORD *)this = &off_45F4B0;
  if ( *(_DWORD *)(this + 40) )
    sub_413AC8((void *)this);
  if ( *(_DWORD *)(v2 + 44) )
    sub_43CA18(*(LPVOID *)(v2 + 44));
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(v2 + 8));
  return sub_418081((void *)v2);
}
// 45F4B0: using guessed type int (__stdcall *off_45F4B0)(int);

//----- (004134F8) --------------------------------------------------------
void *__thiscall sub_4134F8(int this, int a2)
{
  void *result; // eax@6
  int v3; // [sp+0h] [bp-Ch]@1
  SQLRETURN v4; // [sp+8h] [bp-4h]@1
  SQLRETURN v5; // [sp+8h] [bp-4h]@3

  v3 = this;
  *(_DWORD *)(this + 308) = a2;
  *(_DWORD *)(this + 44) = operator new(16 * *(_DWORD *)(this + 308));
  SQLSetEnvAttr(0, 201, (SQLPOINTER)1, -6);
  v4 = SQLAllocHandle(1, 0, (SQLHANDLE *)(v3 + 40));
  if ( v4 && v4 != 1 || (v5 = SQLSetEnvAttr(*(SQLHENV *)(v3 + 40), 200, (SQLPOINTER)3, 0)) != 0 && v5 != 1 )
  {
    result = (void *)sub_42DBFC((int)&unk_47FA00, 3, aDbEnvAllocatio);
  }
  else if ( sub_4135F2((void *)v3, 0) )
  {
    result = sub_413759((void *)v3);
  }
  else
  {
    sub_42DBFC((int)&unk_47FA00, 3, aDbLoginFailed);
    SQLFreeHandle(1, *(SQLHANDLE *)(v3 + 40));
    result = (void *)v3;
    *(_DWORD *)(v3 + 40) = 0;
  }
  return result;
}

//----- (004135F2) --------------------------------------------------------
char __thiscall sub_4135F2(void *this, char a2)
{
  SQLSMALLINT v2; // ax@9
  char result; // al@11
  LPARAM dwInitParam; // [sp+0h] [bp-410h]@1
  SQLCHAR szConnStrOut; // [sp+4h] [bp-40Ch]@9
  SQLSMALLINT pcchConnStrOut; // [sp+404h] [bp-Ch]@9
  __int16 v7; // [sp+408h] [bp-8h]@3
  SQLHANDLE OutputHandle; // [sp+40Ch] [bp-4h]@3

  dwInitParam = (LPARAM)this;
  if ( !sub_413B7E(this) )
    DialogBoxParamA(hInstance, (LPCSTR)0x65, 0, DialogFunc, dwInitParam);
  v7 = SQLAllocHandle(2, *(SQLHANDLE *)(dwInitParam + 40), &OutputHandle);
  if ( v7 && v7 != 1 )
  {
    sub_42DBFC((int)&unk_47FA00, 1, aHdbcAllocation);
    result = 0;
  }
  else
  {
    if ( a2 == 1 )
      SQLSetConnectAttr(OutputHandle, 103, (SQLPOINTER)0x14, 0);
    else
      SQLSetConnectAttr(OutputHandle, 103, (SQLPOINTER)0x3C, 0);
    SQLSetConnectAttr(OutputHandle, 113, (SQLPOINTER)0x3C, 0);
    while ( 1 )
    {
      v2 = strlen((const char *)(dwInitParam + 52));
      v7 = SQLDriverConnect(OutputHandle, 0, (SQLCHAR *)(dwInitParam + 52), v2, &szConnStrOut, 1024, &pcchConnStrOut, 0);
      if ( !v7 || v7 == 1 )
        break;
      if ( !a2 )
        DialogBoxParamA(hInstance, (LPCSTR)0x65, 0, DialogFunc, dwInitParam);
    }
    SQLDisconnect(OutputHandle);
    SQLFreeHandle(2, OutputHandle);
    result = 1;
  }
  return result;
}

//----- (00413759) --------------------------------------------------------
void *__thiscall sub_413759(void *this)
{
  SQLSMALLINT v1; // ax@5
  void *result; // eax@17
  void *v3; // [sp+0h] [bp-410h]@1
  SQLCHAR szConnStrOut; // [sp+4h] [bp-40Ch]@5
  SQLSMALLINT pcchConnStrOut; // [sp+404h] [bp-Ch]@5
  __int16 v6; // [sp+408h] [bp-8h]@3
  int i; // [sp+40Ch] [bp-4h]@1

  v3 = this;
  for ( i = 0; i < *((_DWORD *)v3 + 77); ++i )
  {
    *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 12) = 0;
    v6 = SQLAllocHandle(2, *((SQLHANDLE *)v3 + 10), (SQLHANDLE *)(*((_DWORD *)v3 + 11) + 16 * i + 4));
    if ( v6 && v6 != 1 )
    {
      sub_42DBFC((int)&unk_47FA00, 3, aHdbcAllocati_0);
      *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 8) = 0;
      *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 4) = 0;
      *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i) = 0;
    }
    else
    {
      SQLSetConnectAttr(*(SQLHDBC *)(*((_DWORD *)v3 + 11) + 16 * i + 4), 103, (SQLPOINTER)0x3C, 0);
      SQLSetConnectAttr(*(SQLHDBC *)(*((_DWORD *)v3 + 11) + 16 * i + 4), 113, (SQLPOINTER)0x3C, 0);
      v1 = strlen((const char *)v3 + 52);
      v6 = SQLDriverConnect(
             *(SQLHDBC *)(*((_DWORD *)v3 + 11) + 16 * i + 4),
             0,
             (SQLCHAR *)v3 + 52,
             v1,
             &szConnStrOut,
             1024,
             &pcchConnStrOut,
             0);
      if ( v6 && v6 != 1 )
      {
        sub_42DBFC((int)&unk_47FA00, 3, aHdbcConnection);
        SQLFreeHandle(2, *(SQLHANDLE *)(*((_DWORD *)v3 + 11) + 16 * i + 4));
        *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 8) = 0;
        *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 4) = 0;
        *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i) = 0;
      }
      else
      {
        v6 = SQLAllocHandle(
               3,
               *(SQLHANDLE *)(*((_DWORD *)v3 + 11) + 16 * i + 4),
               (SQLHANDLE *)(*((_DWORD *)v3 + 11) + 16 * i + 8));
        if ( v6 && v6 != 1 )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aStmtAllocation);
          SQLFreeHandle(2, *(SQLHANDLE *)(*((_DWORD *)v3 + 11) + 16 * i + 4));
          *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 8) = 0;
          *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 4) = 0;
          *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i) = 0;
        }
        else
        {
          *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i) = 1;
        }
      }
    }
  }
  for ( i = 0; ; ++i )
  {
    result = v3;
    if ( i >= *((_DWORD *)v3 + 77) )
      break;
    if ( *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 8) )
    {
      if ( *((_DWORD *)v3 + 12) )
      {
        *(_DWORD *)(*((_DWORD *)v3 + 11) + 16 * i + 12) = *((_DWORD *)v3 + 12);
        *((_DWORD *)v3 + 12) = 16 * i + *((_DWORD *)v3 + 11);
      }
      else
      {
        *((_DWORD *)v3 + 12) = 16 * i + *((_DWORD *)v3 + 11);
      }
    }
  }
  return result;
}

//----- (00413AC8) --------------------------------------------------------
int __thiscall sub_413AC8(void *this)
{
  int result; // eax@8
  void *v2; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@1

  v2 = this;
  for ( i = 0; i < *((_DWORD *)v2 + 77); ++i )
  {
    if ( *(_DWORD *)(*((_DWORD *)v2 + 11) + 16 * i + 8) )
      SQLFreeHandle(3, *(SQLHANDLE *)(*((_DWORD *)v2 + 11) + 16 * i + 8));
    if ( *(_DWORD *)(*((_DWORD *)v2 + 11) + 16 * i + 4) )
    {
      SQLDisconnect(*(SQLHDBC *)(*((_DWORD *)v2 + 11) + 16 * i + 4));
      SQLFreeHandle(2, *(SQLHANDLE *)(*((_DWORD *)v2 + 11) + 16 * i + 4));
    }
  }
  LOWORD(result) = SQLFreeHandle(1, *((SQLHANDLE *)v2 + 10));
  *((_DWORD *)v2 + 10) = 0;
  return result;
}

//----- (00413B7E) --------------------------------------------------------
char __thiscall sub_413B7E(void *this)
{
  void *v2; // [sp+0h] [bp-11Ch]@1
  HKEY phkResult; // [sp+4h] [bp-118h]@7
  BYTE Data; // [sp+8h] [bp-114h]@8
  LPCSTR lpValueName; // [sp+108h] [bp-14h]@4
  DWORD cbData; // [sp+10Ch] [bp-10h]@8
  LSTATUS v7; // [sp+110h] [bp-Ch]@7
  int v8; // [sp+114h] [bp-8h]@1
  DWORD Type; // [sp+118h] [bp-4h]@8

  v2 = this;
  LOBYTE(v8) = 0;
  if ( dword_478568 != 8 && dword_478568 != 16 && dword_478568 != 32 )
  {
    if ( dword_478568 == 4 )
      lpValueName = aSldb;
  }
  else
  {
    lpValueName = aL2conn;
  }
  v7 = RegOpenKeyExA(HKEY_LOCAL_MACHINE, SubKey, 0, 0x20019u, &phkResult);
  if ( !v7 )
  {
    cbData = 256;
    v7 = RegQueryValueExA(phkResult, lpValueName, 0, &Type, &Data, &cbData);
    if ( !v7 && Type == 3 )
      LOBYTE(v8) = 1;
    RegCloseKey(phkResult);
  }
  if ( (_BYTE)v8 )
  {
    sub_415657(&Data, 256);
    strcpy((char *)v2 + 52, (const char *)&Data);
  }
  return v8;
}
// 478568: using guessed type int dword_478568;

//----- (00413C76) --------------------------------------------------------
LSTATUS __thiscall sub_413C76(int this)
{
  LSTATUS result; // eax@7
  HKEY phkResult; // [sp+Ch] [bp-110h]@7
  BYTE Data; // [sp+10h] [bp-10Ch]@7
  LPCSTR lpValueName; // [sp+110h] [bp-Ch]@4
  DWORD dwDisposition; // [sp+114h] [bp-8h]@7
  LSTATUS v6; // [sp+118h] [bp-4h]@7

  if ( dword_478568 != 8 && dword_478568 != 16 && dword_478568 != 32 )
  {
    if ( dword_478568 == 4 )
      lpValueName = aSldb_0;
  }
  else
  {
    lpValueName = aL2conn_0;
  }
  strcpy((char *)&Data, (const char *)(this + 52));
  sub_414B30(&Data, 256);
  result = RegCreateKeyExA(HKEY_LOCAL_MACHINE, aSoftwareNcso_0, 0, Class, 0, 0x20006u, 0, &phkResult, &dwDisposition);
  v6 = result;
  if ( !result )
  {
    RegSetValueExA(phkResult, lpValueName, 0, 3u, &Data, 0x100u);
    result = RegCloseKey(phkResult);
  }
  return result;
}
// 478568: using guessed type int dword_478568;

//----- (00413D60) --------------------------------------------------------
LONG __thiscall sub_413D60(void *this)
{
  int v2; // [sp+0h] [bp-8h]@1
  SQLRETURN v3; // [sp+4h] [bp-4h]@2
  SQLRETURN v4; // [sp+4h] [bp-4h]@4

  v2 = (int)this;
  if ( sub_4135F2(this, 1) )
  {
    sub_42D4B5(v2 + 8);
    sub_413AC8((void *)v2);
    SQLSetEnvAttr(0, 201, (SQLPOINTER)1, -6);
    v3 = SQLAllocHandle(1, 0, (SQLHANDLE *)(v2 + 40));
    if ( v3 && v3 != 1 )
    {
      sub_42D4F0(v2 + 8);
    }
    else
    {
      v4 = SQLSetEnvAttr(*(SQLHENV *)(v2 + 40), 200, (SQLPOINTER)3, 0);
      if ( v4 && v4 != 1 )
      {
        sub_42D4F0(v2 + 8);
        (*(void (__thiscall **)(int, signed int, signed int))(*(_DWORD *)v2 + 12))(v2, 30000, 1);
        sub_42DBFC((int)&unk_47FA00, 3, aDbRecoveryFail);
      }
      else
      {
        sub_413759((void *)v2);
        *(_DWORD *)(v2 + 312) = 0;
        sub_42D4F0(v2 + 8);
        sub_42DBFC((int)&unk_47FA00, 0, aDbRecoverySucc);
      }
    }
  }
  else
  {
    sub_42DBFC((int)&unk_47FA00, 3, aDbRecoveryFa_0);
    (*(void (__thiscall **)(int, signed int, signed int))(*(_DWORD *)v2 + 12))(v2, 30000, 1);
  }
  return sub_4180B3(v2);
}

//----- (00413E9E) --------------------------------------------------------
int __thiscall sub_413E9E(int this, int a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 16) = a2;
  *(_DWORD *)(this + 12) = 0;
  while ( 1 )
  {
    sub_42D4B5(*(_DWORD *)(v3 + 16) + 8);
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v3 + 16) + 48) + 12) )
    {
      *(_DWORD *)(v3 + 12) = *(_DWORD *)(*(_DWORD *)(v3 + 16) + 48);
      *(_DWORD *)(*(_DWORD *)(v3 + 16) + 48) = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v3 + 16) + 48) + 12);
      **(_DWORD **)(v3 + 12) = 0;
    }
    sub_42D4F0(*(_DWORD *)(v3 + 16) + 8);
    if ( *(_DWORD *)(v3 + 12) )
      break;
    Sleep(0x3E8u);
  }
  *(_DWORD *)v3 = *(_DWORD *)(*(_DWORD *)(v3 + 12) + 8);
  *(_DWORD *)(v3 + 4) = 1;
  *(_DWORD *)(v3 + 8) = 1;
  return v3;
}

//----- (00413F5F) --------------------------------------------------------
void __thiscall sub_413F5F(int this)
{
  int v1; // [sp+0h] [bp-4h]@1

  v1 = this;
  sub_42D4B5(*(_DWORD *)(this + 16) + 8);
  if ( !**(_DWORD **)(v1 + 12) )
  {
    SQLFreeStmt(*(SQLHSTMT *)v1, 2u);
    SQLFreeStmt(*(SQLHSTMT *)v1, 0);
    SQLFreeStmt(*(SQLHSTMT *)v1, 3u);
    *(_DWORD *)(*(_DWORD *)(v1 + 12) + 12) = *(_DWORD *)(*(_DWORD *)(v1 + 16) + 48);
    *(_DWORD *)(*(_DWORD *)(v1 + 16) + 48) = *(_DWORD *)(v1 + 12);
  }
  sub_42D4F0(*(_DWORD *)(v1 + 16) + 8);
}

//----- (00413FD9) --------------------------------------------------------
BOOL __stdcall DialogFunc(HWND hDlg, UINT a2, WPARAM a3, LPARAM a4)
{
  BOOL result; // eax@4
  char *v5; // ST1C_4@6
  LPARAM v6; // [sp+Ch] [bp-48h]@6
  LPARAM lParam; // [sp+4Ch] [bp-8h]@4

  if ( a2 == 272 )
  {
    dword_478744 = a4;
    lParam = (LPARAM)aL2conn_1;
    SendDlgItemMessageA(hDlg, 1000, 0xCu, 0, (LPARAM)aL2conn_1);
    SetWindowTextA(hDlg, aL2OdbcConnecti);
    result = 0;
  }
  else
  {
    if ( a2 == 273 && a3 == 1 )
    {
      v5 = (char *)(dword_478744 + 52);
      SendDlgItemMessageA(hDlg, 1000, 0xDu, 0x40u, (LPARAM)&v6);
      strcpy(v5, aFiledsn);
      strcat(v5, (const char *)&v6);
      SendDlgItemMessageA(hDlg, 1001, 0xDu, 0x40u, (LPARAM)&v6);
      strcat(v5, aUid);
      strcat(v5, (const char *)&v6);
      SendDlgItemMessageA(hDlg, 1002, 0xDu, 0x40u, (LPARAM)&v6);
      strcat(v5, aPwd);
      strcat(v5, (const char *)&v6);
      sub_413C76(dword_478744);
      EndDialog(hDlg, 0);
    }
    result = 0;
  }
  return result;
}
// 478744: using guessed type int dword_478744;

//----- (00414123) --------------------------------------------------------
char sub_414123(int a1, char *a2, ...)
{
  char result; // al@4
  SQLCHAR StatementText; // [sp+0h] [bp-200Ch]@1
  SQLINTEGER TextLength; // [sp+2000h] [bp-Ch]@1
  va_list v5; // [sp+2004h] [bp-8h]@1
  __int16 v6; // [sp+2008h] [bp-4h]@1
  va_list va; // [sp+201Ch] [bp+10h]@1

  va_start(va, a2);
  v5 = va;
  TextLength = vsprintf((char *)&StatementText, a2, va);
  v5 = 0;
  v6 = -1;
  if ( TextLength > 0 )
    v6 = SQLExecDirect(*(SQLHSTMT *)a1, &StatementText, TextLength);
  if ( v6 )
  {
    sub_414532((_DWORD *)a1, 3, *(SQLHANDLE *)a1, (int)&StatementText);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (004143F1) --------------------------------------------------------
char __thiscall sub_4143F1(SQLHSTMT *this, bool *a2)
{
  char result; // al@2
  SQLRETURN v3; // [sp+4h] [bp-4h]@1

  v3 = SQLFetch(*this);
  if ( a2 )
  {
    *a2 = v3 == 100;
    result = 1;
  }
  else if ( v3 && v3 != 1 )
  {
    if ( v3 != 100 )
      sub_42DBFC((int)&unk_47FA00, 3, aFetchErrorD, v3);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (00414532) --------------------------------------------------------
void __thiscall sub_414532(_DWORD *this, SQLSMALLINT HandleType, SQLHANDLE Handle, int a4)
{
  _DWORD *v4; // [sp+0h] [bp-11Ch]@1
  SQLSMALLINT TextLength; // [sp+4h] [bp-118h]@1
  SQLCHAR MessageText; // [sp+8h] [bp-114h]@1
  SQLINTEGER NativeError; // [sp+108h] [bp-14h]@1
  SQLCHAR Sqlstate; // [sp+10Ch] [bp-10h]@1
  __int16 v9; // [sp+118h] [bp-4h]@1

  v4 = this;
  v9 = SQLGetDiagRec(HandleType, Handle, 1, &Sqlstate, &NativeError, &MessageText, 256, &TextLength);
  if ( !v9 )
  {
    if ( a4 )
      sub_42DBFC((int)&unk_47FA00, 3, aSqlS, a4);
    sub_42DBFC((int)&unk_47FA00, 3, aSS, &Sqlstate, &MessageText);
    if ( !strcmp((const char *)&Sqlstate, a08s01) )
    {
      sub_42D4B5(v4[4] + 8);
      if ( !*(_DWORD *)(v4[4] + 312) && !*(_DWORD *)v4[3] )
      {
        (*(void (__thiscall **)(_DWORD, signed int, signed int))(*(_DWORD *)v4[4] + 12))(v4[4], 30000, 1);
        *(_DWORD *)(v4[4] + 312) = 1;
      }
      sub_42D4F0(v4[4] + 8);
    }
  }
}

//----- (00414647) --------------------------------------------------------
int __stdcall sub_414647(SQLSMALLINT HandleType, SQLHANDLE Handle, int a3)
{
  int result; // eax@1
  SQLSMALLINT TextLength; // [sp+4h] [bp-114h]@1
  SQLCHAR MessageText; // [sp+8h] [bp-110h]@1
  SQLINTEGER NativeError; // [sp+108h] [bp-10h]@1
  SQLCHAR Sqlstate; // [sp+10Ch] [bp-Ch]@1

  result = SQLGetDiagRec(HandleType, Handle, 1, &Sqlstate, &NativeError, &MessageText, 256, &TextLength);
  if ( !(_WORD)result )
  {
    result = strcmp((const char *)&Sqlstate, a23000);
    if ( result )
    {
      if ( a3 )
        sub_42DBFC((int)&unk_47FA00, 3, aSqlS_0, a3);
      result = sub_42DBFC((int)&unk_47FA00, 3, aSS_0, &Sqlstate, &MessageText);
    }
  }
  return result;
}

//----- (004146F6) --------------------------------------------------------
SQLRETURN __thiscall sub_4146F6(int this, SQLPOINTER TargetValue)
{
  SQLUSMALLINT v2; // ST04_2@1
  void *v3; // ST00_4@1

  v2 = *(_WORD *)(this + 4);
  v3 = *(void **)this;
  ++*(_DWORD *)(this + 4);
  return SQLBindCol(v3, v2, -6, TargetValue, 1, 0);
}

//----- (00414739) --------------------------------------------------------
SQLRETURN __thiscall sub_414739(int this, SQLPOINTER TargetValue)
{
  SQLUSMALLINT v2; // ST04_2@1
  void *v3; // ST00_4@1

  v2 = *(_WORD *)(this + 4);
  v3 = *(void **)this;
  ++*(_DWORD *)(this + 4);
  return SQLBindCol(v3, v2, -6, TargetValue, 1, 0);
}

//----- (0041477C) --------------------------------------------------------
SQLRETURN __thiscall sub_41477C(int this, SQLPOINTER TargetValue, SQLINTEGER BufferLength)
{
  SQLUSMALLINT v3; // ST04_2@1
  void *v4; // ST00_4@1

  v3 = *(_WORD *)(this + 4);
  v4 = *(void **)this;
  ++*(_DWORD *)(this + 4);
  return SQLBindCol(v4, v3, 1, TargetValue, BufferLength, 0);
}

//----- (00414804) --------------------------------------------------------
SQLRETURN __thiscall sub_414804(int this, SQLPOINTER TargetValue)
{
  SQLUSMALLINT v2; // ST04_2@1
  void *v3; // ST00_4@1

  v2 = *(_WORD *)(this + 4);
  v3 = *(void **)this;
  ++*(_DWORD *)(this + 4);
  return SQLBindCol(v3, v2, 4, TargetValue, 4, 0);
}

//----- (00414A7B) --------------------------------------------------------
SQLRETURN __thiscall sub_414A7B(int this)
{
  SQLHSTMT *v1; // ST08_4@1

  v1 = (SQLHSTMT *)this;
  *(_DWORD *)(this + 4) = 1;
  *(_DWORD *)(this + 8) = 1;
  SQLFreeStmt(*(SQLHSTMT *)this, 2u);
  return SQLFreeStmt(*v1, 0);
}

//----- (00414AC3) --------------------------------------------------------
int sub_414AC3()
{
  return atexit(sub_402150);
}

//----- (00414AF0) --------------------------------------------------------
void __stdcall sub_414AF0(int a1, int a2, int a3)
{
  ;
}

//----- (00414B00) --------------------------------------------------------
void *__thiscall sub_414B00(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_41346F((int)this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (00414B30) --------------------------------------------------------
int __cdecl sub_414B30(_BYTE *a1, int a2)
{
  int v2; // eax@1

  v2 = a2;
  LOBYTE(v2) = a2 & 0xF8;
  return sub_414B49(a1, v2, 1);
}

//----- (00414B49) --------------------------------------------------------
int __cdecl sub_414B49(_BYTE *a1, int a2, int a3)
{
  int result; // eax@1
  _BYTE *v4; // [sp+0h] [bp-4h]@1

  result = (int)a1;
  v4 = a1;
  while ( a2 > 0 )
  {
    if ( a3 )
      result = sub_414B9B(v4, v4);
    else
      result = sub_4154CF(v4, v4);
    a2 -= 8;
    v4 += 8;
  }
  return result;
}

//----- (00414B9B) --------------------------------------------------------
int __cdecl sub_414B9B(_BYTE *a1, _BYTE *a2)
{
  char v3; // [sp+0h] [bp-9Ch]@4
  char v4; // [sp+1h] [bp-9Bh]@4
  char v5; // [sp+2h] [bp-9Ah]@4
  char v6; // [sp+3h] [bp-99h]@4
  char v7; // [sp+4h] [bp-98h]@4
  char v8; // [sp+5h] [bp-97h]@4
  char v9; // [sp+6h] [bp-96h]@4
  char v10; // [sp+7h] [bp-95h]@4
  int i; // [sp+8h] [bp-94h]@1
  char v12[8]; // [sp+Ch] [bp-90h]@1
  char v13[120]; // [sp+14h] [bp-88h]@3
  char v14; // [sp+8Ch] [bp-10h]@4
  char v15; // [sp+8Dh] [bp-Fh]@4
  char v16; // [sp+8Eh] [bp-Eh]@4
  char v17; // [sp+8Fh] [bp-Dh]@4
  char v18; // [sp+90h] [bp-Ch]@4
  char v19; // [sp+91h] [bp-Bh]@4
  char v20; // [sp+92h] [bp-Ah]@4
  char v21; // [sp+93h] [bp-9h]@4
  char *v22; // [sp+94h] [bp-8h]@4
  int *v23; // [sp+98h] [bp-4h]@4

  sub_414D1E(a1, (int)&unk_47D7BC, v12);
  for ( i = 0; i < 16; ++i )
    sub_414E16(i, (int)&v12[8 * i], &v13[8 * i]);
  v3 = v18;
  v4 = v19;
  v5 = v20;
  v6 = v21;
  v7 = v14;
  v8 = v15;
  v9 = v16;
  v10 = v17;
  v23 = &i;
  v22 = &v18;
  return sub_414D1E(&v3, (int)&unk_47E01C, a2);
}
// 414B9B: using guessed type char var_90[8];
// 414B9B: using guessed type char var_88[120];

//----- (00414D1E) --------------------------------------------------------
int __cdecl sub_414D1E(_BYTE *a1, int a2, _BYTE *a3)
{
  int result; // eax@1
  _BYTE *v4; // [sp+0h] [bp-18h]@4
  signed int v5; // [sp+4h] [bp-14h]@4
  signed int v6; // [sp+8h] [bp-10h]@1
  signed int i; // [sp+8h] [bp-10h]@6
  _BYTE *v8; // [sp+Ch] [bp-Ch]@1
  _BYTE *v9; // [sp+Ch] [bp-Ch]@6
  _BYTE *v10; // [sp+10h] [bp-8h]@6
  _BYTE *v11; // [sp+14h] [bp-4h]@6

  v6 = 0;
  result = (int)a3;
  v8 = a3;
  while ( v6 < 8 )
  {
    *v8 = 0;
    result = (int)(v8++ + 1);
    ++v6;
  }
  v4 = a1;
  v5 = 0;
  while ( v5 < 16 )
  {
    v9 = a3;
    v11 = (_BYTE *)((v5 << 7) + a2 + 8 * (((signed int)*v4 >> 4) & 0xF));
    v10 = (_BYTE *)(((v5 + 1) << 7) + a2 + 8 * (*v4 & 0xF));
    for ( i = 0; i < 8; ++i )
      *v9++ |= *v10++ | *v11++;
    v5 += 2;
    result = (int)(v4++ + 1);
  }
  return result;
}

//----- (00414E16) --------------------------------------------------------
int __cdecl sub_414E16(int a1, int a2, _BYTE *a3)
{
  char v4; // [sp+4h] [bp-Ch]@1
  _BYTE *v5; // [sp+8h] [bp-8h]@1
  char *v6; // [sp+Ch] [bp-4h]@1

  v5 = a3;
  sub_414F77(a2 + 4, a1, (int)&v4);
  *v5++ = *(_BYTE *)(a2 + 4);
  *v5++ = *(_BYTE *)(a2 + 5);
  *v5++ = *(_BYTE *)(a2 + 6);
  *v5++ = *(_BYTE *)(a2 + 7);
  v6 = &v4;
  *v5++ = v4 ^ *(_BYTE *)a2;
  *v5++ = *++v6 ^ *(_BYTE *)(a2 + 1);
  *v5 = *++v6 ^ *(_BYTE *)(a2 + 2);
  *++v5 = v6[1] ^ *(_BYTE *)(a2 + 3);
  return (int)(v5 + 1);
}

//----- (00414F77) --------------------------------------------------------
int __cdecl sub_414F77(int a1, int a2, int a3)
{
  char v4; // [sp+0h] [bp-20h]@1
  char v5; // [sp+4h] [bp-1Ch]@1
  char *v6; // [sp+Ch] [bp-14h]@1
  char *v7; // [sp+10h] [bp-10h]@1
  char *v8; // [sp+14h] [bp-Ch]@1
  char v9; // [sp+18h] [bp-8h]@1

  v6 = &byte_47DFBC[6 * a2];
  v8 = &v5;
  v7 = &v9;
  sub_415201(a1, (int)&v5);
  *v7++ = *v6++ ^ *v8;
  *v7++ = *v6 ^ *++v8;
  *v7++ = *++v6 ^ *++v8;
  *v7++ = *++v6 ^ *++v8;
  *v7++ = *++v6 ^ *++v8;
  *v7++ = *++v6 ^ *++v8;
  ++v6;
  ++v8;
  sub_4153A3((int)&v9, (int)&v4);
  return sub_4150DF(&v4, a3);
}

//----- (004150DF) --------------------------------------------------------
int __cdecl sub_4150DF(_BYTE *a1, int a2)
{
  int result; // eax@1
  char *v3; // ST0C_4@3
  _BYTE *v4; // [sp+0h] [bp-10h]@1
  signed int v5; // [sp+4h] [bp-Ch]@1

  *(_BYTE *)a2 = 0;
  *(_BYTE *)(a2 + 1) = 0;
  *(_BYTE *)(a2 + 2) = 0;
  *(_BYTE *)(a2 + 3) = 0;
  result = (int)a1;
  v4 = a1;
  v5 = 0;
  while ( v5 < 4 )
  {
    v3 = &byte_47874C[1024 * v5] + 4 * *v4;
    *(_BYTE *)a2 |= *v3++;
    *(_BYTE *)(a2 + 1) |= *v3++;
    *(_BYTE *)(a2 + 2) |= *v3++;
    *(_BYTE *)(a2 + 3) |= *v3;
    result = (int)(v3 + 1);
    ++v5;
    ++v4;
  }
  return result;
}

//----- (00415201) --------------------------------------------------------
int __cdecl sub_415201(int a1, int a2)
{
  char v2; // ST00_1@1
  char v3; // ST14_1@1
  char v4; // ST0C_1@1
  char v5; // ST08_1@1
  int v6; // ST10_4@1

  v2 = *(_BYTE *)a1;
  v3 = *(_BYTE *)(a1 + 1);
  v4 = *(_BYTE *)(a1 + 2);
  v5 = *(_BYTE *)(a1 + 3);
  *(_BYTE *)a2 = ((v2 & 0x18) >> 3) | ((v2 & 0xF8) >> 1) | ((v5 & 1) << 7);
  *(_BYTE *)(a2 + 1) = ((v3 & 0xE0) >> 5) | 8 * (v2 & 1) | ((v3 & 0x80) >> 3) | 32 * (v2 & 7);
  *(_BYTE *)(a2 + 2) = ((v4 & 0x80) >> 7) | 2 * (v3 & 0x1F) | 8 * (v3 & 0x18);
  *(_BYTE *)(a2 + 3) = ((v4 & 0x18) >> 3) | ((v4 & 0xF8) >> 1) | ((v3 & 1) << 7);
  v6 = a2 + 4;
  *(_BYTE *)v6 = ((v5 & 0xE0) >> 5) | 8 * (v4 & 1) | ((v5 & 0x80) >> 3) | 32 * (v4 & 7);
  *(_BYTE *)(v6 + 1) = ((v2 & 0x80) >> 7) | 2 * (v5 & 0x1F) | 8 * (v5 & 0x18);
  return a2 + 6;
}

//----- (004153A3) --------------------------------------------------------
int __cdecl sub_4153A3(int a1, int a2)
{
  signed int v2; // ST10_4@1
  unsigned __int8 v3; // ST0C_1@1
  __int16 v4; // ST08_2@1
  signed int v5; // ST04_4@1
  unsigned __int8 v6; // ST00_1@1

  v2 = *(_BYTE *)(a1 + 1);
  v3 = *(_BYTE *)(a1 + 2);
  v4 = *(_BYTE *)(a1 + 3);
  v5 = *(_BYTE *)(a1 + 4);
  v6 = *(_BYTE *)(a1 + 5);
  *(_BYTE *)a2 = byte_47974C[((v2 >> 4) & 0xF | (unsigned __int16)(16 * *(_BYTE *)a1)) & 0xFFF];
  *(_BYTE *)(a2 + 1) = byte_47A74C[(v3 | (unsigned __int16)((_WORD)v2 << 8)) & 0xFFF];
  *(_BYTE *)(a2 + 2) = byte_47B74C[((v5 >> 4) & 0xF | (unsigned __int16)(16 * v4)) & 0xFFF];
  *(_BYTE *)(a2 + 3) = byte_47C74C[(v6 | (unsigned __int16)((_WORD)v5 << 8)) & 0xFFF];
  return a2 + 4;
}

//----- (004154CF) --------------------------------------------------------
int __cdecl sub_4154CF(_BYTE *a1, _BYTE *a2)
{
  char v3; // [sp+0h] [bp-9Ch]@4
  char v4; // [sp+1h] [bp-9Bh]@4
  char v5; // [sp+2h] [bp-9Ah]@4
  char v6; // [sp+3h] [bp-99h]@4
  char v7; // [sp+4h] [bp-98h]@4
  char v8; // [sp+5h] [bp-97h]@4
  char v9; // [sp+6h] [bp-96h]@4
  char v10; // [sp+7h] [bp-95h]@4
  int i; // [sp+8h] [bp-94h]@1
  char v12[8]; // [sp+Ch] [bp-90h]@1
  char v13[120]; // [sp+14h] [bp-88h]@3
  char v14; // [sp+8Ch] [bp-10h]@4
  char v15; // [sp+8Dh] [bp-Fh]@4
  char v16; // [sp+8Eh] [bp-Eh]@4
  char v17; // [sp+8Fh] [bp-Dh]@4
  char v18; // [sp+90h] [bp-Ch]@4
  char v19; // [sp+91h] [bp-Bh]@4
  char v20; // [sp+92h] [bp-Ah]@4
  char v21; // [sp+93h] [bp-9h]@4
  char *v22; // [sp+94h] [bp-8h]@4
  int *v23; // [sp+98h] [bp-4h]@4

  sub_414D1E(a1, (int)&unk_47D7BC, v12);
  for ( i = 0; i < 16; ++i )
    sub_414E16(15 - i, (int)&v12[8 * i], &v13[8 * i]);
  v3 = v18;
  v4 = v19;
  v5 = v20;
  v6 = v21;
  v7 = v14;
  v8 = v15;
  v9 = v16;
  v10 = v17;
  v23 = &i;
  v22 = &v18;
  return sub_414D1E(&v3, (int)&unk_47E01C, a2);
}
// 4154CF: using guessed type char var_90[8];
// 4154CF: using guessed type char var_88[120];

//----- (00415657) --------------------------------------------------------
int __cdecl sub_415657(_BYTE *a1, int a2)
{
  int v2; // eax@1

  v2 = a2;
  LOBYTE(v2) = a2 & 0xF8;
  return sub_414B49(a1, v2, 0);
}

//----- (00415670) --------------------------------------------------------
int __cdecl sub_415670(_BYTE *a1)
{
  signed int i; // [sp+0h] [bp-10h]@1
  char v3[8]; // [sp+8h] [bp-8h]@1

  memset(v3, 0, 8u);
  for ( i = 0; *a1 && i < 40; ++i )
    v3[i % 8] ^= *a1++;
  sub_415AD1((int)&unk_47D7BC, (int)&unk_46A8FC);
  sub_415AD1((int)&unk_47E01C, (int)&unk_46A93C);
  sub_4157F0((int)v3);
  sub_415727();
  return sub_415984();
}
// 415670: using guessed type char var_8[8];

//----- (00415727) --------------------------------------------------------
void sub_415727()
{
  char v0; // bl@5
  signed int j; // [sp+4h] [bp-8h]@3
  signed int i; // [sp+8h] [bp-4h]@1

  for ( i = 0; i < 4; ++i )
  {
    for ( j = 0; j < 4096; ++j )
    {
      v0 = 16 * sub_4157B0(2 * i, j >> 6);
      *(&byte_47974C[4096 * i] + j) = sub_4157B0(2 * i + 1, j & 0x3F) & 0xF | v0;
    }
  }
}

//----- (004157B0) --------------------------------------------------------
int __cdecl sub_4157B0(int a1, char a2)
{
  return *(&byte_46A9F4[64 * a1] + 16 * (a2 & 1 | ((a2 & 0x20) >> 4)) + ((a2 & 0x1F) >> 1));
}

//----- (004157F0) --------------------------------------------------------
int __cdecl sub_4157F0(int a1)
{
  int result; // eax@3
  int v2; // eax@14
  int v3; // [sp+0h] [bp-14h]@15
  int v4; // [sp+8h] [bp-Ch]@14
  signed int i; // [sp+Ch] [bp-8h]@1
  signed int k; // [sp+Ch] [bp-8h]@6
  signed int m; // [sp+Ch] [bp-8h]@12
  signed int n; // [sp+Ch] [bp-8h]@18
  signed int j; // [sp+10h] [bp-4h]@4
  signed int l; // [sp+10h] [bp-4h]@10

  for ( i = 0; i < 56; ++i )
  {
    byte_47D74C[i] = (*(_DWORD *)&dword_46AC14[4 * ((byte_46A97C[i] - 1) & 7)] & *(_BYTE *)(a1
                                                                                          + ((byte_46A97C[i] - 1) >> 3))) != 0;
    result = i + 1;
  }
  for ( j = 0; j < 16; ++j )
  {
    for ( k = 0; k < 6; ++k )
      *(&byte_47DFBC[6 * j] + k) = 0;
    result = j + 1;
  }
  for ( l = 0; l < 16; ++l )
  {
    for ( m = 0; m < 56; ++m )
    {
      v4 = byte_46A9B4[l] + m;
      v2 = m < 28;
      LOBYTE(v2) = m >= 28;
      --v2;
      LOBYTE(v2) = v2 & 0xE4;
      if ( v4 >= v2 + 56 )
        v3 = v4 - 28;
      else
        v3 = byte_46A9B4[l] + m;
      result = m;
      byte_47D784[m] = byte_47D74C[v3];
    }
    for ( n = 0; n < 48; ++n )
    {
      if ( byte_47D783[byte_46A9C4[n]] )
        *(&byte_47DFBC[6 * l] + (n >> 3)) |= dword_46AC14[4 * (n & 7)];
      result = n + 1;
    }
  }
  return result;
}

//----- (00415984) --------------------------------------------------------
int sub_415984()
{
  int result; // eax@9
  signed int v1; // [sp+8h] [bp-10h]@17
  signed int k; // [sp+Ch] [bp-Ch]@5
  signed int n; // [sp+Ch] [bp-Ch]@14
  signed int j; // [sp+10h] [bp-8h]@3
  signed int m; // [sp+10h] [bp-8h]@12
  signed int i; // [sp+14h] [bp-4h]@1
  signed int l; // [sp+14h] [bp-4h]@10

  for ( i = 0; i < 4; ++i )
  {
    for ( j = 0; j < 256; ++j )
    {
      for ( k = 0; k < 4; ++k )
        *(&byte_47874C[1024 * i] + 4 * j + k) = 0;
    }
    result = i + 1;
  }
  for ( l = 0; l < 4; ++l )
  {
    for ( m = 0; m < 256; ++m )
    {
      for ( n = 0; n < 32; ++n )
      {
        v1 = byte_46ABF4[n] - 1;
        if ( v1 >> 3 == l && *(_DWORD *)&dword_46AC14[4 * (v1 & 7)] & m )
          *(&byte_47874C[1024 * l] + 4 * m + (n >> 3)) |= dword_46AC14[4 * (n & 7)];
      }
    }
    result = l + 1;
  }
  return result;
}

//----- (00415AD1) --------------------------------------------------------
int __cdecl sub_415AD1(int a1, int a2)
{
  int result; // eax@9
  signed int v3; // [sp+8h] [bp-10h]@17
  signed int k; // [sp+Ch] [bp-Ch]@5
  signed int n; // [sp+Ch] [bp-Ch]@14
  signed int j; // [sp+10h] [bp-8h]@3
  signed int m; // [sp+10h] [bp-8h]@12
  signed int i; // [sp+14h] [bp-4h]@1
  signed int l; // [sp+14h] [bp-4h]@10

  for ( i = 0; i < 16; ++i )
  {
    for ( j = 0; j < 16; ++j )
    {
      for ( k = 0; k < 8; ++k )
        *(_BYTE *)((i << 7) + a1 + k + 8 * j) = 0;
    }
    result = i + 1;
  }
  for ( l = 0; l < 16; ++l )
  {
    for ( m = 0; m < 16; ++m )
    {
      for ( n = 0; n < 64; ++n )
      {
        v3 = *(_BYTE *)(n + a2) - 1;
        if ( v3 >> 2 == l && dword_46AC34[v3 & 3] & m )
          *(_BYTE *)((l << 7) + a1 + 8 * m + (n >> 3)) |= dword_46AC14[4 * (n & 7)];
        result = n + 1;
      }
    }
  }
  return result;
}
// 46AC34: using guessed type int dword_46AC34[];

//----- (00415C2F) --------------------------------------------------------
void *sub_415C2F()
{
  return sub_4176C1(&unk_47EA4C);
}

//----- (00415C3E) --------------------------------------------------------
int sub_415C3E()
{
  return atexit(sub_415C50);
}

//----- (00415C50) --------------------------------------------------------
void __cdecl sub_415C50()
{
  sub_417788(&unk_47EA4C);
}

//----- (00415CD1) --------------------------------------------------------
int __cdecl sub_415CD1(LPCVOID lpAddress, LPSTR lpFilename, DWORD nSize, int a4, int a5)
{
  int result; // eax@2
  int v6; // [sp+0h] [bp-40h]@8
  unsigned int v7; // [sp+4h] [bp-3Ch]@7
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+Ch] [bp-34h]@1
  unsigned int v9; // [sp+28h] [bp-18h]@5
  unsigned int v10; // [sp+2Ch] [bp-14h]@5
  HMODULE v11; // [sp+30h] [bp-10h]@5
  HMODULE v12; // [sp+34h] [bp-Ch]@5
  HMODULE v13; // [sp+38h] [bp-8h]@5
  HMODULE hModule; // [sp+3Ch] [bp-4h]@3

  if ( VirtualQuery(lpAddress, &Buffer, 0x1Cu) )
  {
    hModule = (HMODULE)Buffer.AllocationBase;
    if ( GetModuleFileNameA((HMODULE)Buffer.AllocationBase, lpFilename, nSize) )
    {
      v13 = hModule;
      v12 = (HMODULE)((char *)hModule + *((_DWORD *)hModule + 15));
      v11 = (HMODULE)((char *)v12 + *((_WORD *)v12 + 10) + 24);
      v9 = (_BYTE *)lpAddress - (_BYTE *)hModule;
      v10 = 0;
      while ( v10 < *((_WORD *)v12 + 3) )
      {
        v7 = *((_DWORD *)v11 + 3);
        if ( *((_DWORD *)v11 + 4) <= *((_DWORD *)v11 + 2) )
          v6 = *((_DWORD *)v11 + 2);
        else
          v6 = *((_DWORD *)v11 + 4);
        if ( v9 >= v7 && v9 <= v6 + v7 )
        {
          *(_DWORD *)a4 = v10 + 1;
          *(_DWORD *)a5 = v9 - v7;
          return 1;
        }
        ++v10;
        v11 += 10;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00415DD8) --------------------------------------------------------
BOOL __cdecl sub_415DD8(HANDLE hFile, PVOID ContextRecord)
{
  HANDLE v2; // ST08_4@2
  HANDLE v3; // eax@2
  BOOL result; // eax@2
  DWORD v5; // ST18_4@4
  HANDLE v6; // eax@4
  signed int i; // [sp+Ch] [bp-514h]@9
  CHAR Filename; // [sp+10h] [bp-510h]@7
  DWORD v9; // [sp+114h] [bp-40Ch]@9
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+118h] [bp-408h]@6
  char v11[4]; // [sp+134h] [bp-3ECh]@6
  int v12; // [sp+138h] [bp-3E8h]@9
  CHAR v13; // [sp+13Ch] [bp-3E4h]@9
  char v14; // [sp+13Dh] [bp-3E3h]@9
  __int16 v15; // [sp+23Dh] [bp-2E3h]@9
  char v16; // [sp+23Fh] [bp-2E1h]@9
  char v17[4]; // [sp+240h] [bp-2E0h]@9
  PIMAGEHLP_SYMBOL Symbol; // [sp+244h] [bp-2DCh]@4
  DWORD pdwDisplacement; // [sp+248h] [bp-2D8h]@4
  char v20; // [sp+24Ch] [bp-2D4h]@4
  signed int v21; // [sp+25Ch] [bp-2C4h]@4
  struct _tagSTACKFRAME StackFrame; // [sp+464h] [bp-BCh]@1
  CPPEH_RECORD ms_exc; // [sp+508h] [bp-18h]@11

  sub_41612B(hFile, aCallStackInfor);
  SymSetOptions(4u);
  memset(&StackFrame, 0, 0xA4u);
  StackFrame.AddrPC.Offset = *((_DWORD *)ContextRecord + 46);
  StackFrame.AddrPC.Mode = 3;
  StackFrame.AddrStack.Offset = *((_DWORD *)ContextRecord + 49);
  StackFrame.AddrStack.Mode = 3;
  StackFrame.AddrFrame.Offset = *((_DWORD *)ContextRecord + 45);
  StackFrame.AddrFrame.Mode = 3;
  while ( 1 )
  {
    v2 = GetCurrentThread();
    v3 = GetCurrentProcess();
    result = StackWalk(0x14Cu, v3, v2, &StackFrame, ContextRecord, 0, SymFunctionTableAccess, SymGetModuleBase, 0);
    if ( !result || !StackFrame.AddrFrame.Offset )
      break;
    sub_41612B(hFile, a08x08x, StackFrame.AddrPC.Offset, StackFrame.AddrFrame.Offset);
    Symbol = (PIMAGEHLP_SYMBOL)&v20;
    *(_DWORD *)&v20 = 536;
    v21 = 512;
    pdwDisplacement = 0;
    v5 = StackFrame.AddrPC.Offset;
    v6 = GetCurrentProcess();
    if ( SymGetSymFromAddr(v6, v5, &pdwDisplacement, (PIMAGEHLP_SYMBOL)&v20) )
      sub_41612B(hFile, aSX, Symbol->Name, pdwDisplacement);
    *(_DWORD *)v11 = aUnknown;
    if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu)
      && GetModuleFileNameA((HMODULE)Buffer.AllocationBase, &Filename, 0x104u) )
    {
      *(_DWORD *)v11 = sub_41618B(&Filename);
    }
    v13 = byte_47EA54;
    memset(&v14, 0, 0x100u);
    v15 = 0;
    v16 = 0;
    *(_DWORD *)v17 = 0;
    v12 = 0;
    sub_415CD1((LPCVOID)StackFrame.AddrPC.Offset, &v13, 0x104u, (int)v17, (int)&v12);
    sub_41612B(hFile, a04x08xS, *(_DWORD *)v17, v12, &v13);
    sub_41612B(
      hFile,
      aParams08x08x08,
      StackFrame.Params[0],
      StackFrame.Params[1],
      StackFrame.Params[2],
      StackFrame.Params[3]);
    sub_41612B(hFile, aSBytesAtCsEip, *(_DWORD *)v11);
    v9 = StackFrame.AddrPC.Offset;
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      sub_41612B(hFile, a02x, *(_BYTE *)(i + v9));
      ms_exc.registration.TryLevel = -1;
    }
    sub_41612B(hFile, asc_46B030);
  }
  return result;
}
// 47EA54: using guessed type char byte_47EA54;

//----- (0041612B) --------------------------------------------------------
BOOL sub_41612B(HANDLE hFile, LPCSTR a2, ...)
{
  int v2; // eax@1
  DWORD NumberOfBytesWritten; // [sp+0h] [bp-7D8h]@1
  va_list arglist; // [sp+4h] [bp-7D4h]@1
  CHAR String; // [sp+8h] [bp-7D0h]@1
  va_list va; // [sp+7E8h] [bp+10h]@1

  va_start(va, a2);
  wvsprintfA(&String, a2, va);
  arglist = 0;
  v2 = lstrlenA(&String);
  return WriteFile(hFile, &String, v2, &NumberOfBytesWritten, 0);
}

//----- (0041618B) --------------------------------------------------------
char *__cdecl sub_41618B(char *a1)
{
  char *v2; // [sp+0h] [bp-4h]@1
  char *v3; // [sp+0h] [bp-4h]@2

  v2 = strrchr(a1, 92);
  if ( v2 )
    v3 = v2 + 1;
  else
    v3 = a1;
  return v3;
}

//----- (004161BE) --------------------------------------------------------
LPVOID __cdecl sub_4161BE(HANDLE hFile, int a2)
{
  LPVOID result; // eax@5
  signed int i; // [sp+Ch] [bp-138h]@2
  _BYTE *v4; // [sp+10h] [bp-134h]@2
  int v5; // [sp+14h] [bp-130h]@2
  CHAR Filename; // [sp+18h] [bp-12Ch]@2
  char v7; // [sp+19h] [bp-12Bh]@2
  __int16 v8; // [sp+119h] [bp-2Bh]@2
  char v9; // [sp+11Bh] [bp-29h]@2
  int v10; // [sp+11Ch] [bp-28h]@2
  LPVOID v11; // [sp+120h] [bp-24h]@5
  LPCVOID lpAddress; // [sp+124h] [bp-20h]@1
  LPVOID lp; // [sp+128h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+12Ch] [bp-18h]@4

  sub_41612B(hFile, aIntelCallStack);
  lpAddress = *(LPCVOID *)(a2 + 184);
  lp = *(LPVOID *)(a2 + 180);
  do
  {
    Filename = byte_47EA58;
    memset(&v7, 0, 0x100u);
    v8 = 0;
    v9 = 0;
    v10 = 0;
    v5 = 0;
    sub_415CD1(lpAddress, &Filename, 0x104u, (int)&v10, (int)&v5);
    sub_41612B(hFile, a08x08x04x08xS, lpAddress, lp, v10, v5, &Filename);
    sub_41612B(hFile, aBytesAtCsEip);
    v4 = lpAddress;
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      sub_41612B(hFile, a02x_0, v4[i]);
      ms_exc.registration.TryLevel = -1;
    }
    sub_41612B(hFile, asc_46B098);
    lpAddress = (LPCVOID)*((_DWORD *)lp + 1);
    v11 = lp;
    result = lp;
    lp = *(LPVOID *)lp;
    if ( (unsigned __int8)lp & 3 )
      break;
    result = lp;
    if ( lp <= v11 )
      break;
    result = (LPVOID)IsBadWritePtr(lp, 8u);
  }
  while ( !result );
  return result;
}
// 47EA58: using guessed type char byte_47EA58;

//----- (00416386) --------------------------------------------------------
LONG __thiscall TopLevelExceptionFilter(void *this, struct _EXCEPTION_POINTERS *ExceptionInfo)
{
  LONG result; // eax@3
  void *v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+Ch] [bp-4h]@7

  v3 = this;
  if ( dword_47E948 )
  {
    if ( lpTopLevelExceptionFilter )
      result = lpTopLevelExceptionFilter(ExceptionInfo);
    else
      result = 0;
  }
  else
  {
    dword_47E948 = 1;
    if ( !dword_47E820 && ExceptionInfo->ExceptionRecord->ExceptionCode != -536870911 )
    {
      sub_417CA0(&v3);
      v4 = 0;
      if ( !cp )
        DeleteFileA(&FileName);
      sub_4169E0((int)ExceptionInfo);
      if ( cp && sub_416486(cp, (int)aServer_ncsoft_, aDarkangel_ncso, &FileName) )
        DeleteFileA(&FileName);
      v4 = -1;
      sub_417CC0();
    }
    if ( lpTopLevelExceptionFilter )
      result = lpTopLevelExceptionFilter(ExceptionInfo);
    else
      result = 0;
  }
  return result;
}
// 47E820: using guessed type int dword_47E820;
// 47E948: using guessed type int dword_47E948;

//----- (00416486) --------------------------------------------------------
int __cdecl sub_416486(char *cp, int a2, char *a3, LPCSTR lpFileName)
{
  int v5; // eax@14
  int v6; // eax@15
  int v7; // eax@18
  int v8; // eax@20
  int v9; // eax@21
  int v10; // eax@23
  int v11; // eax@24
  int namelen; // [sp+0h] [bp-9D4h]@21
  struct sockaddr v13; // [sp+4h] [bp-9D0h]@21
  struct hostent *v14; // [sp+14h] [bp-9C0h]@11
  char *v15; // [sp+18h] [bp-9BCh]@12
  SOCKET s; // [sp+1Ch] [bp-9B8h]@3
  int v17; // [sp+20h] [bp-9B4h]@1
  struct sockaddr name; // [sp+24h] [bp-9B0h]@7
  char optval[4]; // [sp+34h] [bp-9A0h]@5
  char buf; // [sp+38h] [bp-99Ch]@14
  struct WSAData WSAData; // [sp+838h] [bp-19Ch]@1
  time_t v22; // [sp+9C8h] [bp-Ch]@21
  int v23; // [sp+9CCh] [bp-8h]@14
  int v24; // [sp+9D0h] [bp-4h]@5

  v17 = 0;
  if ( WSAStartup(0x202u, &WSAData) )
    return 0;
  s = socket(2, 1, 0);
  if ( s == -1 )
  {
    WSACleanup();
    return 0;
  }
  *(_DWORD *)optval = 5000;
  v24 = setsockopt(s, 0xFFFF, 4102, optval, 4);
  if ( v24 != -1 )
  {
    *(_DWORD *)optval = 5000;
    v24 = setsockopt(s, 0xFFFF, 4101, optval, 4);
    if ( v24 != -1 )
    {
      name.sa_family = 2;
      *(_DWORD *)&name.sa_data[2] = 0;
      *(_WORD *)&name.sa_data[0] = 0;
      if ( bind(s, &name, 16) != -1 )
      {
        name.sa_family = 2;
        if ( *cp >= 48 && *cp <= 57 )
        {
          *(_DWORD *)&name.sa_data[2] = inet_addr(cp);
LABEL_13:
          *(_WORD *)&name.sa_data[0] = htons(0x19u);
          if ( connect(s, &name, 16) != -1 )
          {
            v23 = recv(s, &buf, 2048, 0);
            v5 = strlen(::buf);
            if ( send(s, ::buf, v5, 0) > 0 )
            {
              v23 = recv(s, &buf, 2048, 0);
              sprintf(aMailFromDarkan, aMailFromS, a2);
              v6 = strlen(aMailFromDarkan);
              if ( send(s, aMailFromDarkan, v6, 0) > 0 )
              {
                v23 = recv(s, &buf, 2048, 0);
                while ( *a3 )
                {
                  sprintf(aRcptToDarkange, aRcptToS, a3);
                  v7 = strlen(aRcptToDarkange);
                  if ( send(s, aRcptToDarkange, v7, 0) <= 0 )
                    goto LABEL_26;
                  v23 = recv(s, &buf, 2048, 0);
                  a3 += strlen(a3) + 1;
                }
                v8 = strlen(aData);
                if ( send(s, aData, v8, 0) > 0 )
                {
                  v23 = recv(s, &buf, 2048, 0);
                  v22 = time(0);
                  memset(&v13, 0, 0x10u);
                  namelen = 16;
                  getsockname(s, &v13, &namelen);
                  v9 = strlen(byte_47E94C);
                  if ( send(s, byte_47E94C, v9, 0) > 0 )
                  {
                    if ( sub_416943(s, lpFileName) )
                    {
                      v10 = strlen(a_);
                      if ( send(s, a_, v10, 0) > 0 )
                      {
                        v23 = recv(s, &buf, 2048, 0);
                        v11 = strlen(aQuit);
                        if ( send(s, aQuit, v11, 0) > 0 )
                        {
                          v23 = recv(s, &buf, 2048, 0);
                          v17 = 1;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
          goto LABEL_26;
        }
        v14 = gethostbyname(cp);
        if ( v14 )
        {
          memcpy(&name.sa_data[2], *(const void **)v14->h_addr_list, v14->h_length);
          v15 = inet_ntoa(*(struct in_addr *)&name.sa_data[2]);
          goto LABEL_13;
        }
      }
    }
  }
LABEL_26:
  closesocket(s);
  s = 0;
  WSACleanup();
  return v17;
}

//----- (00416943) --------------------------------------------------------
char __cdecl sub_416943(SOCKET s, LPCSTR lpFileName)
{
  char result; // al@2
  DWORD NumberOfBytesRead; // [sp+0h] [bp-408h]@3
  HANDLE hFile; // [sp+4h] [bp-404h]@1
  char Buffer; // [sp+8h] [bp-400h]@3

  hFile = CreateFileA(lpFileName, 0x80000000, 0, 0, 3u, 0, 0);
  if ( hFile == (HANDLE)-1 )
  {
    result = 1;
  }
  else
  {
    do
    {
      if ( !ReadFile(hFile, &Buffer, 0x400u, &NumberOfBytesRead, 0) || !NumberOfBytesRead )
      {
        CloseHandle(hFile);
        return 1;
      }
    }
    while ( send(s, &Buffer, NumberOfBytesRead, 0) > 0 );
    result = 0;
  }
  return result;
}

//----- (004169E0) --------------------------------------------------------
void __cdecl sub_4169E0(int a1)
{
  int v1; // ST20_4@3
  int v2; // ST1C_4@3
  int v3; // ST18_4@3
  int v4; // ST14_4@3
  int v5; // ST10_4@3
  int v6; // ST0C_4@3
  DWORD v7; // eax@3
  int v8; // ST20_4@6
  int v9; // ST1C_4@6
  char *v10; // ST18_4@6
  char *v11; // eax@6
  HANDLE v12; // eax@26
  HANDLE v13; // eax@27
  char *v14; // [sp+Ch] [bp-954h]@20
  char *v15; // [sp+14h] [bp-94Ch]@16
  signed int v16; // [sp+18h] [bp-948h]@16
  char v17; // [sp+1Ch] [bp-944h]@16
  char v18; // [sp+1Dh] [bp-943h]@16
  char v19; // [sp+3D2h] [bp-58Eh]@16
  __int16 v20; // [sp+401h] [bp-55Fh]@16
  char v21; // [sp+403h] [bp-55Dh]@16
  char *v22; // [sp+404h] [bp-55Ch]@16
  unsigned int v23; // [sp+408h] [bp-558h]@14
  _DWORD *v24; // [sp+40Ch] [bp-554h]@14
  char *v25; // [sp+410h] [bp-550h]@8
  CHAR v26; // [sp+414h] [bp-54Ch]@10
  int i; // [sp+7FCh] [bp-164h]@11
  CHAR Filename; // [sp+800h] [bp-160h]@4
  int v29; // [sp+904h] [bp-5Ch]@11
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+908h] [bp-58h]@3
  HANDLE hFile; // [sp+924h] [bp-3Ch]@1
  struct _SYSTEMTIME SystemTime; // [sp+928h] [bp-38h]@3
  int v33; // [sp+938h] [bp-28h]@3
  char *v34; // [sp+93Ch] [bp-24h]@3
  int v35; // [sp+940h] [bp-20h]@3
  struct tm *v36; // [sp+944h] [bp-1Ch]@6
  CPPEH_RECORD ms_exc; // [sp+948h] [bp-18h]@13

  hFile = CreateFileA(&FileName, 0x40000000u, 0, 0, 4u, 0x80000080, 0);
  if ( hFile == (HANDLE)-1 )
  {
    OutputDebugStringA(OutputString);
  }
  else
  {
    SetFilePointer(hFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    v1 = SystemTime.wSecond;
    v2 = SystemTime.wMinute;
    v3 = SystemTime.wHour;
    v4 = SystemTime.wDay;
    v5 = SystemTime.wMonth;
    v6 = SystemTime.wYear;
    v7 = GetCurrentThreadId();
    sub_41612B(hFile, aD04d02d02d02d0, v7, v6, v5, v4, v3, v2, v1);
    v33 = *(_DWORD *)a1;
    v35 = *(_DWORD *)(a1 + 4);
    v34 = aUnknown_0;
    if ( VirtualQuery(*(LPCVOID *)(v35 + 184), &Buffer, 0x1Cu)
      && GetModuleFileNameA((HMODULE)Buffer.AllocationBase, &Filename, 0x104u) )
    {
      v34 = sub_41618B(&Filename);
    }
    v8 = *(_DWORD *)(v35 + 184);
    v9 = *(_DWORD *)(v35 + 188);
    v10 = v34;
    v11 = sub_4174C8(*(_DWORD *)v33);
    sub_41612B(hFile, aSInModuleSAt04, v11, v10, v9, v8);
    sub_41612B(hFile, aExceptionHandl);
    v36 = localtime(&dword_47EA50);
    sub_41612B(
      hFile,
      aStartAtDDD02d0,
      v36->tm_year + 1900,
      v36->tm_mon + 1,
      v36->tm_mday,
      v36->tm_hour,
      v36->tm_min,
      v36->tm_sec);
    sub_4173B0(hFile);
    if ( *(_DWORD *)v33 == -1073741819 && *(_DWORD *)(v33 + 16) >= 2u )
    {
      v25 = aReadFrom;
      if ( *(_DWORD *)(v33 + 20) )
        v25 = aWriteTo;
      wsprintfA(&v26, aSLocation08xCa, v25, *(_DWORD *)(v33 + 24));
      sub_41612B(hFile, aS_1, &v26);
    }
    sub_41612B(hFile, asc_46B21C);
    sub_41612B(hFile, aRegisters);
    sub_41612B(
      hFile,
      aEax08xCs04xEip,
      *(_DWORD *)(v35 + 176),
      *(_DWORD *)(v35 + 188),
      *(_DWORD *)(v35 + 184),
      *(_DWORD *)(v35 + 192));
    sub_41612B(
      hFile,
      aEbx08xSs04xEsp,
      *(_DWORD *)(v35 + 164),
      *(_DWORD *)(v35 + 200),
      *(_DWORD *)(v35 + 196),
      *(_DWORD *)(v35 + 180));
    sub_41612B(
      hFile,
      aEcx08xDs04xEsi,
      *(_DWORD *)(v35 + 172),
      *(_DWORD *)(v35 + 152),
      *(_DWORD *)(v35 + 160),
      *(_DWORD *)(v35 + 144));
    sub_41612B(
      hFile,
      aEdx08xEs04xEdi,
      *(_DWORD *)(v35 + 168),
      *(_DWORD *)(v35 + 148),
      *(_DWORD *)(v35 + 156),
      *(_DWORD *)(v35 + 140));
    sub_41612B(hFile, aBytesAtCsEip_0);
    v29 = *(_DWORD *)(v35 + 184);
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      sub_41612B(hFile, a02x_1, *(_BYTE *)(i + v29));
      ms_exc.registration.TryLevel = -1;
    }
    sub_41612B(hFile, aStackDump);
    ms_exc.registration.TryLevel = 1;
    v24 = *(_DWORD **)(v35 + 196);
    v23 = __readfsdword(4);
    if ( v23 > (unsigned int)(v24 + 80) )
      v23 = (unsigned int)(v24 + 80);
    v16 = 0;
    v17 = byte_47EA5C;
    memset(&v18, 0, 0x3E4u);
    v20 = 0;
    v21 = 0;
    v22 = &v19;
    v15 = &v17;
    while ( (unsigned int)(v24 + 1) <= v23 )
    {
      if ( !(v16 % 8) )
        v15 += wsprintfA(v15, a08x, v24);
      v14 = asc_46B300;
      if ( !(++v16 % 8) || (unsigned int)(v24 + 2) > v23 )
        v14 = asc_46B304;
      v15 += wsprintfA(v15, a08xS, *v24, v14);
      ++v24;
      if ( v15 > v22 )
      {
        sub_41612B(hFile, aS_2, &v17);
        v17 = 0;
        v15 = &v17;
      }
    }
    sub_41612B(hFile, aS_3, &v17);
    ms_exc.registration.TryLevel = -1;
    v12 = GetCurrentProcess();
    if ( SymInitialize(v12, 0, 1) )
    {
      sub_415DD8(hFile, (PVOID)v35);
      v13 = GetCurrentProcess();
      SymCleanup(v13);
    }
    else
    {
      sub_4161BE(hFile, v35);
    }
    sub_41703B(hFile);
    CloseHandle(hFile);
  }
}
// 47EA5C: using guessed type char byte_47EA5C;

//----- (0041703B) --------------------------------------------------------
unsigned int __cdecl sub_41703B(HANDLE hFile)
{
  unsigned int result; // eax@2
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+0h] [bp-50h]@3
  unsigned int v3; // [sp+1Ch] [bp-34h]@1
  DWORD v4; // [sp+20h] [bp-30h]@1
  struct _SYSTEM_INFO SystemInfo; // [sp+24h] [bp-2Ch]@1
  unsigned int v6; // [sp+48h] [bp-8h]@1
  HMODULE hModule; // [sp+4Ch] [bp-4h]@1

  sub_41612B(hFile, aModuleListName);
  GetSystemInfo(&SystemInfo);
  v3 = SystemInfo.dwPageSize;
  v4 = 4 * (0x40000000 / SystemInfo.dwPageSize);
  v6 = 0;
  hModule = 0;
  while ( 1 )
  {
    result = v6;
    if ( v6 >= v4 )
      break;
    if ( VirtualQuery((LPCVOID)(v3 * v6), &Buffer, 0x1Cu) )
    {
      if ( Buffer.RegionSize )
      {
        v6 += Buffer.RegionSize / v3;
        if ( Buffer.State == 4096 && Buffer.AllocationBase > hModule )
        {
          hModule = (HMODULE)Buffer.AllocationBase;
          sub_417112(hFile, (HMODULE)Buffer.AllocationBase);
        }
      }
      else
      {
        v6 += 0x10000 / v3;
      }
    }
    else
    {
      v6 += 0x10000 / v3;
    }
  }
  return result;
}

//----- (00417112) --------------------------------------------------------
HMODULE __cdecl sub_417112(HANDLE a1, HMODULE hModule)
{
  HMODULE result; // eax@1
  struct _FILETIME v3; // ST14_8@8
  int v4; // eax@8
  struct _FILETIME LastWriteTime; // [sp+Ch] [bp-198h]@7
  HMODULE v6; // [sp+14h] [bp-190h]@4
  HANDLE hFile; // [sp+18h] [bp-18Ch]@6
  HMODULE v8; // [sp+1Ch] [bp-188h]@2
  CHAR String; // [sp+20h] [bp-184h]@6
  char v10; // [sp+21h] [bp-183h]@6
  __int16 v11; // [sp+81h] [bp-123h]@6
  char v12; // [sp+83h] [bp-121h]@6
  DWORD v13; // [sp+84h] [bp-120h]@6
  CHAR Filename; // [sp+88h] [bp-11Ch]@1
  CPPEH_RECORD ms_exc; // [sp+18Ch] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  result = (HMODULE)GetModuleFileNameA(hModule, &Filename, 0x104u);
  if ( result )
  {
    v8 = hModule;
    result = hModule;
    if ( *(_WORD *)hModule == 23117 )
    {
      result = (HMODULE)((char *)v8 + *((_DWORD *)v8 + 15));
      v6 = (HMODULE)((char *)v8 + *((_DWORD *)v8 + 15));
      if ( *(_DWORD *)v6 == 17744 )
      {
        hFile = CreateFileA(&Filename, 0x80000000, 1u, 0, 3u, 0x80u, 0);
        String = byte_47EA60;
        memset(&v10, 0, 0x60u);
        v11 = 0;
        v12 = 0;
        v13 = 0;
        if ( hFile != (HANDLE)-1 )
        {
          v13 = GetFileSize(hFile, 0);
          if ( GetFileTime(hFile, 0, 0, &LastWriteTime) )
          {
            wsprintfA(&String, aFileDateIs);
            v3 = LastWriteTime;
            v4 = lstrlenA(&String);
            sub_4172E8(&String + v4, v3);
          }
          CloseHandle(hFile);
        }
        result = (HMODULE)sub_41612B(a1, aSLoadedAt0x08x, &Filename, hModule, v13, *((_DWORD *)v6 + 2), &String);
      }
      else
      {
        ms_exc.registration.TryLevel = -1;
      }
    }
    else
    {
      ms_exc.registration.TryLevel = -1;
    }
  }
  return result;
}
// 47EA60: using guessed type char byte_47EA60;

//----- (004172E8) --------------------------------------------------------
int __cdecl sub_4172E8(LPSTR a1, FILETIME FileTime)
{
  int result; // eax@1
  WORD FatTime[2]; // [sp+0h] [bp-8h]@2
  WORD FatDate[2]; // [sp+4h] [bp-4h]@2

  result = FileTimeToLocalFileTime(&FileTime, &FileTime);
  if ( result && (result = FileTimeToDosDateTime(&FileTime, FatDate, FatTime)) != 0 )
    result = wsprintfA(
               a1,
               aDDD02d02d02d,
               ((signed int)FatDate[0] >> 5) & 0xF,
               FatDate[0] & 0x1F,
               ((signed int)FatDate[0] >> 9) + 1980,
               (signed int)FatTime[0] >> 11,
               ((signed int)FatTime[0] >> 5) & 0x3F,
               2 * (FatTime[0] & 0x1F));
  else
    *a1 = 0;
  return result;
}

//----- (004173B0) --------------------------------------------------------
int __cdecl sub_4173B0(HANDLE hFile)
{
  CHAR Buffer; // [sp+0h] [bp-280h]@3
  struct _MEMORYSTATUS v3; // [sp+C8h] [bp-1B8h]@5
  CHAR Filename; // [sp+E8h] [bp-198h]@1
  CHAR v5; // [sp+1ECh] [bp-94h]@1
  struct _SYSTEM_INFO SystemInfo; // [sp+250h] [bp-30h]@5
  struct _FILETIME SystemTimeAsFileTime; // [sp+274h] [bp-Ch]@1
  DWORD pcbBuffer; // [sp+27Ch] [bp-4h]@3

  GetSystemTimeAsFileTime(&SystemTimeAsFileTime);
  sub_4172E8(&v5, SystemTimeAsFileTime);
  sub_41612B(hFile, aErrorOccurredA, &v5);
  if ( !GetModuleFileNameA(0, &Filename, 0x104u) )
    lstrcpyA(&Filename, String2);
  pcbBuffer = 200;
  if ( !GetUserNameA(&Buffer, &pcbBuffer) )
    lstrcpyA(&Buffer, aUnknown_2);
  sub_41612B(hFile, aSRunByS_, &Filename, &Buffer);
  GetSystemInfo(&SystemInfo);
  sub_41612B(hFile, aDProcessorSTyp, SystemInfo.dwNumberOfProcessors, SystemInfo.dwProcessorType);
  v3.dwLength = 32;
  GlobalMemoryStatus(&v3);
  return sub_41612B(hFile, aDMbytesPhysica, (v3.dwTotalPhys + 0xFFFFF) >> 20);
}

//----- (004174C8) --------------------------------------------------------
char *__cdecl sub_4174C8(_DWORD a1)
{
  int v2; // [sp+0h] [bp-C4h]@1
  char *v3; // [sp+4h] [bp-C0h]@1
  int v4; // [sp+8h] [bp-BCh]@1
  char *v5; // [sp+Ch] [bp-B8h]@1
  int v6; // [sp+10h] [bp-B4h]@1
  char *v7; // [sp+14h] [bp-B0h]@1
  int v8; // [sp+18h] [bp-ACh]@1
  char *v9; // [sp+1Ch] [bp-A8h]@1
  int v10; // [sp+20h] [bp-A4h]@1
  char *v11; // [sp+24h] [bp-A0h]@1
  int v12; // [sp+28h] [bp-9Ch]@1
  char *v13; // [sp+2Ch] [bp-98h]@1
  int v14; // [sp+30h] [bp-94h]@1
  char *v15; // [sp+34h] [bp-90h]@1
  int v16; // [sp+38h] [bp-8Ch]@1
  char *v17; // [sp+3Ch] [bp-88h]@1
  int v18; // [sp+40h] [bp-84h]@1
  char *v19; // [sp+44h] [bp-80h]@1
  int v20; // [sp+48h] [bp-7Ch]@1
  char *v21; // [sp+4Ch] [bp-78h]@1
  int v22; // [sp+50h] [bp-74h]@1
  char *v23; // [sp+54h] [bp-70h]@1
  int v24; // [sp+58h] [bp-6Ch]@1
  char *v25; // [sp+5Ch] [bp-68h]@1
  int v26; // [sp+60h] [bp-64h]@1
  char *v27; // [sp+64h] [bp-60h]@1
  int v28; // [sp+68h] [bp-5Ch]@1
  char *v29; // [sp+6Ch] [bp-58h]@1
  int v30; // [sp+70h] [bp-54h]@1
  char *v31; // [sp+74h] [bp-50h]@1
  int v32; // [sp+78h] [bp-4Ch]@1
  char *v33; // [sp+7Ch] [bp-48h]@1
  int v34; // [sp+80h] [bp-44h]@1
  char *v35; // [sp+84h] [bp-40h]@1
  int v36; // [sp+88h] [bp-3Ch]@1
  char *v37; // [sp+8Ch] [bp-38h]@1
  int v38; // [sp+90h] [bp-34h]@1
  char *v39; // [sp+94h] [bp-30h]@1
  int v40; // [sp+98h] [bp-2Ch]@1
  char *v41; // [sp+9Ch] [bp-28h]@1
  int v42; // [sp+A0h] [bp-24h]@1
  char *v43; // [sp+A4h] [bp-20h]@1
  int v44; // [sp+A8h] [bp-1Ch]@1
  char *v45; // [sp+ACh] [bp-18h]@1
  int v46; // [sp+B0h] [bp-14h]@1
  char *v47; // [sp+B4h] [bp-10h]@1
  int v48; // [sp+B8h] [bp-Ch]@1
  char *v49; // [sp+BCh] [bp-8h]@1
  unsigned int i; // [sp+C0h] [bp-4h]@1

  v2 = 1073807365;
  v3 = aAControlC;
  v4 = 1073807368;
  v5 = aAControlBreak;
  v6 = -2147483646;
  v7 = aADatatypeMisal;
  v8 = -2147483645;
  v9 = aABreakpoint;
  v10 = -1073741819;
  v11 = aAnAccessViolat;
  v12 = -1073741818;
  v13 = aAnInPageError;
  v14 = -1073741801;
  v15 = aANoMemory;
  v16 = -1073741795;
  v17 = aAnIllegalInstr;
  v18 = -1073741787;
  v19 = aANoncontinuabl;
  v20 = -1073741786;
  v21 = aAnInvalidDispo;
  v22 = -1073741684;
  v23 = aAArrayBoundsEx;
  v24 = -1073741683;
  v25 = aAFloatDenormal;
  v26 = -1073741682;
  v27 = aAFloatDivideBy;
  v28 = -1073741681;
  v29 = aAFloatInexactR;
  v30 = -1073741680;
  v31 = aAFloatInvalidO;
  v32 = -1073741679;
  v33 = aAFloatOverflow;
  v34 = -1073741678;
  v35 = aAFloatStackChe;
  v36 = -1073741677;
  v37 = aAFloatUnderflo;
  v38 = -1073741676;
  v39 = aAnIntegerDivid;
  v40 = -1073741675;
  v41 = aAnIntegerOverf;
  v42 = -1073741674;
  v43 = aAPrivilegedIns;
  v44 = -1073741571;
  v45 = aAStackOverflow;
  v46 = -1073741502;
  v47 = aADllInitializa;
  v48 = -529697949;
  v49 = aAMicrosoftCExc;
  for ( i = 0; i < 0x18; ++i )
  {
    if ( a1 == *(&v2 + 2 * i) )
      return (&v3)[8 * i];
  }
  return aUnknownExcepti;
}
// 4174C8: too many cbuild loops

//----- (00417692) --------------------------------------------------------
LONG (__stdcall *sub_417692())(struct _EXCEPTION_POINTERS *ExceptionInfo)
{
  LONG (__stdcall *result)(struct _EXCEPTION_POINTERS *); // eax@1

  result = SetUnhandledExceptionFilter((LPTOP_LEVEL_EXCEPTION_FILTER)TopLevelExceptionFilter);
  lpTopLevelExceptionFilter = result;
  return result;
}

//----- (004176A7) --------------------------------------------------------
LPTOP_LEVEL_EXCEPTION_FILTER sub_4176A7()
{
  LPTOP_LEVEL_EXCEPTION_FILTER result; // eax@2

  if ( lpTopLevelExceptionFilter )
    result = SetUnhandledExceptionFilter(lpTopLevelExceptionFilter);
  return result;
}

//----- (004176C1) --------------------------------------------------------
void *__thiscall sub_4176C1(void *this)
{
  void *v2; // [sp+4h] [bp-110h]@1
  CHAR String1[4]; // [sp+8h] [bp-10Ch]@1
  char v4; // [sp+10h] [bp-104h]@1
  LPCSTR lpString2; // [sp+10Ch] [bp-8h]@3
  char *v6; // [sp+110h] [bp-4h]@3

  v2 = this;
  cleanup();
  strcpy(String1, "Unknown");
  memset(&v4, 0, 0xFCu);
  if ( !GetModuleFileNameA(0, (LPSTR)&FileName, 0x104u) )
    FileName = 0;
  lpString2 = sub_41618B((char *)&FileName);
  lstrcpyA(String1, lpString2);
  v6 = strrchr(String1, 46);
  if ( v6 )
    *v6 = 0;
  lstrcpyA((LPSTR)lpString2, aL2authderror_t);
  dword_47EA50 = time(0);
  sub_417692();
  return v2;
}
// 417CE0: using guessed type int cleanup(void);

//----- (00417788) --------------------------------------------------------
int __thiscall sub_417788(void *this)
{
  void *v1; // ST00_4@1

  v1 = this;
  sub_4176A7();
  return cleanup_0(v1);
}
// 417CF0: using guessed type int __cdecl cleanup_0(_DWORD);

//----- (0041779D) --------------------------------------------------------
void __cdecl sub_41779D(char *a1, char a2)
{
  int v2; // ST24_4@4
  int v3; // ST20_4@4
  int v4; // ST1C_4@4
  int v5; // ST18_4@4
  int v6; // ST14_4@4
  int v7; // ST10_4@4
  DWORD v8; // eax@4
  void *v9; // [sp+0h] [bp-438h]@8
  char v10; // [sp+4h] [bp-434h]@2
  DWORD nNumberOfBytesToWrite; // [sp+8h] [bp-430h]@4
  HANDLE hFile; // [sp+Ch] [bp-42Ch]@2
  int i; // [sp+10h] [bp-428h]@6
  char Buffer[1024]; // [sp+14h] [bp-424h]@4
  struct _SYSTEMTIME SystemTime; // [sp+414h] [bp-24h]@2
  va_list v16; // [sp+424h] [bp-14h]@2
  DWORD NumberOfBytesWritten; // [sp+428h] [bp-10h]@5
  int v18; // [sp+434h] [bp-4h]@2

  if ( !dword_47E820 )
  {
    sub_417CA0(&v10);
    v18 = 0;
    v16 = &a2;
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    hFile = CreateFileA(&FileName, 0xC0000000, 0, 0, 4u, 0x80u, 0);
    if ( hFile == (HANDLE)-1 )
    {
      v18 = -1;
      sub_417CC0();
    }
    else
    {
      SetFilePointer(hFile, 0, 0, 2u);
      v2 = SystemTime.wSecond;
      v3 = SystemTime.wMinute;
      v4 = SystemTime.wHour;
      v5 = SystemTime.wDay;
      v6 = SystemTime.wMonth;
      v7 = SystemTime.wYear;
      v8 = GetCurrentThreadId();
      nNumberOfBytesToWrite = _snprintf(Buffer, 0x400u, aD04d02d02d02_0, v8, v7, v6, v5, v4, v3, v2);
      if ( (nNumberOfBytesToWrite & 0x80000000) == 0 )
      {
        WriteFile(hFile, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        nNumberOfBytesToWrite = _vsnprintf(Buffer, 0x400u, a1, v16);
        if ( (nNumberOfBytesToWrite & 0x80000000) == 0 )
        {
          for ( i = 0; i < (signed int)nNumberOfBytesToWrite; i += 2 )
          {
            v9 = memchr(&Buffer[i], 10, nNumberOfBytesToWrite - i);
            if ( !v9 )
              break;
            if ( nNumberOfBytesToWrite < 0x400 )
              ++nNumberOfBytesToWrite;
            i = (_BYTE *)v9 - Buffer;
            memcpy_0((char *)v9 + 1, v9, nNumberOfBytesToWrite - ((_BYTE *)v9 - Buffer) - 1);
            *(_BYTE *)v9 = 13;
          }
          WriteFile(hFile, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        }
      }
      v16 = 0;
      CloseHandle(hFile);
      v18 = -1;
      sub_417CC0();
    }
  }
}
// 47E820: using guessed type int dword_47E820;
// 41779D: using guessed type char Buffer[1024];

//----- (00417A31) --------------------------------------------------------
signed int __cdecl sub_417A31(_DWORD **a1)
{
  int v1; // ecx@0
  int v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+Ch] [bp-4h]@3

  v3 = v1;
  if ( !dword_47E820 && **a1 != -536870911 )
  {
    sub_417CA0(&v3);
    v4 = 0;
    if ( !cp )
      DeleteFileA(&FileName);
    sub_4169E0((int)a1);
    v4 = -1;
    sub_417CC0();
  }
  return 1;
}
// 47E820: using guessed type int dword_47E820;

//----- (00417AB1) --------------------------------------------------------
void __cdecl sub_417AB1(char a1)
{
  int v1; // ecx@0
  int v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@2

  v2 = v1;
  if ( !dword_47E820 )
  {
    sub_417CA0(&v2);
    v3 = 0;
    if ( cp && sub_416486(cp, (int)aServer_ncsof_0, aDarkangel_nc_0, &FileName) )
      DeleteFileA(&FileName);
    v3 = -1;
    sub_417CC0();
    if ( a1 )
    {
      dword_47E820 = 1;
      ExitProcess(0);
    }
  }
}
// 47E820: using guessed type int dword_47E820;

//----- (00417B55) --------------------------------------------------------
void sub_417B55()
{
  HANDLE hObject; // [sp+0h] [bp-4h]@2

  if ( cp )
  {
    hObject = CreateFileA(&FileName, 0x80000000, 0, 0, 3u, 0, 0);
    if ( hObject != (HANDLE)-1 )
    {
      CloseHandle(hObject);
      sub_416486(cp, (int)aServer_ncsof_1, aDarkangel_nc_1, &FileName);
      DeleteFileA(&FileName);
    }
  }
}

//----- (00417C7F) --------------------------------------------------------
int sub_417C7F()
{
  return atexit(sub_402150);
}

//----- (00417CA0) --------------------------------------------------------
void *__thiscall sub_417CA0(void *this)
{
  void *v1; // ST04_4@1

  v1 = this;
  EnterCriticalSection(&CriticalSection);
  return v1;
}

//----- (00417CC0) --------------------------------------------------------
void sub_417CC0()
{
  LeaveCriticalSection(&CriticalSection);
}

//----- (00417D00) --------------------------------------------------------
void *__thiscall sub_417D00(void *this)
{
  *(_DWORD *)this = off_45F51C;
  return this;
}
// 45F51C: using guessed type int (__stdcall *off_45F51C[2])(int);

//----- (00417D17) --------------------------------------------------------
void *__thiscall sub_417D17(void *this)
{
  void *result; // eax@1

  result = this;
  *(_DWORD *)this = off_45F51C;
  return result;
}
// 45F51C: using guessed type int (__stdcall *off_45F51C[2])(int);

//----- (00417D3A) --------------------------------------------------------
int sub_417D3A()
{
  return `eh vector constructor iterator'(&unk_47EA68, 0x24u, 16, (int)sub_418020, unknown_libname_68);
}

//----- (00417D57) --------------------------------------------------------
int sub_417D57()
{
  return atexit(sub_417D69);
}

//----- (00417D69) --------------------------------------------------------
void __cdecl sub_417D69()
{
  if ( !(byte_47ECA9 & 1) )
  {
    byte_47ECA9 |= 1u;
    `eh vector destructor iterator'(&unk_47EA68, 0x24u, 16, unknown_libname_68);
  }
}
// 47ECA9: using guessed type char byte_47ECA9;

//----- (00417DAD) --------------------------------------------------------
void sub_417DAD()
{
  ;
}

//----- (00417DB2) --------------------------------------------------------
int sub_417DB2()
{
  return atexit(sub_417DC4);
}

//----- (00417DC4) --------------------------------------------------------
void __cdecl sub_417DC4()
{
  sub_418050();
}

//----- (00417DD3) --------------------------------------------------------
_DWORD *sub_417DD3()
{
  _DWORD *v1; // [sp+0h] [bp-20h]@4
  void *v2; // [sp+4h] [bp-1Ch]@3
  char *v3; // [sp+Ch] [bp-14h]@1
  _DWORD *v4; // [sp+10h] [bp-10h]@1

  v3 = (char *)&unk_47EA68 + 36 * (InterlockedIncrement(&dword_46B798) & 0xF);
  sub_42D4B5((int)(v3 + 4));
  v4 = *(_DWORD **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = v4[2050];
    sub_42D4F0((int)(v3 + 4));
  }
  else
  {
    sub_42D4F0((int)(v3 + 4));
    v2 = operator new(0x2010u);
    if ( v2 )
      v1 = sub_417D00(v2);
    else
      v1 = 0;
    v4 = v1;
  }
  v4[2049] = 0;
  v4[2051] = 1;
  v4[2050] = 0;
  return v4;
}

//----- (00417EC2) --------------------------------------------------------
void __thiscall sub_417EC2(_DWORD *this)
{
  _DWORD *v1; // ST04_4@1
  char *v2; // ST08_4@1

  v1 = this;
  v2 = (char *)&unk_47EA68 + 36 * (InterlockedDecrement(&dword_47ECAC) & 0xF);
  sub_42D4B5((int)(v2 + 4));
  v1[2050] = *(_DWORD *)v2;
  *(_DWORD *)v2 = v1;
  sub_42D4F0((int)(v2 + 4));
}

//----- (00417F14) --------------------------------------------------------
void sub_417F14()
{
  char *v0; // [sp+Ch] [bp-Ch]@3
  int v1; // [sp+10h] [bp-8h]@4
  signed int i; // [sp+14h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v0 = (char *)&unk_47EA68 + 36 * i;
    sub_42D4B5((int)&unk_47EA68 + 36 * i + 4);
    while ( 1 )
    {
      v1 = *(_DWORD *)v0;
      if ( !*(_DWORD *)v0 )
        break;
      *(_DWORD *)v0 = *(_DWORD *)(v1 + 8200);
      if ( v1 )
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
    }
    sub_42D4F0((int)(v0 + 4));
  }
}

//----- (00417FB4) --------------------------------------------------------
int sub_417FB4()
{
  return atexit(sub_402150);
}

//----- (00417FD0) --------------------------------------------------------
void *__thiscall sub_417FD0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_417D17(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00418020) --------------------------------------------------------
int __thiscall sub_418020(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (00418050) --------------------------------------------------------
void sub_418050()
{
  sub_417F14();
}

//----- (00418081) --------------------------------------------------------
void *__thiscall sub_418081(void *this)
{
  void *result; // eax@1

  result = this;
  *(_DWORD *)this = &off_45F520;
  return result;
}
// 45F520: using guessed type int (__stdcall *off_45F520)(int);

//----- (00418095) --------------------------------------------------------
int __thiscall sub_418095(int this)
{
  int v1; // ST04_4@1

  v1 = this;
  InterlockedIncrement((volatile LONG *)(this + 4));
  return *(_DWORD *)(v1 + 4);
}

//----- (004180B3) --------------------------------------------------------
LONG __thiscall sub_4180B3(int this)
{
  LONG result; // eax@1
  int (__thiscall ***v2)(_DWORD, _DWORD); // [sp+4h] [bp-Ch]@1

  v2 = (int (__thiscall ***)(_DWORD, _DWORD))this;
  result = InterlockedDecrement((volatile LONG *)(this + 4));
  if ( !result )
  {
    if ( v2 )
      result = (**v2)(v2, 1);
  }
  return result;
}

//----- (004180FB) --------------------------------------------------------
BOOL __thiscall sub_4180FB(void *this, DWORD dwNumberOfBytesTransferred, HANDLE CompletionPort)
{
  return PostQueuedCompletionStatus(CompletionPort, dwNumberOfBytesTransferred, (ULONG_PTR)this, 0);
}

//----- (0041811C) --------------------------------------------------------
signed int __thiscall sub_41811C(struct Concurrency::details::_Micro_queue *this, unsigned int a2, int a3)
{
  signed int result; // eax@2
  struct Concurrency::details::_Micro_queue *v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  if ( sub_42A8C8(&unk_47F830, this, a2, a3) )
  {
    sub_418095((int)v4);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00418154) --------------------------------------------------------
bool __fastcall sub_418154(char a1, int a2, char a3)
{
  return sub_42A96A(&unk_47F830, a3, a1) != 0;
}

//----- (0041817D) --------------------------------------------------------
void __stdcall sub_41817D(int a1, int a2, int a3)
{
  ;
}

//----- (004181B7) --------------------------------------------------------
int sub_4181B7()
{
  return atexit(sub_402150);
}

//----- (004181D0) --------------------------------------------------------
void *__thiscall sub_4181D0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_418081(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0041820F) --------------------------------------------------------
DNameNode *sub_41820F()
{
  return sub_41865F((DNameNode *)&unk_47EF80);
}

//----- (0041821E) --------------------------------------------------------
int sub_41821E()
{
  return atexit(sub_418230);
}

//----- (00418230) --------------------------------------------------------
void __cdecl sub_418230()
{
  sub_4186D9((int)&unk_47EF80);
}

//----- (0041824E) --------------------------------------------------------
DNameNode *sub_41824E()
{
  return sub_418E51((DNameNode *)&unk_47ECB8);
}

//----- (0041825D) --------------------------------------------------------
int sub_41825D()
{
  return atexit(sub_41826F);
}

//----- (0041826F) --------------------------------------------------------
void __cdecl sub_41826F()
{
  sub_418F0E(&unk_47ECB8);
}

//----- (0041828D) --------------------------------------------------------
DNameNode *sub_41828D()
{
  return sub_418A67((DNameNode *)&unk_47ECF8);
}

//----- (0041829C) --------------------------------------------------------
int sub_41829C()
{
  return atexit(sub_4182AE);
}

//----- (004182AE) --------------------------------------------------------
void __cdecl sub_4182AE()
{
  sub_418A9F((int)&unk_47ECF8);
}

//----- (004182BD) --------------------------------------------------------
DNameNode *__thiscall sub_4182BD(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F538;
  *((_DWORD *)v1 + 3) = -1;
  *((_DWORD *)v1 + 2) = 0;
  return v1;
}
// 45F538: using guessed type int (__stdcall *off_45F538)(int);

//----- (004182F0) --------------------------------------------------------
void *__thiscall sub_4182F0(void *this)
{
  void *v1; // ST04_4@1

  v1 = this;
  *(_DWORD *)this = &off_45F538;
  sub_41834E((int)this);
  WSACloseEvent(*((HANDLE *)v1 + 2));
  return sub_418081(v1);
}
// 45F538: using guessed type int (__stdcall *off_45F538)(int);

//----- (0041834E) --------------------------------------------------------
int __thiscall sub_41834E(int this)
{
  int result; // eax@1
  LONG s; // ST0C_4@2

  result = this;
  if ( *(_DWORD *)(this + 12) != -1 )
  {
    s = InterlockedExchange((volatile LONG *)(this + 12), -1);
    result = closesocket(s);
  }
  return result;
}

//----- (004183AA) --------------------------------------------------------
int __thiscall sub_4183AA(int this, int hostshort)
{
  int v2; // eax@2
  int v4; // eax@4
  int v5; // eax@6
  int v6; // [sp+0h] [bp-14h]@1
  struct sockaddr name; // [sp+4h] [bp-10h]@3

  v6 = this;
  *(_DWORD *)(this + 12) = socket(2, 1, 0);
  if ( *(_DWORD *)(v6 + 12) == -1 )
  {
    v2 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aSocketErrorD, v2);
    return 0;
  }
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  *(_WORD *)&name.sa_data[0] = htons(hostshort);
  if ( bind(*(_DWORD *)(v6 + 12), &name, 16) )
  {
    v4 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aBindErrorD, v4);
  }
  else if ( listen(*(_DWORD *)(v6 + 12), 5) )
  {
    v5 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aListenErrorD, v5);
  }
  else
  {
    *(_DWORD *)(v6 + 8) = WSACreateEvent();
    WSAEventSelect(*(_DWORD *)(v6 + 12), *(HANDLE *)(v6 + 8), 8);
    if ( (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 20))(v6, *(_DWORD *)(v6 + 8)) & 0xFF )
      return 1;
    sub_42DBFC((int)&unk_47FA00, 3, aRegisterwaitEr, hostshort);
  }
  sub_41834E(v6);
  return 0;
}

//----- (004184ED) --------------------------------------------------------
LONG __thiscall sub_4184ED(int this)
{
  LONG result; // eax@2
  int v2; // eax@5
  int v3; // [sp+Ch] [bp-38h]@1
  ULONG_PTR v4; // [sp+10h] [bp-34h]@7
  int addrlen; // [sp+14h] [bp-30h]@1
  SOCKET s; // [sp+18h] [bp-2Ch]@1
  struct sockaddr addr; // [sp+1Ch] [bp-28h]@1
  CPPEH_RECORD ms_exc; // [sp+2Ch] [bp-18h]@1

  v3 = this;
  ms_exc.registration.TryLevel = 0;
  addrlen = 16;
  s = accept(*(_DWORD *)(this + 12), &addr, &addrlen);
  if ( s == -1 )
  {
    result = WSAGetLastError();
    if ( result == 10035 )
    {
      ms_exc.registration.TryLevel = -1;
    }
    else
    {
      if ( *(_DWORD *)(v3 + 12) != -1 )
      {
        v2 = WSAGetLastError();
        result = sub_42DBFC((int)&unk_47FA00, 3, aAcceptErrorD, v2);
      }
      ms_exc.registration.TryLevel = -1;
    }
  }
  else
  {
    v4 = (*(int (__thiscall **)(int, SOCKET, struct sockaddr *))(*(_DWORD *)v3 + 24))(v3, s, &addr);
    if ( v4 )
    {
      result = sub_41D687(v4, CompletionPort);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aServercloseCre);
      result = closesocket(s);
      ms_exc.registration.TryLevel = -1;
    }
  }
  return result;
}

//----- (00418633) --------------------------------------------------------
BOOL __thiscall sub_418633(ULONG_PTR this)
{
  ULONG_PTR dwCompletionKey; // ST10_4@1

  dwCompletionKey = this;
  WSAResetEvent(*(HANDLE *)(this + 8));
  return PostQueuedCompletionStatus(CompletionPort, 0, dwCompletionKey, 0);
}

//----- (0041865F) --------------------------------------------------------
DNameNode *__thiscall sub_41865F(DNameNode *this)
{
  DNameNode *v1; // ST08_4@1
  char v3; // [sp+4h] [bp-14h]@1
  char v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v1 = this;
  sub_4182BD(this);
  v5 = 0;
  sub_419770((char *)v1 + 16, &v3, &v4);
  *(_DWORD *)v1 = &off_45F574;
  *((_BYTE *)v1 + 36) = 0;
  InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)v1 + 2, 0xFA0u);
  return v1;
}
// 45F574: using guessed type int (__stdcall *off_45F574)(int);

//----- (004186D9) --------------------------------------------------------
void *__thiscall sub_4186D9(int this)
{
  char *v1; // ST04_4@1

  v1 = (char *)this;
  *(_DWORD *)this = &off_45F574;
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 48));
  unknown_libname_72(v1 + 16);
  return sub_4182F0(v1);
}
// 419670: using guessed type int __thiscall unknown_libname_72(_DWORD);
// 45F574: using guessed type int (__stdcall *off_45F574)(int);

//----- (0041873A) --------------------------------------------------------
int __thiscall sub_41873A(void *this, int a2, int a3)
{
  int result; // eax@2
  int v4; // eax@5
  struct Concurrency::IExecutionContext *v5; // eax@5
  void *v6; // [sp+0h] [bp-1Ch]@1
  int v7; // [sp+4h] [bp-18h]@5
  char v8; // [sp+Ch] [bp-10h]@5
  int v9; // [sp+14h] [bp-8h]@5
  int v10; // [sp+18h] [bp-4h]@1

  v6 = this;
  sub_42DBFC(
    (int)&unk_47FA00,
    0,
    aNewWorldServer,
    *(_BYTE *)(a3 + 4),
    *(_BYTE *)(a3 + 5),
    *(_BYTE *)(a3 + 6),
    *(_BYTE *)(a3 + 7));
  v10 = 0;
  v10 = sub_4350FC(*(_DWORD *)(a3 + 4), a2);
  if ( v10 )
  {
    if ( v10 == -1 )
    {
      sub_42DBFC(
        (int)&unk_47FA00,
        3,
        aIpD_D_D_DWorld,
        *(_BYTE *)(a3 + 4),
        *(_BYTE *)(a3 + 5),
        *(_BYTE *)(a3 + 6),
        *(_BYTE *)(a3 + 7));
      result = 0;
    }
    else
    {
      v4 = (*((int (__cdecl **)(int))v6 + 18))(a2);
      v9 = v4;
      *(_BYTE *)(v4 + 96) = v10;
      sub_41115C(v9, *(_DWORD *)(a3 + 4));
      EnterCriticalSection((LPCRITICAL_SECTION)v6 + 2);
      v5 = (struct Concurrency::IExecutionContext *)sub_419900((int)&v8, (_DWORD *)(a3 + 4), &v9);
      sub_4197D0((char *)v6 + 16, (int)&v7, v5);
      LeaveCriticalSection((LPCRITICAL_SECTION)v6 + 2);
      result = v9;
    }
  }
  else
  {
    sub_42DBFC(
      (int)&unk_47FA00,
      3,
      aNonRegisteredW,
      *(_BYTE *)(a3 + 4),
      *(_BYTE *)(a3 + 5),
      *(_BYTE *)(a3 + 6),
      *(_BYTE *)(a3 + 7));
    result = 0;
  }
  return result;
}

//----- (004188A6) --------------------------------------------------------
int __thiscall sub_4188A6(int this, int hostshort, int a3, char a4)
{
  int result; // eax@3
  int v5; // [sp+0h] [bp-4h]@1

  v5 = this;
  *(_DWORD *)(this + 72) = a3;
  *(_BYTE *)(this + 76) = a4;
  if ( sub_4183AA(this, hostshort) )
    sub_42DBFC((int)&unk_47FA00, 0, aServerReadyOnP, hostshort);
  result = v5;
  *(_DWORD *)(v5 + 40) = *(_DWORD *)(v5 + 12);
  return result;
}

//----- (004188F9) --------------------------------------------------------
int __thiscall sub_4188F9(int this, char a2)
{
  _DWORD *v2; // eax@1
  int v4; // [sp+0h] [bp-10h]@1
  char v5; // [sp+4h] [bp-Ch]@1
  int v6; // [sp+8h] [bp-8h]@1
  char v7; // [sp+Ch] [bp-4h]@1

  v4 = this;
  v6 = 0;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 48));
  sub_419830((void *)(v4 + 16), &v7, &a2);
  v2 = (_DWORD *)sub_419790((void *)(v4 + 16), (int)&v5);
  if ( (unsigned __int8)sub_419950(&v7, v2) )
  {
    v6 = *(_DWORD *)(unknown_libname_78(&v7) + 4);
    sub_418095(v6);
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(v4 + 48));
  return v6;
}
// 419930: using guessed type int __thiscall unknown_libname_78(_DWORD);

//----- (00418976) --------------------------------------------------------
char __thiscall sub_418976(int this, char a2)
{
  _DWORD *v2; // eax@1
  int v4; // [sp+0h] [bp-10h]@1
  char v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@1
  char v7; // [sp+Ch] [bp-4h]@1

  v4 = this;
  v7 = 0;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 48));
  sub_419830((void *)(v4 + 16), &v6, &a2);
  v2 = (_DWORD *)sub_419790((void *)(v4 + 16), (int)&v5);
  if ( (unsigned __int8)sub_419950(&v6, v2) )
    v7 = 1;
  LeaveCriticalSection((LPCRITICAL_SECTION)(v4 + 48));
  return v7;
}

//----- (004189DE) --------------------------------------------------------
void __thiscall sub_4189DE(int this, char a2)
{
  _DWORD *v2; // eax@1
  int v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+4h] [bp-Ch]@2
  char v5; // [sp+8h] [bp-8h]@1
  int v6; // [sp+Ch] [bp-4h]@1

  v3 = this;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 48));
  sub_419830((void *)(v3 + 16), &v6, &a2);
  v2 = (_DWORD *)sub_419790((void *)(v3 + 16), (int)&v5);
  if ( (unsigned __int8)sub_419950(&v6, v2) )
    sub_419810((Concurrency::details::_NonReentrantPPLLock *)(v3 + 16), &v4, v6);
  if ( !unknown_libname_77(v3 + 16) )
    sub_402F6E(&unk_481698);
  LeaveCriticalSection((LPCRITICAL_SECTION)(v3 + 48));
}
// 4197B0: using guessed type int __thiscall unknown_libname_77(_DWORD);

//----- (00418A67) --------------------------------------------------------
DNameNode *__thiscall sub_418A67(DNameNode *this)
{
  DNameNode *v1; // ST08_4@1

  v1 = this;
  sub_4182BD(this);
  *(_DWORD *)v1 = &off_45F590;
  *((_BYTE *)v1 + 20) = 0;
  InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)((char *)v1 + 32), 0xFA0u);
  return v1;
}
// 45F590: using guessed type int (__stdcall *off_45F590)(int);

//----- (00418A9F) --------------------------------------------------------
void *__thiscall sub_418A9F(int this)
{
  void *v1; // ST04_4@1

  v1 = (void *)this;
  *(_DWORD *)this = &off_45F590;
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 32));
  CloseHandle(ExistingCompletionPort);
  return sub_4182F0(v1);
}
// 45F590: using guessed type int (__stdcall *off_45F590)(int);

//----- (00418AD5) --------------------------------------------------------
LONG __thiscall sub_418AD5(int this, int a2, int a3, int a4)
{
  LONG result; // eax@2
  int v5; // eax@4
  int v6; // [sp+0h] [bp-20h]@1
  ULONG_PTR v7; // [sp+4h] [bp-1Ch]@6
  int addrlen; // [sp+8h] [bp-18h]@1
  SOCKET s; // [sp+Ch] [bp-14h]@1
  struct sockaddr addr; // [sp+10h] [bp-10h]@1

  v6 = this;
  addrlen = 16;
  s = accept(*(_DWORD *)(this + 12), &addr, &addrlen);
  if ( s == -1 )
  {
    result = WSAGetLastError();
    if ( result != 10035 && *(_DWORD *)(v6 + 12) != -1 )
    {
      v5 = WSAGetLastError();
      result = sub_42DBFC((int)&unk_47FA00, 3, aAcceptErrorD_0, v5);
    }
  }
  else
  {
    v7 = (*(int (__thiscall **)(int, SOCKET, struct sockaddr *))(*(_DWORD *)v6 + 24))(v6, s, &addr);
    if ( v7 )
      result = sub_41D687(v7, ExistingCompletionPort);
    else
      result = closesocket(s);
  }
  return result;
}

//----- (00418B75) --------------------------------------------------------
int __thiscall sub_418B75(int this, int a2, int a3)
{
  int v3; // ST20_4@1

  v3 = (*(int (__cdecl **)(int))(this + 56))(a2);
  sub_40F493(v3, *(_DWORD *)(a3 + 4));
  sub_42DBFC(
    (int)&unk_47FA00,
    0,
    aNewInteractive,
    *(_BYTE *)(a3 + 4),
    *(_BYTE *)(a3 + 5),
    *(_BYTE *)(a3 + 6),
    *(_BYTE *)(a3 + 7));
  return v3;
}

//----- (00418BF7) --------------------------------------------------------
int __thiscall sub_418BF7(int this, int hostshort, int a3)
{
  int result; // eax@3
  int v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  *(_DWORD *)(this + 56) = a3;
  if ( sub_4183AA(this, hostshort) )
    sub_42DBFC((int)&unk_47FA00, 0, aInteractiveSer, hostshort);
  result = *(_DWORD *)(v4 + 12);
  *(_DWORD *)(v4 + 24) = result;
  return result;
}

//----- (00418C50) --------------------------------------------------------
int sub_418C50()
{
  return `eh vector constructor iterator'(&unk_47ED38, 0x24u, 16, (int)sub_41AD40, unknown_libname_74);
}

//----- (00418C6D) --------------------------------------------------------
int sub_418C6D()
{
  return atexit(sub_418C7F);
}

//----- (00418C7F) --------------------------------------------------------
void __cdecl sub_418C7F()
{
  if ( !(byte_47EFD4 & 1) )
  {
    byte_47EFD4 |= 1u;
    `eh vector destructor iterator'(&unk_47ED38, 0x24u, 16, unknown_libname_74);
  }
}
// 47EFD4: using guessed type char byte_47EFD4;

//----- (00418CC3) --------------------------------------------------------
void sub_418CC3()
{
  ;
}

//----- (00418CC8) --------------------------------------------------------
int sub_418CC8()
{
  return atexit(sub_418CDA);
}

//----- (00418CDA) --------------------------------------------------------
void __cdecl sub_418CDA()
{
  sub_41AD70();
}

//----- (00418CE9) --------------------------------------------------------
void *sub_418CE9()
{
  void *v1; // [sp+4h] [bp-8h]@1
  void **v2; // [sp+8h] [bp-4h]@1

  v2 = (void **)((char *)&unk_47ED38 + 36 * (InterlockedIncrement(&dword_46B79C) & 0xF));
  sub_42D4B5((int)(v2 + 1));
  v1 = *v2;
  if ( *v2 )
  {
    *v2 = (void *)*((_DWORD *)v1 + 70);
    sub_42D4F0((int)(v2 + 1));
  }
  else
  {
    sub_42D4F0((int)(v2 + 1));
    v1 = operator new(0x11Cu);
  }
  memset(v1, 0, 0x14u);
  *((_DWORD *)v1 + 5) = -1;
  *((_DWORD *)v1 + 70) = 0;
  return v1;
}

//----- (00418D8B) --------------------------------------------------------
void __cdecl sub_418D8B(int a1)
{
  char *v1; // ST04_4@1

  v1 = (char *)&unk_47ED38 + 36 * (InterlockedIncrement(&dword_47EFD8) & 0xF);
  sub_42D4B5((int)(v1 + 4));
  *(_DWORD *)(a1 + 280) = *(_DWORD *)v1;
  *(_DWORD *)v1 = a1;
  sub_42D4F0((int)(v1 + 4));
}

//----- (00418DD8) --------------------------------------------------------
int sub_418DD8()
{
  int result; // eax@6
  char *v1; // [sp+4h] [bp-Ch]@3
  int v2; // [sp+8h] [bp-8h]@4
  signed int i; // [sp+Ch] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v1 = (char *)&unk_47ED38 + 36 * i;
    sub_42D4B5((int)&unk_47ED38 + 36 * i + 4);
    while ( 1 )
    {
      v2 = *(_DWORD *)v1;
      if ( !*(_DWORD *)v1 )
        break;
      *(_DWORD *)v1 = *(_DWORD *)(v2 + 280);
      sub_43CA18((LPVOID)v2);
    }
    sub_42D4F0((int)(v1 + 4));
    result = i + 1;
  }
  return result;
}

//----- (00418E51) --------------------------------------------------------
DNameNode *__thiscall sub_418E51(DNameNode *this)
{
  DNameNode *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  char v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  DNameNode::DNameNode(this);
  v5 = 0;
  sub_419980((char *)v2 + 8, &v3, &v4);
  LOBYTE(v5) = 1;
  *(_DWORD *)v2 = &off_45F5AC;
  *((_DWORD *)v2 + 12) = -1;
  *((_DWORD *)v2 + 14) = 0;
  *((_DWORD *)v2 + 13) = -1;
  TimerQueue = CreateTimerQueue();
  if ( !TimerQueue )
    sub_42DBFC((int)&unk_47FA00, 3, aCioserverexCon);
  InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)v2 + 1, 0xFA0u);
  return v2;
}
// 45F5AC: using guessed type int (__stdcall *off_45F5AC)(int);

//----- (00418F0E) --------------------------------------------------------
void *__thiscall sub_418F0E(void *this)
{
  void *v2; // [sp+0h] [bp-10h]@1

  v2 = this;
  *(_DWORD *)this = &off_45F5AC;
  sub_41926B((int)this);
  DeleteCriticalSection((LPCRITICAL_SECTION)v2 + 1);
  DeleteTimerQueueEx(TimerQueue, 0);
  if ( *((_DWORD *)v2 + 14) )
    WSACloseEvent(*((HANDLE *)v2 + 14));
  unknown_libname_75((char *)v2 + 8);
  return sub_418081(v2);
}
// 419730: using guessed type int __thiscall unknown_libname_75(_DWORD);
// 45F5AC: using guessed type int (__stdcall *off_45F5AC)(int);

//----- (00418FA0) --------------------------------------------------------
void __cdecl sub_418FA0(int a1, DWORD dwReceiveDataLength, int a3)
{
  void *v3; // ecx@0
  PVOID Context; // [sp+Ch] [bp-38h]@1
  struct sockaddr *RemoteSockaddr; // [sp+14h] [bp-30h]@5
  int LocalSockaddrLength; // [sp+18h] [bp-2Ch]@5
  ULONG_PTR v7; // [sp+1Ch] [bp-28h]@5
  int RemoteSockaddrLength; // [sp+20h] [bp-24h]@1
  struct sockaddr *LocalSockaddr; // [sp+24h] [bp-20h]@5
  int v10; // [sp+28h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+2Ch] [bp-18h]@1

  Context = v3;
  ms_exc.registration.TryLevel = 0;
  RemoteSockaddrLength = 16;
  v10 = 0;
  if ( a1 )
  {
    QueueUserWorkItem(Function, v3, 0);
    v10 = a3;
    GetAcceptExSockaddrs(
      (PVOID)(a3 + 24),
      dwReceiveDataLength,
      0x20u,
      0x20u,
      &LocalSockaddr,
      &LocalSockaddrLength,
      &RemoteSockaddr,
      &RemoteSockaddrLength);
    v7 = (*(int (__thiscall **)(PVOID, _DWORD, struct sockaddr *))(*(_DWORD *)Context + 24))(
           Context,
           *(_DWORD *)(v10 + 20),
           RemoteSockaddr);
    if ( v7 )
      sub_41D687(v7, CompletionPort);
    else
      closesocket(*(_DWORD *)(v10 + 20));
    sub_418D8B(v10);
  }
  else
  {
    if ( a3 )
    {
      v10 = a3;
      closesocket(*(_DWORD *)(a3 + 20));
      sub_43CA18((LPVOID)a3);
      QueueUserWorkItem(Function, Context, 0);
    }
    ms_exc.registration.TryLevel = -1;
  }
}

//----- (00419109) --------------------------------------------------------
char __thiscall sub_419109(void *this)
{
  int v1; // eax@2
  int v2; // eax@5
  void *v4; // [sp+0h] [bp-Ch]@1
  DWORD dwBytesReceived; // [sp+4h] [bp-8h]@3
  LPOVERLAPPED lpOverlapped; // [sp+8h] [bp-4h]@1

  v4 = this;
  lpOverlapped = (LPOVERLAPPED)sub_418CE9();
  lpOverlapped[1].Internal = socket(2, 1, 0);
  if ( lpOverlapped[1].Internal == -1 )
  {
    v1 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aSocketErrorD_0, v1);
  }
  else
  {
    if ( AcceptEx(
           *((_DWORD *)v4 + 12),
           lpOverlapped[1].Internal,
           &lpOverlapped[1].InternalHigh,
           0,
           0x20u,
           0x20u,
           &dwBytesReceived,
           lpOverlapped)
      || GetLastError() == 997 )
    {
      return 1;
    }
    v2 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aAcceptexErrorD, v2);
  }
  if ( lpOverlapped[1].Internal != -1 )
    closesocket(lpOverlapped[1].Internal);
  sub_418D8B((int)lpOverlapped);
  return 0;
}

//----- (004191DD) --------------------------------------------------------
DWORD __stdcall Function(LPVOID lpThreadParameter)
{
  sub_419109(lpThreadParameter);
  return 0;
}

//----- (004191F7) --------------------------------------------------------
int __thiscall sub_4191F7(int this)
{
  void *v1; // ST10_4@1
  int result; // eax@1

  v1 = (void *)this;
  WSAResetEvent(*(HANDLE *)(this + 56));
  result = (unsigned __int8)sub_419109(v1);
  if ( result )
  {
    InterlockedIncrement(&dword_47EFD0);
    result = sub_42DBFC((int)&unk_47FA00, 0, aAcceptexThread, dword_47EFD0);
  }
  return result;
}

//----- (0041926B) --------------------------------------------------------
int __thiscall sub_41926B(int this)
{
  LONG s; // ST0C_4@2
  int result; // eax@3
  int v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  if ( *(_DWORD *)(this + 48) != -1 )
  {
    s = InterlockedExchange((volatile LONG *)(this + 48), -1);
    closesocket(s);
  }
  result = v3;
  if ( *(_DWORD *)(v3 + 56) )
  {
    WSACloseEvent(*(HANDLE *)(v3 + 56));
    result = v3;
    *(_DWORD *)(v3 + 56) = 0;
  }
  return result;
}

//----- (004192BD) --------------------------------------------------------
int __thiscall sub_4192BD(ULONG_PTR this, int hostshort, int a3)
{
  int v3; // eax@2
  int v5; // eax@4
  int v6; // eax@6
  HANDLE v7; // ST14_4@8
  int v8; // ST10_4@8
  DWORD v9; // eax@8
  ULONG_PTR CompletionKey; // [sp+0h] [bp-1Ch]@1
  int i; // [sp+4h] [bp-18h]@9
  struct sockaddr name; // [sp+8h] [bp-14h]@3
  HANDLE v13; // [sp+18h] [bp-4h]@7

  CompletionKey = this;
  *(_DWORD *)(this + 60) = a3;
  *(_DWORD *)(this + 48) = socket(2, 1, 0);
  if ( *(_DWORD *)(CompletionKey + 48) == -1 )
  {
    v3 = WSAGetLastError();
    return sub_42DBFC((int)&unk_47FA00, 3, aAcceptexSocket, v3);
  }
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  *(_WORD *)&name.sa_data[0] = htons(hostshort);
  if ( bind(*(_DWORD *)(CompletionKey + 48), &name, 16) )
  {
    v5 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aBindPortDError, hostshort, v5);
    return sub_41926B(CompletionKey);
  }
  if ( listen(*(_DWORD *)(CompletionKey + 48), 5) )
  {
    v6 = WSAGetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aListenErrorD_0, v6);
    return sub_41926B(CompletionKey);
  }
  v13 = CreateIoCompletionPort(*(HANDLE *)(CompletionKey + 48), CompletionPort, CompletionKey, 0);
  if ( !v13 )
  {
    v7 = CompletionPort;
    v8 = *(_DWORD *)(CompletionKey + 48);
    v9 = GetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aCreateiocomple, v9, v8, v7);
    return sub_41926B(CompletionKey);
  }
  for ( i = 0; i < dword_4785A0; ++i )
  {
    if ( !sub_419109((void *)CompletionKey) )
      return sub_41926B(CompletionKey);
  }
  dword_47EFD0 = dword_4785A0;
  return sub_42DBFC((int)&unk_47FA00, 0, aServiceReadyOn, hostshort);
}
// 4785A0: using guessed type int dword_4785A0;

//----- (00419454) --------------------------------------------------------
int __thiscall sub_419454(void *this, int a2, int a3)
{
  int result; // eax@2
  struct Concurrency::IExecutionContext *v4; // eax@5
  void *v5; // [sp+0h] [bp-1Ch]@1
  int v6; // [sp+4h] [bp-18h]@5
  char v7; // [sp+Ch] [bp-10h]@5
  int v8; // [sp+14h] [bp-8h]@5
  int v9; // [sp+18h] [bp-4h]@3

  v5 = this;
  if ( dword_48042C < *(_DWORD *)dword_478594 )
  {
    v9 = *(_DWORD *)(a3 + 4);
    if ( sub_41E346((char *)&unk_47F240, v9) )
    {
      v8 = (*((int (__cdecl **)(_DWORD))v5 + 15))(a2);
      sub_439D3C(v8, *(_DWORD *)(a3 + 4));
      EnterCriticalSection((LPCRITICAL_SECTION)v5 + 1);
      v4 = (struct Concurrency::IExecutionContext *)sub_419AF0((int)&v7, &a2, &v8);
      sub_4199C0((char *)v5 + 8, (int)&v6, v4);
      LeaveCriticalSection((LPCRITICAL_SECTION)v5 + 1);
      result = v8;
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 2, aAccesslimitExp, (unsigned __int8)v9, BYTE1(v9), BYTE2(v9), BYTE3(v9));
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00419532) --------------------------------------------------------
int __thiscall sub_419532(int this, char a2)
{
  _DWORD *v2; // eax@1
  int v4; // [sp+0h] [bp-10h]@1
  char v5; // [sp+4h] [bp-Ch]@1
  int v6; // [sp+8h] [bp-8h]@1
  char v7; // [sp+Ch] [bp-4h]@1

  v4 = this;
  v6 = 0;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 24));
  sub_419A20((void *)(v4 + 8), &v7, &a2);
  v2 = (_DWORD *)sub_4199A0((void *)(v4 + 8), (int)&v5);
  if ( (unsigned __int8)sub_419B40(&v7, v2) )
  {
    v6 = *(_DWORD *)(unknown_libname_80(&v7) + 4);
    sub_418095(v6);
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(v4 + 24));
  return v6;
}
// 419B20: using guessed type int __thiscall unknown_libname_80(_DWORD);

//----- (004195AF) --------------------------------------------------------
char __thiscall sub_4195AF(int this, char a2)
{
  int v2; // ST04_4@1

  v2 = this;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 24));
  unknown_libname_79(&a2);
  LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 24));
  return 1;
}
// 419A00: using guessed type _DWORD __stdcall unknown_libname_79(_DWORD);

//----- (004195F6) --------------------------------------------------------
int sub_4195F6()
{
  return atexit(sub_402150);
}

//----- (00419610) --------------------------------------------------------
void *__thiscall sub_419610(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4182F0(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (00419640) --------------------------------------------------------
void *__thiscall sub_419640(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4186D9((int)this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (004196B0) --------------------------------------------------------
void *__thiscall sub_4196B0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_418A9F((int)this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (00419700) --------------------------------------------------------
void *__thiscall sub_419700(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_418F0E(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (00419770) --------------------------------------------------------
void *__thiscall sub_419770(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_419B70(this, a2, a3);
  return v3;
}

//----- (00419790) --------------------------------------------------------
int __thiscall sub_419790(void *this, int a2)
{
  sub_419BD0((int)this, a2);
  return a2;
}

//----- (004197D0) --------------------------------------------------------
int __thiscall sub_4197D0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_419C10(this, (int)&v4, a3);
  sub_41ACE0(a2, &v4, &v5);
  return a2;
}

//----- (00419810) --------------------------------------------------------
_DWORD *__thiscall sub_419810(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  sub_419DE0(this, a2, a3);
  return a2;
}

//----- (00419830) --------------------------------------------------------
_DWORD *__thiscall sub_419830(void *this, _DWORD *a2, _DWORD *a3)
{
  sub_41A730(this, a2, a3);
  return a2;
}

//----- (00419850) --------------------------------------------------------
void __thiscall sub_419850(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_419BD0((int)this, (int)&v6);
  v2 = (int *)sub_419BA0((void *)v3, (int)&v5);
  sub_41A630((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_47EFE0 )
  {
    v8 = (void *)dword_47EFDC;
    dword_47EFDC = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 47EFDC: using guessed type int dword_47EFDC;
// 47EFE0: using guessed type int dword_47EFE0;

//----- (00419900) --------------------------------------------------------
int __thiscall sub_419900(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (00419950) --------------------------------------------------------
BOOL __thiscall sub_419950(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_41A810(this, a2) == 0;
}

//----- (00419980) --------------------------------------------------------
void *__thiscall sub_419980(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_41A830(this, a2, a3);
  return v3;
}

//----- (004199A0) --------------------------------------------------------
int __thiscall sub_4199A0(void *this, int a2)
{
  sub_41A890((int)this, a2);
  return a2;
}

//----- (004199C0) --------------------------------------------------------
int __thiscall sub_4199C0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_41A8B0(this, (int)&v4, a3);
  sub_41AD10(a2, &v4, &v5);
  return a2;
}

//----- (00419A20) --------------------------------------------------------
_DWORD *__thiscall sub_419A20(void *this, _DWORD *a2, _DWORD *a3)
{
  sub_41ABE0(this, a2, a3);
  return a2;
}

//----- (00419A40) --------------------------------------------------------
void __thiscall sub_419A40(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_41A890((int)this, (int)&v6);
  v2 = (int *)sub_41A860((void *)v3, (int)&v5);
  sub_41AA80((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_47EFE8 )
  {
    v8 = (void *)dword_47EFE4;
    dword_47EFE4 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 47EFE4: using guessed type int dword_47EFE4;
// 47EFE8: using guessed type int dword_47EFE8;

//----- (00419AF0) --------------------------------------------------------
int __thiscall sub_419AF0(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (00419B40) --------------------------------------------------------
BOOL __thiscall sub_419B40(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_41ACC0(this, a2) == 0;
}

//----- (00419B70) --------------------------------------------------------
void *__thiscall sub_419B70(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_41AE40((int)this, a2, 0, a3);
  return v3;
}

//----- (00419BA0) --------------------------------------------------------
int __thiscall sub_419BA0(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_41B3C0((int)this);
  unknown_libname_85(*v2);
  return a2;
}
// 41B730: using guessed type _DWORD __stdcall unknown_libname_85(_DWORD);

//----- (00419BD0) --------------------------------------------------------
int __thiscall sub_419BD0(int this, int a2)
{
  unknown_libname_85(*(_DWORD *)(this + 4));
  return a2;
}
// 41B730: using guessed type _DWORD __stdcall unknown_libname_85(_DWORD);

//----- (00419C10) --------------------------------------------------------
int __thiscall sub_419C10(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_41B5B0((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_47EFDC )
  {
    v25 = v26;
    v3 = sub_41ADE0(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_41AD90(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_83(v26);
    else
      v13 = *(_DWORD *)sub_41AE20(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_41AF30(v14, (int)&v22, v26, v25, a3);
    sub_41ACE0(a2, v5, &v23);
    return a2;
  }
  unknown_libname_85(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_419BA0(v14, (int)&v21);
    if ( (unsigned __int8)sub_41A810(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_41AF30(v14, (int)&v19, v26, v25, a3);
      sub_41ACE0(a2, v8, &v20);
      return a2;
    }
    unknown_libname_86(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_84(&v28);
  v11 = sub_41ADE0(v10);
  if ( (unsigned __int8)sub_41AD90(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_41AF30(v14, (int)&v16, v26, v25, a3);
    sub_41ACE0(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_41ACE0(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 41B720: using guessed type int __thiscall unknown_libname_84(_DWORD);
// 41B730: using guessed type _DWORD __stdcall unknown_libname_85(_DWORD);
// 41B780: using guessed type int __thiscall unknown_libname_86(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (00419DE0) --------------------------------------------------------
_DWORD *__thiscall sub_419DE0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  int v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_41B750(&a3, &v76, 0);
  v81 = (void *)unknown_libname_84(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_83(v81) == dword_47EFDC )
  {
    v82 = *(_DWORD *)sub_41AE20((int)v81);
  }
  else if ( *(_DWORD *)sub_41AE20((int)v81) == dword_47EFDC )
  {
    v82 = *(_DWORD *)unknown_libname_83(v81);
  }
  else
  {
    v4 = (int *)sub_41AE20((int)v81);
    v81 = (void *)sub_41B550(*v4);
    v82 = *(_DWORD *)sub_41AE20((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_41AE10((int)v81);
    *(_DWORD *)sub_41AE10(v82) = *v27;
    v28 = (void **)sub_41B5B0((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_41B5B0((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_41AE10((int)v80);
      v31 = (void **)unknown_libname_83(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_41AE10((int)v80);
        v33 = (_DWORD *)unknown_libname_83(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_41AE10((int)v80);
        v35 = (_DWORD *)sub_41AE20(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_41B3C0((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_41AE20((int)v80) == dword_47EFDC )
      {
        v37 = (_DWORD *)sub_41AE10((int)v80);
        *(_DWORD *)sub_41B3C0((int)v75) = *v37;
      }
      else
      {
        v38 = sub_41B550(v82);
        *(_DWORD *)sub_41B3C0((int)v75) = v38;
      }
    }
    v39 = (void **)sub_41B590((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_83(v80) == dword_47EFDC )
      {
        v40 = (_DWORD *)sub_41AE10((int)v80);
        *(_DWORD *)sub_41B590((int)v75) = *v40;
      }
      else
      {
        v41 = sub_41B510(v82);
        *(_DWORD *)sub_41B590((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_83(v80);
    v6 = (void **)sub_41AE10(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_83(v80);
    *(_DWORD *)unknown_libname_83(v81) = *v7;
    v8 = (void **)sub_41AE20((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_41AE10(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_41AE10((int)v81);
      *(_DWORD *)sub_41AE10(v82) = *v10;
      v11 = (_DWORD *)sub_41AE10((int)v81);
      v12 = (_DWORD *)unknown_libname_83(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_41AE20((int)v80);
      *(_DWORD *)sub_41AE20((int)v81) = *v13;
      v14 = (int *)sub_41AE20((int)v80);
      v15 = (void **)sub_41AE10(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_41B5B0((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_41B5B0((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_41AE10((int)v80);
      v19 = (void **)unknown_libname_83(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_41AE10((int)v80);
        v21 = (void **)unknown_libname_83(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_41AE10((int)v80);
        v23 = (void **)sub_41AE20(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_41AE10((int)v80);
    *(_DWORD *)sub_41AE10((int)v81) = *v24;
    v25 = (int *)sub_41ADD0((int)v80);
    v26 = (int *)sub_41ADD0((int)v81);
    sub_41D340(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_41ADD0((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_41B5B0((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_41ADD0(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_41AE10(v82);
      v44 = (_DWORD *)unknown_libname_83(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_41AE10(v82);
        v78 = *(_DWORD *)sub_41AE20(*v45);
        if ( !*(_DWORD *)sub_41ADD0(v78) )
        {
          *(_DWORD *)sub_41ADD0(v78) = 1;
          v46 = (int *)sub_41AE10(v82);
          *(_DWORD *)sub_41ADD0(*v46) = 0;
          v47 = (int *)sub_41AE10(v82);
          sub_41B3E0((void *)v75, *v47);
          v48 = (int *)sub_41AE10(v82);
          v78 = *(_DWORD *)sub_41AE20(*v48);
        }
        v49 = (int *)unknown_libname_83(v78);
        if ( *(_DWORD *)sub_41ADD0(*v49) != 1 || (v50 = (int *)sub_41AE20(v78), *(_DWORD *)sub_41ADD0(*v50) != 1) )
        {
          v51 = (int *)sub_41AE20(v78);
          if ( *(_DWORD *)sub_41ADD0(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_83(v78);
            *(_DWORD *)sub_41ADD0(*v52) = 1;
            *(_DWORD *)sub_41ADD0(v78) = 0;
            sub_41B5D0((void *)v75, v78);
            v53 = (int *)sub_41AE10(v82);
            v78 = *(_DWORD *)sub_41AE20(*v53);
          }
          v54 = (int *)sub_41AE10(v82);
          v55 = (_DWORD *)sub_41ADD0(*v54);
          *(_DWORD *)sub_41ADD0(v78) = *v55;
          v56 = (int *)sub_41AE10(v82);
          *(_DWORD *)sub_41ADD0(*v56) = 1;
          v57 = (int *)sub_41AE20(v78);
          *(_DWORD *)sub_41ADD0(*v57) = 1;
          v58 = (int *)sub_41AE10(v82);
          sub_41B3E0((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_41ADD0(v78) = 0;
        v82 = *(_DWORD *)sub_41AE10(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_41AE10(v82);
        v77 = *(_DWORD *)unknown_libname_83(*v59);
        if ( !*(_DWORD *)sub_41ADD0(v77) )
        {
          *(_DWORD *)sub_41ADD0(v77) = 1;
          v60 = (int *)sub_41AE10(v82);
          *(_DWORD *)sub_41ADD0(*v60) = 0;
          v61 = (int *)sub_41AE10(v82);
          sub_41B5D0((void *)v75, *v61);
          v62 = (_DWORD *)sub_41AE10(v82);
          v77 = *(_DWORD *)unknown_libname_83(*v62);
        }
        v63 = (int *)sub_41AE20(v77);
        if ( *(_DWORD *)sub_41ADD0(*v63) != 1
          || (v64 = (int *)unknown_libname_83(v77), *(_DWORD *)sub_41ADD0(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_83(v77);
          if ( *(_DWORD *)sub_41ADD0(*v65) == 1 )
          {
            v66 = (int *)sub_41AE20(v77);
            *(_DWORD *)sub_41ADD0(*v66) = 1;
            *(_DWORD *)sub_41ADD0(v77) = 0;
            sub_41B3E0((void *)v75, v77);
            v67 = (_DWORD *)sub_41AE10(v82);
            v77 = *(_DWORD *)unknown_libname_83(*v67);
          }
          v68 = (int *)sub_41AE10(v82);
          v69 = (_DWORD *)sub_41ADD0(*v68);
          *(_DWORD *)sub_41ADD0(v77) = *v69;
          v70 = (int *)sub_41AE10(v82);
          *(_DWORD *)sub_41ADD0(*v70) = 1;
          v71 = (int *)unknown_libname_83(v77);
          *(_DWORD *)sub_41ADD0(*v71) = 1;
          v72 = (int *)sub_41AE10(v82);
          sub_41B5D0((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_41ADD0(v77) = 0;
        v82 = *(_DWORD *)sub_41AE10(v82);
      }
    }
    *(_DWORD *)sub_41ADD0(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = sub_41AE30((int)v81);
  sub_41B700(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 41B720: using guessed type int __thiscall unknown_libname_84(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041A630) --------------------------------------------------------
_DWORD *__thiscall sub_41A630(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_81()
    || (v4 = (_DWORD *)sub_419BA0((void *)v9, (int)&v13), (unsigned __int8)sub_419950(&a3, v4))
    || (v5 = (_DWORD *)sub_419BD0(v9, (int)&v12), (unsigned __int8)sub_419950(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_419950(&a3, &a4) )
    {
      v6 = sub_41B750(&a3, &v11, 0);
      sub_419DE0((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_41B5B0(v9);
    sub_41AEB0((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_41B5B0(v9) = dword_47EFDC;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_41B3C0(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_41B590(v9) = *(_DWORD *)(v9 + 4);
    sub_419BA0((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 419BF0: using guessed type int unknown_libname_81(void);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041A730) --------------------------------------------------------
_DWORD *__thiscall sub_41A730(void *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  char *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  char *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_41AE80(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_419BD0(v8, (int)&v10);
  if ( (unsigned __int8)sub_41A810(&v12, v3)
    || (v4 = unknown_libname_84(&v12), v5 = sub_41ADE0(v4), (unsigned __int8)sub_41AD90(a3, v5)) )
  {
    v7 = (char *)sub_419BD0(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 41B720: using guessed type int __thiscall unknown_libname_84(_DWORD);

//----- (0041A7F0) --------------------------------------------------------
int __thiscall sub_41A7F0(int *this)
{
  return sub_41AE30(*this);
}

//----- (0041A810) --------------------------------------------------------
BOOL __thiscall sub_41A810(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (0041A830) --------------------------------------------------------
void *__thiscall sub_41A830(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_41B840((int)this, a2, 0, a3);
  return v3;
}

//----- (0041A860) --------------------------------------------------------
int __thiscall sub_41A860(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_41C670((int)this);
  unknown_libname_91(*v2);
  return a2;
}
// 41C6E0: using guessed type _DWORD __stdcall unknown_libname_91(_DWORD);

//----- (0041A890) --------------------------------------------------------
int __thiscall sub_41A890(int this, int a2)
{
  unknown_libname_91(*(_DWORD *)(this + 4));
  return a2;
}
// 41C6E0: using guessed type _DWORD __stdcall unknown_libname_91(_DWORD);

//----- (0041A8B0) --------------------------------------------------------
int __thiscall sub_41A8B0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_41C6B0((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_47EFE4 )
  {
    v25 = v26;
    v3 = sub_41B7F0(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_41B7B0(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_88(v26);
    else
      v13 = *(_DWORD *)sub_41B820(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_41C1E0(v14, (int)&v22, v26, v25, a3);
    sub_41AD10(a2, v5, &v23);
    return a2;
  }
  unknown_libname_91(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_41A860(v14, (int)&v21);
    if ( (unsigned __int8)sub_41ACC0(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_41C1E0(v14, (int)&v19, v26, v25, a3);
      sub_41AD10(a2, v8, &v20);
      return a2;
    }
    unknown_libname_92(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_90(&v28);
  v11 = sub_41B7F0(v10);
  if ( (unsigned __int8)sub_41B7B0(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_41C1E0(v14, (int)&v16, v26, v25, a3);
    sub_41AD10(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_41AD10(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 41C6D0: using guessed type int __thiscall unknown_libname_90(_DWORD);
// 41C6E0: using guessed type _DWORD __stdcall unknown_libname_91(_DWORD);
// 41C730: using guessed type int __thiscall unknown_libname_92(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041AA80) --------------------------------------------------------
_DWORD *__thiscall sub_41AA80(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_89()
    || (v4 = (_DWORD *)sub_41A860((void *)v9, (int)&v13), (unsigned __int8)sub_419B40(&a3, v4))
    || (v5 = (_DWORD *)sub_41A890(v9, (int)&v12), (unsigned __int8)sub_419B40(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_419B40(&a3, &a4) )
    {
      v6 = sub_41C700(&a3, &v11, 0);
      sub_41B8A0((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_41C6B0(v9);
    sub_41C160((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_41C6B0(v9) = dword_47EFE4;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_41C670(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_41C690(v9) = *(_DWORD *)(v9 + 4);
    sub_41A860((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 41B880: using guessed type int unknown_libname_89(void);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041AB80) --------------------------------------------------------
int __thiscall sub_41AB80(void *this, _DWORD *a2)
{
  void *v2; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v2 = this;
  sub_41C120(this, (int)&v6, a2);
  v5 = 0;
  sub_41D370(v6, v7, &v5);
  sub_41AA80(v2, &v4, v6, v7);
  return v5;
}

//----- (0041ABE0) --------------------------------------------------------
_DWORD *__thiscall sub_41ABE0(void *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  char *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  char *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_41C0F0(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_41A890(v8, (int)&v10);
  if ( (unsigned __int8)sub_41ACC0(&v12, v3)
    || (v4 = unknown_libname_90(&v12), v5 = sub_41B7F0(v4), (unsigned __int8)sub_41B7B0(a3, v5)) )
  {
    v7 = (char *)sub_41A890(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 41C6D0: using guessed type int __thiscall unknown_libname_90(_DWORD);

//----- (0041ACA0) --------------------------------------------------------
int __thiscall sub_41ACA0(int *this)
{
  return sub_41B830(*this);
}

//----- (0041ACC0) --------------------------------------------------------
BOOL __thiscall sub_41ACC0(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (0041ACE0) --------------------------------------------------------
int __thiscall sub_41ACE0(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (0041AD10) --------------------------------------------------------
int __thiscall sub_41AD10(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (0041AD40) --------------------------------------------------------
int __thiscall sub_41AD40(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (0041AD70) --------------------------------------------------------
int sub_41AD70()
{
  return sub_418DD8();
}

//----- (0041AD90) --------------------------------------------------------
BOOL __stdcall sub_41AD90(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (0041ADD0) --------------------------------------------------------
int __cdecl sub_41ADD0(int a1)
{
  return a1 + 20;
}

//----- (0041ADE0) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_41ADE0(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_41AE30(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (0041AE10) --------------------------------------------------------
int __cdecl sub_41AE10(int a1)
{
  return a1 + 4;
}

//----- (0041AE20) --------------------------------------------------------
int __cdecl sub_41AE20(int a1)
{
  return a1 + 8;
}

//----- (0041AE30) --------------------------------------------------------
int __cdecl sub_41AE30(int a1)
{
  return a1 + 12;
}

//----- (0041AE40) --------------------------------------------------------
int __thiscall sub_41AE40(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_41C750((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (0041AE80) --------------------------------------------------------
int __thiscall sub_41AE80(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_41C850(this, a3);
  unknown_libname_85(v3);
  return a2;
}
// 41B730: using guessed type _DWORD __stdcall unknown_libname_85(_DWORD);

//----- (0041AEB0) --------------------------------------------------------
void *__thiscall sub_41AEB0(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  int v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_47EFDC; a2 = i )
  {
    v3 = (void **)sub_41AE20((int)i);
    sub_41AEB0(*v3);
    i = *(void **)unknown_libname_83(i);
    v4 = sub_41AE30((int)a2);
    sub_41B700(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041AF30) --------------------------------------------------------
int __thiscall sub_41AF30(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_41C8E0(a4, 0);
  *(_DWORD *)unknown_libname_83(v48) = dword_47EFDC;
  *(_DWORD *)sub_41AE20((int)v48) = dword_47EFDC;
  v5 = (void *)sub_41AE30((int)v48);
  sub_41C930(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_47EFDC
    || (v6 = sub_41ADE0(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_41AD90(v7, v6)) )
  {
    v8 = (char **)unknown_libname_83(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_41B5B0(v46);
      *v9 = v48;
      v10 = (char **)sub_41B590(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_41B3C0(v46) )
    {
      v11 = (char **)sub_41B3C0(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_41AE20(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_41B590(v46) )
    {
      v13 = (char **)sub_41B590(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_41B5B0(v46) )
  {
    v14 = (int *)sub_41AE10((int)v49);
    if ( *(_DWORD *)sub_41ADD0(*v14) )
      break;
    v15 = (_DWORD *)sub_41AE10((int)v49);
    v16 = (int *)sub_41AE10((int)v49);
    v17 = (_DWORD *)sub_41AE10(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_83(*v17) )
    {
      v18 = (int *)sub_41AE10((int)v49);
      v19 = (int *)sub_41AE10(*v18);
      v20 = (int *)sub_41AE20(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_41ADD0(*v20) )
      {
        v25 = (int *)sub_41AE10((int)v49);
        if ( v49 == *(char **)sub_41AE20(*v25) )
        {
          v49 = *(char **)sub_41AE10((int)v49);
          sub_41B3E0((void *)v46, (int)v49);
        }
        v26 = (int *)sub_41AE10((int)v49);
        *(_DWORD *)sub_41ADD0(*v26) = 1;
        v27 = (int *)sub_41AE10((int)v49);
        v28 = (int *)sub_41AE10(*v27);
        *(_DWORD *)sub_41ADD0(*v28) = 0;
        v29 = (int *)sub_41AE10((int)v49);
        v30 = (int *)sub_41AE10(*v29);
        sub_41B5D0((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_41AE10((int)v49);
        *(_DWORD *)sub_41ADD0(*v21) = 1;
        *(_DWORD *)sub_41ADD0(v50) = 1;
        v22 = (int *)sub_41AE10((int)v49);
        v23 = (int *)sub_41AE10(*v22);
        *(_DWORD *)sub_41ADD0(*v23) = 0;
        v24 = (int *)sub_41AE10((int)v49);
        v49 = *(char **)sub_41AE10(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_41AE10((int)v49);
      v32 = (_DWORD *)sub_41AE10(*v31);
      v33 = (int *)unknown_libname_83(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_41ADD0(*v33) )
      {
        v38 = (_DWORD *)sub_41AE10((int)v49);
        if ( v49 == *(char **)unknown_libname_83(*v38) )
        {
          v49 = *(char **)sub_41AE10((int)v49);
          sub_41B5D0((void *)v46, (int)v49);
        }
        v39 = (int *)sub_41AE10((int)v49);
        *(_DWORD *)sub_41ADD0(*v39) = 1;
        v40 = (int *)sub_41AE10((int)v49);
        v41 = (int *)sub_41AE10(*v40);
        *(_DWORD *)sub_41ADD0(*v41) = 0;
        v42 = (int *)sub_41AE10((int)v49);
        v43 = (int *)sub_41AE10(*v42);
        sub_41B3E0((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_41AE10((int)v49);
        *(_DWORD *)sub_41ADD0(*v34) = 1;
        *(_DWORD *)sub_41ADD0(v51) = 1;
        v35 = (int *)sub_41AE10((int)v49);
        v36 = (int *)sub_41AE10(*v35);
        *(_DWORD *)sub_41ADD0(*v36) = 0;
        v37 = (int *)sub_41AE10((int)v49);
        v49 = *(char **)sub_41AE10(*v37);
      }
    }
  }
  v44 = (int *)sub_41B5B0(v46);
  *(_DWORD *)sub_41ADD0(*v44) = 1;
  unknown_libname_85(v48);
  return a2;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 41B730: using guessed type _DWORD __stdcall unknown_libname_85(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041B3C0) --------------------------------------------------------
int __thiscall sub_41B3C0(int this)
{
  return unknown_libname_83(*(_DWORD *)(this + 4));
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);

//----- (0041B3E0) --------------------------------------------------------
int *__thiscall sub_41B3E0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_41AE20(a2);
  v2 = (_DWORD *)unknown_libname_83(v10);
  *(_DWORD *)sub_41AE20(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_83(v10) != dword_47EFDC )
  {
    v3 = (int *)unknown_libname_83(v10);
    *(_DWORD *)sub_41AE10(*v3) = a2;
  }
  v4 = (_DWORD *)sub_41AE10(a2);
  *(_DWORD *)sub_41AE10(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_41B5B0(v9) )
  {
    *(_DWORD *)sub_41B5B0(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_41AE10(a2);
    if ( a2 == *(_DWORD *)unknown_libname_83(*v5) )
    {
      v6 = (_DWORD *)sub_41AE10(a2);
      *(_DWORD *)unknown_libname_83(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_41AE10(a2);
      *(_DWORD *)sub_41AE20(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_83(v10) = a2;
  result = (int *)sub_41AE10(a2);
  *result = v10;
  return result;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041B510) --------------------------------------------------------
int __cdecl sub_41B510(int a1)
{
  while ( *(_DWORD *)sub_41AE20(a1) != dword_47EFDC )
    a1 = *(_DWORD *)sub_41AE20(a1);
  return a1;
}
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041B550) --------------------------------------------------------
int __cdecl sub_41B550(int a1)
{
  while ( *(_DWORD *)unknown_libname_83(a1) != dword_47EFDC )
    a1 = *(_DWORD *)unknown_libname_83(a1);
  return a1;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041B590) --------------------------------------------------------
int __thiscall sub_41B590(int this)
{
  return sub_41AE20(*(_DWORD *)(this + 4));
}

//----- (0041B5B0) --------------------------------------------------------
int __thiscall sub_41B5B0(int this)
{
  return sub_41AE10(*(_DWORD *)(this + 4));
}

//----- (0041B5D0) --------------------------------------------------------
int *__thiscall sub_41B5D0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_83(a2);
  v2 = (_DWORD *)sub_41AE20(v10);
  *(_DWORD *)unknown_libname_83(a2) = *v2;
  if ( *(_DWORD *)sub_41AE20(v10) != dword_47EFDC )
  {
    v3 = (int *)sub_41AE20(v10);
    *(_DWORD *)sub_41AE10(*v3) = a2;
  }
  v4 = (_DWORD *)sub_41AE10(a2);
  *(_DWORD *)sub_41AE10(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_41B5B0(v9) )
  {
    *(_DWORD *)sub_41B5B0(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_41AE10(a2);
    if ( a2 == *(_DWORD *)sub_41AE20(*v5) )
    {
      v6 = (int *)sub_41AE10(a2);
      *(_DWORD *)sub_41AE20(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_41AE10(a2);
      *(_DWORD *)unknown_libname_83(*v7) = v10;
    }
  }
  *(_DWORD *)sub_41AE20(v10) = a2;
  result = (int *)sub_41AE10(a2);
  *result = v10;
  return result;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041B700) --------------------------------------------------------
void __stdcall sub_41B700(int a1)
{
  sub_41D3A0();
}

//----- (0041B750) --------------------------------------------------------
_DWORD *__thiscall sub_41B750(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_94(this);
  *a2 = v3;
  return a2;
}
// 41CA40: using guessed type int __cdecl unknown_libname_94(_DWORD);

//----- (0041B7B0) --------------------------------------------------------
BOOL __stdcall sub_41B7B0(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (0041B7F0) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_41B7F0(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_41B830(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (0041B820) --------------------------------------------------------
int __cdecl sub_41B820(int a1)
{
  return a1 + 8;
}

//----- (0041B830) --------------------------------------------------------
int __cdecl sub_41B830(int a1)
{
  return a1 + 12;
}

//----- (0041B840) --------------------------------------------------------
int __thiscall sub_41B840(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_41CAB0((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (0041B8A0) --------------------------------------------------------
_DWORD *__thiscall sub_41B8A0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  int v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_41C700(&a3, &v76, 0);
  v81 = (void *)unknown_libname_90(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_88(v81) == dword_47EFE4 )
  {
    v82 = *(_DWORD *)sub_41B820((int)v81);
  }
  else if ( *(_DWORD *)sub_41B820((int)v81) == dword_47EFE4 )
  {
    v82 = *(_DWORD *)unknown_libname_88(v81);
  }
  else
  {
    v4 = (int *)sub_41B820((int)v81);
    v81 = (void *)sub_41CDB0(*v4);
    v82 = *(_DWORD *)sub_41B820((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_41CA70((int)v81);
    *(_DWORD *)sub_41CA70(v82) = *v27;
    v28 = (void **)sub_41C6B0((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_41C6B0((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_41CA70((int)v80);
      v31 = (void **)unknown_libname_88(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_41CA70((int)v80);
        v33 = (_DWORD *)unknown_libname_88(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_41CA70((int)v80);
        v35 = (_DWORD *)sub_41B820(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_41C670((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_41B820((int)v80) == dword_47EFE4 )
      {
        v37 = (_DWORD *)sub_41CA70((int)v80);
        *(_DWORD *)sub_41C670((int)v75) = *v37;
      }
      else
      {
        v38 = sub_41CDB0(v82);
        *(_DWORD *)sub_41C670((int)v75) = v38;
      }
    }
    v39 = (void **)sub_41C690((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_88(v80) == dword_47EFE4 )
      {
        v40 = (_DWORD *)sub_41CA70((int)v80);
        *(_DWORD *)sub_41C690((int)v75) = *v40;
      }
      else
      {
        v41 = sub_41CD70(v82);
        *(_DWORD *)sub_41C690((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_88(v80);
    v6 = (void **)sub_41CA70(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_88(v80);
    *(_DWORD *)unknown_libname_88(v81) = *v7;
    v8 = (void **)sub_41B820((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_41CA70(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_41CA70((int)v81);
      *(_DWORD *)sub_41CA70(v82) = *v10;
      v11 = (_DWORD *)sub_41CA70((int)v81);
      v12 = (_DWORD *)unknown_libname_88(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_41B820((int)v80);
      *(_DWORD *)sub_41B820((int)v81) = *v13;
      v14 = (int *)sub_41B820((int)v80);
      v15 = (void **)sub_41CA70(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_41C6B0((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_41C6B0((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_41CA70((int)v80);
      v19 = (void **)unknown_libname_88(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_41CA70((int)v80);
        v21 = (void **)unknown_libname_88(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_41CA70((int)v80);
        v23 = (void **)sub_41B820(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_41CA70((int)v80);
    *(_DWORD *)sub_41CA70((int)v81) = *v24;
    v25 = (int *)sub_41CA60((int)v80);
    v26 = (int *)sub_41CA60((int)v81);
    sub_41D3B0(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_41CA60((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_41C6B0((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_41CA60(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_41CA70(v82);
      v44 = (_DWORD *)unknown_libname_88(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_41CA70(v82);
        v78 = *(_DWORD *)sub_41B820(*v45);
        if ( !*(_DWORD *)sub_41CA60(v78) )
        {
          *(_DWORD *)sub_41CA60(v78) = 1;
          v46 = (int *)sub_41CA70(v82);
          *(_DWORD *)sub_41CA60(*v46) = 0;
          v47 = (int *)sub_41CA70(v82);
          sub_41CC40((void *)v75, *v47);
          v48 = (int *)sub_41CA70(v82);
          v78 = *(_DWORD *)sub_41B820(*v48);
        }
        v49 = (int *)unknown_libname_88(v78);
        if ( *(_DWORD *)sub_41CA60(*v49) != 1 || (v50 = (int *)sub_41B820(v78), *(_DWORD *)sub_41CA60(*v50) != 1) )
        {
          v51 = (int *)sub_41B820(v78);
          if ( *(_DWORD *)sub_41CA60(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_88(v78);
            *(_DWORD *)sub_41CA60(*v52) = 1;
            *(_DWORD *)sub_41CA60(v78) = 0;
            sub_41CDF0((void *)v75, v78);
            v53 = (int *)sub_41CA70(v82);
            v78 = *(_DWORD *)sub_41B820(*v53);
          }
          v54 = (int *)sub_41CA70(v82);
          v55 = (_DWORD *)sub_41CA60(*v54);
          *(_DWORD *)sub_41CA60(v78) = *v55;
          v56 = (int *)sub_41CA70(v82);
          *(_DWORD *)sub_41CA60(*v56) = 1;
          v57 = (int *)sub_41B820(v78);
          *(_DWORD *)sub_41CA60(*v57) = 1;
          v58 = (int *)sub_41CA70(v82);
          sub_41CC40((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_41CA60(v78) = 0;
        v82 = *(_DWORD *)sub_41CA70(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_41CA70(v82);
        v77 = *(_DWORD *)unknown_libname_88(*v59);
        if ( !*(_DWORD *)sub_41CA60(v77) )
        {
          *(_DWORD *)sub_41CA60(v77) = 1;
          v60 = (int *)sub_41CA70(v82);
          *(_DWORD *)sub_41CA60(*v60) = 0;
          v61 = (int *)sub_41CA70(v82);
          sub_41CDF0((void *)v75, *v61);
          v62 = (_DWORD *)sub_41CA70(v82);
          v77 = *(_DWORD *)unknown_libname_88(*v62);
        }
        v63 = (int *)sub_41B820(v77);
        if ( *(_DWORD *)sub_41CA60(*v63) != 1
          || (v64 = (int *)unknown_libname_88(v77), *(_DWORD *)sub_41CA60(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_88(v77);
          if ( *(_DWORD *)sub_41CA60(*v65) == 1 )
          {
            v66 = (int *)sub_41B820(v77);
            *(_DWORD *)sub_41CA60(*v66) = 1;
            *(_DWORD *)sub_41CA60(v77) = 0;
            sub_41CC40((void *)v75, v77);
            v67 = (_DWORD *)sub_41CA70(v82);
            v77 = *(_DWORD *)unknown_libname_88(*v67);
          }
          v68 = (int *)sub_41CA70(v82);
          v69 = (_DWORD *)sub_41CA60(*v68);
          *(_DWORD *)sub_41CA60(v77) = *v69;
          v70 = (int *)sub_41CA70(v82);
          *(_DWORD *)sub_41CA60(*v70) = 1;
          v71 = (int *)unknown_libname_88(v77);
          *(_DWORD *)sub_41CA60(*v71) = 1;
          v72 = (int *)sub_41CA70(v82);
          sub_41CDF0((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_41CA60(v77) = 0;
        v82 = *(_DWORD *)sub_41CA70(v82);
      }
    }
    *(_DWORD *)sub_41CA60(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = sub_41B830((int)v81);
  sub_41CF90(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 41C6D0: using guessed type int __thiscall unknown_libname_90(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041C0F0) --------------------------------------------------------
int __thiscall sub_41C0F0(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_41CBB0(this, a3);
  unknown_libname_91(v3);
  return a2;
}
// 41C6E0: using guessed type _DWORD __stdcall unknown_libname_91(_DWORD);

//----- (0041C120) --------------------------------------------------------
int __thiscall sub_41C120(void *this, int a2, _DWORD *a3)
{
  void *v3; // ST0C_4@1
  _DWORD *v4; // ST08_4@1
  _DWORD *v5; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = (_DWORD *)sub_41CA80(this, (int)&v8, a3);
  v5 = (_DWORD *)sub_41C0F0(v3, (int)&v7, a3);
  sub_41D0C0(a2, v5, v4);
  return a2;
}

//----- (0041C160) --------------------------------------------------------
void *__thiscall sub_41C160(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  int v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_47EFE4; a2 = i )
  {
    v3 = (void **)sub_41B820((int)i);
    sub_41C160(*v3);
    i = *(void **)unknown_libname_88(i);
    v4 = sub_41B830((int)a2);
    sub_41CF90(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041C1E0) --------------------------------------------------------
int __thiscall sub_41C1E0(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_41CF20(a4, 0);
  *(_DWORD *)unknown_libname_88(v48) = dword_47EFE4;
  *(_DWORD *)sub_41B820((int)v48) = dword_47EFE4;
  v5 = (void *)sub_41B830((int)v48);
  sub_41CF70(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_47EFE4
    || (v6 = sub_41B7F0(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_41B7B0(v7, v6)) )
  {
    v8 = (char **)unknown_libname_88(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_41C6B0(v46);
      *v9 = v48;
      v10 = (char **)sub_41C690(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_41C670(v46) )
    {
      v11 = (char **)sub_41C670(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_41B820(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_41C690(v46) )
    {
      v13 = (char **)sub_41C690(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_41C6B0(v46) )
  {
    v14 = (int *)sub_41CA70((int)v49);
    if ( *(_DWORD *)sub_41CA60(*v14) )
      break;
    v15 = (_DWORD *)sub_41CA70((int)v49);
    v16 = (int *)sub_41CA70((int)v49);
    v17 = (_DWORD *)sub_41CA70(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_88(*v17) )
    {
      v18 = (int *)sub_41CA70((int)v49);
      v19 = (int *)sub_41CA70(*v18);
      v20 = (int *)sub_41B820(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_41CA60(*v20) )
      {
        v25 = (int *)sub_41CA70((int)v49);
        if ( v49 == *(char **)sub_41B820(*v25) )
        {
          v49 = *(char **)sub_41CA70((int)v49);
          sub_41CC40((void *)v46, (int)v49);
        }
        v26 = (int *)sub_41CA70((int)v49);
        *(_DWORD *)sub_41CA60(*v26) = 1;
        v27 = (int *)sub_41CA70((int)v49);
        v28 = (int *)sub_41CA70(*v27);
        *(_DWORD *)sub_41CA60(*v28) = 0;
        v29 = (int *)sub_41CA70((int)v49);
        v30 = (int *)sub_41CA70(*v29);
        sub_41CDF0((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_41CA70((int)v49);
        *(_DWORD *)sub_41CA60(*v21) = 1;
        *(_DWORD *)sub_41CA60(v50) = 1;
        v22 = (int *)sub_41CA70((int)v49);
        v23 = (int *)sub_41CA70(*v22);
        *(_DWORD *)sub_41CA60(*v23) = 0;
        v24 = (int *)sub_41CA70((int)v49);
        v49 = *(char **)sub_41CA70(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_41CA70((int)v49);
      v32 = (_DWORD *)sub_41CA70(*v31);
      v33 = (int *)unknown_libname_88(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_41CA60(*v33) )
      {
        v38 = (_DWORD *)sub_41CA70((int)v49);
        if ( v49 == *(char **)unknown_libname_88(*v38) )
        {
          v49 = *(char **)sub_41CA70((int)v49);
          sub_41CDF0((void *)v46, (int)v49);
        }
        v39 = (int *)sub_41CA70((int)v49);
        *(_DWORD *)sub_41CA60(*v39) = 1;
        v40 = (int *)sub_41CA70((int)v49);
        v41 = (int *)sub_41CA70(*v40);
        *(_DWORD *)sub_41CA60(*v41) = 0;
        v42 = (int *)sub_41CA70((int)v49);
        v43 = (int *)sub_41CA70(*v42);
        sub_41CC40((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_41CA70((int)v49);
        *(_DWORD *)sub_41CA60(*v34) = 1;
        *(_DWORD *)sub_41CA60(v51) = 1;
        v35 = (int *)sub_41CA70((int)v49);
        v36 = (int *)sub_41CA70(*v35);
        *(_DWORD *)sub_41CA60(*v36) = 0;
        v37 = (int *)sub_41CA70((int)v49);
        v49 = *(char **)sub_41CA70(*v37);
      }
    }
  }
  v44 = (int *)sub_41C6B0(v46);
  *(_DWORD *)sub_41CA60(*v44) = 1;
  unknown_libname_91(v48);
  return a2;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 41C6E0: using guessed type _DWORD __stdcall unknown_libname_91(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041C670) --------------------------------------------------------
int __thiscall sub_41C670(int this)
{
  return unknown_libname_88(*(_DWORD *)(this + 4));
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);

//----- (0041C690) --------------------------------------------------------
int __thiscall sub_41C690(int this)
{
  return sub_41B820(*(_DWORD *)(this + 4));
}

//----- (0041C6B0) --------------------------------------------------------
int __thiscall sub_41C6B0(int this)
{
  return sub_41CA70(*(_DWORD *)(this + 4));
}

//----- (0041C700) --------------------------------------------------------
_DWORD *__thiscall sub_41C700(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_96(this);
  *a2 = v3;
  return a2;
}
// 41D0A0: using guessed type int __cdecl unknown_libname_96(_DWORD);

//----- (0041C750) --------------------------------------------------------
_DWORD *__thiscall sub_41C750(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_41C8E0(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_47EFDC )
  {
    dword_47EFDC = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_83(dword_47EFDC) = 0;
    *(_DWORD *)sub_41AE20(dword_47EFDC) = 0;
  }
  ++dword_47EFE0;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_41C8E0(dword_47EFDC, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_41B3C0((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_41B590((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;
// 47EFE0: using guessed type int dword_47EFE0;

//----- (0041C850) --------------------------------------------------------
int __thiscall sub_41C850(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_41D110((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_47EFDC )
  {
    v3 = sub_41ADE0(v6);
    if ( (unsigned __int8)sub_41AD90(v3, a2) )
    {
      v6 = *(_DWORD *)sub_41AE20(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_83(v6);
    }
  }
  return v5;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041C8E0) --------------------------------------------------------
char *__stdcall sub_41C8E0(int a1, int a2)
{
  char *result; // eax@1

  result = sub_41D0F0(0x18u);
  *(_DWORD *)sub_41AE10((int)result) = a1;
  *(_DWORD *)sub_41ADD0((int)result) = a2;
  return result;
}

//----- (0041C930) --------------------------------------------------------
void *__stdcall sub_41C930(void *a1, int a2)
{
  return sub_41D3E0(a1, a2);
}

//----- (0041C970) --------------------------------------------------------
int *__thiscall sub_41C970(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_41ADD0(*this) || (v1 = (int *)sub_41AE10(*v5), *(_DWORD *)sub_41AE10(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_83(*v5) == dword_47EFDC )
    {
      while ( 1 )
      {
        v4 = (int **)sub_41AE10(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_83(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_83(*v5);
      result = (int *)sub_41B510(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_41AE20(*v5);
    *v5 = *result;
  }
  return result;
}
// 41AE00: using guessed type _DWORD __cdecl unknown_libname_83(_DWORD);
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041CA60) --------------------------------------------------------
int __cdecl sub_41CA60(int a1)
{
  return a1 + 20;
}

//----- (0041CA70) --------------------------------------------------------
int __cdecl sub_41CA70(int a1)
{
  return a1 + 4;
}

//----- (0041CA80) --------------------------------------------------------
int __thiscall sub_41CA80(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_41D210(this, a3);
  unknown_libname_91(v3);
  return a2;
}
// 41C6E0: using guessed type _DWORD __stdcall unknown_libname_91(_DWORD);

//----- (0041CAB0) --------------------------------------------------------
_DWORD *__thiscall sub_41CAB0(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_41CF20(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_47EFE4 )
  {
    dword_47EFE4 = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_88(dword_47EFE4) = 0;
    *(_DWORD *)sub_41B820(dword_47EFE4) = 0;
  }
  ++dword_47EFE8;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_41CF20(dword_47EFE4, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_41C670((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_41C690((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;
// 47EFE8: using guessed type int dword_47EFE8;

//----- (0041CBB0) --------------------------------------------------------
int __thiscall sub_41CBB0(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_41D1F0((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_47EFE4 )
  {
    v3 = sub_41B7F0(v6);
    if ( (unsigned __int8)sub_41B7B0(v3, a2) )
    {
      v6 = *(_DWORD *)sub_41B820(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_88(v6);
    }
  }
  return v5;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041CC40) --------------------------------------------------------
int *__thiscall sub_41CC40(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_41B820(a2);
  v2 = (_DWORD *)unknown_libname_88(v10);
  *(_DWORD *)sub_41B820(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_88(v10) != dword_47EFE4 )
  {
    v3 = (int *)unknown_libname_88(v10);
    *(_DWORD *)sub_41CA70(*v3) = a2;
  }
  v4 = (_DWORD *)sub_41CA70(a2);
  *(_DWORD *)sub_41CA70(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_41C6B0(v9) )
  {
    *(_DWORD *)sub_41C6B0(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_41CA70(a2);
    if ( a2 == *(_DWORD *)unknown_libname_88(*v5) )
    {
      v6 = (_DWORD *)sub_41CA70(a2);
      *(_DWORD *)unknown_libname_88(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_41CA70(a2);
      *(_DWORD *)sub_41B820(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_88(v10) = a2;
  result = (int *)sub_41CA70(a2);
  *result = v10;
  return result;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041CD70) --------------------------------------------------------
int __cdecl sub_41CD70(int a1)
{
  while ( *(_DWORD *)sub_41B820(a1) != dword_47EFE4 )
    a1 = *(_DWORD *)sub_41B820(a1);
  return a1;
}
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041CDB0) --------------------------------------------------------
int __cdecl sub_41CDB0(int a1)
{
  while ( *(_DWORD *)unknown_libname_88(a1) != dword_47EFE4 )
    a1 = *(_DWORD *)unknown_libname_88(a1);
  return a1;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041CDF0) --------------------------------------------------------
int *__thiscall sub_41CDF0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_88(a2);
  v2 = (_DWORD *)sub_41B820(v10);
  *(_DWORD *)unknown_libname_88(a2) = *v2;
  if ( *(_DWORD *)sub_41B820(v10) != dword_47EFE4 )
  {
    v3 = (int *)sub_41B820(v10);
    *(_DWORD *)sub_41CA70(*v3) = a2;
  }
  v4 = (_DWORD *)sub_41CA70(a2);
  *(_DWORD *)sub_41CA70(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_41C6B0(v9) )
  {
    *(_DWORD *)sub_41C6B0(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_41CA70(a2);
    if ( a2 == *(_DWORD *)sub_41B820(*v5) )
    {
      v6 = (int *)sub_41CA70(a2);
      *(_DWORD *)sub_41B820(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_41CA70(a2);
      *(_DWORD *)unknown_libname_88(*v7) = v10;
    }
  }
  *(_DWORD *)sub_41B820(v10) = a2;
  result = (int *)sub_41CA70(a2);
  *result = v10;
  return result;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041CF20) --------------------------------------------------------
char *__stdcall sub_41CF20(int a1, int a2)
{
  char *result; // eax@1

  result = sub_41D1D0(0x18u);
  *(_DWORD *)sub_41CA70((int)result) = a1;
  *(_DWORD *)sub_41CA60((int)result) = a2;
  return result;
}

//----- (0041CF70) --------------------------------------------------------
void *__stdcall sub_41CF70(void *a1, int a2)
{
  return sub_41D420(a1, a2);
}

//----- (0041CF90) --------------------------------------------------------
void __stdcall sub_41CF90(int a1)
{
  sub_41D460();
}

//----- (0041CFD0) --------------------------------------------------------
int *__thiscall sub_41CFD0(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_41CA60(*this) || (v1 = (int *)sub_41CA70(*v5), *(_DWORD *)sub_41CA70(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_88(*v5) == dword_47EFE4 )
    {
      while ( 1 )
      {
        v4 = (int **)sub_41CA70(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_88(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_88(*v5);
      result = (int *)sub_41CD70(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_41B820(*v5);
    *v5 = *result;
  }
  return result;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041D0C0) --------------------------------------------------------
int __thiscall sub_41D0C0(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (0041D0F0) --------------------------------------------------------
char *__stdcall sub_41D0F0(size_t a1)
{
  return std::_Allocate(a1, 0);
}

//----- (0041D110) --------------------------------------------------------
int __thiscall sub_41D110(int this)
{
  return sub_41AE10(*(_DWORD *)(this + 4));
}

//----- (0041D130) --------------------------------------------------------
_DWORD *__thiscall sub_41D130(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_41AE20(*this) == dword_47EFDC )
  {
    while ( 1 )
    {
      v3 = (int *)sub_41AE10(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_41AE20(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_41AE20(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_41AE20(*v4);
    result = (_DWORD *)sub_41B550(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 47EFDC: using guessed type int dword_47EFDC;

//----- (0041D1D0) --------------------------------------------------------
char *__stdcall sub_41D1D0(size_t a1)
{
  return std::_Allocate(a1, 0);
}

//----- (0041D1F0) --------------------------------------------------------
int __thiscall sub_41D1F0(int this)
{
  return sub_41CA70(*(_DWORD *)(this + 4));
}

//----- (0041D210) --------------------------------------------------------
int __thiscall sub_41D210(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_41D1F0((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_47EFE4 )
  {
    v3 = sub_41B7F0(v6);
    if ( (unsigned __int8)sub_41B7B0(a2, v3) )
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_88(v6);
    }
    else
    {
      v6 = *(_DWORD *)sub_41B820(v6);
    }
  }
  return v5;
}
// 41B810: using guessed type _DWORD __cdecl unknown_libname_88(_DWORD);
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041D2A0) --------------------------------------------------------
_DWORD *__thiscall sub_41D2A0(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_41B820(*this) == dword_47EFE4 )
  {
    while ( 1 )
    {
      v3 = (int *)sub_41CA70(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_41B820(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_41B820(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_41B820(*v4);
    result = (_DWORD *)sub_41CDB0(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 47EFE4: using guessed type int dword_47EFE4;

//----- (0041D340) --------------------------------------------------------
int __cdecl sub_41D340(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (0041D370) --------------------------------------------------------
int __cdecl sub_41D370(char a1, char a2, _DWORD *a3)
{
  int v3; // ecx@0
  char v4; // dl@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = v3;
  v4 = *sub_41D470(&v6);
  return sub_41D490(a1, a2, a3);
}

//----- (0041D3A0) --------------------------------------------------------
void sub_41D3A0()
{
  ;
}

//----- (0041D3B0) --------------------------------------------------------
int __cdecl sub_41D3B0(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (0041D3E0) --------------------------------------------------------
void *__cdecl sub_41D3E0(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (0041D420) --------------------------------------------------------
void *__cdecl sub_41D420(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (0041D460) --------------------------------------------------------
void sub_41D460()
{
  ;
}

//----- (0041D470) --------------------------------------------------------
_BYTE *__cdecl sub_41D470(_BYTE *a1)
{
  char v2; // [sp+4h] [bp-4h]@1

  *a1 = v2;
  return a1;
}

//----- (0041D490) --------------------------------------------------------
int __cdecl sub_41D490(char a1, char a2, _DWORD *a3)
{
  int result; // eax@1
  int savedregs; // [sp+0h] [bp+0h]@0

  while ( 1 )
  {
    result = (unsigned __int8)sub_419B40(&a1, &a2);
    if ( !result )
      break;
    ++*a3;
    unknown_libname_96(savedregs);
  }
  return result;
}
// 41D0A0: using guessed type int __cdecl unknown_libname_96(_DWORD);

//----- (0041D4D0) --------------------------------------------------------
DNameNode *__thiscall sub_41D4D0(DNameNode *this, int a2)
{
  DNameNode *v2; // ST0C_4@1

  v2 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v2 = &off_45F5C8;
  InitializeCriticalSection((LPCRITICAL_SECTION)((char *)v2 + 8));
  *((_DWORD *)v2 + 22) = a2;
  memset((char *)v2 + 32, 0, 0x14u);
  memset((char *)v2 + 52, 0, 0x14u);
  *((_DWORD *)v2 + 18) = sub_417DD3();
  *((_DWORD *)v2 + 21) = 0;
  *((_DWORD *)v2 + 20) = 0;
  *((_DWORD *)v2 + 19) = 0;
  return v2;
}
// 45F5C8: using guessed type int (__stdcall *off_45F5C8)(int);

//----- (0041D583) --------------------------------------------------------
void *__thiscall sub_41D583(int this)
{
  _DWORD *v1; // ST08_4@3
  int v3; // [sp+0h] [bp-14h]@1

  v3 = this;
  *(_DWORD *)this = &off_45F5C8;
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 8));
  sub_41E170(*(_DWORD *)(v3 + 72));
  while ( *(_DWORD *)(v3 + 76) )
  {
    v1 = *(_DWORD **)(v3 + 76);
    *(_DWORD *)(v3 + 76) = *(_DWORD *)(*(_DWORD *)(v3 + 76) + 8200);
    sub_417EC2(v1);
  }
  return sub_418081((void *)v3);
}
// 45F5C8: using guessed type int (__stdcall *off_45F5C8)(int);

//----- (0041D61F) --------------------------------------------------------
LONG __thiscall sub_41D61F(int this)
{
  LONG result; // eax@1
  int v2; // [sp+0h] [bp-Ch]@1
  char optval[2]; // [sp+4h] [bp-8h]@2
  __int16 v4; // [sp+6h] [bp-6h]@2
  SOCKET s; // [sp+8h] [bp-4h]@1

  v2 = this;
  result = InterlockedExchange((volatile LONG *)(this + 88), -1);
  s = result;
  if ( result != -1 )
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v2 + 24))(v2);
    strcpy(optval, "\x01");
    v4 = 0;
    setsockopt(s, 0xFFFF, 128, optval, 4);
    closesocket(s);
    result = sub_4180B3(v2);
  }
  return result;
}

//----- (0041D687) --------------------------------------------------------
LONG __thiscall sub_41D687(ULONG_PTR this, HANDLE ExistingCompletionPort)
{
  LONG result; // eax@2
  ULONG_PTR CompletionKey; // [sp+0h] [bp-8h]@1
  char optval[4]; // [sp+4h] [bp-4h]@1

  CompletionKey = this;
  *(_DWORD *)optval = 0;
  setsockopt(*(_DWORD *)(this + 88), 0xFFFF, 4098, optval, 4);
  *(_DWORD *)optval = 0;
  setsockopt(*(_DWORD *)(CompletionKey + 88), 0xFFFF, 4097, optval, 4);
  if ( CreateIoCompletionPort(*(HANDLE *)(CompletionKey + 88), ExistingCompletionPort, CompletionKey, 0) )
  {
    result = (*(int (__thiscall **)(ULONG_PTR))(*(_DWORD *)CompletionKey + 28))(CompletionKey);
  }
  else
  {
    sub_42DBFC((int)&unk_47FA00, 3, aInitilizeCompl);
    result = sub_41D61F(CompletionKey);
  }
  return result;
}

//----- (0041D722) --------------------------------------------------------
int __thiscall sub_41D722(void *this)
{
  return (*(int (__cdecl **)(void *))(*(_DWORD *)this + 32))(this);
}

//----- (0041D738) --------------------------------------------------------
LONG __thiscall sub_41D738(void *this, int a2, int a3, char *a4)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = (int)this;
  if ( a2 )
  {
    if ( a4 == (char *)this + 32 )
    {
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)this + 36))(this, a3);
    }
    else if ( a4 == (char *)this + 52 )
    {
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)this + 40))(this, a3);
    }
  }
  else if ( a4 == (char *)this + 32 || a4 == (char *)this + 52 )
  {
    sub_41D61F((int)this);
  }
  return sub_4180B3(v5);
}

//----- (0041D7A9) --------------------------------------------------------
int __thiscall sub_41D7A9(int this, int a2)
{
  int result; // eax@2

  if ( a2 )
  {
    if ( *(_DWORD *)(this + 4) > 0 )
    {
      *(_DWORD *)(*(_DWORD *)(this + 72) + 8196) += a2;
      result = (*(int (__thiscall **)(int))(*(_DWORD *)this + 32))(this);
    }
    else
    {
      result = sub_42DBFC((int)&unk_47FA00, 3, aInvalidSocket);
    }
  }
  else
  {
    result = sub_41D61F(this);
  }
  return result;
}

//----- (0041D80B) --------------------------------------------------------
void __thiscall sub_41D80B(int this, int a2)
{
  int v2; // [sp+0h] [bp-18h]@1
  DWORD v3; // [sp+4h] [bp-14h]@6
  DWORD NumberOfBytesSent; // [sp+8h] [bp-10h]@4
  struct _WSABUF Buffers; // [sp+Ch] [bp-Ch]@4
  _DWORD *v6; // [sp+14h] [bp-4h]@3

  v2 = this;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 8));
  if ( a2 == *(_DWORD *)(*(_DWORD *)(v2 + 76) + 8196) )
  {
    *(_DWORD *)(v2 + 84) -= *(_DWORD *)(*(_DWORD *)(v2 + 76) + 8196);
    v6 = *(_DWORD **)(v2 + 76);
    *(_DWORD *)(v2 + 76) = *(_DWORD *)(*(_DWORD *)(v2 + 76) + 8200);
    if ( *(_DWORD *)(v2 + 76) )
    {
      LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 8));
      sub_418095(v2);
      Buffers.len = *(_DWORD *)(*(_DWORD *)(v2 + 76) + 8196);
      Buffers.buf = (char *)(*(_DWORD *)(v2 + 76) + 4);
      if ( WSASend(*(_DWORD *)(v2 + 88), &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)(v2 + 52), 0)
        && GetLastError() != 997 )
      {
        v3 = GetLastError();
        if ( v3 != 10038 && v3 != 10054 && v3 != 10053 )
          sub_42DBFC((int)&unk_47FA00, 3, aCiosocketWrite, *(_DWORD *)(v2 + 88), v2, v3);
        sub_4180B3(v2);
      }
    }
    else
    {
      *(_DWORD *)(v2 + 80) = 0;
      LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 8));
    }
    sub_417EC2(v6);
  }
  else
  {
    sub_42DBFC(
      (int)&unk_47FA00,
      3,
      aDifferentWrite,
      *(_DWORD *)(v2 + 88),
      v2,
      a2,
      *(_DWORD *)(*(_DWORD *)(v2 + 76) + 8196));
    LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 8));
    sub_4180B3(v2);
  }
}

//----- (0041D995) --------------------------------------------------------
int __thiscall sub_41D995(int this, size_t a2)
{
  _DWORD *v2; // ST24_4@2
  int result; // eax@4
  int v4; // [sp+0h] [bp-1Ch]@1
  DWORD v5; // [sp+4h] [bp-18h]@6
  DWORD NumberOfBytesRecvd; // [sp+Ch] [bp-10h]@4
  DWORD Flags; // [sp+10h] [bp-Ch]@4
  struct _WSABUF Buffers; // [sp+14h] [bp-8h]@4

  v4 = this;
  *(_DWORD *)(*(_DWORD *)(this + 72) + 8196) -= a2;
  if ( *(_DWORD *)(*(_DWORD *)(this + 72) + 8204) == 1 )
  {
    memcpy_0(
      (void *)(*(_DWORD *)(this + 72) + 4),
      (const void *)(*(_DWORD *)(this + 72) + *(_DWORD *)(*(_DWORD *)(this + 72) + 8196) + 4),
      a2);
  }
  else
  {
    v2 = sub_417DD3();
    memcpy(v2 + 1, (const void *)(*(_DWORD *)(v4 + 72) + *(_DWORD *)(*(_DWORD *)(v4 + 72) + 8196) + 4), a2);
    sub_41E170(*(_DWORD *)(v4 + 72));
    *(_DWORD *)(v4 + 72) = v2;
  }
  *(_DWORD *)(*(_DWORD *)(v4 + 72) + 8196) = a2;
  sub_418095(v4);
  Buffers.len = 0x2000 - *(_DWORD *)(*(_DWORD *)(v4 + 72) + 8196);
  Buffers.buf = (char *)(*(_DWORD *)(v4 + 72) + *(_DWORD *)(*(_DWORD *)(v4 + 72) + 8196) + 4);
  Flags = 0;
  result = WSARecv(*(_DWORD *)(v4 + 88), &Buffers, 1u, &NumberOfBytesRecvd, &Flags, (LPWSAOVERLAPPED)(v4 + 32), 0);
  if ( result )
  {
    result = GetLastError();
    if ( result != 997 )
    {
      v5 = GetLastError();
      if ( v5 != 10038 && v5 != 10054 && v5 != 10053 )
        sub_42DBFC((int)&unk_47FA00, 3, aCiosocketReadX, *(_DWORD *)(v4 + 88), v4, v5);
      sub_41D61F(v4);
      result = sub_4180B3(v4);
    }
  }
  return result;
}

//----- (0041DB1A) --------------------------------------------------------
void __thiscall sub_41DB1A(int this, int a2)
{
  int v2; // [sp+0h] [bp-14h]@1
  DWORD v3; // [sp+4h] [bp-10h]@6
  DWORD NumberOfBytesSent; // [sp+8h] [bp-Ch]@4
  struct _WSABUF Buffers; // [sp+Ch] [bp-8h]@4

  v2 = this;
  if ( *(_DWORD *)(a2 + 8196) )
  {
    EnterCriticalSection((LPCRITICAL_SECTION)(this + 8));
    *(_DWORD *)(v2 + 84) += *(_DWORD *)(a2 + 8196);
    if ( *(_DWORD *)(v2 + 80) )
    {
      if ( *(_DWORD *)(v2 + 76) == *(_DWORD *)(v2 + 80)
        || (unsigned int)(*(_DWORD *)(a2 + 8196) + *(_DWORD *)(*(_DWORD *)(v2 + 80) + 8196)) > 0x2000 )
      {
        *(_DWORD *)(*(_DWORD *)(v2 + 80) + 8200) = a2;
        *(_DWORD *)(v2 + 80) = a2;
        LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 8));
      }
      else
      {
        memcpy(
          (void *)(*(_DWORD *)(v2 + 80) + *(_DWORD *)(*(_DWORD *)(v2 + 80) + 8196) + 4),
          (const void *)(a2 + 4),
          *(_DWORD *)(a2 + 8196));
        *(_DWORD *)(*(_DWORD *)(v2 + 80) + 8196) += *(_DWORD *)(a2 + 8196);
        LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 8));
        sub_417EC2((_DWORD *)a2);
      }
    }
    else
    {
      *(_DWORD *)(v2 + 80) = a2;
      *(_DWORD *)(v2 + 76) = a2;
      LeaveCriticalSection((LPCRITICAL_SECTION)(v2 + 8));
      sub_418095(v2);
      Buffers.len = *(_DWORD *)(a2 + 8196);
      Buffers.buf = (char *)(a2 + 4);
      NumberOfBytesSent = 0;
      if ( WSASend(*(_DWORD *)(v2 + 88), &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)(v2 + 52), 0)
        && GetLastError() != 997 )
      {
        v3 = GetLastError();
        if ( v3 != 10038 && v3 != 10054 && v3 != 10053 )
          sub_42DBFC((int)&unk_47FA00, 3, aCiosocketWri_0, *(_DWORD *)(v2 + 88), v2, v3);
        sub_4180B3(v2);
      }
    }
  }
  else
  {
    sub_417EC2((_DWORD *)a2);
  }
}

//----- (0041DD84) --------------------------------------------------------
int sub_41DD84()
{
  return `eh vector constructor iterator'(&unk_47EFF0, 0x24u, 16, (int)sub_41E0A0, unknown_libname_98);
}

//----- (0041DDA1) --------------------------------------------------------
int sub_41DDA1()
{
  return atexit(sub_41DDB3);
}

//----- (0041DDB3) --------------------------------------------------------
void __cdecl sub_41DDB3()
{
  if ( !(byte_47F235 & 1) )
  {
    byte_47F235 |= 1u;
    `eh vector destructor iterator'(&unk_47EFF0, 0x24u, 16, unknown_libname_98);
  }
}
// 47F235: using guessed type char byte_47F235;

//----- (0041DDF7) --------------------------------------------------------
void sub_41DDF7()
{
  ;
}

//----- (0041DDFC) --------------------------------------------------------
int sub_41DDFC()
{
  return atexit(sub_41DE0E);
}

//----- (0041DE0E) --------------------------------------------------------
void __cdecl sub_41DE0E()
{
  sub_41E0F0();
}

//----- (0041DE1D) --------------------------------------------------------
DNameNode *sub_41DE1D()
{
  DNameNode *v1; // [sp+0h] [bp-20h]@4
  DNameNode *v2; // [sp+4h] [bp-1Ch]@3
  char *v3; // [sp+Ch] [bp-14h]@1
  DNameNode *v4; // [sp+10h] [bp-10h]@1

  v3 = (char *)&unk_47EFF0 + 36 * (InterlockedIncrement(&dword_46BAFC) & 0xF);
  sub_42D4B5((int)(v3 + 4));
  v4 = *(DNameNode **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = *((_DWORD *)v4 + 2);
    sub_42D4F0((int)(v3 + 4));
  }
  else
  {
    sub_42D4F0((int)(v3 + 4));
    v2 = (DNameNode *)unknown_libname_49(0x14u);
    if ( v2 )
      v1 = sub_41E100(v2);
    else
      v1 = 0;
    v4 = v1;
  }
  return v4;
}

//----- (0041DEDF) --------------------------------------------------------
void __thiscall sub_41DEDF(_DWORD *this)
{
  _DWORD *v1; // ST04_4@1
  char *v2; // ST08_4@1

  v1 = this;
  v2 = (char *)&unk_47EFF0 + 36 * (InterlockedDecrement(&dword_47F238) & 0xF);
  sub_42D4B5((int)(v2 + 4));
  v1[2] = *(_DWORD *)v2;
  *(_DWORD *)v2 = v1;
  sub_42D4F0((int)(v2 + 4));
}

//----- (0041DF2E) --------------------------------------------------------
void sub_41DF2E()
{
  char *v0; // [sp+Ch] [bp-Ch]@3
  int v1; // [sp+10h] [bp-8h]@4
  signed int i; // [sp+14h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v0 = (char *)&unk_47EFF0 + 36 * i;
    sub_42D4B5((int)&unk_47EFF0 + 36 * i + 4);
    while ( 1 )
    {
      v1 = *(_DWORD *)v0;
      if ( !*(_DWORD *)v0 )
        break;
      *(_DWORD *)v0 = *(_DWORD *)(v1 + 8);
      if ( v1 )
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
    }
    sub_42D4F0((int)(v0 + 4));
  }
}

//----- (0041DFBC) --------------------------------------------------------
void __thiscall sub_41DFBC(int this, int a2, int a3, int a4)
{
  int v4; // [sp+0h] [bp-8h]@1

  v4 = this;
  if ( (*(int (__cdecl **)(_DWORD, int))(this + 16))(*(_DWORD *)(this + 8), *(_DWORD *)(this + 12) + a3 + 5) & 0xFF )
  {
    sub_41D61F(*(_DWORD *)(v4 + 8));
    sub_42DBFC((int)&unk_47FA00, 3, aServerclosePac);
  }
  sub_4180B3(*(_DWORD *)(v4 + 8));
  sub_41E170(*(_DWORD *)(v4 + 12));
  InterlockedDecrement(&dword_47F230);
  sub_41DEDF((_DWORD *)v4);
}

//----- (0041E052) --------------------------------------------------------
int sub_41E052()
{
  return atexit(sub_402150);
}

//----- (0041E070) --------------------------------------------------------
void *__thiscall sub_41E070(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_41D583((int)this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0041E0A0) --------------------------------------------------------
int __thiscall sub_41E0A0(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (0041E0F0) --------------------------------------------------------
void sub_41E0F0()
{
  sub_41DF2E();
}

//----- (0041E100) --------------------------------------------------------
DNameNode *__thiscall sub_41E100(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F5F4;
  return v1;
}
// 45F5F4: using guessed type int (__stdcall *off_45F5F4)(int);

//----- (0041E120) --------------------------------------------------------
void *__thiscall sub_41E120(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_99();
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);
// 41E150: using guessed type int unknown_libname_99(void);

//----- (0041E170) --------------------------------------------------------
void __thiscall sub_41E170(int this)
{
  _DWORD *v1; // [sp+0h] [bp-4h]@1

  v1 = (_DWORD *)this;
  if ( !InterlockedDecrement((volatile LONG *)(this + 8204)) )
    sub_417EC2(v1);
}

//----- (0041E1AF) --------------------------------------------------------
_DWORD *sub_41E1AF()
{
  return sub_41E233((int)&unk_47F240);
}

//----- (0041E1BE) --------------------------------------------------------
int sub_41E1BE()
{
  return atexit(sub_41E1D0);
}

//----- (0041E1D0) --------------------------------------------------------
void __cdecl sub_41E1D0()
{
  sub_41E296(&unk_47F240);
}

//----- (0041E1DF) --------------------------------------------------------
void *__thiscall sub_41E1DF(void *this)
{
  void *v1; // ST04_4@1
  char v3; // [sp+4h] [bp-10h]@1
  int v4; // [sp+10h] [bp-4h]@1

  v1 = this;
  sub_41F130((int)this, &v3);
  v4 = 0;
  sub_42D5C4((struct _RTL_CRITICAL_SECTION *)((char *)v1 + 16));
  return v1;
}

//----- (0041E233) --------------------------------------------------------
_DWORD *__thiscall sub_41E233(int this)
{
  _DWORD *v2; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  v2 = (_DWORD *)this;
  `eh vector constructor iterator'((void *)(this + 388), 0x10u, 16, (int)sub_41EE00, unknown_libname_101);
  *v2 = off_45F60C;
  for ( i = 0; i < 16; ++i )
    InitializeCriticalSection((LPCRITICAL_SECTION)&v2[6 * i + 1]);
  return v2;
}
// 45F60C: using guessed type int (__stdcall *off_45F60C[2])(int);

//----- (0041E296) --------------------------------------------------------
int __thiscall sub_41E296(void *this)
{
  void *v2; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  v2 = this;
  *(_DWORD *)this = off_45F60C;
  for ( i = 0; i < 16; ++i )
    DeleteCriticalSection((LPCRITICAL_SECTION)((char *)v2 + 24 * i + 4));
  return `eh vector destructor iterator'((char *)v2 + 388, 0x10u, 16, unknown_libname_101);
}
// 45F60C: using guessed type int (__stdcall *off_45F60C[2])(int);

//----- (0041E2F2) --------------------------------------------------------
unsigned int __stdcall sub_41E2F2(int a1)
{
  unsigned int v2; // [sp+4h] [bp-8h]@1

  v2 = (BYTE3(a1) + BYTE2(a1) + BYTE1(a1) + (_BYTE)a1) & 0xF;
  if ( v2 >= 0x10 )
    v2 = 15;
  return v2;
}

//----- (0041E346) --------------------------------------------------------
char __thiscall sub_41E346(char *this, int a2)
{
  char result; // al@2
  _DWORD *v3; // eax@3
  _DWORD *v4; // ST08_4@5
  struct Concurrency::IExecutionContext *v5; // eax@7
  char *v6; // [sp+4h] [bp-2Ch]@1
  char v7; // [sp+8h] [bp-28h]@7
  char v8; // [sp+10h] [bp-20h]@3
  char v9; // [sp+14h] [bp-1Ch]@3
  int v10; // [sp+18h] [bp-18h]@7
  int v11; // [sp+20h] [bp-10h]@3
  int v12; // [sp+24h] [bp-Ch]@3
  unsigned int v13; // [sp+28h] [bp-8h]@3
  char v14; // [sp+2Ch] [bp-4h]@3

  v6 = this;
  if ( dword_47858C > 0 )
  {
    v14 = 0;
    unknown_libname_103(&v11);
    v13 = sub_41E2F2(a2);
    v12 = 1;
    EnterCriticalSection((LPCRITICAL_SECTION)&v6[24 * v13 + 4]);
    v11 = *sub_41EFC0(&v6[16 * v13 + 388], &v9, &a2);
    v3 = (_DWORD *)sub_41EF40(&v6[16 * v13 + 388], (int)&v8);
    if ( (unsigned __int8)sub_41F100(&v11, v3) )
    {
      if ( *(_DWORD *)(unknown_libname_104(&v11) + 4) < dword_47858C )
      {
        v4 = (_DWORD *)(unknown_libname_104(&v11) + 4);
        ++*v4;
        v14 = 1;
      }
    }
    else
    {
      v5 = (struct Concurrency::IExecutionContext *)sub_41F090((int)&v7, &a2, &v12);
      sub_41EF60(&v6[16 * v13 + 388], (int)&v10, v5);
      v14 = 1;
    }
    LeaveCriticalSection((LPCRITICAL_SECTION)&v6[24 * v13 + 4]);
    result = v14;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 41F0C0: using guessed type int __thiscall unknown_libname_103(_DWORD);
// 41F0E0: using guessed type int __thiscall unknown_libname_104(_DWORD);
// 47858C: using guessed type int dword_47858C;

//----- (0041E461) --------------------------------------------------------
char __thiscall sub_41E461(char *this, int a2)
{
  char result; // al@2
  _DWORD *v3; // eax@3
  int v4; // eax@5
  char *v5; // [sp+4h] [bp-1Ch]@1
  char v6; // [sp+8h] [bp-18h]@6
  char v7; // [sp+Ch] [bp-14h]@3
  char v8; // [sp+10h] [bp-10h]@3
  int v9; // [sp+14h] [bp-Ch]@3
  unsigned int v10; // [sp+18h] [bp-8h]@3
  char v11; // [sp+1Ch] [bp-4h]@3

  v5 = this;
  if ( dword_47858C > 0 )
  {
    v11 = 0;
    unknown_libname_103(&v9);
    v10 = sub_41E2F2(a2);
    EnterCriticalSection((LPCRITICAL_SECTION)&v5[24 * v10 + 4]);
    v9 = *sub_41EFC0(&v5[16 * v10 + 388], &v8, &a2);
    v3 = (_DWORD *)sub_41EF40(&v5[16 * v10 + 388], (int)&v7);
    if ( (unsigned __int8)sub_41F100(&v9, v3) )
    {
      if ( *(_DWORD *)(unknown_libname_104(&v9) + 4) <= 1 )
      {
        sub_41EFA0((Concurrency::details::_NonReentrantPPLLock *)&v5[16 * v10 + 388], &v6, v9);
      }
      else
      {
        v4 = unknown_libname_104(&v9);
        --*(_DWORD *)(v4 + 4);
      }
      v11 = 1;
    }
    LeaveCriticalSection((LPCRITICAL_SECTION)&v5[24 * v10 + 4]);
    result = v11;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 41F0C0: using guessed type int __thiscall unknown_libname_103(_DWORD);
// 41F0E0: using guessed type int __thiscall unknown_libname_104(_DWORD);
// 47858C: using guessed type int dword_47858C;

//----- (0041E56E) --------------------------------------------------------
void *sub_41E56E()
{
  return sub_41E1DF(&unk_47F4C8);
}

//----- (0041E57D) --------------------------------------------------------
int sub_41E57D()
{
  return atexit(sub_41E58F);
}

//----- (0041E58F) --------------------------------------------------------
void __cdecl sub_41E58F()
{
  sub_41EE60((int)&unk_47F4C8);
}

//----- (0041E5AD) --------------------------------------------------------
void *sub_41E5AD()
{
  return sub_41E1DF(&unk_47F4F8);
}

//----- (0041E5BC) --------------------------------------------------------
int sub_41E5BC()
{
  return atexit(sub_41E5CE);
}

//----- (0041E5CE) --------------------------------------------------------
void __cdecl sub_41E5CE()
{
  sub_41EE60((int)&unk_47F4F8);
}

//----- (0041E5DD) --------------------------------------------------------
signed int __thiscall sub_41E5DD(_DWORD *this, char *a2)
{
  char *v3; // edx@3
  size_t v4; // eax@8
  size_t v5; // eax@9
  int v6; // ST28_4@22
  int v7; // eax@22
  int v8; // eax@22
  int v9; // eax@28
  int v10; // [sp+0h] [bp-4D8h]@17
  int v11; // [sp+4h] [bp-4D4h]@15
  _DWORD *v12; // [sp+8h] [bp-4D0h]@1
  unsigned int v13; // [sp+10h] [bp-4C8h]@22
  int v14; // [sp+18h] [bp-4C0h]@22
  __int32 v15; // [sp+1Ch] [bp-4BCh]@8
  unsigned int v16; // [sp+20h] [bp-4B8h]@8
  unsigned int v17; // [sp+24h] [bp-4B4h]@12
  __int32 v18; // [sp+28h] [bp-4B0h]@7
  __int32 v19; // [sp+2Ch] [bp-4ACh]@6
  __int32 v20; // [sp+30h] [bp-4A8h]@5
  char *v21; // [sp+34h] [bp-4A4h]@5
  char v22; // [sp+38h] [bp-4A0h]@4
  int v23; // [sp+438h] [bp-A0h]@1
  char v24[4]; // [sp+4C8h] [bp-10h]@1
  int v25; // [sp+4D4h] [bp-4h]@1

  v12 = this;
  sub_41F2F0((int)&v23, a2, 1, 1);
  v25 = 0;
  *(_DWORD *)v24 = 0;
  if ( std::ios_base::fail((std::ios_base *)((char *)&v23 + *(_DWORD *)(v23 + 4))) )
  {
    v25 = -1;
    std::istrstream::`vbase destructor(&v23);
    return 0;
  }
  sub_42D6C6((int)(v12 + 4));
  sub_41F2C0(v12);
  while ( 1 )
  {
    sub_41EEE0((int)&v23, (int)v3, &v22, 1024);
    ++*(_DWORD *)v24;
    if ( std::ios_base::fail((std::ios_base *)((char *)&v23 + *(_DWORD *)(v23 + 4))) )
      break;
    v21 = &v22;
    v20 = strtol(&v22, &v21, 10);
    v3 = (char *)*v21;
    if ( v3 == (char *)46 )
    {
      ++v21;
      v19 = strtol(v21, &v21, 10);
      if ( *v21 == 46 )
      {
        ++v21;
        v18 = strtol(v21, &v21, 10);
        v3 = v21;
        if ( *v21 == 46 )
        {
          ++v21;
          v15 = strtol(v21, &v21, 10);
          v16 = v15 | (v18 << 8) | (v19 << 16) | (v20 << 24);
          v4 = strspn(v21, asc_46BBEC);
          v21 += v4;
          if ( *v21 != 45 )
          {
            if ( v15 )
            {
              v10 = v16 + 1;
            }
            else
            {
              if ( v18 )
                v11 = v16 + 256;
              else
                v11 = v16 + 0x10000;
              v10 = v11;
            }
            v17 = v10;
            goto LABEL_20;
          }
          v5 = strspn(++v21, asc_46BBF0);
          v21 += v5;
          v20 = strtol(v21, &v21, 10);
          v3 = (char *)*v21;
          if ( v3 == (char *)46 )
          {
            ++v21;
            v19 = strtol(v21, &v21, 10);
            if ( *v21 == 46 )
            {
              ++v21;
              v18 = strtol(v21, &v21, 10);
              v3 = v21;
              if ( *v21 == 46 )
              {
                ++v21;
                v15 = strtol(v21, &v21, 10);
                v17 = (v15 | (v18 << 8) | (v19 << 16) | (v20 << 24)) + 1;
LABEL_20:
                if ( v16 < v17 )
                {
                  v13 = v16 - 1;
                  v6 = unknown_libname_106(v12);
                  v7 = unknown_libname_105(v12);
                  v14 = sub_423900(v7, v6, &v13);
                  v8 = unknown_libname_106(v12);
                  if ( v14 == v8 || *(_DWORD *)v14 > v16 - 1 )
                  {
LABEL_28:
                    while ( 1 )
                    {
                      v9 = unknown_libname_106(v12);
                      if ( v14 == v9 || *(_DWORD *)v14 > v17 )
                        break;
                      if ( *(_DWORD *)v14 != v17 )
                        sub_42DBFC(
                          (int)&unk_47FA00,
                          3,
                          aIplistAddres_0,
                          (unsigned __int16)(*(_DWORD *)v14 >> 16) >> 16,
                          (*(_DWORD *)v14 >> 16) & 0xFF,
                          (*(_DWORD *)v14 >> 8) & 0xFF,
                          *(_DWORD *)v14 & 0xFF,
                          (unsigned __int16)((unsigned int)(*(_DWORD *)(v14 + 4) - 1) >> 16) >> 16,
                          ((unsigned int)(*(_DWORD *)(v14 + 4) - 1) >> 16) & 0xFF,
                          ((unsigned int)(*(_DWORD *)(v14 + 4) - 1) >> 8) & 0xFF,
                          (unsigned __int8)(*(_DWORD *)(v14 + 4) - 1),
                          *(_DWORD *)v24);
                      if ( v17 < *(_DWORD *)(v14 + 4) )
                        v17 = *(_DWORD *)(v14 + 4);
                      v14 = sub_41F260(v12, v14);
                    }
                    sub_41F210(v12, v14, (int)&v16);
                  }
                  else
                  {
                    if ( *(_DWORD *)(v14 + 4) != v16 )
                      sub_42DBFC(
                        (int)&unk_47FA00,
                        3,
                        aIplistAddressI,
                        (unsigned __int16)(*(_DWORD *)v14 >> 16) >> 16,
                        (*(_DWORD *)v14 >> 16) & 0xFF,
                        (*(_DWORD *)v14 >> 8) & 0xFF,
                        *(_DWORD *)v14 & 0xFF,
                        (unsigned __int16)((unsigned int)(*(_DWORD *)(v14 + 4) - 1) >> 16) >> 16,
                        ((unsigned int)(*(_DWORD *)(v14 + 4) - 1) >> 16) & 0xFF,
                        ((unsigned int)(*(_DWORD *)(v14 + 4) - 1) >> 8) & 0xFF,
                        (unsigned __int8)(*(_DWORD *)(v14 + 4) - 1),
                        *(_DWORD *)v24);
                    v3 = *(char **)(v14 + 4);
                    if ( (unsigned int)v3 < v17 )
                    {
                      v16 = *(_DWORD *)v14;
                      v14 = sub_41F260(v12, v14);
                      goto LABEL_28;
                    }
                  }
                }
                else
                {
                  sub_42DBFC((int)&unk_47FA00, 3, aIplistStartAdd, *(_DWORD *)v24);
                }
              }
            }
          }
        }
      }
    }
  }
  sub_42D6FF((int)(v12 + 4));
  sub_42DBFC((int)&unk_47FA00, 0, aIplistLoadedFr, a2);
  v25 = -1;
  std::istrstream::`vbase destructor(&v23);
  return 1;
}
// 41EEB0: using guessed type int __thiscall std::istrstream::`vbase destructor(_DWORD);
// 41F1D0: using guessed type int __thiscall unknown_libname_105(_DWORD);
// 41F1F0: using guessed type int __thiscall unknown_libname_106(_DWORD);

//----- (0041ECDF) --------------------------------------------------------
int __thiscall sub_41ECDF(void *this, unsigned int a2)
{
  int v2; // ST04_4@1
  int v3; // eax@1
  int v5; // [sp+0h] [bp-14h]@3
  void *v6; // [sp+4h] [bp-10h]@1
  unsigned int *v7; // [sp+8h] [bp-Ch]@1
  unsigned int v8; // [sp+Ch] [bp-8h]@1
  int v9; // [sp+10h] [bp-4h]@5

  v6 = this;
  sub_42D61C((int)this + 16);
  v8 = _byteswap_ulong(a2);
  v2 = unknown_libname_106(v6);
  v3 = unknown_libname_105(v6);
  v7 = (unsigned int *)sub_423900(v3, v2, &v8);
  v5 = v7 != (unsigned int *)unknown_libname_106(v6) && *v7 <= v8;
  v9 = v5;
  sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v6 + 16));
  return v9;
}
// 41F1D0: using guessed type int __thiscall unknown_libname_105(_DWORD);
// 41F1F0: using guessed type int __thiscall unknown_libname_106(_DWORD);

//----- (0041EDA3) --------------------------------------------------------
int sub_41EDA3()
{
  return atexit(sub_402150);
}

//----- (0041EDB5) --------------------------------------------------------
int sub_41EDB5()
{
  return atexit(sub_4242C0);
}

//----- (0041EDD0) --------------------------------------------------------
void *__thiscall sub_41EDD0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_41E296(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0041EE00) --------------------------------------------------------
void *__thiscall sub_41EE00(void *this)
{
  char v2; // [sp+4h] [bp-8h]@1
  char v3; // [sp+8h] [bp-4h]@1

  return sub_41EF20(this, &v2, &v3);
}

//----- (0041EE60) --------------------------------------------------------
int __thiscall sub_41EE60(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)(this + 16));
  return sub_41F170(v1);
}

//----- (0041EEE0) --------------------------------------------------------
int __fastcall sub_41EEE0(int a1, int a2, _BYTE *a3, int a4)
{
  int v4; // ST0C_4@1
  unsigned __int8 v5; // cf@1
  char v6; // al@1
  int v7; // edx@1

  v4 = a1;
  v5 = __CFADD__(*(_DWORD *)(*(_DWORD *)a1 + 4), a1);
  v6 = sub_41FFD0(10);
  return sub_4200F0(v4, v7, a3, a4, v6);
}

//----- (0041EF20) --------------------------------------------------------
void *__thiscall sub_41EF20(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_4207F0(this, a2, a3);
  return v3;
}

//----- (0041EF40) --------------------------------------------------------
int __thiscall sub_41EF40(void *this, int a2)
{
  sub_420850((int)this, a2);
  return a2;
}

//----- (0041EF60) --------------------------------------------------------
int __thiscall sub_41EF60(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_420870(this, (int)&v4, a3);
  sub_421830(a2, &v4, &v5);
  return a2;
}

//----- (0041EFA0) --------------------------------------------------------
_DWORD *__thiscall sub_41EFA0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  sub_420A80(this, a2, a3);
  return a2;
}

//----- (0041EFC0) --------------------------------------------------------
_DWORD *__thiscall sub_41EFC0(void *this, _DWORD *a2, _DWORD *a3)
{
  sub_421460(this, a2, a3);
  return a2;
}

//----- (0041EFE0) --------------------------------------------------------
void __thiscall sub_41EFE0(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_420850((int)this, (int)&v6);
  v2 = (int *)sub_420820((void *)v3, (int)&v5);
  sub_421360((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_47F52C )
  {
    v8 = (void *)dword_47F528;
    dword_47F528 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 47F528: using guessed type int dword_47F528;
// 47F52C: using guessed type int dword_47F52C;

//----- (0041F090) --------------------------------------------------------
int __thiscall sub_41F090(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (0041F100) --------------------------------------------------------
BOOL __thiscall sub_41F100(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_421550(this, a2) == 0;
}

//----- (0041F130) --------------------------------------------------------
int __thiscall sub_41F130(int this, _BYTE *a2)
{
  *(_BYTE *)this = *a2;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (0041F170) --------------------------------------------------------
int __thiscall sub_41F170(int this)
{
  int v1; // ST08_4@1
  int result; // eax@1

  v1 = this;
  sub_4217E0(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
  unknown_libname_113(*(_DWORD *)(v1 + 4), (*(_DWORD *)(v1 + 12) - *(_DWORD *)(v1 + 4)) >> 3);
  result = v1;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}
// 421810: using guessed type _DWORD __stdcall unknown_libname_113(_DWORD, _DWORD);

//----- (0041F210) --------------------------------------------------------
int __thiscall sub_41F210(void *this, int a2, int a3)
{
  int v3; // ST0C_4@1
  int v4; // ST10_4@1

  v3 = (int)this;
  v4 = (a2 - ((int (*)(void))unknown_libname_105)()) >> 3;
  sub_421570(v3, a2, 1u, a3);
  return unknown_libname_105(v3) + 8 * v4;
}
// 41F1D0: using guessed type int __thiscall unknown_libname_105(_DWORD);

//----- (0041F260) --------------------------------------------------------
int __thiscall sub_41F260(void *this, int a2)
{
  void *v2; // ST0C_4@1
  int v3; // eax@1

  v2 = this;
  v3 = unknown_libname_106(this);
  sub_423930(a2 + 8, v3, a2);
  sub_4217E0(*((_DWORD *)v2 + 2) - 8, *((_DWORD *)v2 + 2));
  *((_DWORD *)v2 + 2) -= 8;
  return a2;
}
// 41F1F0: using guessed type int __thiscall unknown_libname_106(_DWORD);

//----- (0041F2C0) --------------------------------------------------------
int __thiscall sub_41F2C0(_DWORD *this)
{
  _DWORD *v1; // ST08_4@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v1 = this;
  v2 = unknown_libname_106(this);
  v3 = unknown_libname_105(v1);
  return sub_421790(v1, v3, v2);
}
// 41F1D0: using guessed type int __thiscall unknown_libname_105(_DWORD);
// 41F1F0: using guessed type int __thiscall unknown_libname_106(_DWORD);

//----- (0041F2F0) --------------------------------------------------------
int __thiscall sub_41F2F0(int this, char *a2, int a3, int a4)
{
  int v5; // [sp+0h] [bp-14h]@1

  v5 = this;
  if ( a4 )
  {
    *(_DWORD *)this = &unk_45F614;
    sub_40B1B0((std::ios_base *)(this + 92));
  }
  sub_40B240(v5, v5 + 8, v5 + 8, 0, 0);
  sub_421860((void *)(v5 + 8), 0);
  *(_DWORD *)(v5 + *(_DWORD *)(*(_DWORD *)v5 + 4)) = &off_45F610;
  if ( !sub_4218D0(v5 + 8, a2, a3 | 1) )
    sub_40BC90((void *)(*(_DWORD *)(*(_DWORD *)v5 + 4) + v5), 2, 0);
  return v5;
}
// 45F610: using guessed type int (__stdcall *off_45F610)(int);

//----- (0041F440) --------------------------------------------------------
int __thiscall sub_41F440(int this)
{
  int v2; // [sp+4h] [bp-18h]@1
  void *v3; // [sp+Ch] [bp-10h]@3

  v2 = this;
  *(_DWORD *)this = off_45F61C;
  if ( *(_BYTE *)(this + 72) )
    std::basic_filebuf<char,std::char_traits<char>>::close(this);
  v3 = *(void **)(v2 + 68);
  if ( v3 )
    sub_41FD20(v3, 1);
  std::locale::~locale((std::locale *)(v2 + 76));
  return sub_40B490(v2);
}
// 421920: using guessed type int __thiscall std::basic_filebuf<char,std::char_traits<char>>::close(_DWORD);
// 45F61C: using guessed type int (__stdcall *off_45F61C[3])(int);

//----- (0041F8C0) --------------------------------------------------------
int __thiscall sub_41F8C0(void *this)
{
  unsigned int v1; // esi@2
  int v2; // eax@3
  int result; // eax@3
  int v4; // eax@4
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  if ( ((int (*)(void))std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr)()
    && (v1 = std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(v5),
        v1 < std::basic_streambuf<char,std::char_traits<char>>::egptr(v5)) )
  {
    v2 = std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(v5);
    result = std::char_traits<char>::to_int_type(v2);
  }
  else
  {
    v4 = (*(int (__thiscall **)(void *))(*(_DWORD *)v5 + 20))(v5);
    result = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v5 + 8))(v5, v4);
  }
  return result;
}
// 40B580: using guessed type _DWORD __cdecl std::char_traits<char>::to_int_type(_DWORD);
// 40B6E0: using guessed type int __thiscall std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(_DWORD);
// 40BD70: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::egptr(_DWORD);

//----- (0041FCF0) --------------------------------------------------------
void *__thiscall sub_41FCF0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_41F440((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0041FD20) --------------------------------------------------------
void *__thiscall sub_41FD20(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_41FD50();
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0041FD50) --------------------------------------------------------
int sub_41FD50()
{
  return std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);

//----- (0041FEC0) --------------------------------------------------------
int __thiscall sub_41FEC0(_DWORD *this)
{
  _DWORD *v1; // ST00_4@1

  v1 = this;
  sub_421A20((int)this);
  return v1[1];
}

//----- (0041FEE0) --------------------------------------------------------
int __thiscall sub_41FEE0(_DWORD *this)
{
  _DWORD *v1; // ST08_4@1

  v1 = this;
  sub_421A20((int)this);
  return std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Psum(v1[1], v1[2]);
}
// 421BE0: using guessed type _DWORD __cdecl std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Psum(_DWORD, _DWORD);

//----- (0041FFD0) --------------------------------------------------------
int __stdcall sub_41FFD0(char a1)
{
  std::locale *v1; // eax@1
  char v3; // [sp+Ch] [bp-14h]@1
  int v4; // [sp+10h] [bp-10h]@1
  int v5; // [sp+1Ch] [bp-4h]@1

  v1 = (std::locale *)std::ios_base::getloc(&v3);
  v5 = 0;
  v4 = std::use_facet(v1, 0, 1);
  v5 = -1;
  std::locale::~locale((std::locale *)&v3);
  return std::ctype<char>::do_widen(a1);
}
// 420760: using guessed type _DWORD __stdcall std::ctype<char>::do_widen(char);
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);

//----- (004200F0) --------------------------------------------------------
int __fastcall sub_4200F0(int a1, int a2, _BYTE *a3, int a4, char a5)
{
  int v6; // [sp+0h] [bp-58h]@1
  int v7; // [sp+Ch] [bp-4Ch]@13
  char v8; // [sp+13h] [bp-45h]@10
  void *v9; // [sp+14h] [bp-44h]@7
  int v10; // [sp+18h] [bp-40h]@4
  int v11; // [sp+1Ch] [bp-3Ch]@4
  int v12; // [sp+20h] [bp-38h]@10
  void *v13; // [sp+24h] [bp-34h]@10
  int v14; // [sp+28h] [bp-30h]@3
  int v15; // [sp+2Ch] [bp-2Ch]@3
  int v16; // [sp+30h] [bp-28h]@1
  int v17; // [sp+34h] [bp-24h]@4
  int i; // [sp+38h] [bp-20h]@3
  int v19; // [sp+3Ch] [bp-1Ch]@3
  char v20; // [sp+40h] [bp-18h]@1
  int v21; // [sp+44h] [bp-14h]@1
  int *v22; // [sp+48h] [bp-10h]@1
  int v23; // [sp+54h] [bp-4h]@3

  v22 = &v6;
  v16 = a1;
  v21 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  sub_420310(&v20, a2, v16, 1);
  if ( sub_420340(&v20) && a4 > 0 )
  {
    v19 = std::char_traits<char>::to_int_type(&a5);
    v23 = 0;
    v15 = unknown_libname_110(*(_DWORD *)(*(_DWORD *)v16 + 4) + v16);
    v14 = std::basic_streambuf<char,std::char_traits<char>>::sgetc(v15);
    for ( i = v14; ; i = v12 )
    {
      v11 = std::char_traits<char>::eof();
      v17 = v11;
      LOBYTE(v10) = std::char_traits<char>::eq_int_type(&v17, &i);
      if ( (_BYTE)v10 )
      {
        v21 |= 1u;
        goto LABEL_11;
      }
      if ( i == v19 )
      {
        ++*(_DWORD *)(v16 + 4);
        v9 = (void *)unknown_libname_110(*(_DWORD *)(*(_DWORD *)v16 + 4) + v16);
        sub_421D60(v9);
        goto LABEL_11;
      }
      if ( --a4 <= 0 )
        break;
      ++*(_DWORD *)(v16 + 4);
      v8 = std::char_traits<char>::to_char_type(&i);
      *a3++ = v8;
      v13 = (void *)unknown_libname_110(*(_DWORD *)(*(_DWORD *)v16 + 4) + v16);
      v12 = sub_4203B0(v13);
    }
    v21 |= 2u;
LABEL_11:
    v23 = -1;
  }
  *a3 = 0;
  if ( *(_DWORD *)(v16 + 4) )
    v7 = v21;
  else
    v7 = v21 | 2;
  sub_40BC90((void *)(*(_DWORD *)(*(_DWORD *)v16 + 4) + v16), v7, 0);
  return v16;
}
// 40B4D0: using guessed type int std::char_traits<char>::eof(void);
// 40B580: using guessed type _DWORD __cdecl std::char_traits<char>::to_int_type(_DWORD);
// 40B590: using guessed type _DWORD __cdecl std::char_traits<char>::eq_int_type(_DWORD, _DWORD);
// 40B6D0: using guessed type _DWORD __cdecl std::char_traits<char>::to_char_type(_DWORD);
// 4202F0: using guessed type int __thiscall unknown_libname_110(_DWORD);
// 420350: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sgetc(_DWORD);

//----- (00420310) --------------------------------------------------------
char *__fastcall sub_420310(char *a1, int a2, int a3, char a4)
{
  char *v4; // ST04_4@1

  v4 = a1;
  *a1 = sub_420410(a3, a2, a4);
  return v4;
}

//----- (00420340) --------------------------------------------------------
char __thiscall sub_420340(void *this)
{
  return *(_BYTE *)this;
}

//----- (004203B0) --------------------------------------------------------
int __thiscall sub_4203B0(void *this)
{
  int v2; // [sp+0h] [bp-10h]@2
  void *v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@1
  int v5; // [sp+Ch] [bp-4h]@1

  v3 = this;
  v5 = std::basic_streambuf<char,std::char_traits<char>>::sbumpc(this);
  v4 = std::char_traits<char>::eof();
  if ( (unsigned __int8)std::char_traits<char>::eq_int_type(&v4, &v5) )
    v2 = std::char_traits<char>::eof();
  else
    v2 = std::basic_streambuf<char,std::char_traits<char>>::sgetc(v3);
  return v2;
}
// 40B4D0: using guessed type int std::char_traits<char>::eof(void);
// 40B590: using guessed type _DWORD __cdecl std::char_traits<char>::eq_int_type(_DWORD, _DWORD);
// 420350: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sgetc(_DWORD);
// 4206E0: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sbumpc(_DWORD);

//----- (00420410) --------------------------------------------------------
char __fastcall sub_420410(int a1, int a2, char a3)
{
  char *v3; // eax@3
  unsigned __int8 v4; // cf@6
  int v5; // ecx@8
  char result; // al@12
  int v7; // [sp+0h] [bp-58h]@1
  int v8; // [sp+Ch] [bp-4Ch]@9
  void *v9; // [sp+10h] [bp-48h]@9
  int v10; // [sp+14h] [bp-44h]@8
  char v11; // [sp+1Bh] [bp-3Dh]@8
  int v12; // [sp+1Ch] [bp-3Ch]@7
  int v13; // [sp+20h] [bp-38h]@7
  int v14; // [sp+24h] [bp-34h]@6
  int v15; // [sp+28h] [bp-30h]@6
  std::locale *v16; // [sp+2Ch] [bp-2Ch]@6
  std::locale *v17; // [sp+30h] [bp-28h]@6
  int v18; // [sp+34h] [bp-24h]@1
  int v19; // [sp+38h] [bp-20h]@7
  char v20; // [sp+3Ch] [bp-1Ch]@6
  int i; // [sp+40h] [bp-18h]@6
  int v22; // [sp+44h] [bp-14h]@6
  int *v23; // [sp+48h] [bp-10h]@1
  int v24; // [sp+54h] [bp-4h]@6

  v23 = &v7;
  v18 = a1;
  if ( !(unsigned __int8)sub_420A40((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
    goto LABEL_16;
  if ( unknown_libname_116(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18) )
  {
    v3 = (char *)unknown_libname_116(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18);
    sub_420620(v3);
  }
  if ( !a3 && unknown_libname_111(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18) & 1 )
  {
    v4 = __CFADD__(*(_DWORD *)(*(_DWORD *)v18 + 4), v18);
    v17 = (std::locale *)std::ios_base::getloc(&v20);
    v16 = v17;
    v24 = 0;
    v22 = std::use_facet(v17, 0, 1);
    v24 = -1;
    std::locale::~locale((std::locale *)&v20);
    v24 = 1;
    v15 = unknown_libname_110(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18);
    v14 = std::basic_streambuf<char,std::char_traits<char>>::sgetc(v15);
    for ( i = v14; ; i = v8 )
    {
      v13 = std::char_traits<char>::eof();
      v19 = v13;
      LOBYTE(v12) = std::char_traits<char>::eq_int_type(&v19, &i);
      if ( (_BYTE)v12 )
        break;
      v11 = std::char_traits<char>::to_char_type(&i);
      LOBYTE(v5) = v11;
      LOBYTE(v10) = std::ctype<char>::is(72, v5);
      if ( !(_BYTE)v10 )
        break;
      v9 = (void *)unknown_libname_110(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18);
      v8 = sub_4203B0(v9);
    }
    v24 = -1;
  }
  if ( (unsigned __int8)sub_420A40((void *)(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18)) )
  {
    result = 1;
  }
  else
  {
LABEL_16:
    sub_40BC90((void *)(*(_DWORD *)(*(_DWORD *)v18 + 4) + v18), 2, 0);
    result = 0;
  }
  return result;
}
// 40B4D0: using guessed type int std::char_traits<char>::eof(void);
// 40B590: using guessed type _DWORD __cdecl std::char_traits<char>::eq_int_type(_DWORD, _DWORD);
// 40B6D0: using guessed type _DWORD __cdecl std::char_traits<char>::to_char_type(_DWORD);
// 4202F0: using guessed type int __thiscall unknown_libname_110(_DWORD);
// 420350: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sgetc(_DWORD);
// 420690: using guessed type _DWORD __stdcall std::ctype<char>::is(__int16, _DWORD);
// 4212D0: using guessed type int __thiscall unknown_libname_111(_DWORD);
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 421D40: using guessed type int __thiscall unknown_libname_116(_DWORD);

//----- (00420620) --------------------------------------------------------
char *__thiscall sub_420620(char *this)
{
  int v1; // eax@2
  char *v3; // [sp+0h] [bp-8h]@1
  int v4; // [sp+4h] [bp-4h]@1

  v3 = this;
  v4 = 0;
  if ( !std::ios_base::fail((std::ios_base *)&this[*(_DWORD *)(*(_DWORD *)this + 4)]) )
  {
    v1 = unknown_libname_110(&v3[*(_DWORD *)(*(_DWORD *)v3 + 4)]);
    if ( sub_4206C0(v1) == -1 )
      v4 = 4;
  }
  sub_40BC90(&v3[*(_DWORD *)(*(_DWORD *)v3 + 4)], v4, 0);
  return v3;
}
// 4202F0: using guessed type int __thiscall unknown_libname_110(_DWORD);
// 4206C0: using guessed type int __thiscall sub_4206C0(_DWORD);

//----- (004207F0) --------------------------------------------------------
void *__thiscall sub_4207F0(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_421E80((int)this, a2, 0, a3);
  return v3;
}

//----- (00420820) --------------------------------------------------------
int __thiscall sub_420820(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_422470((int)this);
  unknown_libname_123(*v2);
  return a2;
}
// 4227E0: using guessed type _DWORD __stdcall unknown_libname_123(_DWORD);

//----- (00420850) --------------------------------------------------------
int __thiscall sub_420850(int this, int a2)
{
  unknown_libname_123(*(_DWORD *)(this + 4));
  return a2;
}
// 4227E0: using guessed type _DWORD __stdcall unknown_libname_123(_DWORD);

//----- (00420870) --------------------------------------------------------
int __thiscall sub_420870(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_422660((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_47F528 )
  {
    v25 = v26;
    v3 = sub_421DF0(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_41AD90(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_118(v26);
    else
      v13 = *(_DWORD *)sub_421E60(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_421FE0(v14, (int)&v22, v26, v25, a3);
    sub_421830(a2, v5, &v23);
    return a2;
  }
  unknown_libname_123(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_420820(v14, (int)&v21);
    if ( (unsigned __int8)sub_421550(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_421FE0(v14, (int)&v19, v26, v25, a3);
      sub_421830(a2, v8, &v20);
      return a2;
    }
    unknown_libname_124(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_122(&v28);
  v11 = sub_421DF0(v10);
  if ( (unsigned __int8)sub_41AD90(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_421FE0(v14, (int)&v16, v26, v25, a3);
    sub_421830(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_421830(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 4227D0: using guessed type int __thiscall unknown_libname_122(_DWORD);
// 4227E0: using guessed type _DWORD __stdcall unknown_libname_123(_DWORD);
// 422830: using guessed type int __thiscall unknown_libname_124(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00420A40) --------------------------------------------------------
BOOL __thiscall sub_420A40(void *this)
{
  return unknown_libname_29(this) == 0;
}
// 40BCC0: using guessed type int __thiscall unknown_libname_29(_DWORD);

//----- (00420A80) --------------------------------------------------------
_DWORD *__thiscall sub_420A80(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  int v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_422800(&a3, &v76, 0);
  v81 = (void *)unknown_libname_122(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_118(v81) == dword_47F528 )
  {
    v82 = *(_DWORD *)sub_421E60((int)v81);
  }
  else if ( *(_DWORD *)sub_421E60((int)v81) == dword_47F528 )
  {
    v82 = *(_DWORD *)unknown_libname_118(v81);
  }
  else
  {
    v4 = (int *)sub_421E60((int)v81);
    v81 = (void *)sub_422600(*v4);
    v82 = *(_DWORD *)sub_421E60((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_421E50((int)v81);
    *(_DWORD *)sub_421E50(v82) = *v27;
    v28 = (void **)sub_422660((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_422660((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_421E50((int)v80);
      v31 = (void **)unknown_libname_118(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_421E50((int)v80);
        v33 = (_DWORD *)unknown_libname_118(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_421E50((int)v80);
        v35 = (_DWORD *)sub_421E60(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_422470((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_421E60((int)v80) == dword_47F528 )
      {
        v37 = (_DWORD *)sub_421E50((int)v80);
        *(_DWORD *)sub_422470((int)v75) = *v37;
      }
      else
      {
        v38 = sub_422600(v82);
        *(_DWORD *)sub_422470((int)v75) = v38;
      }
    }
    v39 = (void **)sub_422640((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_118(v80) == dword_47F528 )
      {
        v40 = (_DWORD *)sub_421E50((int)v80);
        *(_DWORD *)sub_422640((int)v75) = *v40;
      }
      else
      {
        v41 = sub_4225C0(v82);
        *(_DWORD *)sub_422640((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_118(v80);
    v6 = (void **)sub_421E50(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_118(v80);
    *(_DWORD *)unknown_libname_118(v81) = *v7;
    v8 = (void **)sub_421E60((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_421E50(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_421E50((int)v81);
      *(_DWORD *)sub_421E50(v82) = *v10;
      v11 = (_DWORD *)sub_421E50((int)v81);
      v12 = (_DWORD *)unknown_libname_118(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_421E60((int)v80);
      *(_DWORD *)sub_421E60((int)v81) = *v13;
      v14 = (int *)sub_421E60((int)v80);
      v15 = (void **)sub_421E50(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_422660((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_422660((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_421E50((int)v80);
      v19 = (void **)unknown_libname_118(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_421E50((int)v80);
        v21 = (void **)unknown_libname_118(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_421E50((int)v80);
        v23 = (void **)sub_421E60(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_421E50((int)v80);
    *(_DWORD *)sub_421E50((int)v81) = *v24;
    v25 = (int *)sub_421DE0((int)v80);
    v26 = (int *)sub_421DE0((int)v81);
    sub_4239F0(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_421DE0((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_422660((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_421DE0(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_421E50(v82);
      v44 = (_DWORD *)unknown_libname_118(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_421E50(v82);
        v78 = *(_DWORD *)sub_421E60(*v45);
        if ( !*(_DWORD *)sub_421DE0(v78) )
        {
          *(_DWORD *)sub_421DE0(v78) = 1;
          v46 = (int *)sub_421E50(v82);
          *(_DWORD *)sub_421DE0(*v46) = 0;
          v47 = (int *)sub_421E50(v82);
          sub_422490((void *)v75, *v47);
          v48 = (int *)sub_421E50(v82);
          v78 = *(_DWORD *)sub_421E60(*v48);
        }
        v49 = (int *)unknown_libname_118(v78);
        if ( *(_DWORD *)sub_421DE0(*v49) != 1 || (v50 = (int *)sub_421E60(v78), *(_DWORD *)sub_421DE0(*v50) != 1) )
        {
          v51 = (int *)sub_421E60(v78);
          if ( *(_DWORD *)sub_421DE0(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_118(v78);
            *(_DWORD *)sub_421DE0(*v52) = 1;
            *(_DWORD *)sub_421DE0(v78) = 0;
            sub_422680((void *)v75, v78);
            v53 = (int *)sub_421E50(v82);
            v78 = *(_DWORD *)sub_421E60(*v53);
          }
          v54 = (int *)sub_421E50(v82);
          v55 = (_DWORD *)sub_421DE0(*v54);
          *(_DWORD *)sub_421DE0(v78) = *v55;
          v56 = (int *)sub_421E50(v82);
          *(_DWORD *)sub_421DE0(*v56) = 1;
          v57 = (int *)sub_421E60(v78);
          *(_DWORD *)sub_421DE0(*v57) = 1;
          v58 = (int *)sub_421E50(v82);
          sub_422490((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_421DE0(v78) = 0;
        v82 = *(_DWORD *)sub_421E50(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_421E50(v82);
        v77 = *(_DWORD *)unknown_libname_118(*v59);
        if ( !*(_DWORD *)sub_421DE0(v77) )
        {
          *(_DWORD *)sub_421DE0(v77) = 1;
          v60 = (int *)sub_421E50(v82);
          *(_DWORD *)sub_421DE0(*v60) = 0;
          v61 = (int *)sub_421E50(v82);
          sub_422680((void *)v75, *v61);
          v62 = (_DWORD *)sub_421E50(v82);
          v77 = *(_DWORD *)unknown_libname_118(*v62);
        }
        v63 = (int *)sub_421E60(v77);
        if ( *(_DWORD *)sub_421DE0(*v63) != 1
          || (v64 = (int *)unknown_libname_118(v77), *(_DWORD *)sub_421DE0(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_118(v77);
          if ( *(_DWORD *)sub_421DE0(*v65) == 1 )
          {
            v66 = (int *)sub_421E60(v77);
            *(_DWORD *)sub_421DE0(*v66) = 1;
            *(_DWORD *)sub_421DE0(v77) = 0;
            sub_422490((void *)v75, v77);
            v67 = (_DWORD *)sub_421E50(v82);
            v77 = *(_DWORD *)unknown_libname_118(*v67);
          }
          v68 = (int *)sub_421E50(v82);
          v69 = (_DWORD *)sub_421DE0(*v68);
          *(_DWORD *)sub_421DE0(v77) = *v69;
          v70 = (int *)sub_421E50(v82);
          *(_DWORD *)sub_421DE0(*v70) = 1;
          v71 = (int *)unknown_libname_118(v77);
          *(_DWORD *)sub_421DE0(*v71) = 1;
          v72 = (int *)sub_421E50(v82);
          sub_422680((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_421DE0(v77) = 0;
        v82 = *(_DWORD *)sub_421E50(v82);
      }
    }
    *(_DWORD *)sub_421DE0(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = sub_421E70((int)v81);
  sub_4227B0(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 4227D0: using guessed type int __thiscall unknown_libname_122(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00421360) --------------------------------------------------------
_DWORD *__thiscall sub_421360(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_121()
    || (v4 = (_DWORD *)sub_420820((void *)v9, (int)&v13), (unsigned __int8)sub_41F100(&a3, v4))
    || (v5 = (_DWORD *)sub_420850(v9, (int)&v12), (unsigned __int8)sub_41F100(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_41F100(&a3, &a4) )
    {
      v6 = sub_422800(&a3, &v11, 0);
      sub_420A80((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_422660(v9);
    sub_421F60((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_422660(v9) = dword_47F528;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_422470(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_422640(v9) = *(_DWORD *)(v9 + 4);
    sub_420820((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 421EE0: using guessed type int unknown_libname_121(void);
// 47F528: using guessed type int dword_47F528;

//----- (00421460) --------------------------------------------------------
_DWORD *__thiscall sub_421460(void *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  char *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  char *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_421F30(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_420850(v8, (int)&v10);
  if ( (unsigned __int8)sub_421550(&v12, v3)
    || (v4 = unknown_libname_122(&v12), v5 = sub_421DF0(v4), (unsigned __int8)sub_41AD90(a3, v5)) )
  {
    v7 = (char *)sub_420850(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 4227D0: using guessed type int __thiscall unknown_libname_122(_DWORD);

//----- (00421530) --------------------------------------------------------
int __thiscall sub_421530(int *this)
{
  return sub_421E70(*this);
}

//----- (00421550) --------------------------------------------------------
BOOL __thiscall sub_421550(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (00421570) --------------------------------------------------------
unsigned int __thiscall sub_421570(int this, int a2, unsigned int a3, int a4)
{
  int v4; // ST14_4@5
  void *v5; // ST18_4@5
  void *v6; // ST1C_4@5
  unsigned int result; // eax@5
  int v8; // [sp+0h] [bp-14h]@3
  int v9; // [sp+4h] [bp-10h]@1

  v9 = this;
  if ( (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 8)) >> 3 >= a3 )
  {
    result = (*(_DWORD *)(this + 8) - a2) >> 3;
    if ( result >= a3 )
    {
      if ( a3 )
      {
        sub_422890(*(_DWORD *)(this + 8) - 8 * a3, *(_DWORD *)(this + 8), *(void **)(this + 8));
        sub_423A50(a2, *(_DWORD *)(v9 + 8) - 8 * a3, *(_DWORD *)(v9 + 8));
        sub_423A20(a2, a2 + 8 * a3, a4);
        result = a3;
        *(_DWORD *)(v9 + 8) += 8 * a3;
      }
    }
    else
    {
      sub_422890(a2, *(_DWORD *)(this + 8), (void *)(a2 + 8 * a3));
      sub_4228D0(*(void **)(v9 + 8), a3 - ((*(_DWORD *)(v9 + 8) - a2) >> 3), a4);
      sub_423A20(a2, *(_DWORD *)(v9 + 8), a4);
      result = v9;
      *(_DWORD *)(v9 + 8) += 8 * a3;
    }
  }
  else
  {
    if ( a3 >= sub_422850(this) )
      v8 = a3;
    else
      v8 = sub_422850(v9);
    v4 = v8 + sub_422850(v9);
    v5 = sub_422910(v4, 0);
    v6 = sub_422890(*(_DWORD *)(v9 + 4), a2, v5);
    sub_4228D0(v6, a3, a4);
    sub_422890(a2, *(_DWORD *)(v9 + 8), (char *)v6 + 8 * a3);
    sub_4217E0(*(_DWORD *)(v9 + 4), *(_DWORD *)(v9 + 8));
    unknown_libname_113(*(_DWORD *)(v9 + 4), (*(_DWORD *)(v9 + 12) - *(_DWORD *)(v9 + 4)) >> 3);
    *(_DWORD *)(v9 + 12) = (char *)v5 + 8 * v4;
    *(_DWORD *)(v9 + 8) = (char *)v5 + 8 * sub_422850(v9) + 8 * a3;
    result = v9;
    *(_DWORD *)(v9 + 4) = v5;
  }
  return result;
}
// 421810: using guessed type _DWORD __stdcall unknown_libname_113(_DWORD, _DWORD);

//----- (00421790) --------------------------------------------------------
int __thiscall sub_421790(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // ST0C_4@1
  int v4; // eax@1
  int v5; // ST10_4@1
  int v6; // eax@1

  v3 = this;
  v4 = ((int (*)(void))unknown_libname_106)();
  v5 = sub_423930(a3, v4, a2);
  v6 = unknown_libname_106(v3);
  sub_4217E0(v5, v6);
  v3[2] = v5;
  return a2;
}
// 41F1F0: using guessed type int __thiscall unknown_libname_106(_DWORD);

//----- (004217E0) --------------------------------------------------------
int __stdcall sub_4217E0(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_422930(a1);
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (00421830) --------------------------------------------------------
int __thiscall sub_421830(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (00421860) --------------------------------------------------------
void *__thiscall sub_421860(void *this, int a2)
{
  void *v2; // ST08_4@1

  v2 = this;
  sub_40B300((int)this);
  std::locale::locale((std::locale *)((char *)v2 + 76));
  *(_DWORD *)v2 = off_45F61C;
  std::basic_filebuf<char,std::char_traits<char>>::_Init(a2, 0);
  return v2;
}
// 422950: using guessed type _DWORD __stdcall std::basic_filebuf<char,std::char_traits<char>>::_Init(_DWORD, _DWORD);
// 45F61C: using guessed type int (__stdcall *off_45F61C[3])(int);

//----- (004218D0) --------------------------------------------------------
void *__thiscall sub_4218D0(int this, char *a2, int a3)
{
  void *result; // eax@3
  void *v4; // [sp+0h] [bp-8h]@1
  struct _iobuf *v5; // [sp+4h] [bp-4h]@2

  v4 = (void *)this;
  if ( !*(_DWORD *)(this + 80) && (v5 = std::__Fiopen(a2, a3)) != 0 )
  {
    std::basic_filebuf<char,std::char_traits<char>>::_Init(v5, 1);
    sub_422A30(v4);
    result = v4;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 422950: using guessed type _DWORD __stdcall std::basic_filebuf<char,std::char_traits<char>>::_Init(_DWORD, _DWORD);

//----- (00421A20) --------------------------------------------------------
_BYTE *__thiscall sub_421A20(int this)
{
  _BYTE *result; // eax@1
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  result = (_BYTE *)this;
  if ( *(_DWORD *)(this + 4) )
  {
    result = (_BYTE *)sub_421C10(*(_DWORD *)(this + 4));
    if ( *result )
    {
      result = (_BYTE *)sub_421C10(*(_DWORD *)(v2 + 4));
      if ( *result != 255 )
        result = (_BYTE *)std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Grow(
                            *(_DWORD *)(v2 + 8),
                            0);
    }
  }
  if ( *(_DWORD *)(v2 + 4) )
  {
    result = (_BYTE *)sub_421C10(*(_DWORD *)(v2 + 4));
    *result = -1;
  }
  return result;
}
// 421AA0: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Grow(_DWORD, _DWORD);
// 421C10: using guessed type _DWORD __stdcall sub_421C10(_DWORD);

//----- (00421C30) --------------------------------------------------------
_BYTE *__thiscall sub_421C30(int this)
{
  _BYTE *result; // eax@1
  char *v2; // ST08_4@4
  int v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  result = (_BYTE *)this;
  if ( *(_DWORD *)(this + 4) )
  {
    result = (_BYTE *)sub_421C10(*(_DWORD *)(this + 4));
    if ( *result )
    {
      result = (_BYTE *)sub_421C10(*(_DWORD *)(v3 + 4));
      if ( *result != 255 )
      {
        v2 = *(char **)(v3 + 4);
        std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
        result = (_BYTE *)std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(v2);
      }
    }
  }
  return result;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 421C10: using guessed type _DWORD __stdcall sub_421C10(_DWORD);

//----- (00421D60) --------------------------------------------------------
int __thiscall sub_421D60(void *this)
{
  unsigned int v1; // esi@2
  int result; // eax@3
  void *v3; // [sp+4h] [bp-4h]@1

  v3 = this;
  if ( std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(this)
    && (v1 = std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(v3),
        v1 < std::basic_streambuf<char,std::char_traits<char>>::egptr(v3)) )
  {
    result = std::basic_streambuf<char,std::char_traits<char>>::_Gninc(v3);
  }
  else
  {
    result = (*(int (__thiscall **)(void *))(*(_DWORD *)v3 + 20))(v3);
  }
  return result;
}
// 40B6E0: using guessed type int __thiscall std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(_DWORD);
// 40BD70: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::egptr(_DWORD);
// 40BDF0: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Gninc(_DWORD);

//----- (00421DE0) --------------------------------------------------------
int __cdecl sub_421DE0(int a1)
{
  return a1 + 20;
}

//----- (00421DF0) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_421DF0(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_421E70(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (00421E50) --------------------------------------------------------
int __cdecl sub_421E50(int a1)
{
  return a1 + 4;
}

//----- (00421E60) --------------------------------------------------------
int __cdecl sub_421E60(int a1)
{
  return a1 + 8;
}

//----- (00421E70) --------------------------------------------------------
int __cdecl sub_421E70(int a1)
{
  return a1 + 12;
}

//----- (00421E80) --------------------------------------------------------
int __thiscall sub_421E80(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_422E30((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (00421F30) --------------------------------------------------------
int __thiscall sub_421F30(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_422F30(this, a3);
  unknown_libname_123(v3);
  return a2;
}
// 4227E0: using guessed type _DWORD __stdcall unknown_libname_123(_DWORD);

//----- (00421F60) --------------------------------------------------------
void *__thiscall sub_421F60(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  int v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_47F528; a2 = i )
  {
    v3 = (void **)sub_421E60((int)i);
    sub_421F60(*v3);
    i = *(void **)unknown_libname_118(i);
    v4 = sub_421E70((int)a2);
    sub_4227B0(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00421FE0) --------------------------------------------------------
int __thiscall sub_421FE0(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_422FC0(a4, 0);
  *(_DWORD *)unknown_libname_118(v48) = dword_47F528;
  *(_DWORD *)sub_421E60((int)v48) = dword_47F528;
  v5 = (void *)sub_421E70((int)v48);
  sub_423010(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_47F528
    || (v6 = sub_421DF0(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_41AD90(v7, v6)) )
  {
    v8 = (char **)unknown_libname_118(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_422660(v46);
      *v9 = v48;
      v10 = (char **)sub_422640(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_422470(v46) )
    {
      v11 = (char **)sub_422470(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_421E60(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_422640(v46) )
    {
      v13 = (char **)sub_422640(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_422660(v46) )
  {
    v14 = (int *)sub_421E50((int)v49);
    if ( *(_DWORD *)sub_421DE0(*v14) )
      break;
    v15 = (_DWORD *)sub_421E50((int)v49);
    v16 = (int *)sub_421E50((int)v49);
    v17 = (_DWORD *)sub_421E50(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_118(*v17) )
    {
      v18 = (int *)sub_421E50((int)v49);
      v19 = (int *)sub_421E50(*v18);
      v20 = (int *)sub_421E60(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_421DE0(*v20) )
      {
        v25 = (int *)sub_421E50((int)v49);
        if ( v49 == *(char **)sub_421E60(*v25) )
        {
          v49 = *(char **)sub_421E50((int)v49);
          sub_422490((void *)v46, (int)v49);
        }
        v26 = (int *)sub_421E50((int)v49);
        *(_DWORD *)sub_421DE0(*v26) = 1;
        v27 = (int *)sub_421E50((int)v49);
        v28 = (int *)sub_421E50(*v27);
        *(_DWORD *)sub_421DE0(*v28) = 0;
        v29 = (int *)sub_421E50((int)v49);
        v30 = (int *)sub_421E50(*v29);
        sub_422680((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_421E50((int)v49);
        *(_DWORD *)sub_421DE0(*v21) = 1;
        *(_DWORD *)sub_421DE0(v50) = 1;
        v22 = (int *)sub_421E50((int)v49);
        v23 = (int *)sub_421E50(*v22);
        *(_DWORD *)sub_421DE0(*v23) = 0;
        v24 = (int *)sub_421E50((int)v49);
        v49 = *(char **)sub_421E50(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_421E50((int)v49);
      v32 = (_DWORD *)sub_421E50(*v31);
      v33 = (int *)unknown_libname_118(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_421DE0(*v33) )
      {
        v38 = (_DWORD *)sub_421E50((int)v49);
        if ( v49 == *(char **)unknown_libname_118(*v38) )
        {
          v49 = *(char **)sub_421E50((int)v49);
          sub_422680((void *)v46, (int)v49);
        }
        v39 = (int *)sub_421E50((int)v49);
        *(_DWORD *)sub_421DE0(*v39) = 1;
        v40 = (int *)sub_421E50((int)v49);
        v41 = (int *)sub_421E50(*v40);
        *(_DWORD *)sub_421DE0(*v41) = 0;
        v42 = (int *)sub_421E50((int)v49);
        v43 = (int *)sub_421E50(*v42);
        sub_422490((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_421E50((int)v49);
        *(_DWORD *)sub_421DE0(*v34) = 1;
        *(_DWORD *)sub_421DE0(v51) = 1;
        v35 = (int *)sub_421E50((int)v49);
        v36 = (int *)sub_421E50(*v35);
        *(_DWORD *)sub_421DE0(*v36) = 0;
        v37 = (int *)sub_421E50((int)v49);
        v49 = *(char **)sub_421E50(*v37);
      }
    }
  }
  v44 = (int *)sub_422660(v46);
  *(_DWORD *)sub_421DE0(*v44) = 1;
  unknown_libname_123(v48);
  return a2;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 4227E0: using guessed type _DWORD __stdcall unknown_libname_123(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00422470) --------------------------------------------------------
int __thiscall sub_422470(int this)
{
  return unknown_libname_118(*(_DWORD *)(this + 4));
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);

//----- (00422490) --------------------------------------------------------
int *__thiscall sub_422490(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_421E60(a2);
  v2 = (_DWORD *)unknown_libname_118(v10);
  *(_DWORD *)sub_421E60(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_118(v10) != dword_47F528 )
  {
    v3 = (int *)unknown_libname_118(v10);
    *(_DWORD *)sub_421E50(*v3) = a2;
  }
  v4 = (_DWORD *)sub_421E50(a2);
  *(_DWORD *)sub_421E50(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_422660(v9) )
  {
    *(_DWORD *)sub_422660(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_421E50(a2);
    if ( a2 == *(_DWORD *)unknown_libname_118(*v5) )
    {
      v6 = (_DWORD *)sub_421E50(a2);
      *(_DWORD *)unknown_libname_118(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_421E50(a2);
      *(_DWORD *)sub_421E60(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_118(v10) = a2;
  result = (int *)sub_421E50(a2);
  *result = v10;
  return result;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (004225C0) --------------------------------------------------------
int __cdecl sub_4225C0(int a1)
{
  while ( *(_DWORD *)sub_421E60(a1) != dword_47F528 )
    a1 = *(_DWORD *)sub_421E60(a1);
  return a1;
}
// 47F528: using guessed type int dword_47F528;

//----- (00422600) --------------------------------------------------------
int __cdecl sub_422600(int a1)
{
  while ( *(_DWORD *)unknown_libname_118(a1) != dword_47F528 )
    a1 = *(_DWORD *)unknown_libname_118(a1);
  return a1;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00422640) --------------------------------------------------------
int __thiscall sub_422640(int this)
{
  return sub_421E60(*(_DWORD *)(this + 4));
}

//----- (00422660) --------------------------------------------------------
int __thiscall sub_422660(int this)
{
  return sub_421E50(*(_DWORD *)(this + 4));
}

//----- (00422680) --------------------------------------------------------
int *__thiscall sub_422680(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_118(a2);
  v2 = (_DWORD *)sub_421E60(v10);
  *(_DWORD *)unknown_libname_118(a2) = *v2;
  if ( *(_DWORD *)sub_421E60(v10) != dword_47F528 )
  {
    v3 = (int *)sub_421E60(v10);
    *(_DWORD *)sub_421E50(*v3) = a2;
  }
  v4 = (_DWORD *)sub_421E50(a2);
  *(_DWORD *)sub_421E50(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_422660(v9) )
  {
    *(_DWORD *)sub_422660(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_421E50(a2);
    if ( a2 == *(_DWORD *)sub_421E60(*v5) )
    {
      v6 = (int *)sub_421E50(a2);
      *(_DWORD *)sub_421E60(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_421E50(a2);
      *(_DWORD *)unknown_libname_118(*v7) = v10;
    }
  }
  *(_DWORD *)sub_421E60(v10) = a2;
  result = (int *)sub_421E50(a2);
  *result = v10;
  return result;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (004227B0) --------------------------------------------------------
void __stdcall sub_4227B0(int a1)
{
  sub_423A90();
}

//----- (00422800) --------------------------------------------------------
_DWORD *__thiscall sub_422800(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_127(this);
  *a2 = v3;
  return a2;
}
// 423120: using guessed type int __cdecl unknown_libname_127(_DWORD);

//----- (00422850) --------------------------------------------------------
int __thiscall sub_422850(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00422890) --------------------------------------------------------
void *__stdcall sub_422890(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_423140(a3, a1);
    a3 = (char *)a3 + 8;
    a1 += 8;
  }
  return a3;
}

//----- (004228D0) --------------------------------------------------------
int __stdcall sub_4228D0(void *a1, int a2, int a3)
{
  int result; // eax@2

  while ( a2 )
  {
    sub_423140(a1, a3);
    result = a2-- - 1;
    a1 = (char *)a1 + 8;
  }
  return result;
}

//----- (00422910) --------------------------------------------------------
void *__stdcall sub_422910(int a1, int a2)
{
  return sub_423AA0(a1);
}

//----- (00422930) --------------------------------------------------------
void __stdcall sub_422930(int a1)
{
  sub_423AD0();
}

//----- (00422A30) --------------------------------------------------------
void *__thiscall sub_422A30(void *this)
{
  std::locale *v1; // eax@1
  std::locale *v2; // eax@1
  void *result; // eax@1
  int v4; // [sp-8h] [bp-48h]@1
  int v5; // [sp-4h] [bp-44h]@1
  void *v6; // [sp+0h] [bp-40h]@5
  std::locale *v7; // [sp+4h] [bp-3Ch]@1
  std::locale *v8; // [sp+8h] [bp-38h]@1
  int v9; // [sp+Ch] [bp-34h]@1
  std::locale *v10; // [sp+10h] [bp-30h]@1
  std::locale *v11; // [sp+14h] [bp-2Ch]@1
  void *v12; // [sp+18h] [bp-28h]@1
  char v13; // [sp+1Ch] [bp-24h]@5
  void *v14; // [sp+20h] [bp-20h]@4
  char v15; // [sp+28h] [bp-18h]@1
  int *v16; // [sp+2Ch] [bp-14h]@1
  char v17; // [sp+30h] [bp-10h]@1
  int v18; // [sp+3Ch] [bp-4h]@1

  v12 = this;
  v1 = sub_422DA0((int)this, (std::locale *)&v17);
  v11 = v1;
  v10 = v1;
  v18 = 0;
  *((_DWORD *)v12 + 14) = sub_423AE0(v1, 0, 1);
  v18 = -1;
  std::locale::~locale((std::locale *)&v17);
  v5 = *((_DWORD *)v12 + 14);
  v4 = (int)v12 + 76;
  v16 = &v4;
  v9 = std::locale::locale((std::locale *)&v4, (const struct std::locale *)((char *)v12 + 76));
  v2 = sub_423C00((std::locale *)&v15, v4, v5);
  v8 = v2;
  v7 = v2;
  std::locale::operator=(v2);
  std::locale::~locale((std::locale *)&v15);
  result = (void *)(unsigned __int8)sub_422BD0(*((_DWORD *)v12 + 14));
  if ( result )
    *((_DWORD *)v12 + 14) = 0;
  if ( !*((_DWORD *)v12 + 17) )
  {
    v14 = operator new(0x10u);
    v18 = 1;
    if ( v14 )
      v6 = sub_422BF0(v14, &v13);
    else
      v6 = 0;
    result = v6;
    *((_DWORD *)v12 + 17) = v6;
  }
  return result;
}
// 422B60: using guessed type _DWORD __stdcall std::locale::operator=(_DWORD);
// 422BD0: using guessed type int __thiscall sub_422BD0(_DWORD);

//----- (00422BF0) --------------------------------------------------------
void *__thiscall sub_422BF0(void *this, _BYTE *a2)
{
  void *v2; // ST04_4@1

  v2 = this;
  *(_BYTE *)this = *a2;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  return v2;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);

//----- (00422DA0) --------------------------------------------------------
std::locale *__thiscall sub_422DA0(int this, std::locale *a2)
{
  std::locale::locale(a2, (const struct std::locale *)(this + 52));
  return a2;
}

//----- (00422E30) --------------------------------------------------------
_DWORD *__thiscall sub_422E30(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_422FC0(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_47F528 )
  {
    dword_47F528 = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_118(dword_47F528) = 0;
    *(_DWORD *)sub_421E60(dword_47F528) = 0;
  }
  ++dword_47F52C;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_422FC0(dword_47F528, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_422470((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_422640((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;
// 47F52C: using guessed type int dword_47F52C;

//----- (00422F30) --------------------------------------------------------
int __thiscall sub_422F30(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_4231A0((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_47F528 )
  {
    v3 = sub_421DF0(v6);
    if ( (unsigned __int8)sub_41AD90(v3, a2) )
    {
      v6 = *(_DWORD *)sub_421E60(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_118(v6);
    }
  }
  return v5;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00422FC0) --------------------------------------------------------
char *__stdcall sub_422FC0(int a1, int a2)
{
  char *result; // eax@1

  result = sub_423180(0x18u);
  *(_DWORD *)sub_421E50((int)result) = a1;
  *(_DWORD *)sub_421DE0((int)result) = a2;
  return result;
}

//----- (00423010) --------------------------------------------------------
void *__stdcall sub_423010(void *a1, int a2)
{
  return sub_423C90(a1, a2);
}

//----- (00423050) --------------------------------------------------------
int *__thiscall sub_423050(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_421DE0(*this) || (v1 = (int *)sub_421E50(*v5), *(_DWORD *)sub_421E50(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_118(*v5) == dword_47F528 )
    {
      while ( 1 )
      {
        v4 = (int **)sub_421E50(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_118(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_118(*v5);
      result = (int *)sub_4225C0(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_421E60(*v5);
    *v5 = *result;
  }
  return result;
}
// 421E10: using guessed type _DWORD __cdecl unknown_libname_118(_DWORD);
// 47F528: using guessed type int dword_47F528;

//----- (00423140) --------------------------------------------------------
void *__stdcall sub_423140(void *a1, int a2)
{
  return sub_423CD0(a1, a2);
}

//----- (00423160) --------------------------------------------------------
char *__stdcall sub_423160(int a1, int a2)
{
  return std::_Allocate(a1, 0);
}

//----- (00423180) --------------------------------------------------------
char *__stdcall sub_423180(size_t a1)
{
  return std::_Allocate(a1, 0);
}

//----- (004231A0) --------------------------------------------------------
int __thiscall sub_4231A0(int this)
{
  return sub_421E50(*(_DWORD *)(this + 4));
}

//----- (004231C0) --------------------------------------------------------
_DWORD *__thiscall sub_4231C0(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_421E60(*this) == dword_47F528 )
  {
    while ( 1 )
    {
      v3 = (int *)sub_421E50(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_421E60(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_421E60(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_421E60(*v4);
    result = (_DWORD *)sub_422600(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 47F528: using guessed type int dword_47F528;

//----- (00423380) --------------------------------------------------------
_DWORD *__thiscall sub_423380(_DWORD *this, char a2)
{
  _DWORD *v2; // ST04_4@1

  v2 = this;
  exception::exception(&a2);
  *v2 = &off_45FD64;
  return v2;
}
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);

//----- (004233B0) --------------------------------------------------------
void __thiscall sub_4233B0(void *this)
{
  *(_DWORD *)this = &off_45FD64;
  sub_44DCB0((int)this);
}
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);

//----- (004233D0) --------------------------------------------------------
void __thiscall __noreturn sub_4233D0(void *this)
{
  char v1; // [sp+4h] [bp-Ch]@2

  unknown_libname_128(this);
  _CxxThrowException(&v1, &unk_462ED8);
}
// 423430: using guessed type _DWORD __stdcall unknown_libname_128(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (00423400) --------------------------------------------------------
void *__thiscall sub_423400(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4233B0(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00423600) --------------------------------------------------------
void *__thiscall sub_423600(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_423630(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00423630) --------------------------------------------------------
void *__thiscall sub_423630(void *this)
{
  void *result; // eax@1

  result = this;
  *(_DWORD *)this = &off_45FBB0;
  return result;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (00423650) --------------------------------------------------------
void *__thiscall sub_423650(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_130(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}
// 423680: using guessed type int __thiscall unknown_libname_130(_DWORD);

//----- (00423790) --------------------------------------------------------
void __cdecl sub_423790()
{
  sub_44BDA0(dword_481A28);
}

//----- (00423890) --------------------------------------------------------
void *__thiscall sub_423890(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4238C0((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (004238C0) --------------------------------------------------------
int __thiscall sub_4238C0(int this)
{
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  *(_DWORD *)this = &off_45FD14;
  if ( *(_DWORD *)(this + 20) )
    sub_44BDA0(*(LPVOID *)(this + 16));
  return unknown_libname_130(v2);
}
// 423680: using guessed type int __thiscall unknown_libname_130(_DWORD);
// 45FD14: using guessed type int (__stdcall *off_45FD14)(int);

//----- (00423900) --------------------------------------------------------
int __cdecl sub_423900(int a1, int a2, unsigned int *a3)
{
  sub_4241C0();
  return sub_4241D0(a1, a2, a3);
}

//----- (00423930) --------------------------------------------------------
int __cdecl sub_423930(int a1, int a2, int a3)
{
  int v3; // edx@2

  while ( a1 != a2 )
  {
    v3 = *(_DWORD *)(a1 + 4);
    *(_DWORD *)a3 = *(_DWORD *)a1;
    *(_DWORD *)(a3 + 4) = v3;
    a3 += 8;
    a1 += 8;
  }
  return a3;
}

//----- (004239F0) --------------------------------------------------------
int __cdecl sub_4239F0(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (00423A20) --------------------------------------------------------
int __cdecl sub_423A20(int a1, int a2, int a3)
{
  int result; // eax@2
  int v4; // ecx@2

  while ( a1 != a2 )
  {
    v4 = *(_DWORD *)(a3 + 4);
    *(_DWORD *)a1 = *(_DWORD *)a3;
    *(_DWORD *)(a1 + 4) = v4;
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (00423A50) --------------------------------------------------------
int __cdecl sub_423A50(int a1, int a2, int a3)
{
  int v3; // ecx@2

  while ( a1 != a2 )
  {
    a2 -= 8;
    v3 = *(_DWORD *)(a2 + 4);
    a3 -= 8;
    *(_DWORD *)a3 = *(_DWORD *)a2;
    *(_DWORD *)(a3 + 4) = v3;
  }
  return a3;
}

//----- (00423A90) --------------------------------------------------------
void sub_423A90()
{
  ;
}

//----- (00423AA0) --------------------------------------------------------
void *__cdecl sub_423AA0(int a1)
{
  if ( a1 < 0 )
    a1 = 0;
  return operator new(8 * a1);
}

//----- (00423AD0) --------------------------------------------------------
void sub_423AD0()
{
  ;
}

//----- (00423AE0) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_423AE0(std::locale *a1, int a2, int a3)
{
  const struct std::locale::facet *v3; // ST0C_4@12
  std::locale::facet *v5; // [sp+0h] [bp-34h]@8
  _DWORD *v6; // [sp+8h] [bp-2Ch]@7
  char v7; // [sp+10h] [bp-24h]@4
  char v8; // [sp+1Ch] [bp-18h]@1
  unsigned int v9; // [sp+20h] [bp-14h]@1
  const struct std::locale::facet *v10; // [sp+24h] [bp-10h]@1
  int v11; // [sp+30h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v8);
  v11 = 0;
  v9 = std::locale::id::operator unsigned int(&unk_481A2C);
  v10 = std::locale::_Getfacet(a1, v9, 1);
  if ( !v10 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      sub_423380(&v7, (unsigned int)aMissingLocaleF);
      _CxxThrowException(&v7, &unk_462ED8);
    }
    if ( dword_47F534 )
    {
      v10 = (const struct std::locale::facet *)dword_47F534;
    }
    else
    {
      v6 = operator new(0x10u);
      LOBYTE(v11) = 1;
      if ( v6 )
        v5 = (std::locale::facet *)sub_423D30(v6, 0);
      else
        v5 = 0;
      LOBYTE(v11) = 0;
      dword_47F534 = (int)sub_423FD0(v5);
      v10 = (const struct std::locale::facet *)dword_47F534;
    }
  }
  v3 = v10;
  v11 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v8);
  return v3;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 47F534: using guessed type int dword_47F534;

//----- (00423C00) --------------------------------------------------------
std::locale *__cdecl sub_423C00(std::locale *a1, char a2, int a3)
{
  struct Concurrency::details::_CancellationTokenState *v3; // ST08_4@1
  unsigned int v4; // eax@1
  const struct std::locale *v5; // eax@1
  char v7; // [sp+4h] [bp-10h]@1
  int v8; // [sp+10h] [bp-4h]@1

  v8 = 1;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  LOBYTE(v8) = 2;
  v3 = Concurrency::details::_CancellationTokenState::_None();
  v4 = std::locale::id::operator unsigned int(&unk_481A2C);
  v5 = std::locale::_Addfac((std::locale *)&a2, (struct std::locale::facet *)a3, v4, (unsigned int)v3);
  std::locale::locale(a1, v5);
  LOBYTE(v8) = 1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  LOBYTE(v8) = 0;
  std::locale::~locale((std::locale *)&a2);
  return a1;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);

//----- (00423C90) --------------------------------------------------------
void *__cdecl sub_423C90(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (00423CD0) --------------------------------------------------------
void *__cdecl sub_423CD0(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (00423D30) --------------------------------------------------------
_DWORD *__thiscall sub_423D30(_DWORD *this, unsigned int a2)
{
  _DWORD *v2; // ST0C_4@1
  int v3; // eax@1
  char v5; // [sp+Ch] [bp-4Ch]@1
  int v6; // [sp+54h] [bp-4h]@1

  v2 = this;
  unknown_libname_131(a2);
  v6 = 0;
  *v2 = &off_45FC8C;
  v3 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v6) = 1;
  sub_424040(v2, v3);
  LOBYTE(v6) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 423DC0: using guessed type _DWORD __stdcall unknown_libname_131(unsigned int);
// 45FC8C: using guessed type int (__stdcall *off_45FC8C)(int);

//----- (00423E20) --------------------------------------------------------
void *__thiscall sub_423E20(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  unknown_libname_135(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}
// 423E50: using guessed type int __cdecl unknown_libname_135(_DWORD);

//----- (00423F00) --------------------------------------------------------
void *__thiscall sub_423F00(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_423F30(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00423F30) --------------------------------------------------------
int __thiscall sub_423F30(void *this)
{
  *(_DWORD *)this = &off_45FC8C;
  return unknown_libname_135(this);
}
// 423E50: using guessed type int __cdecl unknown_libname_135(_DWORD);
// 45FC8C: using guessed type int (__stdcall *off_45FC8C)(int);

//----- (00423F60) --------------------------------------------------------
std::locale::facet *__cdecl sub_423F60(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_47F538 = a1;
  std::locale::facet::_Incref(a1);
  atexit(sub_4240A0);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00423FD0) --------------------------------------------------------
std::locale::facet *__cdecl sub_423FD0(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_47F53C = a1;
  std::locale::facet::_Incref(a1);
  atexit(sub_424130);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00424040) --------------------------------------------------------
_DWORD *__thiscall sub_424040(_DWORD *this, int a2)
{
  _DWORD *v2; // ST04_4@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // edx@1
  _DWORD *result; // eax@1
  char v7; // [sp+4h] [bp-8h]@1

  v2 = this;
  v3 = sub_424070((int)&v7);
  v4 = *(_DWORD *)v3;
  v5 = *(_DWORD *)(v3 + 4);
  result = v2;
  v2[2] = v4;
  v2[3] = v5;
  return result;
}

//----- (00424070) --------------------------------------------------------
int __stdcall sub_424070(int a1)
{
  int v1; // edx@1

  *(_DWORD *)a1 = sub_44134E();
  *(_DWORD *)(a1 + 4) = v1;
  return a1;
}

//----- (004240A0) --------------------------------------------------------
void __cdecl sub_4240A0()
{
  struct std::locale::facet *v0; // [sp+8h] [bp-14h]@1
  char v1; // [sp+Ch] [bp-10h]@1
  int v2; // [sp+18h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v1);
  v2 = 0;
  v0 = std::locale::facet::_Decref(dword_47F538);
  if ( v0 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v0)(v0, 1);
  dword_47F538 = 0;
  v2 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v1);
}

//----- (00424130) --------------------------------------------------------
void __cdecl sub_424130()
{
  struct std::locale::facet *v0; // [sp+8h] [bp-14h]@1
  char v1; // [sp+Ch] [bp-10h]@1
  int v2; // [sp+18h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v1);
  v2 = 0;
  v0 = std::locale::facet::_Decref(dword_47F53C);
  if ( v0 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v0)(v0, 1);
  dword_47F53C = 0;
  v2 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v1);
}

//----- (004241C0) --------------------------------------------------------
int sub_4241C0()
{
  return 0;
}

//----- (004241D0) --------------------------------------------------------
int __cdecl sub_4241D0(int a1, int a2, unsigned int *a3)
{
  int v4; // [sp+0h] [bp-Ch]@3
  int v5; // [sp+4h] [bp-8h]@3
  int v6; // [sp+8h] [bp-4h]@1

  v6 = 0;
  sub_4242D0(a1, a2, &v6);
  while ( v6 > 0 )
  {
    v5 = v6 / 2;
    v4 = a1;
    sub_424300(&v4, v6 / 2);
    if ( (unsigned __int8)sub_424270(*a3, v4) )
    {
      v6 = v5;
    }
    else
    {
      v4 += 8;
      a1 = v4;
      v6 -= v5 + 1;
    }
  }
  return a1;
}

//----- (00424270) --------------------------------------------------------
BOOL __cdecl sub_424270(unsigned int a1, int a2)
{
  return a1 < *(_DWORD *)(a2 + 4);
}

//----- (00424290) --------------------------------------------------------
int sub_424290()
{
  int result; // eax@1

  result = byte_481F34 & 1;
  if ( !(byte_481F34 & 1) )
    byte_481F34 |= 1u;
  return result;
}
// 481F34: using guessed type char byte_481F34;

//----- (004242C0) --------------------------------------------------------
void __cdecl sub_4242C0()
{
  ;
}

//----- (004242D0) --------------------------------------------------------
_DWORD *__cdecl sub_4242D0(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx@0
  char v4; // dl@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = v3;
  v4 = *sub_424330(&v6);
  return sub_424350(a1, a2, a3);
}

//----- (00424300) --------------------------------------------------------
int __cdecl sub_424300(int *a1, int a2)
{
  int v2; // ecx@0
  int v3; // ST08_4@1
  char v4; // al@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = v2;
  v3 = *a1;
  v4 = *sub_424330(&v6);
  return unknown_libname_137(a1, a2);
}
// 424370: using guessed type _DWORD __cdecl unknown_libname_137(_DWORD, _DWORD);

//----- (00424330) --------------------------------------------------------
_BYTE *__cdecl sub_424330(_BYTE *a1)
{
  char v2; // [sp+0h] [bp-8h]@1

  *a1 = v2;
  return a1;
}

//----- (00424350) --------------------------------------------------------
_DWORD *__cdecl sub_424350(int a1, int a2, _DWORD *a3)
{
  _DWORD *result; // eax@1

  result = a3;
  *a3 += (a2 - a1) >> 3;
  return result;
}

//----- (0042439F) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION *sub_42439F()
{
  return sub_42D5C4((struct _RTL_CRITICAL_SECTION *)&unk_47F7F0);
}

//----- (004243AE) --------------------------------------------------------
int sub_4243AE()
{
  return atexit(sub_4243C0);
}

//----- (004243C0) --------------------------------------------------------
void __cdecl sub_4243C0()
{
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)&unk_47F7F0);
}

//----- (004243DE) --------------------------------------------------------
int sub_4243DE()
{
  return sub_42485B((int)&unk_47F548);
}

//----- (004243ED) --------------------------------------------------------
int sub_4243ED()
{
  return atexit(sub_4243FF);
}

//----- (004243FF) --------------------------------------------------------
void __cdecl sub_4243FF()
{
  sub_4248ED((int)&unk_47F548);
}

//----- (0042440E) --------------------------------------------------------
void __stdcall sub_42440E(PVOID a1, BOOLEAN a2)
{
  SOCKET s; // ST10_4@4
  int v3; // ST18_4@4
  int v4; // ST0C_4@6
  int v5; // [sp+8h] [bp-18h]@4
  struct sockaddr name; // [sp+10h] [bp-10h]@4

  sub_42DBFC((int)&unk_47FA00, 1, aIpsockettimerr);
  if ( phNewTimer )
    DeleteTimerQueueTimer(0, phNewTimer, 0);
  phNewTimer = 0;
  if ( byte_47F811 == 1 )
  {
    s = socket(2, 1, 0);
    name.sa_family = 2;
    *(_DWORD *)&name.sa_data[2] = dword_478580;
    *(_WORD *)&name.sa_data[0] = htons(hostshort);
    v3 = connect(s, &name, 16);
    v5 = sub_425E8B(s);
    sub_428610(v5, dword_478580);
    if ( v3 == -1 )
    {
      sub_41D61F(v5);
      sub_4180B3(v5);
    }
    else
    {
      sub_42D6C6((int)&unk_47F7F0);
      v4 = dword_481700;
      dword_481700 = v5;
      byte_47F811 = 0;
      byte_47857A = 1;
      sub_41D687(v5, CompletionPort);
      sub_42D6FF((int)&unk_47F7F0);
      sub_4180B3(v4);
    }
  }
}
// 47857A: using guessed type char byte_47857A;
// 478580: using guessed type int dword_478580;
// 47F811: using guessed type char byte_47F811;
// 481700: using guessed type int dword_481700;

//----- (00424536) --------------------------------------------------------
int sub_424536()
{
  return `eh vector constructor iterator'(&unk_47F5B0, 0x24u, 16, (int)sub_426900, unknown_libname_139);
}

//----- (00424553) --------------------------------------------------------
int sub_424553()
{
  return atexit(sub_424565);
}

//----- (00424565) --------------------------------------------------------
void __cdecl sub_424565()
{
  if ( !(byte_47F810 & 1) )
  {
    byte_47F810 |= 1u;
    `eh vector destructor iterator'(&unk_47F5B0, 0x24u, 16, unknown_libname_139);
  }
}
// 47F810: using guessed type char byte_47F810;

//----- (004245A9) --------------------------------------------------------
void sub_4245A9()
{
  ;
}

//----- (004245AE) --------------------------------------------------------
int sub_4245AE()
{
  return atexit(sub_4245C0);
}

//----- (004245C0) --------------------------------------------------------
void __cdecl sub_4245C0()
{
  sub_426950();
}

//----- (004245CF) --------------------------------------------------------
DNameNode *sub_4245CF()
{
  DNameNode *v1; // [sp+0h] [bp-20h]@4
  DNameNode *v2; // [sp+4h] [bp-1Ch]@3
  char *v3; // [sp+Ch] [bp-14h]@1
  DNameNode *v4; // [sp+10h] [bp-10h]@1

  v3 = (char *)&unk_47F5B0 + 36 * (InterlockedIncrement(&dword_46BD30) & 0xF);
  sub_42D4B5((int)(v3 + 4));
  v4 = *(DNameNode **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = *((_DWORD *)v4 + 2);
    sub_42D4F0((int)(v3 + 4));
  }
  else
  {
    sub_42D4F0((int)(v3 + 4));
    v2 = (DNameNode *)unknown_libname_49(0x14u);
    if ( v2 )
      v1 = sub_426960(v2);
    else
      v1 = 0;
    v4 = v1;
  }
  return v4;
}

//----- (00424691) --------------------------------------------------------
void sub_424691()
{
  char *v0; // [sp+Ch] [bp-Ch]@3
  int v1; // [sp+10h] [bp-8h]@4
  signed int i; // [sp+14h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v0 = (char *)&unk_47F5B0 + 36 * i;
    sub_42D4B5((int)&unk_47F5B0 + 36 * i + 4);
    while ( 1 )
    {
      v1 = *(_DWORD *)v0;
      if ( !*(_DWORD *)v0 )
        break;
      *(_DWORD *)v0 = *(_DWORD *)(v1 + 8);
      if ( v1 )
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
    }
    sub_42D4F0((int)(v0 + 4));
  }
}

//----- (0042471F) --------------------------------------------------------
void __thiscall sub_42471F(_DWORD *this)
{
  _DWORD *v1; // ST04_4@1
  char *v2; // ST08_4@1

  v1 = this;
  v2 = (char *)&unk_47F5B0 + 36 * (InterlockedDecrement(&dword_47F818) & 0xF);
  sub_42D4B5((int)(v2 + 4));
  v1[2] = *(_DWORD *)v2;
  *(_DWORD *)v2 = v1;
  sub_42D4F0((int)(v2 + 4));
}

//----- (0042476E) --------------------------------------------------------
void __cdecl sub_42476E(int a1, int a2)
{
  int v2; // ecx@0
  int v3; // [sp+Ch] [bp-20h]@1

  v3 = v2;
  if ( (*(int (__cdecl **)(_DWORD, int))(v2 + 16))(*(_DWORD *)(v2 + 8), *(_DWORD *)(v2 + 12) + a2 + 5) & 0xFF )
    sub_41D61F(*(_DWORD *)(v3 + 8));
  sub_4180B3(*(_DWORD *)(v3 + 8));
  sub_41E170(*(_DWORD *)(v3 + 12));
  InterlockedDecrement(&dword_47F544);
  sub_42471F((_DWORD *)v3);
}

//----- (0042485B) --------------------------------------------------------
int __thiscall sub_42485B(int this)
{
  int v1; // ST08_4@1
  char v3; // [sp+4h] [bp-1Ch]@1
  char v4; // [sp+8h] [bp-18h]@1
  char v5; // [sp+Ch] [bp-14h]@1
  char v6; // [sp+10h] [bp-10h]@1
  int v7; // [sp+1Ch] [bp-4h]@1

  v1 = this;
  sub_426AB0((void *)(this + 4), &v5, &v6);
  v7 = 0;
  sub_426CA0((void *)(v1 + 20), &v3, &v4);
  LOBYTE(v7) = 1;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(v1 + 36), 0, 0);
  LOBYTE(v7) = 2;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(v1 + 68), 0, 0);
  *(_DWORD *)v1 = off_45F7DC;
  return v1;
}
// 45F7DC: using guessed type int (__stdcall *off_45F7DC[2])(int);

//----- (004248ED) --------------------------------------------------------
int __thiscall sub_4248ED(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  *(_DWORD *)this = off_45F7DC;
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(this + 68));
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(v1 + 36));
  unknown_libname_142(v1 + 20);
  return unknown_libname_141(v1 + 4);
}
// 426A00: using guessed type int __thiscall unknown_libname_141(_DWORD);
// 426A20: using guessed type int __thiscall unknown_libname_142(_DWORD);
// 45F7DC: using guessed type int (__stdcall *off_45F7DC[2])(int);

//----- (00424962) --------------------------------------------------------
char __thiscall sub_424962(void *this, char a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  int v6; // [sp+Ch] [bp-30h]@1
  char v7; // [sp+10h] [bp-2Ch]@2
  char v8; // [sp+14h] [bp-28h]@1
  char v9; // [sp+18h] [bp-24h]@1
  int v10; // [sp+1Ch] [bp-20h]@1
  char v11; // [sp+20h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+24h] [bp-18h]@1

  v6 = (int)this;
  v11 = 0;
  ms_exc.registration.TryLevel = 0;
  unknown_libname_146(&v10);
  sub_42D4B5(v6 + 36);
  v10 = *sub_426D60((void *)(v6 + 20), &v9, &a2);
  v3 = (_DWORD *)sub_426CE0((void *)(v6 + 20), (int)&v8);
  if ( (unsigned __int8)sub_426EA0(&v10, v3) )
  {
    v4 = unknown_libname_147(&v10);
    *a3 = *(_DWORD *)(v4 + 4);
    sub_426D40((Concurrency::details::_NonReentrantPPLLock *)(v6 + 20), &v7, v10);
    sub_42D4F0(v6 + 36);
    v11 = 1;
  }
  else
  {
    sub_42D4F0(v6 + 36);
  }
  return v11;
}
// 426E60: using guessed type int __thiscall unknown_libname_146(_DWORD);
// 426E80: using guessed type int __thiscall unknown_libname_147(_DWORD);

//----- (00424A7D) --------------------------------------------------------
char __thiscall sub_424A7D(void *this, char a2, char a3)
{
  struct Concurrency::IExecutionContext *v3; // eax@1
  int v5; // [sp+Ch] [bp-34h]@1
  char v6; // [sp+10h] [bp-30h]@1
  int v7; // [sp+18h] [bp-28h]@2
  int v8; // [sp+1Ch] [bp-24h]@1
  char v9; // [sp+20h] [bp-20h]@1
  int v10; // [sp+24h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+28h] [bp-18h]@1

  v5 = (int)this;
  LOBYTE(v10) = 0;
  ms_exc.registration.TryLevel = 0;
  sub_42D4B5((int)this + 36);
  v3 = (struct Concurrency::IExecutionContext *)sub_426E30((int)&v6, &a2, &a3);
  sub_426D00((void *)(v5 + 20), (int)&v8, v3);
  LOBYTE(v10) = v9;
  sub_42D4F0(v5 + 36);
  if ( !(_BYTE)v10 )
  {
    v7 = 0;
    sub_424962((void *)v5, a2, &v7);
  }
  return v10;
}

//----- (00424B6D) --------------------------------------------------------
int __thiscall sub_424B6D(void *this, char a2)
{
  _DWORD *v2; // eax@1
  int v4; // [sp+Ch] [bp-28h]@1
  char v5; // [sp+10h] [bp-24h]@1
  char v6; // [sp+14h] [bp-20h]@1
  int v7; // [sp+18h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+1Ch] [bp-18h]@1

  v4 = (int)this;
  v7 = 0;
  ms_exc.registration.TryLevel = 0;
  sub_42D4B5((int)this + 68);
  sub_426B50((void *)(v4 + 4), &v6, &a2);
  v2 = (_DWORD *)sub_426AD0((void *)(v4 + 4), (int)&v5);
  if ( (unsigned __int8)sub_426C70(&v6, v2) )
    v7 = *(_DWORD *)(unknown_libname_145(&v6) + 4);
  sub_42D4F0(v4 + 68);
  return v7;
}
// 426C50: using guessed type int __thiscall unknown_libname_145(_DWORD);

//----- (00424C58) --------------------------------------------------------
int __thiscall sub_424C58(void *this, char a2)
{
  _DWORD *v2; // eax@1
  int v4; // [sp+Ch] [bp-2Ch]@1
  char v5; // [sp+10h] [bp-28h]@2
  char v6; // [sp+14h] [bp-24h]@1
  int v7; // [sp+18h] [bp-20h]@1
  int v8; // [sp+1Ch] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+20h] [bp-18h]@1

  v4 = (int)this;
  v8 = 0;
  ms_exc.registration.TryLevel = 0;
  sub_42D4B5((int)this + 68);
  sub_426B50((void *)(v4 + 4), &v7, &a2);
  v2 = (_DWORD *)sub_426AD0((void *)(v4 + 4), (int)&v6);
  if ( (unsigned __int8)sub_426C70(&v7, v2) )
  {
    v8 = *(_DWORD *)(unknown_libname_145(&v7) + 4);
    sub_426B30((Concurrency::details::_NonReentrantPPLLock *)(v4 + 4), &v5, v7);
  }
  sub_42D4F0(v4 + 68);
  return v8;
}
// 426C50: using guessed type int __thiscall unknown_libname_145(_DWORD);

//----- (00424D56) --------------------------------------------------------
char __thiscall sub_424D56(void *this)
{
  _DWORD *v1; // eax@2
  int v3; // [sp+Ch] [bp-30h]@1
  char v4; // [sp+10h] [bp-2Ch]@3
  void *v5; // [sp+14h] [bp-28h]@3
  char v6; // [sp+18h] [bp-24h]@2
  char v7; // [sp+1Ch] [bp-20h]@1
  int i; // [sp+20h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+24h] [bp-18h]@1

  v3 = (int)this;
  ms_exc.registration.TryLevel = 0;
  unknown_libname_146(&i);
  sub_42D4B5(v3 + 36);
  for ( i = *(_DWORD *)sub_426CC0((void *)(v3 + 20), (int)&v7);
        ;
        i = *sub_426D40((Concurrency::details::_NonReentrantPPLLock *)(v3 + 20), &v4, i) )
  {
    v1 = (_DWORD *)sub_426CE0((void *)(v3 + 20), (int)&v6);
    if ( !(unsigned __int8)sub_426EA0(&i, v1) )
      break;
    v5 = *(void **)(unknown_libname_147(&i) + 4);
    sub_43CA18(v5);
  }
  sub_42D4F0(v3 + 36);
  return 1;
}
// 426E60: using guessed type int __thiscall unknown_libname_146(_DWORD);
// 426E80: using guessed type int __thiscall unknown_libname_147(_DWORD);

//----- (00424E66) --------------------------------------------------------
int __thiscall sub_424E66(void *this, char a2, int a3)
{
  int result; // eax@2
  struct Concurrency::IExecutionContext *v4; // eax@3
  int v5; // [sp+18h] [bp-30h]@1
  char v6; // [sp+1Ch] [bp-2Ch]@3
  int v7; // [sp+24h] [bp-24h]@3
  char v8; // [sp+28h] [bp-20h]@3
  int v9; // [sp+2Ch] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+30h] [bp-18h]@1

  v5 = (int)this;
  ms_exc.registration.TryLevel = 0;
  LOBYTE(v9) = 0;
  if ( a3 )
  {
    sub_42D4B5((int)this + 68);
    v4 = (struct Concurrency::IExecutionContext *)sub_426C20((int)&v6, &a2, &a3);
    sub_426AF0((void *)(v5 + 4), (int)&v7, v4);
    LOBYTE(v9) = v8;
    sub_42D4F0(v5 + 68);
    if ( (unsigned __int8)v9 == 1 )
    {
      ms_exc.registration.TryLevel = -1;
      result = a3;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    ms_exc.registration.TryLevel = -1;
    result = 0;
  }
  return result;
}

//----- (00424F76) --------------------------------------------------------
char __thiscall sub_424F76(void *this, int a2, char a3)
{
  int v3; // ST10_4@6
  void *v5; // [sp+Ch] [bp-2Ch]@1
  char v6; // [sp+1Ch] [bp-1Ch]@1

  v5 = this;
  v6 = 0;
  if ( sub_424A7D(this, a3, a2) )
  {
    if ( dword_481700 && !byte_47F811 && byte_47857A )
    {
      v3 = *(_DWORD *)(a2 + 8);
      if ( !sub_4262FA(dword_481700, (int)aCsddd, 2) )
      {
        v6 = 10;
        sub_424962(v5, a3, 0);
      }
    }
    else
    {
      v6 = 10;
      sub_424962(v5, a3, 0);
    }
  }
  else
  {
    v6 = 11;
  }
  return v6;
}
// 478568: using guessed type int dword_478568;
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;
// 481700: using guessed type int dword_481700;

//----- (004250BF) --------------------------------------------------------
char __stdcall sub_4250BF(int a1, int a2, int a3)
{
  char result; // al@2
  int v4; // ST10_4@6

  if ( a1 )
  {
    if ( byte_47857A && !byte_47F811 )
    {
      if ( dword_481700 )
      {
        sub_42D61C((int)&unk_47F7F0);
        v4 = *(_DWORD *)(dword_481700 + 96);
        sub_4262FA(dword_481700, (int)aCddddd, 3);
        sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_47F7F0);
      }
    }
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 478568: using guessed type int dword_478568;
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;
// 481700: using guessed type int dword_481700;

//----- (004251D0) --------------------------------------------------------
char __thiscall sub_4251D0(void *this, char a2, int a3, char a4, int a5, int a6)
{
  char result; // al@2
  void *v7; // [sp+10h] [bp-38h]@1
  int v8; // [sp+24h] [bp-24h]@3
  int v9; // [sp+28h] [bp-20h]@1
  char v10; // [sp+2Ch] [bp-1Ch]@2
  CPPEH_RECORD ms_exc; // [sp+30h] [bp-18h]@1

  v7 = this;
  ms_exc.registration.TryLevel = 0;
  v9 = 0;
  sub_424962(this, a2, &v9);
  if ( v9 )
  {
    v8 = sub_419532((int)&unk_47ECB8, *(_DWORD *)(v9 + 20));
    if ( v8 )
    {
      *(_DWORD *)(v9 + 12) = a6;
      if ( sub_4025DE(&unk_481698, v9, a2, v8, a5, 0) )
      {
        if ( !sub_424E66(v7, a2, a3) )
        {
          sub_4038C3(&unk_481698, a2);
          sub_4250BF(a3, *(_DWORD *)(v9 + 8), a6);
        }
      }
      else
      {
        sub_4250BF(a3, *(_DWORD *)(v9 + 8), a6);
      }
      sub_4180B3(v8);
      sub_43CA18((LPVOID)v9);
      result = a4;
    }
    else
    {
      sub_4250BF(a3, *(_DWORD *)(v9 + 8), a6);
      sub_43CA18((LPVOID)v9);
      ms_exc.registration.TryLevel = -1;
      result = 0;
    }
  }
  else
  {
    v10 = 1;
    sub_4250BF(a3, 0, a6);
    ms_exc.registration.TryLevel = -1;
    result = v10;
  }
  return result;
}

//----- (004253A2) --------------------------------------------------------
char __thiscall sub_4253A2(void *this, int rgbValue, int a3, char a4)
{
  char result; // al@2
  int v5; // [sp+14h] [bp-Ch]@3
  int v6; // [sp+18h] [bp-8h]@1
  char v7; // [sp+1Ch] [bp-4h]@7

  v6 = 0;
  sub_424962(this, rgbValue, &v6);
  if ( v6 )
  {
    v5 = sub_419532((int)&unk_47ECB8, *(_DWORD *)(v6 + 20));
    if ( v5 )
    {
      if ( a4 == 2 )
      {
        sub_439D55(v5, (int)aCc_23, 8);
        sub_43CA18((LPVOID)v6);
        sub_4180B3(v5);
        result = a4;
      }
      else
      {
        v7 = sub_40481A(v5, v6, rgbValue);
        sub_4180B3(v5);
        sub_43CA18((LPVOID)v6);
        result = v7;
      }
    }
    else
    {
      sub_43CA18((LPVOID)v6);
      result = a4;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (00425485) --------------------------------------------------------
char sub_425485()
{
  sub_42DBFC((int)&unk_47FA00, 2, aCallDummypacke);
  return 0;
}

//----- (004254A0) --------------------------------------------------------
char __cdecl sub_4254A0(int a1, char a2)
{
  int v3; // [sp+1Ch] [bp-30h]@1
  char v4; // [sp+20h] [bp-2Ch]@1
  char v5; // [sp+2Eh] [bp-1Eh]@1
  int v6; // [sp+30h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+34h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  v6 = 0;
  memset(&v4, 0, 0xFu);
  v3 = sub_411480((int **)&a2);
  sub_4114B0(&a2);
  v6 = sub_411480((int **)&a2);
  sub_411480((int **)&a2);
  sub_411530((int **)&a2);
  sub_411560((int *)&a2, 15, &v4);
  v5 = 0;
  if ( v3 )
    sub_4038C3(&unk_481698, v3);
  return 0;
}

//----- (004255CA) --------------------------------------------------------
char __cdecl sub_4255CA(int a1, char a2)
{
  char result; // al@2
  char v3; // ST34_1@4
  char v4; // ST1C_1@5
  int v5; // eax@5
  int v6; // [sp+14h] [bp-54h]@1
  int v7; // [sp+18h] [bp-50h]@3
  int v8; // [sp+1Ch] [bp-4Ch]@1
  int v9; // [sp+20h] [bp-48h]@1
  int v10; // [sp+24h] [bp-44h]@1
  int v11; // [sp+28h] [bp-40h]@1
  char v12[4]; // [sp+2Ch] [bp-3Ch]@1
  char v13; // [sp+30h] [bp-38h]@1
  char v14; // [sp+3Eh] [bp-2Ah]@3
  int v15; // [sp+40h] [bp-28h]@1
  int v16; // [sp+44h] [bp-24h]@1
  int v17; // [sp+48h] [bp-20h]@1
  int v18; // [sp+4Ch] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+50h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  *(_DWORD *)v12 = sub_411480((int **)&a2);
  v15 = sub_4114B0(&a2);
  v16 = sub_411480((int **)&a2);
  v6 = sub_411480((int **)&a2);
  v9 = sub_411480((int **)&a2);
  v17 = 0;
  v8 = 0;
  v11 = 0;
  LOBYTE(v18) = sub_404C7A(&unk_481698, v12[0], &v13, (int)&v17, (int)&v8, (int)&v11, (int)&v10);
  if ( (_BYTE)v18 )
  {
    v14 = 0;
    v7 = sub_419532((int)&unk_47ECB8, v10);
    if ( v7 )
    {
      v3 = sub_404A52(&unk_481698, *(int *)v12, (int)&v13, v16, v17, v8, v11, v7, v15, v6);
      sub_4180B3(v7);
      if ( v3 )
      {
        v4 = v15;
        v5 = time(0);
        sub_42651E(&unk_47F548, v12[0], v9, v6, 0, v5, v4, (int)&v13);
      }
    }
    result = 0;
  }
  else
  {
    ms_exc.registration.TryLevel = -1;
    result = 0;
  }
  return result;
}

//----- (004257A1) --------------------------------------------------------
char __cdecl sub_4257A1(int a1, char a2)
{
  char v2; // ST24_1@1
  char v3; // ST20_1@1
  int v4; // ST28_4@1
  int v5; // ST2C_4@1

  v2 = sub_411480((int **)&a2);
  v3 = sub_4114B0(&a2);
  v4 = sub_411480((int **)&a2);
  v5 = sub_411480((int **)&a2);
  sub_4251D0(&unk_47F548, v2, v5, 0, v4, v3);
  return 0;
}

//----- (00425880) --------------------------------------------------------
char __cdecl sub_425880(int a1, char a2)
{
  char v3; // [sp+Ch] [bp-20h]@1
  int rgbValue; // [sp+10h] [bp-1Ch]@1

  rgbValue = sub_411480((int **)&a2);
  v3 = sub_4114B0(&a2);
  if ( rgbValue > 0 )
    sub_4253A2(&unk_47F548, rgbValue, 0, v3);
  return 0;
}

//----- (0042593E) --------------------------------------------------------
char __cdecl sub_42593E(int a1, char a2)
{
  int v2; // ST1C_4@1

  v2 = sub_411480((int **)&a2);
  sub_428630(a1, v2);
  return 0;
}

//----- (004259DF) --------------------------------------------------------
char __cdecl sub_4259DF(int a1, char a2)
{
  char v2; // ST2C_1@1
  char v4; // [sp+20h] [bp-28h]@1
  char v5; // [sp+2Eh] [bp-1Ah]@1
  CPPEH_RECORD ms_exc; // [sp+30h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  sub_411530((int **)&a2);
  sub_411480((int **)&a2);
  sub_411480((int **)&a2);
  memset(&v4, 0, 0x10u);
  sub_411560((int *)&a2, 16, &v4);
  v2 = sub_411480((int **)&a2);
  v5 = 0;
  sub_4027DF(&unk_481698, v2, 21, 1);
  return 0;
}

//----- (00425ADF) --------------------------------------------------------
char __cdecl sub_425ADF(int a1, char a2)
{
  char result; // al@2
  char v3; // ST34_1@4
  char v4; // ST1C_1@5
  int v5; // eax@5
  int v6; // [sp+14h] [bp-54h]@1
  int v7; // [sp+18h] [bp-50h]@3
  int v8; // [sp+1Ch] [bp-4Ch]@1
  int v9; // [sp+20h] [bp-48h]@1
  int v10; // [sp+24h] [bp-44h]@1
  int v11; // [sp+28h] [bp-40h]@1
  char v12[4]; // [sp+2Ch] [bp-3Ch]@1
  char v13; // [sp+30h] [bp-38h]@1
  char v14; // [sp+3Eh] [bp-2Ah]@3
  int v15; // [sp+40h] [bp-28h]@1
  int v16; // [sp+44h] [bp-24h]@1
  int v17; // [sp+48h] [bp-20h]@1
  int v18; // [sp+4Ch] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+50h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  *(_DWORD *)v12 = sub_411480((int **)&a2);
  v15 = sub_4114B0(&a2);
  v16 = sub_411480((int **)&a2);
  v6 = sub_411480((int **)&a2);
  v9 = sub_411480((int **)&a2);
  memset(&v13, 0, 0xFu);
  v17 = 0;
  v8 = 0;
  v11 = 0;
  LOBYTE(v18) = sub_404C7A(&unk_481698, v12[0], &v13, (int)&v17, (int)&v8, (int)&v11, (int)&v10);
  if ( (_BYTE)v18 )
  {
    v14 = 0;
    v7 = sub_419532((int)&unk_47ECB8, v10);
    if ( v7 )
    {
      v3 = sub_404A52(&unk_481698, *(int *)v12, (int)&v13, v16, v17, v8, v11, v7, v15, v6);
      sub_4180B3(v7);
      if ( v3 )
      {
        v4 = v15;
        v5 = time(0);
        sub_42651E(&unk_47F548, v12[0], v9, v6, 0, v5, v4, (int)&v13);
      }
    }
    result = 0;
  }
  else
  {
    ms_exc.registration.TryLevel = -1;
    result = 0;
  }
  return result;
}

//----- (00425CC7) --------------------------------------------------------
char __cdecl sub_425CC7(int a1, char a2)
{
  int v3; // [sp+10h] [bp-1Ch]@1

  v3 = sub_411480((int **)&a2);
  sub_4114B0(&a2);
  if ( v3 > 0 )
    sub_4038C3(&unk_481698, v3);
  return 0;
}

//----- (00425D86) --------------------------------------------------------
char __cdecl sub_425D86(int a1, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = sub_411480((int **)&a2);
  if ( v3 > 0 )
    sub_4038C3(&unk_481698, v3);
  return 0;
}

//----- (00425DBA) --------------------------------------------------------
char __cdecl sub_425DBA(int a1, char a2)
{
  int v3; // [sp+0h] [bp-20h]@1
  int v4; // [sp+4h] [bp-1Ch]@1
  char v5; // [sp+8h] [bp-18h]@1
  char v6; // [sp+Ch] [bp-14h]@1
  int v7; // [sp+1Ch] [bp-4h]@1

  v5 = sub_411480((int **)&a2);
  v7 = sub_411480((int **)&a2);
  v4 = sub_411480((int **)&a2);
  v3 = sub_411480((int **)&a2);
  if ( sub_402340(&unk_481698, v5, &v6) <= 0 )
    sub_4250BF(v7, v4, v3);
  else
    sub_424E66(&unk_47F548, v5, v7);
  return 0;
}

//----- (00425E53) --------------------------------------------------------
char __cdecl sub_425E53(int a1, char a2)
{
  sub_411480((int **)&a2);
  sub_411480((int **)&a2);
  return 0;
}

//----- (00425E8B) --------------------------------------------------------
int __cdecl sub_425E8B(int a1)
{
  int v2; // [sp+0h] [bp-18h]@2
  DNameNode *v3; // [sp+4h] [bp-14h]@1

  v3 = (DNameNode *)unknown_libname_49(0x88u);
  if ( v3 )
    v2 = sub_425EF9(v3, a1);
  else
    v2 = 0;
  return v2;
}

//----- (00425EF9) --------------------------------------------------------
int __thiscall sub_425EF9(DNameNode *this, int a2)
{
  int v2; // ST04_4@1

  v2 = (int)this;
  sub_41D4D0(this, a2);
  *(_DWORD *)v2 = &off_45F7E0;
  *(_DWORD *)(v2 + 112) = dword_478580;
  *(_DWORD *)(v2 + 132) = 0;
  *(_DWORD *)(v2 + 104) = 0;
  *(_DWORD *)(v2 + 108) = &off_46BD34;
  *(_DWORD *)(v2 + 92) = 0;
  sub_418095(v2);
  *(_WORD *)(v2 + 116) = 2;
  *(_DWORD *)(v2 + 120) = dword_478580;
  *(_WORD *)(v2 + 118) = htons(hostshort);
  *(_DWORD *)(v2 + 96) = 0;
  byte_47F811 = 0;
  return v2;
}
// 45F7E0: using guessed type int (__stdcall *off_45F7E0)(int);
// 46BD34: using guessed type int (__cdecl *off_46BD34)(int, char);
// 478580: using guessed type int dword_478580;
// 47F811: using guessed type char byte_47F811;

//----- (00425FC4) --------------------------------------------------------
void *__fastcall sub_425FC4(int a1)
{
  int v1; // ST0C_4@1

  v1 = a1;
  *(_DWORD *)a1 = &off_45F7E0;
  sub_42DBFC((int)&unk_47FA00, 3, aIpsocketDelete);
  return sub_41D583(v1);
}
// 45F7E0: using guessed type int (__stdcall *off_45F7E0)(int);

//----- (00426021) --------------------------------------------------------
BOOL __thiscall sub_426021(int this)
{
  PVOID Parameter; // ST1C_4@1
  int v2; // ST18_4@1
  int v3; // ST14_4@1
  char *v4; // eax@1

  Parameter = (PVOID)this;
  *(_DWORD *)(this + 104) = 2;
  byte_47F811 = 1;
  byte_47857A = 0;
  v2 = this;
  v3 = *(_DWORD *)(this + 88);
  v4 = sub_4260AA(this);
  sub_42DBFC((int)&unk_47FA00, 3, aCloseConnect_1, v4, v3, v2);
  sub_424D56(&unk_47F548);
  sub_418095((int)Parameter);
  return CreateTimerQueueTimer(&phNewTimer, 0, sub_42440E, Parameter, DueTime, 0, 0);
}
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;

//----- (004260AA) --------------------------------------------------------
char *__thiscall sub_4260AA(int this)
{
  return inet_ntoa(*(struct in_addr *)(this + 112));
}

//----- (004260C2) --------------------------------------------------------
char __thiscall sub_4260C2(void *this)
{
  int v1; // ST14_4@1

  v1 = (int)this;
  sub_418095((int)this);
  (*(void (__thiscall **)(int))(*(_DWORD *)v1 + 32))(v1);
  return sub_4262FA(v1, (int)aCdc, 0);
}
// 478568: using guessed type int dword_478568;

//----- (00426100) --------------------------------------------------------
LONG __thiscall sub_426100(int this)
{
  LONG result; // eax@2
  DNameNode *v2; // ST18_4@16
  int v3; // [sp+0h] [bp-14h]@1
  int v4; // [sp+8h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-8h]@1
  signed __int32 dwNumberOfBytesTransferred; // [sp+10h] [bp-4h]@1

  v3 = this;
  dwNumberOfBytesTransferred = 0;
  v5 = *(_DWORD *)(*(_DWORD *)(this + 72) + 8196);
  v4 = *(_DWORD *)(this + 72) + 4;
  if ( *(_DWORD *)(this + 104) == 2 )
  {
    result = sub_41D61F(this);
  }
  else
  {
    while ( 1 )
    {
      while ( 1 )
      {
        if ( dwNumberOfBytesTransferred >= v5 )
          return sub_41D995(v3, 0);
        if ( *(_DWORD *)(v3 + 104) )
          break;
        if ( dwNumberOfBytesTransferred + 3 > v5 )
          return sub_41D995(v3, v5 - dwNumberOfBytesTransferred);
        *(_DWORD *)(v3 + 100) = *(_BYTE *)(dwNumberOfBytesTransferred + v4)
                              + (*(_BYTE *)(dwNumberOfBytesTransferred + v4 + 1) << 8)
                              + 1;
        if ( *(_DWORD *)(v3 + 100) <= 0 || *(_DWORD *)(v3 + 100) > 0x2000 )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aDBadPacketSi_0, *(_DWORD *)(v3 + 88), *(_DWORD *)(v3 + 100));
          goto LABEL_20;
        }
        dwNumberOfBytesTransferred += 2;
        *(_DWORD *)(v3 + 104) = 1;
      }
      if ( *(_DWORD *)(v3 + 104) != 1 )
        goto LABEL_20;
      if ( *(_DWORD *)(v3 + 100) + dwNumberOfBytesTransferred > v5 )
        return sub_41D995(v3, v5 - dwNumberOfBytesTransferred);
      if ( (signed int)*(_BYTE *)(dwNumberOfBytesTransferred + v4) >= 16 )
        break;
      v2 = sub_4245CF();
      *((_DWORD *)v2 + 2) = v3;
      *((_DWORD *)v2 + 3) = *(_DWORD *)(v3 + 72);
      *((_DWORD *)v2 + 4) = *(_DWORD *)(*(_DWORD *)(v3 + 108) + 4 * *(_BYTE *)(dwNumberOfBytesTransferred + v4));
      sub_418095(v3);
      sub_4116D0(*(_DWORD *)(v3 + 72));
      InterlockedIncrement(&dword_47F544);
      sub_4180FB((void *)v2, dwNumberOfBytesTransferred, CompletionPort);
      dwNumberOfBytesTransferred += *(_DWORD *)(v3 + 100);
      *(_DWORD *)(v3 + 104) = 0;
    }
    sub_42DBFC((int)&unk_47FA00, 3, aUnknownProto_0, *(_BYTE *)(dwNumberOfBytesTransferred + v4));
LABEL_20:
    result = sub_41D61F(v3);
  }
  return result;
}

//----- (004262FA) --------------------------------------------------------
char __cdecl sub_4262FA(int a1, int a2, char a3)
{
  char result; // al@4
  char *v4; // [sp+4h] [bp-Ch]@5
  _DWORD *v5; // [sp+Ch] [bp-4h]@5

  sub_418095(a1);
  if ( *(_DWORD *)(a1 + 104) != 2 && !byte_47F811 && byte_47857A )
  {
    v5 = sub_417DD3();
    v4 = sub_43A690((char *)v5 + 6, 8190, a2, (int)&a3);
    if ( v4 )
    {
      *((_BYTE *)v5 + 4) = (_BYTE)--v4;
      *((_BYTE *)v5 + 5) = BYTE1(v4);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_1, *(_DWORD *)(a1 + 88), a2);
    }
    v5[2049] = v4 + 3;
    sub_41DB1A(a1, (int)v5);
    sub_4180B3(a1);
    result = 1;
  }
  else
  {
    sub_4180B3(a1);
    result = 0;
  }
  return result;
}
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;

//----- (0042651E) --------------------------------------------------------
char __thiscall sub_42651E(void *this, char a2, int a3, int a4, int a5, int a6, char a7, int a8)
{
  char result; // al@2
  int v9; // ST0C_4@7
  int v10; // [sp+14h] [bp-24h]@1
  char v11; // [sp+18h] [bp-20h]@1
  char v12; // [sp+1Ch] [bp-1Ch]@1

  v12 = 0;
  v10 = sub_424B6D(this, a2);
  v11 = 1;
  if ( v10 )
  {
    if ( byte_47857A && v10 && dword_481700 && !byte_47F811 )
    {
      sub_42D61C((int)&unk_47F7F0);
      v9 = *(_DWORD *)(dword_481700 + 96);
      v11 = sub_4262FA(dword_481700, (int)aCddddcddsd, 5);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_47F7F0);
    }
    if ( !v11 )
      v12 = 10;
    result = v12;
  }
  else
  {
    result = 10;
  }
  return result;
}
// 478568: using guessed type int dword_478568;
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;
// 481700: using guessed type int dword_481700;

//----- (0042666C) --------------------------------------------------------
char __thiscall sub_42666C(void *this, char a2, int a3, int a4, char a5)
{
  char result; // al@5
  int v6; // ST10_4@6
  char v7; // ST3C_1@6
  int v8; // [sp+14h] [bp-24h]@1
  char v9; // [sp+1Ch] [bp-1Ch]@1

  v9 = 0;
  v8 = sub_424B6D(this, a2);
  if ( dword_481700 && !byte_47F811 && byte_47857A && v8 )
  {
    sub_42D61C((int)&unk_47F7F0);
    v6 = *(_DWORD *)(dword_481700 + 96);
    v7 = sub_4262FA(dword_481700, (int)aCdddcdd_0, 9);
    sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_47F7F0);
    if ( !v7 )
      v9 = 10;
    result = v9;
  }
  else
  {
    result = 10;
  }
  return result;
}
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;
// 481700: using guessed type int dword_481700;

//----- (004267A2) --------------------------------------------------------
char __thiscall sub_4267A2(void *this, char a2, int a3, int a4, char a5)
{
  char result; // al@5
  int v6; // ST10_4@6
  char v7; // ST3C_1@6
  int v8; // [sp+14h] [bp-24h]@1
  char v9; // [sp+1Ch] [bp-1Ch]@1

  v9 = 0;
  v8 = sub_424B6D(this, a2);
  if ( dword_481700 && !byte_47F811 && byte_47857A && v8 )
  {
    sub_42D61C((int)&unk_47F7F0);
    v6 = *(_DWORD *)(dword_481700 + 96);
    v7 = sub_4262FA(dword_481700, (int)aCdddcdd_1, 10);
    sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_47F7F0);
    if ( !v7 )
      v9 = 10;
    result = v9;
  }
  else
  {
    result = 10;
  }
  return result;
}
// 47857A: using guessed type char byte_47857A;
// 47F811: using guessed type char byte_47F811;
// 481700: using guessed type int dword_481700;

//----- (004268E7) --------------------------------------------------------
int sub_4268E7()
{
  return atexit(sub_402150);
}

//----- (00426900) --------------------------------------------------------
int __thiscall sub_426900(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (00426950) --------------------------------------------------------
void sub_426950()
{
  sub_424691();
}

//----- (00426960) --------------------------------------------------------
DNameNode *__thiscall sub_426960(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F668;
  return v1;
}
// 45F668: using guessed type int (__stdcall *off_45F668)(int);

//----- (00426980) --------------------------------------------------------
void *__thiscall sub_426980(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_140();
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);
// 4269B0: using guessed type int unknown_libname_140(void);

//----- (004269D0) --------------------------------------------------------
void *__thiscall sub_4269D0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4248ED((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00426A80) --------------------------------------------------------
void *__thiscall sub_426A80(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_425FC4((int)this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (00426AB0) --------------------------------------------------------
void *__thiscall sub_426AB0(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_426ED0(this, a2, a3);
  return v3;
}

//----- (00426AD0) --------------------------------------------------------
int __thiscall sub_426AD0(void *this, int a2)
{
  sub_426F30((int)this, a2);
  return a2;
}

//----- (00426AF0) --------------------------------------------------------
int __thiscall sub_426AF0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_426F50(this, (int)&v4, a3);
  sub_428890(a2, &v4, &v5);
  return a2;
}

//----- (00426B30) --------------------------------------------------------
_DWORD *__thiscall sub_426B30(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  sub_427120(this, a2, a3);
  return a2;
}

//----- (00426B50) --------------------------------------------------------
_DWORD *__thiscall sub_426B50(void *this, _DWORD *a2, _DWORD *a3)
{
  sub_427A70(this, a2, a3);
  return a2;
}

//----- (00426B70) --------------------------------------------------------
void __thiscall sub_426B70(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_426F30((int)this, (int)&v6);
  v2 = (int *)sub_426F00((void *)v3, (int)&v5);
  sub_427970((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_47F820 )
  {
    v8 = (void *)dword_47F81C;
    dword_47F81C = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 47F81C: using guessed type int dword_47F81C;
// 47F820: using guessed type int dword_47F820;

//----- (00426C20) --------------------------------------------------------
int __thiscall sub_426C20(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (00426C70) --------------------------------------------------------
BOOL __thiscall sub_426C70(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_427B50(this, a2) == 0;
}

//----- (00426CA0) --------------------------------------------------------
void *__thiscall sub_426CA0(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST08_4@1

  v3 = this;
  sub_427B70(this, a2, a3);
  return v3;
}

//----- (00426CC0) --------------------------------------------------------
int __thiscall sub_426CC0(void *this, int a2)
{
  sub_427BA0(this, a2);
  return a2;
}

//----- (00426CE0) --------------------------------------------------------
int __thiscall sub_426CE0(void *this, int a2)
{
  sub_427BD0((int)this, a2);
  return a2;
}

//----- (00426D00) --------------------------------------------------------
int __thiscall sub_426D00(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  int v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  sub_427BF0(this, (int)&v4, a3);
  sub_428860(a2, &v4, &v5);
  return a2;
}

//----- (00426D40) --------------------------------------------------------
_DWORD *__thiscall sub_426D40(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  sub_427DC0(this, a2, a3);
  return a2;
}

//----- (00426D60) --------------------------------------------------------
_DWORD *__thiscall sub_426D60(void *this, _DWORD *a2, _DWORD *a3)
{
  sub_428750(this, a2, a3);
  return a2;
}

//----- (00426D80) --------------------------------------------------------
void __thiscall sub_426D80(Concurrency::details::_NonReentrantPPLLock *this)
{
  int v1; // ST08_4@1
  int *v2; // eax@1
  Concurrency::details::_NonReentrantPPLLock *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+Ch] [bp-Ch]@1
  char v7; // [sp+10h] [bp-8h]@1
  void *v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v1 = *(_DWORD *)sub_427BD0((int)this, (int)&v6);
  v2 = (int *)sub_427BA0((void *)v3, (int)&v5);
  sub_428650((void *)v3, &v4, *v2, v1);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, *((void **)v3 + 1));
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v8 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v7);
  if ( !--dword_47F828 )
  {
    v8 = (void *)dword_47F824;
    dword_47F824 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v7);
  if ( v8 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v3, v8);
}
// 47F824: using guessed type int dword_47F824;
// 47F828: using guessed type int dword_47F828;

//----- (00426E30) --------------------------------------------------------
int __thiscall sub_426E30(int this, _DWORD *a2, _DWORD *a3)
{
  *(_DWORD *)this = *a2;
  *(_DWORD *)(this + 4) = *a3;
  return this;
}

//----- (00426EA0) --------------------------------------------------------
BOOL __thiscall sub_426EA0(void *this, _DWORD *a2)
{
  return (unsigned __int8)sub_428840(this, a2) == 0;
}

//----- (00426ED0) --------------------------------------------------------
void *__thiscall sub_426ED0(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_428940((int)this, a2, 0, a3);
  return v3;
}

//----- (00426F00) --------------------------------------------------------
int __thiscall sub_426F00(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_428EE0((int)this);
  unknown_libname_152(*v2);
  return a2;
}
// 429250: using guessed type _DWORD __stdcall unknown_libname_152(_DWORD);

//----- (00426F30) --------------------------------------------------------
int __thiscall sub_426F30(int this, int a2)
{
  unknown_libname_152(*(_DWORD *)(this + 4));
  return a2;
}
// 429250: using guessed type _DWORD __stdcall unknown_libname_152(_DWORD);

//----- (00426F50) --------------------------------------------------------
int __thiscall sub_426F50(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_4290D0((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_47F81C )
  {
    v25 = v26;
    v3 = sub_4288E0(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_406220(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_149(v26);
    else
      v13 = *(_DWORD *)sub_428920(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_428A50(v14, (int)&v22, v26, v25, a3);
    sub_428890(a2, v5, &v23);
    return a2;
  }
  unknown_libname_152(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_426F00(v14, (int)&v21);
    if ( (unsigned __int8)sub_427B50(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_428A50(v14, (int)&v19, v26, v25, a3);
      sub_428890(a2, v8, &v20);
      return a2;
    }
    unknown_libname_153(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_151(&v28);
  v11 = sub_4288E0(v10);
  if ( (unsigned __int8)sub_406220(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_428A50(v14, (int)&v16, v26, v25, a3);
    sub_428890(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_428890(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 429240: using guessed type int __thiscall unknown_libname_151(_DWORD);
// 429250: using guessed type _DWORD __stdcall unknown_libname_152(_DWORD);
// 4292A0: using guessed type int __thiscall unknown_libname_153(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00427120) --------------------------------------------------------
_DWORD *__thiscall sub_427120(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  int v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_429270(&a3, &v76, 0);
  v81 = (void *)unknown_libname_151(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_149(v81) == dword_47F81C )
  {
    v82 = *(_DWORD *)sub_428920((int)v81);
  }
  else if ( *(_DWORD *)sub_428920((int)v81) == dword_47F81C )
  {
    v82 = *(_DWORD *)unknown_libname_149(v81);
  }
  else
  {
    v4 = (int *)sub_428920((int)v81);
    v81 = (void *)sub_429070(*v4);
    v82 = *(_DWORD *)sub_428920((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_428910((int)v81);
    *(_DWORD *)sub_428910(v82) = *v27;
    v28 = (void **)sub_4290D0((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_4290D0((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_428910((int)v80);
      v31 = (void **)unknown_libname_149(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_428910((int)v80);
        v33 = (_DWORD *)unknown_libname_149(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_428910((int)v80);
        v35 = (_DWORD *)sub_428920(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_428EE0((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_428920((int)v80) == dword_47F81C )
      {
        v37 = (_DWORD *)sub_428910((int)v80);
        *(_DWORD *)sub_428EE0((int)v75) = *v37;
      }
      else
      {
        v38 = sub_429070(v82);
        *(_DWORD *)sub_428EE0((int)v75) = v38;
      }
    }
    v39 = (void **)sub_4290B0((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_149(v80) == dword_47F81C )
      {
        v40 = (_DWORD *)sub_428910((int)v80);
        *(_DWORD *)sub_4290B0((int)v75) = *v40;
      }
      else
      {
        v41 = sub_429030(v82);
        *(_DWORD *)sub_4290B0((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_149(v80);
    v6 = (void **)sub_428910(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_149(v80);
    *(_DWORD *)unknown_libname_149(v81) = *v7;
    v8 = (void **)sub_428920((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_428910(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_428910((int)v81);
      *(_DWORD *)sub_428910(v82) = *v10;
      v11 = (_DWORD *)sub_428910((int)v81);
      v12 = (_DWORD *)unknown_libname_149(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_428920((int)v80);
      *(_DWORD *)sub_428920((int)v81) = *v13;
      v14 = (int *)sub_428920((int)v80);
      v15 = (void **)sub_428910(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_4290D0((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_4290D0((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_428910((int)v80);
      v19 = (void **)unknown_libname_149(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_428910((int)v80);
        v21 = (void **)unknown_libname_149(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_428910((int)v80);
        v23 = (void **)sub_428920(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_428910((int)v80);
    *(_DWORD *)sub_428910((int)v81) = *v24;
    v25 = (int *)sub_4288D0((int)v80);
    v26 = (int *)sub_4288D0((int)v81);
    sub_42A4A0(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_4288D0((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_4290D0((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_4288D0(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_428910(v82);
      v44 = (_DWORD *)unknown_libname_149(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_428910(v82);
        v78 = *(_DWORD *)sub_428920(*v45);
        if ( !*(_DWORD *)sub_4288D0(v78) )
        {
          *(_DWORD *)sub_4288D0(v78) = 1;
          v46 = (int *)sub_428910(v82);
          *(_DWORD *)sub_4288D0(*v46) = 0;
          v47 = (int *)sub_428910(v82);
          sub_428F00((void *)v75, *v47);
          v48 = (int *)sub_428910(v82);
          v78 = *(_DWORD *)sub_428920(*v48);
        }
        v49 = (int *)unknown_libname_149(v78);
        if ( *(_DWORD *)sub_4288D0(*v49) != 1 || (v50 = (int *)sub_428920(v78), *(_DWORD *)sub_4288D0(*v50) != 1) )
        {
          v51 = (int *)sub_428920(v78);
          if ( *(_DWORD *)sub_4288D0(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_149(v78);
            *(_DWORD *)sub_4288D0(*v52) = 1;
            *(_DWORD *)sub_4288D0(v78) = 0;
            sub_4290F0((void *)v75, v78);
            v53 = (int *)sub_428910(v82);
            v78 = *(_DWORD *)sub_428920(*v53);
          }
          v54 = (int *)sub_428910(v82);
          v55 = (_DWORD *)sub_4288D0(*v54);
          *(_DWORD *)sub_4288D0(v78) = *v55;
          v56 = (int *)sub_428910(v82);
          *(_DWORD *)sub_4288D0(*v56) = 1;
          v57 = (int *)sub_428920(v78);
          *(_DWORD *)sub_4288D0(*v57) = 1;
          v58 = (int *)sub_428910(v82);
          sub_428F00((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_4288D0(v78) = 0;
        v82 = *(_DWORD *)sub_428910(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_428910(v82);
        v77 = *(_DWORD *)unknown_libname_149(*v59);
        if ( !*(_DWORD *)sub_4288D0(v77) )
        {
          *(_DWORD *)sub_4288D0(v77) = 1;
          v60 = (int *)sub_428910(v82);
          *(_DWORD *)sub_4288D0(*v60) = 0;
          v61 = (int *)sub_428910(v82);
          sub_4290F0((void *)v75, *v61);
          v62 = (_DWORD *)sub_428910(v82);
          v77 = *(_DWORD *)unknown_libname_149(*v62);
        }
        v63 = (int *)sub_428920(v77);
        if ( *(_DWORD *)sub_4288D0(*v63) != 1
          || (v64 = (int *)unknown_libname_149(v77), *(_DWORD *)sub_4288D0(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_149(v77);
          if ( *(_DWORD *)sub_4288D0(*v65) == 1 )
          {
            v66 = (int *)sub_428920(v77);
            *(_DWORD *)sub_4288D0(*v66) = 1;
            *(_DWORD *)sub_4288D0(v77) = 0;
            sub_428F00((void *)v75, v77);
            v67 = (_DWORD *)sub_428910(v82);
            v77 = *(_DWORD *)unknown_libname_149(*v67);
          }
          v68 = (int *)sub_428910(v82);
          v69 = (_DWORD *)sub_4288D0(*v68);
          *(_DWORD *)sub_4288D0(v77) = *v69;
          v70 = (int *)sub_428910(v82);
          *(_DWORD *)sub_4288D0(*v70) = 1;
          v71 = (int *)unknown_libname_149(v77);
          *(_DWORD *)sub_4288D0(*v71) = 1;
          v72 = (int *)sub_428910(v82);
          sub_4290F0((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_4288D0(v77) = 0;
        v82 = *(_DWORD *)sub_428910(v82);
      }
    }
    *(_DWORD *)sub_4288D0(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = sub_428930((int)v81);
  sub_429220(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 429240: using guessed type int __thiscall unknown_libname_151(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00427970) --------------------------------------------------------
_DWORD *__thiscall sub_427970(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_150()
    || (v4 = (_DWORD *)sub_426F00((void *)v9, (int)&v13), (unsigned __int8)sub_426C70(&a3, v4))
    || (v5 = (_DWORD *)sub_426F30(v9, (int)&v12), (unsigned __int8)sub_426C70(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_426C70(&a3, &a4) )
    {
      v6 = sub_429270(&a3, &v11, 0);
      sub_427120((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_4290D0(v9);
    sub_4289D0((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_4290D0(v9) = dword_47F81C;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_428EE0(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_4290B0(v9) = *(_DWORD *)(v9 + 4);
    sub_426F00((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 428980: using guessed type int unknown_libname_150(void);
// 47F81C: using guessed type int dword_47F81C;

//----- (00427A70) --------------------------------------------------------
_DWORD *__thiscall sub_427A70(void *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  char *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  char *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_4289A0(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_426F30(v8, (int)&v10);
  if ( (unsigned __int8)sub_427B50(&v12, v3)
    || (v4 = unknown_libname_151(&v12), v5 = sub_4288E0(v4), (unsigned __int8)sub_406220(a3, v5)) )
  {
    v7 = (char *)sub_426F30(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 429240: using guessed type int __thiscall unknown_libname_151(_DWORD);

//----- (00427B30) --------------------------------------------------------
int __thiscall sub_427B30(int *this)
{
  return sub_428930(*this);
}

//----- (00427B50) --------------------------------------------------------
BOOL __thiscall sub_427B50(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (00427B70) --------------------------------------------------------
void *__thiscall sub_427B70(void *this, _BYTE *a2, _BYTE *a3)
{
  void *v3; // ST0C_4@1

  v3 = this;
  sub_429360((int)this, a2, 0, a3);
  return v3;
}

//----- (00427BA0) --------------------------------------------------------
int __thiscall sub_427BA0(void *this, int a2)
{
  _DWORD *v2; // eax@1

  v2 = (_DWORD *)sub_429900((int)this);
  unknown_libname_158(*v2);
  return a2;
}
// 429C70: using guessed type _DWORD __stdcall unknown_libname_158(_DWORD);

//----- (00427BD0) --------------------------------------------------------
int __thiscall sub_427BD0(int this, int a2)
{
  unknown_libname_158(*(_DWORD *)(this + 4));
  return a2;
}
// 429C70: using guessed type _DWORD __stdcall unknown_libname_158(_DWORD);

//----- (00427BF0) --------------------------------------------------------
int __thiscall sub_427BF0(void *this, int a2, struct Concurrency::IExecutionContext *a3)
{
  struct Concurrency::details::InternalContextBase *v3; // ST10_4@3
  struct Concurrency::details::InternalContextBase *v4; // eax@3
  _DWORD *v5; // eax@8
  int result; // eax@8
  _DWORD *v7; // eax@10
  _DWORD *v8; // eax@11
  struct Concurrency::details::InternalContextBase *v9; // ST10_4@13
  int v10; // eax@13
  struct Concurrency::details::InternalContextBase *v11; // eax@13
  _DWORD *v12; // eax@14
  int v13; // [sp+0h] [bp-40h]@4
  void *v14; // [sp+4h] [bp-3Ch]@1
  char v15; // [sp+8h] [bp-38h]@15
  int v16; // [sp+Ch] [bp-34h]@14
  char v17; // [sp+10h] [bp-30h]@14
  char v18; // [sp+14h] [bp-2Ch]@13
  int v19; // [sp+18h] [bp-28h]@11
  char v20; // [sp+1Ch] [bp-24h]@11
  char v21; // [sp+20h] [bp-20h]@10
  int v22; // [sp+24h] [bp-1Ch]@8
  char v23; // [sp+28h] [bp-18h]@8
  char v24; // [sp+2Ch] [bp-14h]@3
  int v25; // [sp+30h] [bp-10h]@1
  int v26; // [sp+34h] [bp-Ch]@1
  int v27; // [sp+38h] [bp-8h]@1
  char v28; // [sp+3Ch] [bp-4h]@10

  v14 = this;
  v26 = *(_DWORD *)sub_429AF0((int)this);
  v25 = *((_DWORD *)v14 + 1);
  LOBYTE(v27) = 1;
  while ( v26 != dword_47F824 )
  {
    v25 = v26;
    v3 = sub_429300(v26);
    v4 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v24, a3);
    LOBYTE(v27) = sub_406220(v4, v3);
    if ( (_BYTE)v27 )
      v13 = *(_DWORD *)unknown_libname_155(v26);
    else
      v13 = *(_DWORD *)sub_429340(v26);
    v26 = v13;
  }
  if ( *((_BYTE *)v14 + 8) )
  {
    v23 = 1;
    v5 = (_DWORD *)sub_429470(v14, (int)&v22, v26, v25, a3);
    sub_428860(a2, v5, &v23);
    return a2;
  }
  unknown_libname_158(v25);
  if ( (_BYTE)v27 )
  {
    v7 = (_DWORD *)sub_427BA0(v14, (int)&v21);
    if ( (unsigned __int8)sub_428840(&v28, v7) )
    {
      v20 = 1;
      v8 = (_DWORD *)sub_429470(v14, (int)&v19, v26, v25, a3);
      sub_428860(a2, v8, &v20);
      return a2;
    }
    unknown_libname_159(&v28);
  }
  v9 = Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v18, a3);
  v10 = unknown_libname_157(&v28);
  v11 = sub_429300(v10);
  if ( (unsigned __int8)sub_406220(v11, v9) )
  {
    v17 = 1;
    v12 = (_DWORD *)sub_429470(v14, (int)&v16, v26, v25, a3);
    sub_428860(a2, v12, &v17);
    result = a2;
  }
  else
  {
    v15 = 0;
    sub_428860(a2, &v28, &v15);
    result = a2;
  }
  return result;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 429C60: using guessed type int __thiscall unknown_libname_157(_DWORD);
// 429C70: using guessed type _DWORD __stdcall unknown_libname_158(_DWORD);
// 429CC0: using guessed type int __thiscall unknown_libname_159(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00427DC0) --------------------------------------------------------
_DWORD *__thiscall sub_427DC0(Concurrency::details::_NonReentrantPPLLock *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax@1
  int *v4; // eax@5
  int *v5; // eax@7
  void **v6; // eax@7
  _DWORD *v7; // esi@7
  void **v8; // eax@7
  void **v9; // eax@8
  _DWORD *v10; // esi@9
  _DWORD *v11; // eax@9
  _DWORD *v12; // eax@9
  _DWORD *v13; // esi@9
  int *v14; // eax@9
  void **v15; // eax@9
  void **v16; // eax@10
  void **v17; // eax@11
  _DWORD *v18; // eax@12
  void **v19; // eax@12
  _DWORD *v20; // eax@13
  void **v21; // eax@13
  int *v22; // eax@14
  void **v23; // eax@14
  _DWORD *v24; // esi@15
  int *v25; // ST04_4@15
  int *v26; // eax@15
  _DWORD *v27; // esi@16
  void **v28; // eax@16
  _DWORD *v29; // eax@17
  _DWORD *v30; // eax@18
  void **v31; // eax@18
  _DWORD *v32; // eax@19
  _DWORD *v33; // eax@19
  int *v34; // eax@20
  _DWORD *v35; // eax@20
  void **v36; // eax@21
  _DWORD *v37; // esi@23
  int v38; // esi@24
  void **v39; // eax@25
  _DWORD *v40; // esi@27
  int v41; // esi@28
  _DWORD *v42; // eax@30
  _DWORD *v43; // eax@32
  _DWORD *v44; // eax@32
  int *v45; // eax@33
  int *v46; // eax@34
  int *v47; // eax@34
  int *v48; // eax@34
  int *v49; // eax@35
  int *v50; // eax@36
  int *v51; // eax@38
  int *v52; // eax@39
  int *v53; // eax@39
  int *v54; // eax@40
  _DWORD *v55; // esi@40
  int *v56; // eax@40
  int *v57; // eax@40
  int *v58; // eax@40
  _DWORD *v59; // eax@41
  int *v60; // eax@42
  int *v61; // eax@42
  _DWORD *v62; // eax@42
  int *v63; // eax@43
  int *v64; // eax@44
  int *v65; // eax@46
  int *v66; // eax@47
  _DWORD *v67; // eax@47
  int *v68; // eax@48
  _DWORD *v69; // esi@48
  int *v70; // eax@48
  int *v71; // eax@48
  int *v72; // eax@48
  int v73; // eax@51
  Concurrency::details::_NonReentrantPPLLock *v75; // [sp+4h] [bp-2Ch]@1
  char v76; // [sp+8h] [bp-28h]@1
  int v77; // [sp+Ch] [bp-24h]@41
  int v78; // [sp+10h] [bp-20h]@33
  char v79; // [sp+14h] [bp-1Ch]@6
  void *v80; // [sp+18h] [bp-18h]@1
  void *v81; // [sp+1Ch] [bp-14h]@1
  int v82; // [sp+20h] [bp-10h]@2
  int v83; // [sp+2Ch] [bp-4h]@6

  v75 = this;
  v3 = sub_429C90(&a3, &v76, 0);
  v81 = (void *)unknown_libname_157(v3);
  v80 = v81;
  if ( *(_DWORD *)unknown_libname_155(v81) == dword_47F824 )
  {
    v82 = *(_DWORD *)sub_429340((int)v81);
  }
  else if ( *(_DWORD *)sub_429340((int)v81) == dword_47F824 )
  {
    v82 = *(_DWORD *)unknown_libname_155(v81);
  }
  else
  {
    v4 = (int *)sub_429340((int)v81);
    v81 = (void *)sub_429A90(*v4);
    v82 = *(_DWORD *)sub_429340((int)v81);
  }
  std::_Lockit::_Lockit((std::_Lockit *)&v79);
  v83 = 0;
  if ( v81 == v80 )
  {
    v27 = (_DWORD *)sub_429330((int)v81);
    *(_DWORD *)sub_429330(v82) = *v27;
    v28 = (void **)sub_429AF0((int)v75);
    if ( *v28 == v80 )
    {
      v29 = (_DWORD *)sub_429AF0((int)v75);
      *v29 = v82;
    }
    else
    {
      v30 = (_DWORD *)sub_429330((int)v80);
      v31 = (void **)unknown_libname_155(*v30);
      if ( *v31 == v80 )
      {
        v32 = (_DWORD *)sub_429330((int)v80);
        v33 = (_DWORD *)unknown_libname_155(*v32);
        *v33 = v82;
      }
      else
      {
        v34 = (int *)sub_429330((int)v80);
        v35 = (_DWORD *)sub_429340(*v34);
        *v35 = v82;
      }
    }
    v36 = (void **)sub_429900((int)v75);
    if ( *v36 == v80 )
    {
      if ( *(_DWORD *)sub_429340((int)v80) == dword_47F824 )
      {
        v37 = (_DWORD *)sub_429330((int)v80);
        *(_DWORD *)sub_429900((int)v75) = *v37;
      }
      else
      {
        v38 = sub_429A90(v82);
        *(_DWORD *)sub_429900((int)v75) = v38;
      }
    }
    v39 = (void **)sub_429AD0((int)v75);
    if ( *v39 == v80 )
    {
      if ( *(_DWORD *)unknown_libname_155(v80) == dword_47F824 )
      {
        v40 = (_DWORD *)sub_429330((int)v80);
        *(_DWORD *)sub_429AD0((int)v75) = *v40;
      }
      else
      {
        v41 = sub_429A50(v82);
        *(_DWORD *)sub_429AD0((int)v75) = v41;
      }
    }
  }
  else
  {
    v5 = (int *)unknown_libname_155(v80);
    v6 = (void **)sub_429330(*v5);
    *v6 = v81;
    v7 = (_DWORD *)unknown_libname_155(v80);
    *(_DWORD *)unknown_libname_155(v81) = *v7;
    v8 = (void **)sub_429340((int)v80);
    if ( v81 == *v8 )
    {
      v9 = (void **)sub_429330(v82);
      *v9 = v81;
    }
    else
    {
      v10 = (_DWORD *)sub_429330((int)v81);
      *(_DWORD *)sub_429330(v82) = *v10;
      v11 = (_DWORD *)sub_429330((int)v81);
      v12 = (_DWORD *)unknown_libname_155(*v11);
      *v12 = v82;
      v13 = (_DWORD *)sub_429340((int)v80);
      *(_DWORD *)sub_429340((int)v81) = *v13;
      v14 = (int *)sub_429340((int)v80);
      v15 = (void **)sub_429330(*v14);
      *v15 = v81;
    }
    v16 = (void **)sub_429AF0((int)v75);
    if ( *v16 == v80 )
    {
      v17 = (void **)sub_429AF0((int)v75);
      *v17 = v81;
    }
    else
    {
      v18 = (_DWORD *)sub_429330((int)v80);
      v19 = (void **)unknown_libname_155(*v18);
      if ( *v19 == v80 )
      {
        v20 = (_DWORD *)sub_429330((int)v80);
        v21 = (void **)unknown_libname_155(*v20);
        *v21 = v81;
      }
      else
      {
        v22 = (int *)sub_429330((int)v80);
        v23 = (void **)sub_429340(*v22);
        *v23 = v81;
      }
    }
    v24 = (_DWORD *)sub_429330((int)v80);
    *(_DWORD *)sub_429330((int)v81) = *v24;
    v25 = (int *)sub_4292F0((int)v80);
    v26 = (int *)sub_4292F0((int)v81);
    sub_42A4D0(v26, v25);
    v81 = v80;
  }
  if ( *(_DWORD *)sub_4292F0((int)v81) == 1 )
  {
    while ( 1 )
    {
      v42 = (_DWORD *)sub_429AF0((int)v75);
      if ( v82 == *v42 || *(_DWORD *)sub_4292F0(v82) != 1 )
        break;
      v43 = (_DWORD *)sub_429330(v82);
      v44 = (_DWORD *)unknown_libname_155(*v43);
      if ( v82 == *v44 )
      {
        v45 = (int *)sub_429330(v82);
        v78 = *(_DWORD *)sub_429340(*v45);
        if ( !*(_DWORD *)sub_4292F0(v78) )
        {
          *(_DWORD *)sub_4292F0(v78) = 1;
          v46 = (int *)sub_429330(v82);
          *(_DWORD *)sub_4292F0(*v46) = 0;
          v47 = (int *)sub_429330(v82);
          sub_429920((void *)v75, *v47);
          v48 = (int *)sub_429330(v82);
          v78 = *(_DWORD *)sub_429340(*v48);
        }
        v49 = (int *)unknown_libname_155(v78);
        if ( *(_DWORD *)sub_4292F0(*v49) != 1 || (v50 = (int *)sub_429340(v78), *(_DWORD *)sub_4292F0(*v50) != 1) )
        {
          v51 = (int *)sub_429340(v78);
          if ( *(_DWORD *)sub_4292F0(*v51) == 1 )
          {
            v52 = (int *)unknown_libname_155(v78);
            *(_DWORD *)sub_4292F0(*v52) = 1;
            *(_DWORD *)sub_4292F0(v78) = 0;
            sub_429B10((void *)v75, v78);
            v53 = (int *)sub_429330(v82);
            v78 = *(_DWORD *)sub_429340(*v53);
          }
          v54 = (int *)sub_429330(v82);
          v55 = (_DWORD *)sub_4292F0(*v54);
          *(_DWORD *)sub_4292F0(v78) = *v55;
          v56 = (int *)sub_429330(v82);
          *(_DWORD *)sub_4292F0(*v56) = 1;
          v57 = (int *)sub_429340(v78);
          *(_DWORD *)sub_4292F0(*v57) = 1;
          v58 = (int *)sub_429330(v82);
          sub_429920((void *)v75, *v58);
          break;
        }
        *(_DWORD *)sub_4292F0(v78) = 0;
        v82 = *(_DWORD *)sub_429330(v82);
      }
      else
      {
        v59 = (_DWORD *)sub_429330(v82);
        v77 = *(_DWORD *)unknown_libname_155(*v59);
        if ( !*(_DWORD *)sub_4292F0(v77) )
        {
          *(_DWORD *)sub_4292F0(v77) = 1;
          v60 = (int *)sub_429330(v82);
          *(_DWORD *)sub_4292F0(*v60) = 0;
          v61 = (int *)sub_429330(v82);
          sub_429B10((void *)v75, *v61);
          v62 = (_DWORD *)sub_429330(v82);
          v77 = *(_DWORD *)unknown_libname_155(*v62);
        }
        v63 = (int *)sub_429340(v77);
        if ( *(_DWORD *)sub_4292F0(*v63) != 1
          || (v64 = (int *)unknown_libname_155(v77), *(_DWORD *)sub_4292F0(*v64) != 1) )
        {
          v65 = (int *)unknown_libname_155(v77);
          if ( *(_DWORD *)sub_4292F0(*v65) == 1 )
          {
            v66 = (int *)sub_429340(v77);
            *(_DWORD *)sub_4292F0(*v66) = 1;
            *(_DWORD *)sub_4292F0(v77) = 0;
            sub_429920((void *)v75, v77);
            v67 = (_DWORD *)sub_429330(v82);
            v77 = *(_DWORD *)unknown_libname_155(*v67);
          }
          v68 = (int *)sub_429330(v82);
          v69 = (_DWORD *)sub_4292F0(*v68);
          *(_DWORD *)sub_4292F0(v77) = *v69;
          v70 = (int *)sub_429330(v82);
          *(_DWORD *)sub_4292F0(*v70) = 1;
          v71 = (int *)unknown_libname_155(v77);
          *(_DWORD *)sub_4292F0(*v71) = 1;
          v72 = (int *)sub_429330(v82);
          sub_429B10((void *)v75, *v72);
          break;
        }
        *(_DWORD *)sub_4292F0(v77) = 0;
        v82 = *(_DWORD *)sub_429330(v82);
      }
    }
    *(_DWORD *)sub_4292F0(v82) = 1;
  }
  v83 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v79);
  v73 = sub_429350((int)v81);
  sub_429C40(v73);
  Concurrency::details::_NonReentrantPPLLock::_Acquire(v75, v81);
  --*((_DWORD *)v75 + 3);
  *a2 = a3;
  return a2;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 429C60: using guessed type int __thiscall unknown_libname_157(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00428610) --------------------------------------------------------
int __thiscall sub_428610(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 112) = a2;
  return result;
}

//----- (00428630) --------------------------------------------------------
int __thiscall sub_428630(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 96) = a2;
  return result;
}

//----- (00428650) --------------------------------------------------------
_DWORD *__thiscall sub_428650(void *this, _DWORD *a2, int a3, char a4)
{
  _DWORD *v4; // eax@2
  _DWORD *v5; // eax@3
  int *v6; // eax@5
  _DWORD *result; // eax@6
  void **v8; // eax@7
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@5
  char v11; // [sp+8h] [bp-Ch]@5
  char v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@2

  v9 = (int)this;
  if ( !unknown_libname_156()
    || (v4 = (_DWORD *)sub_427BA0((void *)v9, (int)&v13), (unsigned __int8)sub_426EA0(&a3, v4))
    || (v5 = (_DWORD *)sub_427BD0(v9, (int)&v12), (unsigned __int8)sub_426EA0(&a4, v5)) )
  {
    while ( (unsigned __int8)sub_426EA0(&a3, &a4) )
    {
      v6 = sub_429C90(&a3, &v11, 0);
      sub_427DC0((Concurrency::details::_NonReentrantPPLLock *)v9, &v10, *v6);
    }
    *a2 = a3;
    result = a2;
  }
  else
  {
    v8 = (void **)sub_429AF0(v9);
    sub_4293F0((Concurrency::details::_NonReentrantPPLLock *)v9, *v8);
    *(_DWORD *)sub_429AF0(v9) = dword_47F824;
    *(_DWORD *)(v9 + 12) = 0;
    *(_DWORD *)sub_429900(v9) = *(_DWORD *)(v9 + 4);
    *(_DWORD *)sub_429AD0(v9) = *(_DWORD *)(v9 + 4);
    sub_427BA0((void *)v9, (int)a2);
    result = a2;
  }
  return result;
}
// 4293A0: using guessed type int unknown_libname_156(void);
// 47F824: using guessed type int dword_47F824;

//----- (00428750) --------------------------------------------------------
_DWORD *__thiscall sub_428750(void *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // eax@1
  int v4; // eax@2
  struct Concurrency::details::InternalContextBase *v5; // eax@2
  char *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  char *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = (int)this;
  sub_4293C0(this, (int)&v12, a3);
  v3 = (_DWORD *)sub_427BD0(v8, (int)&v10);
  if ( (unsigned __int8)sub_428840(&v12, v3)
    || (v4 = unknown_libname_157(&v12), v5 = sub_429300(v4), (unsigned __int8)sub_406220(a3, v5)) )
  {
    v7 = (char *)sub_427BD0(v8, (int)&v9);
  }
  else
  {
    v7 = &v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 429C60: using guessed type int __thiscall unknown_libname_157(_DWORD);

//----- (00428820) --------------------------------------------------------
int __thiscall sub_428820(int *this)
{
  return sub_429350(*this);
}

//----- (00428840) --------------------------------------------------------
BOOL __thiscall sub_428840(void *this, _DWORD *a2)
{
  return *(_DWORD *)this == *a2;
}

//----- (00428860) --------------------------------------------------------
int __thiscall sub_428860(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (00428890) --------------------------------------------------------
int __thiscall sub_428890(int this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(_BYTE *)(this + 4) = *a3;
  return this;
}

//----- (004288D0) --------------------------------------------------------
int __cdecl sub_4288D0(int a1)
{
  return a1 + 20;
}

//----- (004288E0) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_4288E0(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_428930(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (00428910) --------------------------------------------------------
int __cdecl sub_428910(int a1)
{
  return a1 + 4;
}

//----- (00428920) --------------------------------------------------------
int __cdecl sub_428920(int a1)
{
  return a1 + 8;
}

//----- (00428930) --------------------------------------------------------
int __cdecl sub_428930(int a1)
{
  return a1 + 12;
}

//----- (00428940) --------------------------------------------------------
int __thiscall sub_428940(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_429CE0((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (004289A0) --------------------------------------------------------
int __thiscall sub_4289A0(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_429DE0(this, a3);
  unknown_libname_152(v3);
  return a2;
}
// 429250: using guessed type _DWORD __stdcall unknown_libname_152(_DWORD);

//----- (004289D0) --------------------------------------------------------
void *__thiscall sub_4289D0(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  int v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_47F81C; a2 = i )
  {
    v3 = (void **)sub_428920((int)i);
    sub_4289D0(*v3);
    i = *(void **)unknown_libname_149(i);
    v4 = sub_428930((int)a2);
    sub_429220(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00428A50) --------------------------------------------------------
int __thiscall sub_428A50(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_429E70(a4, 0);
  *(_DWORD *)unknown_libname_149(v48) = dword_47F81C;
  *(_DWORD *)sub_428920((int)v48) = dword_47F81C;
  v5 = (void *)sub_428930((int)v48);
  sub_429EC0(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_47F81C
    || (v6 = sub_4288E0(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_406220(v7, v6)) )
  {
    v8 = (char **)unknown_libname_149(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_4290D0(v46);
      *v9 = v48;
      v10 = (char **)sub_4290B0(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_428EE0(v46) )
    {
      v11 = (char **)sub_428EE0(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_428920(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_4290B0(v46) )
    {
      v13 = (char **)sub_4290B0(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_4290D0(v46) )
  {
    v14 = (int *)sub_428910((int)v49);
    if ( *(_DWORD *)sub_4288D0(*v14) )
      break;
    v15 = (_DWORD *)sub_428910((int)v49);
    v16 = (int *)sub_428910((int)v49);
    v17 = (_DWORD *)sub_428910(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_149(*v17) )
    {
      v18 = (int *)sub_428910((int)v49);
      v19 = (int *)sub_428910(*v18);
      v20 = (int *)sub_428920(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_4288D0(*v20) )
      {
        v25 = (int *)sub_428910((int)v49);
        if ( v49 == *(char **)sub_428920(*v25) )
        {
          v49 = *(char **)sub_428910((int)v49);
          sub_428F00((void *)v46, (int)v49);
        }
        v26 = (int *)sub_428910((int)v49);
        *(_DWORD *)sub_4288D0(*v26) = 1;
        v27 = (int *)sub_428910((int)v49);
        v28 = (int *)sub_428910(*v27);
        *(_DWORD *)sub_4288D0(*v28) = 0;
        v29 = (int *)sub_428910((int)v49);
        v30 = (int *)sub_428910(*v29);
        sub_4290F0((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_428910((int)v49);
        *(_DWORD *)sub_4288D0(*v21) = 1;
        *(_DWORD *)sub_4288D0(v50) = 1;
        v22 = (int *)sub_428910((int)v49);
        v23 = (int *)sub_428910(*v22);
        *(_DWORD *)sub_4288D0(*v23) = 0;
        v24 = (int *)sub_428910((int)v49);
        v49 = *(char **)sub_428910(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_428910((int)v49);
      v32 = (_DWORD *)sub_428910(*v31);
      v33 = (int *)unknown_libname_149(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_4288D0(*v33) )
      {
        v38 = (_DWORD *)sub_428910((int)v49);
        if ( v49 == *(char **)unknown_libname_149(*v38) )
        {
          v49 = *(char **)sub_428910((int)v49);
          sub_4290F0((void *)v46, (int)v49);
        }
        v39 = (int *)sub_428910((int)v49);
        *(_DWORD *)sub_4288D0(*v39) = 1;
        v40 = (int *)sub_428910((int)v49);
        v41 = (int *)sub_428910(*v40);
        *(_DWORD *)sub_4288D0(*v41) = 0;
        v42 = (int *)sub_428910((int)v49);
        v43 = (int *)sub_428910(*v42);
        sub_428F00((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_428910((int)v49);
        *(_DWORD *)sub_4288D0(*v34) = 1;
        *(_DWORD *)sub_4288D0(v51) = 1;
        v35 = (int *)sub_428910((int)v49);
        v36 = (int *)sub_428910(*v35);
        *(_DWORD *)sub_4288D0(*v36) = 0;
        v37 = (int *)sub_428910((int)v49);
        v49 = *(char **)sub_428910(*v37);
      }
    }
  }
  v44 = (int *)sub_4290D0(v46);
  *(_DWORD *)sub_4288D0(*v44) = 1;
  unknown_libname_152(v48);
  return a2;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 429250: using guessed type _DWORD __stdcall unknown_libname_152(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00428EE0) --------------------------------------------------------
int __thiscall sub_428EE0(int this)
{
  return unknown_libname_149(*(_DWORD *)(this + 4));
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);

//----- (00428F00) --------------------------------------------------------
int *__thiscall sub_428F00(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_428920(a2);
  v2 = (_DWORD *)unknown_libname_149(v10);
  *(_DWORD *)sub_428920(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_149(v10) != dword_47F81C )
  {
    v3 = (int *)unknown_libname_149(v10);
    *(_DWORD *)sub_428910(*v3) = a2;
  }
  v4 = (_DWORD *)sub_428910(a2);
  *(_DWORD *)sub_428910(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_4290D0(v9) )
  {
    *(_DWORD *)sub_4290D0(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_428910(a2);
    if ( a2 == *(_DWORD *)unknown_libname_149(*v5) )
    {
      v6 = (_DWORD *)sub_428910(a2);
      *(_DWORD *)unknown_libname_149(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_428910(a2);
      *(_DWORD *)sub_428920(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_149(v10) = a2;
  result = (int *)sub_428910(a2);
  *result = v10;
  return result;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00429030) --------------------------------------------------------
int __cdecl sub_429030(int a1)
{
  while ( *(_DWORD *)sub_428920(a1) != dword_47F81C )
    a1 = *(_DWORD *)sub_428920(a1);
  return a1;
}
// 47F81C: using guessed type int dword_47F81C;

//----- (00429070) --------------------------------------------------------
int __cdecl sub_429070(int a1)
{
  while ( *(_DWORD *)unknown_libname_149(a1) != dword_47F81C )
    a1 = *(_DWORD *)unknown_libname_149(a1);
  return a1;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (004290B0) --------------------------------------------------------
int __thiscall sub_4290B0(int this)
{
  return sub_428920(*(_DWORD *)(this + 4));
}

//----- (004290D0) --------------------------------------------------------
int __thiscall sub_4290D0(int this)
{
  return sub_428910(*(_DWORD *)(this + 4));
}

//----- (004290F0) --------------------------------------------------------
int *__thiscall sub_4290F0(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_149(a2);
  v2 = (_DWORD *)sub_428920(v10);
  *(_DWORD *)unknown_libname_149(a2) = *v2;
  if ( *(_DWORD *)sub_428920(v10) != dword_47F81C )
  {
    v3 = (int *)sub_428920(v10);
    *(_DWORD *)sub_428910(*v3) = a2;
  }
  v4 = (_DWORD *)sub_428910(a2);
  *(_DWORD *)sub_428910(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_4290D0(v9) )
  {
    *(_DWORD *)sub_4290D0(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_428910(a2);
    if ( a2 == *(_DWORD *)sub_428920(*v5) )
    {
      v6 = (int *)sub_428910(a2);
      *(_DWORD *)sub_428920(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_428910(a2);
      *(_DWORD *)unknown_libname_149(*v7) = v10;
    }
  }
  *(_DWORD *)sub_428920(v10) = a2;
  result = (int *)sub_428910(a2);
  *result = v10;
  return result;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00429220) --------------------------------------------------------
void __stdcall sub_429220(int a1)
{
  sub_42A500();
}

//----- (00429270) --------------------------------------------------------
_DWORD *__thiscall sub_429270(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_161(this);
  *a2 = v3;
  return a2;
}
// 429FD0: using guessed type int __cdecl unknown_libname_161(_DWORD);

//----- (004292F0) --------------------------------------------------------
int __cdecl sub_4292F0(int a1)
{
  return a1 + 20;
}

//----- (00429300) --------------------------------------------------------
struct Concurrency::details::InternalContextBase *__cdecl sub_429300(int a1)
{
  int v1; // ecx@0
  struct Concurrency::IExecutionContext *v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = (struct Concurrency::IExecutionContext *)sub_429350(a1);
  return Concurrency::details::VirtualProcessor::ToInternalContext((Concurrency::details::VirtualProcessor *)&v4, v2);
}

//----- (00429330) --------------------------------------------------------
int __cdecl sub_429330(int a1)
{
  return a1 + 4;
}

//----- (00429340) --------------------------------------------------------
int __cdecl sub_429340(int a1)
{
  return a1 + 8;
}

//----- (00429350) --------------------------------------------------------
int __cdecl sub_429350(int a1)
{
  return a1 + 12;
}

//----- (00429360) --------------------------------------------------------
int __thiscall sub_429360(int this, _BYTE *a2, char a3, _BYTE *a4)
{
  int v4; // ST00_4@1

  v4 = this;
  *(_BYTE *)this = *a4;
  *(_BYTE *)(this + 1) = *a2;
  *(_BYTE *)(this + 8) = a3;
  sub_429FF0((Concurrency::details::_NonReentrantPPLLock *)this);
  return v4;
}

//----- (004293C0) --------------------------------------------------------
int __thiscall sub_4293C0(void *this, int a2, _DWORD *a3)
{
  int v3; // eax@1

  v3 = sub_42A0F0(this, a3);
  unknown_libname_158(v3);
  return a2;
}
// 429C70: using guessed type _DWORD __stdcall unknown_libname_158(_DWORD);

//----- (004293F0) --------------------------------------------------------
void *__thiscall sub_4293F0(Concurrency::details::_NonReentrantPPLLock *this, void *a2)
{
  void *result; // eax@1
  void **v3; // eax@3
  int v4; // eax@3
  Concurrency::details::_NonReentrantPPLLock *v5; // [sp+0h] [bp-8h]@1
  void *i; // [sp+4h] [bp-4h]@1

  v5 = this;
  result = a2;
  for ( i = a2; i != (void *)dword_47F824; a2 = i )
  {
    v3 = (void **)sub_429340((int)i);
    sub_4293F0(*v3);
    i = *(void **)unknown_libname_155(i);
    v4 = sub_429350((int)a2);
    sub_429C40(v4);
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v5, a2);
  }
  return result;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00429470) --------------------------------------------------------
int __thiscall sub_429470(void *this, int a2, int a3, int a4, struct Concurrency::IExecutionContext *a5)
{
  void *v5; // eax@1
  struct Concurrency::details::InternalContextBase *v6; // ST04_4@3
  struct Concurrency::details::InternalContextBase *v7; // eax@3
  char **v8; // eax@4
  char **v9; // eax@5
  char **v10; // eax@5
  char **v11; // eax@7
  char **v12; // eax@9
  char **v13; // eax@10
  int *v14; // eax@13
  _DWORD *v15; // esi@14
  int *v16; // eax@14
  _DWORD *v17; // eax@14
  int *v18; // eax@15
  int *v19; // eax@15
  int *v20; // eax@15
  int *v21; // eax@16
  int *v22; // eax@16
  int *v23; // eax@16
  int *v24; // eax@16
  int *v25; // eax@17
  int *v26; // eax@19
  int *v27; // eax@19
  int *v28; // eax@19
  int *v29; // eax@19
  int *v30; // eax@19
  int *v31; // eax@21
  _DWORD *v32; // eax@21
  int *v33; // eax@21
  int *v34; // eax@22
  int *v35; // eax@22
  int *v36; // eax@22
  int *v37; // eax@22
  _DWORD *v38; // eax@23
  int *v39; // eax@25
  int *v40; // eax@25
  int *v41; // eax@25
  int *v42; // eax@25
  int *v43; // eax@25
  int *v44; // eax@27
  int v46; // [sp+4h] [bp-Ch]@1
  char v47; // [sp+8h] [bp-8h]@3
  char *v48; // [sp+Ch] [bp-4h]@1
  char *v49; // [sp+1Ch] [bp+Ch]@11
  int v50; // [sp+20h] [bp+10h]@15
  int v51; // [sp+20h] [bp+10h]@21

  v46 = (int)this;
  v48 = sub_42A180(a4, 0);
  *(_DWORD *)unknown_libname_155(v48) = dword_47F824;
  *(_DWORD *)sub_429340((int)v48) = dword_47F824;
  v5 = (void *)sub_429350((int)v48);
  sub_42A1D0(v5, (int)a5);
  ++*(_DWORD *)(v46 + 12);
  if ( a4 == *(_DWORD *)(v46 + 4)
    || a3 != dword_47F824
    || (v6 = sub_429300(a4),
        v7 = Concurrency::details::VirtualProcessor::ToInternalContext(
               (Concurrency::details::VirtualProcessor *)&v47,
               a5),
        (unsigned __int8)sub_406220(v7, v6)) )
  {
    v8 = (char **)unknown_libname_155(a4);
    *v8 = v48;
    if ( a4 == *(_DWORD *)(v46 + 4) )
    {
      v9 = (char **)sub_429AF0(v46);
      *v9 = v48;
      v10 = (char **)sub_429AD0(v46);
      *v10 = v48;
    }
    else if ( a4 == *(_DWORD *)sub_429900(v46) )
    {
      v11 = (char **)sub_429900(v46);
      *v11 = v48;
    }
  }
  else
  {
    v12 = (char **)sub_429340(a4);
    *v12 = v48;
    if ( a4 == *(_DWORD *)sub_429AD0(v46) )
    {
      v13 = (char **)sub_429AD0(v46);
      *v13 = v48;
    }
  }
  v49 = v48;
  while ( v49 != *(char **)sub_429AF0(v46) )
  {
    v14 = (int *)sub_429330((int)v49);
    if ( *(_DWORD *)sub_4292F0(*v14) )
      break;
    v15 = (_DWORD *)sub_429330((int)v49);
    v16 = (int *)sub_429330((int)v49);
    v17 = (_DWORD *)sub_429330(*v16);
    if ( *v15 == *(_DWORD *)unknown_libname_155(*v17) )
    {
      v18 = (int *)sub_429330((int)v49);
      v19 = (int *)sub_429330(*v18);
      v20 = (int *)sub_429340(*v19);
      v50 = *v20;
      if ( *(_DWORD *)sub_4292F0(*v20) )
      {
        v25 = (int *)sub_429330((int)v49);
        if ( v49 == *(char **)sub_429340(*v25) )
        {
          v49 = *(char **)sub_429330((int)v49);
          sub_429920((void *)v46, (int)v49);
        }
        v26 = (int *)sub_429330((int)v49);
        *(_DWORD *)sub_4292F0(*v26) = 1;
        v27 = (int *)sub_429330((int)v49);
        v28 = (int *)sub_429330(*v27);
        *(_DWORD *)sub_4292F0(*v28) = 0;
        v29 = (int *)sub_429330((int)v49);
        v30 = (int *)sub_429330(*v29);
        sub_429B10((void *)v46, *v30);
      }
      else
      {
        v21 = (int *)sub_429330((int)v49);
        *(_DWORD *)sub_4292F0(*v21) = 1;
        *(_DWORD *)sub_4292F0(v50) = 1;
        v22 = (int *)sub_429330((int)v49);
        v23 = (int *)sub_429330(*v22);
        *(_DWORD *)sub_4292F0(*v23) = 0;
        v24 = (int *)sub_429330((int)v49);
        v49 = *(char **)sub_429330(*v24);
      }
    }
    else
    {
      v31 = (int *)sub_429330((int)v49);
      v32 = (_DWORD *)sub_429330(*v31);
      v33 = (int *)unknown_libname_155(*v32);
      v51 = *v33;
      if ( *(_DWORD *)sub_4292F0(*v33) )
      {
        v38 = (_DWORD *)sub_429330((int)v49);
        if ( v49 == *(char **)unknown_libname_155(*v38) )
        {
          v49 = *(char **)sub_429330((int)v49);
          sub_429B10((void *)v46, (int)v49);
        }
        v39 = (int *)sub_429330((int)v49);
        *(_DWORD *)sub_4292F0(*v39) = 1;
        v40 = (int *)sub_429330((int)v49);
        v41 = (int *)sub_429330(*v40);
        *(_DWORD *)sub_4292F0(*v41) = 0;
        v42 = (int *)sub_429330((int)v49);
        v43 = (int *)sub_429330(*v42);
        sub_429920((void *)v46, *v43);
      }
      else
      {
        v34 = (int *)sub_429330((int)v49);
        *(_DWORD *)sub_4292F0(*v34) = 1;
        *(_DWORD *)sub_4292F0(v51) = 1;
        v35 = (int *)sub_429330((int)v49);
        v36 = (int *)sub_429330(*v35);
        *(_DWORD *)sub_4292F0(*v36) = 0;
        v37 = (int *)sub_429330((int)v49);
        v49 = *(char **)sub_429330(*v37);
      }
    }
  }
  v44 = (int *)sub_429AF0(v46);
  *(_DWORD *)sub_4292F0(*v44) = 1;
  unknown_libname_158(v48);
  return a2;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 429C70: using guessed type _DWORD __stdcall unknown_libname_158(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00429900) --------------------------------------------------------
int __thiscall sub_429900(int this)
{
  return unknown_libname_155(*(_DWORD *)(this + 4));
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);

//----- (00429920) --------------------------------------------------------
int *__thiscall sub_429920(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  _DWORD *v5; // eax@5
  _DWORD *v6; // eax@6
  int *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)sub_429340(a2);
  v2 = (_DWORD *)unknown_libname_155(v10);
  *(_DWORD *)sub_429340(a2) = *v2;
  if ( *(_DWORD *)unknown_libname_155(v10) != dword_47F824 )
  {
    v3 = (int *)unknown_libname_155(v10);
    *(_DWORD *)sub_429330(*v3) = a2;
  }
  v4 = (_DWORD *)sub_429330(a2);
  *(_DWORD *)sub_429330(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_429AF0(v9) )
  {
    *(_DWORD *)sub_429AF0(v9) = v10;
  }
  else
  {
    v5 = (_DWORD *)sub_429330(a2);
    if ( a2 == *(_DWORD *)unknown_libname_155(*v5) )
    {
      v6 = (_DWORD *)sub_429330(a2);
      *(_DWORD *)unknown_libname_155(*v6) = v10;
    }
    else
    {
      v7 = (int *)sub_429330(a2);
      *(_DWORD *)sub_429340(*v7) = v10;
    }
  }
  *(_DWORD *)unknown_libname_155(v10) = a2;
  result = (int *)sub_429330(a2);
  *result = v10;
  return result;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00429A50) --------------------------------------------------------
int __cdecl sub_429A50(int a1)
{
  while ( *(_DWORD *)sub_429340(a1) != dword_47F824 )
    a1 = *(_DWORD *)sub_429340(a1);
  return a1;
}
// 47F824: using guessed type int dword_47F824;

//----- (00429A90) --------------------------------------------------------
int __cdecl sub_429A90(int a1)
{
  while ( *(_DWORD *)unknown_libname_155(a1) != dword_47F824 )
    a1 = *(_DWORD *)unknown_libname_155(a1);
  return a1;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00429AD0) --------------------------------------------------------
int __thiscall sub_429AD0(int this)
{
  return sub_429340(*(_DWORD *)(this + 4));
}

//----- (00429AF0) --------------------------------------------------------
int __thiscall sub_429AF0(int this)
{
  return sub_429330(*(_DWORD *)(this + 4));
}

//----- (00429B10) --------------------------------------------------------
int *__thiscall sub_429B10(void *this, int a2)
{
  _DWORD *v2; // esi@1
  int *v3; // eax@2
  _DWORD *v4; // esi@3
  int *v5; // eax@5
  int *v6; // eax@6
  _DWORD *v7; // eax@7
  int *result; // eax@8
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = (int)this;
  v10 = *(_DWORD *)unknown_libname_155(a2);
  v2 = (_DWORD *)sub_429340(v10);
  *(_DWORD *)unknown_libname_155(a2) = *v2;
  if ( *(_DWORD *)sub_429340(v10) != dword_47F824 )
  {
    v3 = (int *)sub_429340(v10);
    *(_DWORD *)sub_429330(*v3) = a2;
  }
  v4 = (_DWORD *)sub_429330(a2);
  *(_DWORD *)sub_429330(v10) = *v4;
  if ( a2 == *(_DWORD *)sub_429AF0(v9) )
  {
    *(_DWORD *)sub_429AF0(v9) = v10;
  }
  else
  {
    v5 = (int *)sub_429330(a2);
    if ( a2 == *(_DWORD *)sub_429340(*v5) )
    {
      v6 = (int *)sub_429330(a2);
      *(_DWORD *)sub_429340(*v6) = v10;
    }
    else
    {
      v7 = (_DWORD *)sub_429330(a2);
      *(_DWORD *)unknown_libname_155(*v7) = v10;
    }
  }
  *(_DWORD *)sub_429340(v10) = a2;
  result = (int *)sub_429330(a2);
  *result = v10;
  return result;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (00429C40) --------------------------------------------------------
void __stdcall sub_429C40(int a1)
{
  sub_42A510();
}

//----- (00429C90) --------------------------------------------------------
_DWORD *__thiscall sub_429C90(void *this, _DWORD *a2, int a3)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)this;
  unknown_libname_163(this);
  *a2 = v3;
  return a2;
}
// 42A2E0: using guessed type int __cdecl unknown_libname_163(_DWORD);

//----- (00429CE0) --------------------------------------------------------
_DWORD *__thiscall sub_429CE0(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_429E70(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_47F81C )
  {
    dword_47F81C = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_149(dword_47F81C) = 0;
    *(_DWORD *)sub_428920(dword_47F81C) = 0;
  }
  ++dword_47F820;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_429E70(dword_47F81C, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_428EE0((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_4290B0((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;
// 47F820: using guessed type int dword_47F820;

//----- (00429DE0) --------------------------------------------------------
int __thiscall sub_429DE0(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_42A300((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_47F81C )
  {
    v3 = sub_4288E0(v6);
    if ( (unsigned __int8)sub_406220(v3, a2) )
    {
      v6 = *(_DWORD *)sub_428920(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_149(v6);
    }
  }
  return v5;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00429E70) --------------------------------------------------------
char *__stdcall sub_429E70(int a1, int a2)
{
  char *result; // eax@1

  result = sub_423180(0x18u);
  *(_DWORD *)sub_428910((int)result) = a1;
  *(_DWORD *)sub_4288D0((int)result) = a2;
  return result;
}

//----- (00429EC0) --------------------------------------------------------
void *__stdcall sub_429EC0(void *a1, int a2)
{
  return sub_42A520(a1, a2);
}

//----- (00429F00) --------------------------------------------------------
int *__thiscall sub_429F00(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_4288D0(*this) || (v1 = (int *)sub_428910(*v5), *(_DWORD *)sub_428910(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_149(*v5) == dword_47F81C )
    {
      while ( 1 )
      {
        v4 = (int **)sub_428910(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_149(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_149(*v5);
      result = (int *)sub_429030(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_428920(*v5);
    *v5 = *result;
  }
  return result;
}
// 428900: using guessed type _DWORD __cdecl unknown_libname_149(_DWORD);
// 47F81C: using guessed type int dword_47F81C;

//----- (00429FF0) --------------------------------------------------------
_DWORD *__thiscall sub_429FF0(Concurrency::details::_NonReentrantPPLLock *this)
{
  _DWORD *result; // eax@5
  Concurrency::details::_NonReentrantPPLLock *v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  void *v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  v4 = sub_42A180(0, 1);
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  v5 = 0;
  if ( !dword_47F824 )
  {
    dword_47F824 = (int)v4;
    v4 = 0;
    *(_DWORD *)unknown_libname_155(dword_47F824) = 0;
    *(_DWORD *)sub_429340(dword_47F824) = 0;
  }
  ++dword_47F828;
  v5 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v4 )
    Concurrency::details::_NonReentrantPPLLock::_Acquire(v2, v4);
  *((_DWORD *)v2 + 1) = sub_42A180(dword_47F824, 0);
  *((_DWORD *)v2 + 3) = 0;
  *(_DWORD *)sub_429900((int)v2) = *((_DWORD *)v2 + 1);
  result = (_DWORD *)sub_429AD0((int)v2);
  *result = *((_DWORD *)v2 + 1);
  return result;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;
// 47F828: using guessed type int dword_47F828;

//----- (0042A0F0) --------------------------------------------------------
int __thiscall sub_42A0F0(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  struct Concurrency::details::InternalContextBase *v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_42A3E0((int)this);
  v5 = *((_DWORD *)v2 + 1);
  while ( v6 != dword_47F824 )
  {
    v3 = sub_429300(v6);
    if ( (unsigned __int8)sub_406220(v3, a2) )
    {
      v6 = *(_DWORD *)sub_429340(v6);
    }
    else
    {
      v5 = v6;
      v6 = *(_DWORD *)unknown_libname_155(v6);
    }
  }
  return v5;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (0042A180) --------------------------------------------------------
char *__stdcall sub_42A180(int a1, int a2)
{
  char *result; // eax@1

  result = sub_42A3C0(0x18u);
  *(_DWORD *)sub_429330((int)result) = a1;
  *(_DWORD *)sub_4292F0((int)result) = a2;
  return result;
}

//----- (0042A1D0) --------------------------------------------------------
void *__stdcall sub_42A1D0(void *a1, int a2)
{
  return sub_42A560(a1, a2);
}

//----- (0042A210) --------------------------------------------------------
int *__thiscall sub_42A210(int *this)
{
  int *v1; // eax@2
  int *result; // eax@3
  int *v3; // eax@5
  int **v4; // eax@6
  int *v5; // [sp+0h] [bp-8h]@1
  int *v6; // [sp+4h] [bp-4h]@6

  v5 = this;
  if ( *(_DWORD *)sub_4292F0(*this) || (v1 = (int *)sub_429330(*v5), *(_DWORD *)sub_429330(*v1) != *v5) )
  {
    if ( *(_DWORD *)unknown_libname_155(*v5) == dword_47F824 )
    {
      while ( 1 )
      {
        v4 = (int **)sub_429330(*v5);
        v6 = *v4;
        if ( *v5 != *(_DWORD *)unknown_libname_155(*v4) )
          break;
        *v5 = (int)v6;
      }
      result = v6;
      *v5 = (int)v6;
    }
    else
    {
      v3 = (int *)unknown_libname_155(*v5);
      result = (int *)sub_429A50(*v3);
      *v5 = (int)result;
    }
  }
  else
  {
    result = (int *)sub_429340(*v5);
    *v5 = *result;
  }
  return result;
}
// 429320: using guessed type _DWORD __cdecl unknown_libname_155(_DWORD);
// 47F824: using guessed type int dword_47F824;

//----- (0042A300) --------------------------------------------------------
int __thiscall sub_42A300(int this)
{
  return sub_428910(*(_DWORD *)(this + 4));
}

//----- (0042A320) --------------------------------------------------------
_DWORD *__thiscall sub_42A320(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_428920(*this) == dword_47F81C )
  {
    while ( 1 )
    {
      v3 = (int *)sub_428910(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_428920(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_428920(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_428920(*v4);
    result = (_DWORD *)sub_429070(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 47F81C: using guessed type int dword_47F81C;

//----- (0042A3C0) --------------------------------------------------------
char *__stdcall sub_42A3C0(size_t a1)
{
  return std::_Allocate(a1, 0);
}

//----- (0042A3E0) --------------------------------------------------------
int __thiscall sub_42A3E0(int this)
{
  return sub_429330(*(_DWORD *)(this + 4));
}

//----- (0042A400) --------------------------------------------------------
_DWORD *__thiscall sub_42A400(int *this)
{
  int *v1; // eax@2
  _DWORD *result; // eax@2
  int *v3; // eax@3
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)sub_429340(*this) == dword_47F824 )
  {
    while ( 1 )
    {
      v3 = (int *)sub_429330(*v4);
      v5 = *v3;
      if ( *v4 != *(_DWORD *)sub_429340(*v3) )
        break;
      *v4 = v5;
    }
    result = (_DWORD *)sub_429340(*v4);
    if ( *result != v5 )
    {
      result = (_DWORD *)v5;
      *v4 = v5;
    }
  }
  else
  {
    v1 = (int *)sub_429340(*v4);
    result = (_DWORD *)sub_429A90(*v1);
    *v4 = (int)result;
  }
  return result;
}
// 47F824: using guessed type int dword_47F824;

//----- (0042A4A0) --------------------------------------------------------
int __cdecl sub_42A4A0(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (0042A4D0) --------------------------------------------------------
int __cdecl sub_42A4D0(int *a1, int *a2)
{
  int v2; // ST00_4@1
  int result; // eax@1

  v2 = *a1;
  *a1 = *a2;
  result = v2;
  *a2 = v2;
  return result;
}

//----- (0042A500) --------------------------------------------------------
void sub_42A500()
{
  ;
}

//----- (0042A510) --------------------------------------------------------
void sub_42A510()
{
  ;
}

//----- (0042A520) --------------------------------------------------------
void *__cdecl sub_42A520(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (0042A560) --------------------------------------------------------
void *__cdecl sub_42A560(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (0042A5AF) --------------------------------------------------------
int sub_42A5AF()
{
  return sub_42A9F7((int)&unk_47F830);
}

//----- (0042A5BE) --------------------------------------------------------
int sub_42A5BE()
{
  return atexit(sub_42A5D0);
}

//----- (0042A5D0) --------------------------------------------------------
void __cdecl sub_42A5D0()
{
  sub_42AB4A((int)&unk_47F830);
}

//----- (0042A5FC) --------------------------------------------------------
void __thiscall sub_42A5FC(int this)
{
  int v1; // eax@4
  int v2; // edx@4
  int v3; // eax@10
  int v4; // [sp+Ch] [bp-38h]@1
  int i; // [sp+10h] [bp-34h]@3
  int v6; // [sp+14h] [bp-30h]@3
  DWORD v7; // [sp+18h] [bp-2Ch]@2
  int dwMilliseconds; // [sp+1Ch] [bp-28h]@2
  HANDLE Handles; // [sp+24h] [bp-20h]@1
  int v10; // [sp+28h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+2Ch] [bp-18h]@1

  v4 = this;
  ms_exc.registration.TryLevel = 0;
  Handles = *(HANDLE *)(this + 44);
  v10 = *(_DWORD *)(this + 40);
  do
  {
    v7 = GetTickCount();
    dwMilliseconds = *(_DWORD *)(v4 + 36) - v7;
    if ( dwMilliseconds <= 0 )
    {
      sub_42D4B5(v4 + 4);
      v6 = unknown_libname_175(v4 + 80);
      for ( i = *(_DWORD *)(v6 + 4); ; i = *(_DWORD *)(v6 + 4) )
      {
        sub_42B0B0(v4 + 80);
        (*(void (__thiscall **)(int))(*(_DWORD *)i + 8))(i);
        v1 = unknown_libname_175(v4 + 80);
        v2 = *(_DWORD *)(v1 + 4);
        *(_DWORD *)v6 = *(_DWORD *)v1;
        *(_DWORD *)(v6 + 4) = v2;
        dwMilliseconds = *(_DWORD *)v6 - v7;
        if ( dwMilliseconds > 0 )
          break;
      }
      *(_DWORD *)(v4 + 36) = *(_DWORD *)v6;
      sub_42D4F0(v4 + 4);
    }
    WaitForMultipleObjects(2u, &Handles, 0, dwMilliseconds);
  }
  while ( !*(_DWORD *)(v4 + 100) );
  sub_42D4B5(v4 + 4);
  while ( !(unknown_libname_174(v4 + 80) & 0xFF) )
  {
    v3 = unknown_libname_175(v4 + 80);
    sub_4180B3(*(_DWORD *)(v3 + 4));
    sub_42B0B0(v4 + 80);
  }
  sub_42D4F0(v4 + 4);
  ms_exc.registration.TryLevel = -1;
}
// 42B030: using guessed type int __thiscall unknown_libname_174(_DWORD);
// 42B050: using guessed type int __thiscall unknown_libname_175(_DWORD);

//----- (0042A7A4) --------------------------------------------------------
int __thiscall sub_42A7A4(void *this)
{
  const HANDLE *v1; // ST04_4@2
  int v2; // eax@2
  int result; // eax@4
  _DWORD *v4; // eax@8
  void *v5; // [sp+10h] [bp-24h]@1
  int i; // [sp+14h] [bp-20h]@3
  unsigned int v7; // [sp+18h] [bp-1Ch]@2

  v5 = this;
  while ( 1 )
  {
    v1 = (const HANDLE *)unknown_libname_170((char *)v5 + 48);
    v2 = sub_42ADF0((int)v5 + 48);
    v7 = WaitForMultipleObjects(v2, v1, 0, 0xFFFFFFFF);
    if ( *((_DWORD *)v5 + 25) )
      break;
    if ( v7 < sub_42ADF0((int)v5 + 48) )
    {
      v4 = (_DWORD *)sub_42AF60(v7);
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*v4 + 16))(*v4);
    }
  }
  for ( i = unknown_libname_172(); ; i = sub_42AFB0((char *)v5 + 64, i) )
  {
    result = unknown_libname_173((char *)v5 + 64);
    if ( i == result )
      break;
  }
  return result;
}
// 42ADD0: using guessed type int __thiscall unknown_libname_170(_DWORD);
// 42AF00: using guessed type int __thiscall unknown_libname_173(_DWORD);

//----- (0042A8C8) --------------------------------------------------------
int __thiscall sub_42A8C8(void *this, struct Concurrency::details::_Micro_queue *a2, unsigned int a3, int a4)
{
  int result; // eax@2
  int v5; // eax@3
  int v6; // [sp+0h] [bp-Ch]@1
  char v7; // [sp+4h] [bp-8h]@3
  DWORD v8; // [sp+18h] [bp+Ch]@1

  v6 = (int)this;
  v8 = GetTickCount() + a3;
  sub_42D4B5(v6 + 4);
  if ( *(_DWORD *)(v6 + 100) )
  {
    sub_42D4F0(v6 + 4);
    result = 0;
  }
  else
  {
    v5 = Concurrency::details::_Micro_queue::_Push_finalizer::_Push_finalizer(
           (Concurrency::details::_Micro_queue::_Push_finalizer *)&v7,
           a2,
           v8);
    sub_42B070((_BYTE *)(v6 + 80), v5);
    if ( (signed int)(*(_DWORD *)(v6 + 36) - v8) <= 0 )
    {
      sub_42D4F0(v6 + 4);
    }
    else
    {
      *(_DWORD *)(v6 + 36) = v8;
      sub_42D4F0(v6 + 4);
      if ( a4 )
        SetEvent(*(HANDLE *)(v6 + 40));
    }
    result = 1;
  }
  return result;
}

//----- (0042A96A) --------------------------------------------------------
signed int __thiscall sub_42A96A(void *this, char a2, char a3)
{
  signed int result; // eax@2
  int v4; // [sp+0h] [bp-8h]@1

  v4 = (int)this;
  sub_42D4B5((int)this + 4);
  if ( *(_DWORD *)(v4 + 100) )
  {
    sub_42D4F0(v4 + 4);
    result = 0;
  }
  else if ( (unsigned int)sub_42ADF0(v4 + 48) < 0x40 )
  {
    sub_42AE30((void *)(v4 + 48), &a2);
    sub_42AF80((void *)(v4 + 64), &a3);
    sub_42D4F0(v4 + 4);
    sub_42AF20(v4 + 64);
    result = 1;
  }
  else
  {
    sub_42D4F0(v4 + 4);
    result = 0;
  }
  return result;
}

//----- (0042A9F7) --------------------------------------------------------
int __thiscall sub_42A9F7(int this)
{
  int v1; // eax@4
  DNameNode *v3; // [sp+0h] [bp-38h]@2
  int v4; // [sp+4h] [bp-34h]@1
  struct Concurrency::details::_Micro_queue *v5; // [sp+8h] [bp-30h]@4
  char v6; // [sp+Ch] [bp-2Ch]@4
  DNameNode *v7; // [sp+14h] [bp-24h]@1
  DNameNode *v8; // [sp+18h] [bp-20h]@4
  char v9; // [sp+1Ch] [bp-1Ch]@1
  char v10; // [sp+20h] [bp-18h]@1
  char v11; // [sp+24h] [bp-14h]@1
  char v12; // [sp+28h] [bp-10h]@1
  int v13; // [sp+34h] [bp-4h]@1

  v4 = this;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 0, 0);
  v13 = 0;
  unknown_libname_169(&v12);
  LOBYTE(v13) = 1;
  unknown_libname_171(&v11);
  LOBYTE(v13) = 2;
  sub_42B010((_BYTE *)(v4 + 80), &v9, (int)&v10);
  LOBYTE(v13) = 3;
  *(_DWORD *)(v4 + 100) = 0;
  *(_DWORD *)(v4 + 40) = CreateEventA(0, 0, 0, 0);
  *(_DWORD *)(v4 + 44) = CreateEventA(0, 1, 0, 0);
  v7 = (DNameNode *)unknown_libname_49(8u);
  LOBYTE(v13) = 4;
  if ( v7 )
    v3 = sub_42C4D0(v7);
  else
    v3 = 0;
  v8 = v3;
  LOBYTE(v13) = 3;
  *(_DWORD *)v4 = v3;
  *(_DWORD *)(v4 + 36) = GetTickCount() + 86400000;
  v1 = Concurrency::details::_Micro_queue::_Push_finalizer::_Push_finalizer(
         (Concurrency::details::_Micro_queue::_Push_finalizer *)&v6,
         *(struct Concurrency::details::_Micro_queue **)v4,
         *(_DWORD *)(v4 + 36));
  sub_42B070((_BYTE *)(v4 + 80), v1);
  sub_42AE30((void *)(v4 + 48), (_DWORD *)(v4 + 44));
  v5 = *(struct Concurrency::details::_Micro_queue **)v4;
  sub_42AF80((void *)(v4 + 64), &v5);
  return v4;
}
// 42AD50: using guessed type _DWORD __stdcall unknown_libname_169(_DWORD);
// 42AE60: using guessed type _DWORD __stdcall unknown_libname_171(_DWORD);

//----- (0042AB4A) --------------------------------------------------------
void __thiscall sub_42AB4A(int this)
{
  int v1; // ST04_4@1

  v1 = this;
  CloseHandle(*(HANDLE *)(this + 40));
  CloseHandle(*(HANDLE *)(v1 + 44));
  unknown_libname_166(v1 + 80);
  unknown_libname_165(v1 + 64);
  unknown_libname_164(v1 + 48);
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(v1 + 4));
}
// 42AC50: using guessed type int __thiscall unknown_libname_164(_DWORD);
// 42AC70: using guessed type int __thiscall unknown_libname_165(_DWORD);
// 42AC90: using guessed type int __thiscall unknown_libname_166(_DWORD);

//----- (0042ABD0) --------------------------------------------------------
BOOL __thiscall sub_42ABD0(int this)
{
  int v1; // ST04_4@1

  v1 = this;
  *(_DWORD *)(this + 100) = 1;
  SetEvent(*(HANDLE *)(this + 44));
  return SetEvent(*(HANDLE *)(v1 + 40));
}

//----- (0042ABFF) --------------------------------------------------------
LONG __thiscall sub_42ABFF(void *this)
{
  LONG result; // eax@1
  int v2; // [sp+0h] [bp-4h]@1

  v2 = (int)this;
  result = (*(int (__stdcall **)(signed int, signed int))(*(_DWORD *)this + 12))(86400000, 1);
  if ( result )
    result = sub_4180B3(v2);
  return result;
}

//----- (0042AC37) --------------------------------------------------------
int sub_42AC37()
{
  return atexit(sub_402150);
}

//----- (0042ACF0) --------------------------------------------------------
int __thiscall sub_42ACF0(int this)
{
  int v1; // ST08_4@1
  int result; // eax@1

  v1 = this;
  sub_42B1C0(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
  unknown_libname_179(*(LPVOID *)(v1 + 4), (*(_DWORD *)(v1 + 12) - *(_DWORD *)(v1 + 4)) >> 3);
  result = v1;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}
// 42B1F0: using guessed type _DWORD __stdcall unknown_libname_179(LPVOID lpMem, _DWORD);

//----- (0042AD70) --------------------------------------------------------
int __thiscall sub_42AD70(int this)
{
  int v1; // ST08_4@1
  int result; // eax@1

  v1 = this;
  sub_42B2C0(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
  unknown_libname_181(*(LPVOID *)(v1 + 4), (*(_DWORD *)(v1 + 12) - *(_DWORD *)(v1 + 4)) >> 2);
  result = v1;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}
// 42B2F0: using guessed type _DWORD __stdcall unknown_libname_181(LPVOID lpMem, _DWORD);

//----- (0042ADF0) --------------------------------------------------------
int __thiscall sub_42ADF0(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (0042AE30) --------------------------------------------------------
int __thiscall sub_42AE30(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  _DWORD *v3; // eax@1

  v2 = this;
  v3 = (_DWORD *)unknown_libname_180();
  return sub_42B270(v2, v3, a2);
}
// 42B250: using guessed type int unknown_libname_180(void);

//----- (0042AE80) --------------------------------------------------------
int __thiscall sub_42AE80(int this)
{
  int v1; // ST08_4@1
  int result; // eax@1

  v1 = this;
  sub_42B3A0(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
  unknown_libname_182(*(LPVOID *)(v1 + 4), (*(_DWORD *)(v1 + 12) - *(_DWORD *)(v1 + 4)) >> 2);
  result = v1;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}
// 42B3D0: using guessed type _DWORD __stdcall unknown_libname_182(LPVOID lpMem, _DWORD);

//----- (0042AF20) --------------------------------------------------------
int __thiscall sub_42AF20(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (0042AF60) --------------------------------------------------------
int __stdcall sub_42AF60(int a2)
{
  return unknown_libname_172() + 4 * a2;
}

//----- (0042AF80) --------------------------------------------------------
int __thiscall sub_42AF80(void *this, _DWORD *a2)
{
  void *v2; // ST08_4@1
  _DWORD *v3; // eax@1

  v2 = this;
  v3 = (_DWORD *)unknown_libname_173(this);
  return sub_42B350(v2, v3, a2);
}
// 42AF00: using guessed type int __thiscall unknown_libname_173(_DWORD);

//----- (0042AFB0) --------------------------------------------------------
int __thiscall sub_42AFB0(void *this, int a2)
{
  void *v2; // ST0C_4@1
  _DWORD *v3; // eax@1

  v2 = this;
  v3 = (_DWORD *)unknown_libname_173(this);
  sub_42BE70((_DWORD *)(a2 + 4), v3, (_DWORD *)a2);
  sub_42B3A0(*((_DWORD *)v2 + 2) - 4, *((_DWORD *)v2 + 2));
  *((_DWORD *)v2 + 2) -= 4;
  return a2;
}
// 42AF00: using guessed type int __thiscall unknown_libname_173(_DWORD);

//----- (0042B010) --------------------------------------------------------
_BYTE *__thiscall sub_42B010(_BYTE *this, _BYTE *a2, int a3)
{
  _BYTE *v3; // ST08_4@1

  v3 = this;
  sub_42B3F0(this, a2, a3);
  return v3;
}

//----- (0042B070) --------------------------------------------------------
int __thiscall sub_42B070(_BYTE *this, int a2)
{
  _BYTE *v2; // ST0C_4@1
  char v3; // dl@1
  int v4; // ST04_4@1
  int v5; // eax@1

  v2 = this;
  sub_42B170(this, a2);
  v3 = v2[16];
  v4 = unknown_libname_177(v2);
  v5 = unknown_libname_176(v2);
  return sub_42BEA0(v5, v4);
}
// 42B0F0: using guessed type int __thiscall unknown_libname_176(_DWORD);
// 42B110: using guessed type int __thiscall unknown_libname_177(_DWORD);

//----- (0042B0B0) --------------------------------------------------------
int __thiscall sub_42B0B0(int this)
{
  void *v1; // ST0C_4@1
  char v2; // cl@1
  int v3; // ST04_4@1
  int v4; // eax@1

  v1 = (void *)this;
  v2 = *(_BYTE *)(this + 16);
  v3 = unknown_libname_177(v1);
  v4 = unknown_libname_176(v1);
  sub_42BEE0(v4, v3);
  return sub_42B1A0(v1);
}
// 42B0F0: using guessed type int __thiscall unknown_libname_176(_DWORD);
// 42B110: using guessed type int __thiscall unknown_libname_177(_DWORD);

//----- (0042B130) --------------------------------------------------------
BOOL __thiscall sub_42B130(void *this)
{
  return sub_42B440((int)this) == 0;
}

//----- (0042B170) --------------------------------------------------------
int __thiscall sub_42B170(void *this, int a2)
{
  void *v2; // ST08_4@1
  int v3; // eax@1

  v2 = this;
  v3 = unknown_libname_177(this);
  return sub_42B480(v2, v3, a2);
}
// 42B110: using guessed type int __thiscall unknown_libname_177(_DWORD);

//----- (0042B1A0) --------------------------------------------------------
int __thiscall sub_42B1A0(void *this)
{
  void *v1; // ST04_4@1
  int v2; // eax@1

  v1 = this;
  v2 = unknown_libname_177(this);
  return sub_42B4D0(v1, v2 - 8);
}
// 42B110: using guessed type int __thiscall unknown_libname_177(_DWORD);

//----- (0042B1C0) --------------------------------------------------------
int __stdcall sub_42B1C0(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_42B530(a1);
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (0042B210) --------------------------------------------------------
int __thiscall sub_42B210(int this, _BYTE *a2)
{
  *(_BYTE *)this = *a2;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (0042B270) --------------------------------------------------------
int __thiscall sub_42B270(void *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // ST0C_4@1
  int v4; // ST10_4@1

  v3 = (int)this;
  v4 = ((signed int)a2 - ((int (*)(void))unknown_libname_170)()) >> 2;
  sub_42B550(v3, a2, 1u, a3);
  return unknown_libname_170(v3) + 4 * v4;
}
// 42ADD0: using guessed type int __thiscall unknown_libname_170(_DWORD);

//----- (0042B2C0) --------------------------------------------------------
int __stdcall sub_42B2C0(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_42B770(a1);
    result = a1 + 4;
    a1 += 4;
  }
  return result;
}

//----- (0042B310) --------------------------------------------------------
int __thiscall sub_42B310(int this, _BYTE *a2)
{
  *(_BYTE *)this = *a2;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (0042B350) --------------------------------------------------------
int __thiscall sub_42B350(void *this, _DWORD *a2, _DWORD *a3)
{
  void *v3; // ST0C_4@1
  int v4; // ST10_4@1

  v3 = this;
  v4 = ((signed int)a2 - unknown_libname_172()) >> 2;
  sub_42B790((int)v3, a2, 1u, a3);
  return unknown_libname_172() + 4 * v4;
}

//----- (0042B3A0) --------------------------------------------------------
int __stdcall sub_42B3A0(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_42B9B0(a1);
    result = a1 + 4;
    a1 += 4;
  }
  return result;
}

//----- (0042B3F0) --------------------------------------------------------
_BYTE *__thiscall sub_42B3F0(_BYTE *this, _BYTE *a2, int a3)
{
  _BYTE *v3; // ST04_4@1

  v3 = this;
  unknown_libname_183(a3);
  v3[16] = *a2;
  return v3;
}
// 42B420: using guessed type _DWORD __stdcall unknown_libname_183(_DWORD);

//----- (0042B440) --------------------------------------------------------
int __thiscall sub_42B440(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (0042B480) --------------------------------------------------------
int __thiscall sub_42B480(void *this, int a2, int a3)
{
  int v3; // ST0C_4@1
  int v4; // ST10_4@1

  v3 = (int)this;
  v4 = (a2 - ((int (*)(void))unknown_libname_176)()) >> 3;
  sub_42BA10(v3, a2, 1u, a3);
  return unknown_libname_176(v3) + 8 * v4;
}
// 42B0F0: using guessed type int __thiscall unknown_libname_176(_DWORD);

//----- (0042B4D0) --------------------------------------------------------
int __thiscall sub_42B4D0(void *this, int a2)
{
  void *v2; // ST0C_4@1
  int v3; // eax@1

  v2 = this;
  v3 = unknown_libname_177(this);
  sub_42BF10(a2 + 8, v3, a2);
  sub_42B1C0(*((_DWORD *)v2 + 2) - 8, *((_DWORD *)v2 + 2));
  *((_DWORD *)v2 + 2) -= 8;
  return a2;
}
// 42B110: using guessed type int __thiscall unknown_libname_177(_DWORD);

//----- (0042B530) --------------------------------------------------------
void __stdcall sub_42B530(int a1)
{
  sub_42BF50();
}

//----- (0042B550) --------------------------------------------------------
unsigned int __thiscall sub_42B550(int this, _DWORD *a2, unsigned int a3, _DWORD *a4)
{
  int v4; // ST14_4@5
  void *v5; // ST18_4@5
  void *v6; // ST1C_4@5
  unsigned int result; // eax@5
  int v8; // [sp+0h] [bp-14h]@3
  int v9; // [sp+4h] [bp-10h]@1

  v9 = this;
  if ( (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 8)) >> 2 >= a3 )
  {
    result = (*(_DWORD *)(this + 8) - (signed int)a2) >> 2;
    if ( result >= a3 )
    {
      if ( a3 )
      {
        sub_42BC30(*(_DWORD *)(this + 8) - 4 * a3, *(_DWORD *)(this + 8), *(void **)(this + 8));
        sub_42BF90(a2, (_DWORD *)(*(_DWORD *)(v9 + 8) - 4 * a3), *(_DWORD **)(v9 + 8));
        sub_42BF60(a2, &a2[a3], a4);
        result = a3;
        *(_DWORD *)(v9 + 8) += 4 * a3;
      }
    }
    else
    {
      sub_42BC30((int)a2, *(_DWORD *)(this + 8), &a2[a3]);
      sub_42BC70(*(void **)(v9 + 8), a3 - ((*(_DWORD *)(v9 + 8) - (signed int)a2) >> 2), (int)a4);
      sub_42BF60(a2, *(_DWORD **)(v9 + 8), a4);
      result = v9;
      *(_DWORD *)(v9 + 8) += 4 * a3;
    }
  }
  else
  {
    if ( a3 >= sub_42ADF0(this) )
      v8 = a3;
    else
      v8 = sub_42ADF0(v9);
    v4 = v8 + sub_42ADF0(v9);
    v5 = sub_42BCB0(v4, 0);
    v6 = sub_42BC30(*(_DWORD *)(v9 + 4), (int)a2, v5);
    sub_42BC70(v6, a3, (int)a4);
    sub_42BC30((int)a2, *(_DWORD *)(v9 + 8), (char *)v6 + 4 * a3);
    sub_42B2C0(*(_DWORD *)(v9 + 4), *(_DWORD *)(v9 + 8));
    unknown_libname_181(*(LPVOID *)(v9 + 4), (*(_DWORD *)(v9 + 12) - *(_DWORD *)(v9 + 4)) >> 2);
    *(_DWORD *)(v9 + 12) = (char *)v5 + 4 * v4;
    *(_DWORD *)(v9 + 8) = (char *)v5 + 4 * sub_42ADF0(v9) + 4 * a3;
    result = v9;
    *(_DWORD *)(v9 + 4) = v5;
  }
  return result;
}
// 42B2F0: using guessed type _DWORD __stdcall unknown_libname_181(LPVOID lpMem, _DWORD);

//----- (0042B770) --------------------------------------------------------
void __stdcall sub_42B770(int a1)
{
  sub_42BFC0();
}

//----- (0042B790) --------------------------------------------------------
unsigned int __thiscall sub_42B790(int this, _DWORD *a2, unsigned int a3, _DWORD *a4)
{
  int v4; // ST14_4@5
  void *v5; // ST18_4@5
  void *v6; // ST1C_4@5
  unsigned int result; // eax@5
  int v8; // [sp+0h] [bp-14h]@3
  int v9; // [sp+4h] [bp-10h]@1

  v9 = this;
  if ( (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 8)) >> 2 >= a3 )
  {
    result = (*(_DWORD *)(this + 8) - (signed int)a2) >> 2;
    if ( result >= a3 )
    {
      if ( a3 )
      {
        sub_42BCD0(*(_DWORD *)(this + 8) - 4 * a3, *(_DWORD *)(this + 8), *(void **)(this + 8));
        sub_42C000(a2, (_DWORD *)(*(_DWORD *)(v9 + 8) - 4 * a3), *(_DWORD **)(v9 + 8));
        sub_42BFD0(a2, &a2[a3], a4);
        result = a3;
        *(_DWORD *)(v9 + 8) += 4 * a3;
      }
    }
    else
    {
      sub_42BCD0((int)a2, *(_DWORD *)(this + 8), &a2[a3]);
      sub_42BD10(*(void **)(v9 + 8), a3 - ((*(_DWORD *)(v9 + 8) - (signed int)a2) >> 2), (int)a4);
      sub_42BFD0(a2, *(_DWORD **)(v9 + 8), a4);
      result = v9;
      *(_DWORD *)(v9 + 8) += 4 * a3;
    }
  }
  else
  {
    if ( a3 >= sub_42AF20(this) )
      v8 = a3;
    else
      v8 = sub_42AF20(v9);
    v4 = v8 + sub_42AF20(v9);
    v5 = sub_42BD50(v4, 0);
    v6 = sub_42BCD0(*(_DWORD *)(v9 + 4), (int)a2, v5);
    sub_42BD10(v6, a3, (int)a4);
    sub_42BCD0((int)a2, *(_DWORD *)(v9 + 8), (char *)v6 + 4 * a3);
    sub_42B3A0(*(_DWORD *)(v9 + 4), *(_DWORD *)(v9 + 8));
    unknown_libname_182(*(LPVOID *)(v9 + 4), (*(_DWORD *)(v9 + 12) - *(_DWORD *)(v9 + 4)) >> 2);
    *(_DWORD *)(v9 + 12) = (char *)v5 + 4 * v4;
    *(_DWORD *)(v9 + 8) = (char *)v5 + 4 * sub_42AF20(v9) + 4 * a3;
    result = v9;
    *(_DWORD *)(v9 + 4) = v5;
  }
  return result;
}
// 42B3D0: using guessed type _DWORD __stdcall unknown_libname_182(LPVOID lpMem, _DWORD);

//----- (0042B9B0) --------------------------------------------------------
void __stdcall sub_42B9B0(int a1)
{
  sub_42C030();
}

//----- (0042B9D0) --------------------------------------------------------
int __thiscall sub_42B9D0(int this, _BYTE *a2)
{
  *(_BYTE *)this = *a2;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (0042BA10) --------------------------------------------------------
unsigned int __thiscall sub_42BA10(int this, int a2, unsigned int a3, int a4)
{
  int v4; // ST14_4@5
  void *v5; // ST18_4@5
  void *v6; // ST1C_4@5
  unsigned int result; // eax@5
  int v8; // [sp+0h] [bp-14h]@3
  int v9; // [sp+4h] [bp-10h]@1

  v9 = this;
  if ( (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 8)) >> 3 >= a3 )
  {
    result = (*(_DWORD *)(this + 8) - a2) >> 3;
    if ( result >= a3 )
    {
      if ( a3 )
      {
        sub_42BD70(*(_DWORD *)(this + 8) - 8 * a3, *(_DWORD *)(this + 8), *(void **)(this + 8));
        sub_42C070(a2, *(_DWORD *)(v9 + 8) - 8 * a3, *(_DWORD *)(v9 + 8));
        sub_42C040(a2, a2 + 8 * a3, a4);
        result = a3;
        *(_DWORD *)(v9 + 8) += 8 * a3;
      }
    }
    else
    {
      sub_42BD70(a2, *(_DWORD *)(this + 8), (void *)(a2 + 8 * a3));
      sub_42BDB0(*(void **)(v9 + 8), a3 - ((*(_DWORD *)(v9 + 8) - a2) >> 3), a4);
      sub_42C040(a2, *(_DWORD *)(v9 + 8), a4);
      result = v9;
      *(_DWORD *)(v9 + 8) += 8 * a3;
    }
  }
  else
  {
    if ( a3 >= sub_42B440(this) )
      v8 = a3;
    else
      v8 = sub_42B440(v9);
    v4 = v8 + sub_42B440(v9);
    v5 = sub_42BDF0(v4, 0);
    v6 = sub_42BD70(*(_DWORD *)(v9 + 4), a2, v5);
    sub_42BDB0(v6, a3, a4);
    sub_42BD70(a2, *(_DWORD *)(v9 + 8), (char *)v6 + 8 * a3);
    sub_42B1C0(*(_DWORD *)(v9 + 4), *(_DWORD *)(v9 + 8));
    unknown_libname_179(*(LPVOID *)(v9 + 4), (*(_DWORD *)(v9 + 12) - *(_DWORD *)(v9 + 4)) >> 3);
    *(_DWORD *)(v9 + 12) = (char *)v5 + 8 * v4;
    *(_DWORD *)(v9 + 8) = (char *)v5 + 8 * sub_42B440(v9) + 8 * a3;
    result = v9;
    *(_DWORD *)(v9 + 4) = v5;
  }
  return result;
}
// 42B1F0: using guessed type _DWORD __stdcall unknown_libname_179(LPVOID lpMem, _DWORD);

//----- (0042BC30) --------------------------------------------------------
void *__stdcall sub_42BC30(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_42BE10(a3, a1);
    a3 = (char *)a3 + 4;
    a1 += 4;
  }
  return a3;
}

//----- (0042BC70) --------------------------------------------------------
int __stdcall sub_42BC70(void *a1, int a2, int a3)
{
  int result; // eax@2

  while ( a2 )
  {
    sub_42BE10(a1, a3);
    result = a2-- - 1;
    a1 = (char *)a1 + 4;
  }
  return result;
}

//----- (0042BCB0) --------------------------------------------------------
void *__stdcall sub_42BCB0(int a1, int a2)
{
  return sub_42C0B0(a1);
}

//----- (0042BCD0) --------------------------------------------------------
void *__stdcall sub_42BCD0(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_42BE30(a3, a1);
    a3 = (char *)a3 + 4;
    a1 += 4;
  }
  return a3;
}

//----- (0042BD10) --------------------------------------------------------
int __stdcall sub_42BD10(void *a1, int a2, int a3)
{
  int result; // eax@2

  while ( a2 )
  {
    sub_42BE30(a1, a3);
    result = a2-- - 1;
    a1 = (char *)a1 + 4;
  }
  return result;
}

//----- (0042BD50) --------------------------------------------------------
void *__stdcall sub_42BD50(int a1, int a2)
{
  return sub_42C0E0(a1);
}

//----- (0042BD70) --------------------------------------------------------
void *__stdcall sub_42BD70(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_42BE50(a3, a1);
    a3 = (char *)a3 + 8;
    a1 += 8;
  }
  return a3;
}

//----- (0042BDB0) --------------------------------------------------------
int __stdcall sub_42BDB0(void *a1, int a2, int a3)
{
  int result; // eax@2

  while ( a2 )
  {
    sub_42BE50(a1, a3);
    result = a2-- - 1;
    a1 = (char *)a1 + 8;
  }
  return result;
}

//----- (0042BDF0) --------------------------------------------------------
void *__stdcall sub_42BDF0(int a1, int a2)
{
  return sub_42C110(a1);
}

//----- (0042BE10) --------------------------------------------------------
_DWORD *__stdcall sub_42BE10(void *a1, int a2)
{
  return sub_42C140(a1, a2);
}

//----- (0042BE30) --------------------------------------------------------
_DWORD *__stdcall sub_42BE30(void *a1, int a2)
{
  return sub_42C180(a1, a2);
}

//----- (0042BE50) --------------------------------------------------------
void *__stdcall sub_42BE50(void *a1, int a2)
{
  return sub_42C1C0(a1, a2);
}

//----- (0042BE70) --------------------------------------------------------
_DWORD *__cdecl sub_42BE70(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    *a3 = *a1;
    ++a3;
    ++a1;
  }
  return a3;
}

//----- (0042BEA0) --------------------------------------------------------
int __cdecl sub_42BEA0(int a1, int a2)
{
  sub_42C210();
  sub_42C200();
  return sub_42C220(a1, a2);
}

//----- (0042BEE0) --------------------------------------------------------
int __cdecl sub_42BEE0(int a1, int a2)
{
  sub_42C210();
  return sub_42C270(a1, a2);
}

//----- (0042BF10) --------------------------------------------------------
int __cdecl sub_42BF10(int a1, int a2, int a3)
{
  int v3; // edx@2

  while ( a1 != a2 )
  {
    v3 = *(_DWORD *)(a1 + 4);
    *(_DWORD *)a3 = *(_DWORD *)a1;
    *(_DWORD *)(a3 + 4) = v3;
    a3 += 8;
    a1 += 8;
  }
  return a3;
}

//----- (0042BF50) --------------------------------------------------------
void sub_42BF50()
{
  ;
}

//----- (0042BF60) --------------------------------------------------------
int __cdecl sub_42BF60(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    *a1 = *a3;
    result = (int)(a1 + 1);
    ++a1;
  }
  return result;
}

//----- (0042BF90) --------------------------------------------------------
_DWORD *__cdecl sub_42BF90(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    --a2;
    --a3;
    *a3 = *a2;
  }
  return a3;
}

//----- (0042BFC0) --------------------------------------------------------
void sub_42BFC0()
{
  ;
}

//----- (0042BFD0) --------------------------------------------------------
int __cdecl sub_42BFD0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    *a1 = *a3;
    result = (int)(a1 + 1);
    ++a1;
  }
  return result;
}

//----- (0042C000) --------------------------------------------------------
_DWORD *__cdecl sub_42C000(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    --a2;
    --a3;
    *a3 = *a2;
  }
  return a3;
}

//----- (0042C030) --------------------------------------------------------
void sub_42C030()
{
  ;
}

//----- (0042C040) --------------------------------------------------------
int __cdecl sub_42C040(int a1, int a2, int a3)
{
  int result; // eax@2
  int v4; // ecx@2

  while ( a1 != a2 )
  {
    v4 = *(_DWORD *)(a3 + 4);
    *(_DWORD *)a1 = *(_DWORD *)a3;
    *(_DWORD *)(a1 + 4) = v4;
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (0042C070) --------------------------------------------------------
int __cdecl sub_42C070(int a1, int a2, int a3)
{
  int v3; // ecx@2

  while ( a1 != a2 )
  {
    a2 -= 8;
    v3 = *(_DWORD *)(a2 + 4);
    a3 -= 8;
    *(_DWORD *)a3 = *(_DWORD *)a2;
    *(_DWORD *)(a3 + 4) = v3;
  }
  return a3;
}

//----- (0042C0B0) --------------------------------------------------------
void *__cdecl sub_42C0B0(int a1)
{
  if ( a1 < 0 )
    a1 = 0;
  return malloc(4 * a1);
}

//----- (0042C0E0) --------------------------------------------------------
void *__cdecl sub_42C0E0(int a1)
{
  if ( a1 < 0 )
    a1 = 0;
  return malloc(4 * a1);
}

//----- (0042C110) --------------------------------------------------------
void *__cdecl sub_42C110(int a1)
{
  if ( a1 < 0 )
    a1 = 0;
  return malloc(8 * a1);
}

//----- (0042C140) --------------------------------------------------------
_DWORD *__cdecl sub_42C140(void *a1, int a2)
{
  _DWORD *result; // eax@1
  _DWORD *v3; // [sp+4h] [bp-4h]@1

  result = operator new(4u, a1);
  v3 = result;
  if ( result )
  {
    result = *(_DWORD **)a2;
    *v3 = *(_DWORD *)a2;
  }
  return result;
}

//----- (0042C180) --------------------------------------------------------
_DWORD *__cdecl sub_42C180(void *a1, int a2)
{
  _DWORD *result; // eax@1
  _DWORD *v3; // [sp+4h] [bp-4h]@1

  result = operator new(4u, a1);
  v3 = result;
  if ( result )
  {
    result = *(_DWORD **)a2;
    *v3 = *(_DWORD *)a2;
  }
  return result;
}

//----- (0042C1C0) --------------------------------------------------------
void *__cdecl sub_42C1C0(void *a1, int a2)
{
  void *result; // eax@1
  int v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = (int)result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *(_DWORD *)(v3 + 4) = result;
  }
  return result;
}

//----- (0042C200) --------------------------------------------------------
int sub_42C200()
{
  return 0;
}

//----- (0042C210) --------------------------------------------------------
int sub_42C210()
{
  return 0;
}

//----- (0042C220) --------------------------------------------------------
int __cdecl sub_42C220(int a1, int a2)
{
  return sub_42C2C0(a1, ((a2 - a1) >> 3) - 1, 0, *(_DWORD *)(a2 - 8), *(_DWORD *)(a2 - 8 + 4));
}

//----- (0042C270) --------------------------------------------------------
int __cdecl sub_42C270(int a1, int a2)
{
  sub_42C200();
  return sub_42C350(a1, a2 - 8, a2 - 8, *(_DWORD *)(a2 - 8), *(_DWORD *)(a2 - 8 + 4));
}

//----- (0042C2C0) --------------------------------------------------------
int __cdecl sub_42C2C0(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // edx@4
  int result; // eax@5
  int i; // [sp+4h] [bp-4h]@1

  for ( i = (a2 - 1) / 2; a3 < a2 && sub_42C390((void *)(a1 + 8 * i), &a4); i = (i - 1) / 2 )
  {
    v5 = *(_DWORD *)(a1 + 8 * i + 4);
    *(_DWORD *)(a1 + 8 * a2) = *(_DWORD *)(a1 + 8 * i);
    *(_DWORD *)(a1 + 8 * a2 + 4) = v5;
    a2 = i;
  }
  result = a1;
  *(_DWORD *)(a1 + 8 * a2) = a4;
  *(_DWORD *)(a1 + 8 * a2 + 4) = a5;
  return result;
}

//----- (0042C350) --------------------------------------------------------
int __cdecl sub_42C350(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // edx@1

  v5 = *(_DWORD *)(a1 + 4);
  *(_DWORD *)a3 = *(_DWORD *)a1;
  *(_DWORD *)(a3 + 4) = v5;
  return sub_42C3B0(a1, 0, (a2 - a1) >> 3, a4, a5);
}

//----- (0042C390) --------------------------------------------------------
bool __stdcall sub_42C390(void *a1, _DWORD *a2)
{
  return sub_42C4B0(a1, a2);
}

//----- (0042C3B0) --------------------------------------------------------
int __cdecl sub_42C3B0(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // ecx@5
  int v6; // edx@7
  int i; // [sp+4h] [bp-8h]@1
  int v9; // [sp+8h] [bp-4h]@1

  v9 = a2;
  for ( i = 2 * a2 + 2; i < a3; i = 2 * i + 2 )
  {
    if ( sub_42C390((void *)(a1 + 8 * i), (_DWORD *)(a1 + 8 * i - 8)) )
      --i;
    v5 = *(_DWORD *)(a1 + 8 * i + 4);
    *(_DWORD *)(a1 + 8 * a2) = *(_DWORD *)(a1 + 8 * i);
    *(_DWORD *)(a1 + 8 * a2 + 4) = v5;
    a2 = i;
  }
  if ( i == a3 )
  {
    v6 = *(_DWORD *)(a1 + 8 * i - 4);
    *(_DWORD *)(a1 + 8 * a2) = *(_DWORD *)(a1 + 8 * i - 8);
    *(_DWORD *)(a1 + 8 * a2 + 4) = v6;
    a2 = i - 1;
  }
  return sub_42C2C0(a1, a2, v9, a4, a5);
}

//----- (0042C4B0) --------------------------------------------------------
bool __thiscall sub_42C4B0(void *this, _DWORD *a2)
{
  return *(_DWORD *)this - *a2 > 0;
}

//----- (0042C4D0) --------------------------------------------------------
DNameNode *__thiscall sub_42C4D0(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F82C;
  *((_DWORD *)v1 + 1) = 1;
  return v1;
}
// 45F82C: using guessed type int (__stdcall *off_45F82C)(int);

//----- (0042C510) --------------------------------------------------------
void __stdcall sub_42C510(int a1, int a2, int a3)
{
  ;
}

//----- (0042C520) --------------------------------------------------------
void *__thiscall sub_42C520(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_42C550(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0042C550) --------------------------------------------------------
void *__thiscall sub_42C550(void *this)
{
  *(_DWORD *)this = &off_45F82C;
  return sub_418081(this);
}
// 45F82C: using guessed type int (__stdcall *off_45F82C)(int);

//----- (0042C570) --------------------------------------------------------
LRESULT __stdcall sub_42C570(HWND hWndParent, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  int v5; // eax@32
  _DWORD *v6; // eax@34
  char v7; // [sp+18h] [bp-8Ch]@34
  int v8; // [sp+70h] [bp-34h]@40
  WPARAM v9; // [sp+74h] [bp-30h]@40
  int v10; // [sp+78h] [bp-2Ch]@38
  int v11; // [sp+7Ch] [bp-28h]@38
  int i; // [sp+80h] [bp-24h]@31
  int nWidth; // [sp+84h] [bp-20h]@11
  unsigned int v14; // [sp+88h] [bp-1Ch]@11
  CPPEH_RECORD ms_exc; // [sp+8Ch] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  if ( Msg > 0x10 )
  {
    if ( Msg == 273 )
    {
      v9 = wParam >> 16;
      v8 = (unsigned __int16)wParam;
      if ( !(wParam >> 16) && v8 != 1 && v8 == 2 )
      {
        sub_433921((int)&unk_480D50);
        sub_4374A8(&unk_481648);
      }
    }
    else if ( Msg == 275 )
    {
      switch ( wParam )
      {
        case 0x66u:
          dword_480428 = sub_40F5B0((char *)&unk_481698);
          InvalidateRect(hWnd, 0, 0);
          break;
        case 0x67u:
          for ( i = 1; ; ++i )
          {
            v5 = sub_411590((int)&unk_480D50);
            if ( i > v5 )
              break;
            if ( sub_43517B(i) )
            {
              v6 = sub_434524(&unk_480D50, &v7, i);
              sub_439142(v6[16], (int)aC_1, 2);
            }
          }
          break;
        case 0x6Eu:
          v10 = 400000000;
          v11 = 0;
          sub_43BA17(lpDirectoryName, 400000000, 0);
          break;
      }
    }
  }
  else
  {
    switch ( Msg )
    {
      case 0x10u:
        if ( hWndParent == ::hWndParent )
        {
          dword_47F89C = CreateDialogParamA(hInstance, (LPCSTR)0x68, hWndParent, sub_42D361, 0);
          ShowWindow(dword_47F89C, 5);
          ms_exc.registration.TryLevel = -1;
          return 0;
        }
        break;
      case 2u:
        if ( hWndParent == ::hWndParent )
        {
          byte_4816F0 = 1;
          sub_42DBC9((int)&unk_47FA00, 0);
          sub_42ABD0((int)&unk_47F830);
          Sleep(0x7D0u);
          PostQuitMessage(0);
        }
        break;
      case 5u:
        if ( hWndParent == ::hWndParent )
        {
          nWidth = (unsigned __int16)lParam;
          v14 = (unsigned int)lParam >> 16;
          MoveWindow(hWnd, 160, 0, (unsigned __int16)lParam - 160, 20, 1);
          MoveWindow(dword_47F8B0, 0, 20, (unsigned __int16)lParam, ((unsigned int)lParam >> 16) - 20, 1);
          MoveWindow(dword_47F8A8, 0, 0, 80, 20, 1);
          MoveWindow(dword_47F8AC, 80, 0, 80, 20, 1);
        }
        else if ( hWndParent == dword_47F8B0 )
        {
          sub_42DB8D((int)&unk_47FA00, (unsigned __int16)lParam, (unsigned int)lParam >> 16);
        }
        else
        {
          hWndParent = hWnd;
          if ( hWnd )
            sub_43297A((int)&unk_480420, (unsigned __int16)lParam, (unsigned int)lParam >> 16);
        }
        break;
      case 0xFu:
        if ( hWndParent == dword_47F8B0 )
        {
          sub_42D9D3((int)&unk_47FA00);
        }
        else if ( hWndParent == hWnd )
        {
          sub_432819((int)&unk_480420);
        }
        break;
    }
  }
  ms_exc.registration.TryLevel = -1;
  return DefWindowProcA(hWndParent, Msg, wParam, lParam);
}
// 4816F0: using guessed type char byte_4816F0;

//----- (0042C965) --------------------------------------------------------
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
  int result; // eax@5
  HANDLE v5; // eax@6
  int v6; // [sp+0h] [bp-730h]@44
  int v7; // [sp+4h] [bp-72Ch]@37
  DNameNode *v8; // [sp+Ch] [bp-724h]@43
  DNameNode *v9; // [sp+14h] [bp-71Ch]@36
  int v10; // [sp+1Ch] [bp-714h]@43
  struct sockaddr v11; // [sp+20h] [bp-710h]@43
  SOCKET v12; // [sp+30h] [bp-700h]@43
  int v13; // [sp+34h] [bp-6FCh]@36
  struct sockaddr v14; // [sp+38h] [bp-6F8h]@36
  SOCKET v15; // [sp+48h] [bp-6E8h]@36
  SOCKET s; // [sp+4Ch] [bp-6E4h]@32
  int v17; // [sp+50h] [bp-6E0h]@32
  struct sockaddr name; // [sp+54h] [bp-6DCh]@32
  int v19; // [sp+64h] [bp-6CCh]@31
  char v20; // [sp+78h] [bp-6B8h]@8
  CHAR WindowName; // [sp+478h] [bp-2B8h]@6
  struct tagMSG Msg; // [sp+540h] [bp-1F0h]@50
  int v23; // [sp+55Ch] [bp-1D4h]@4
  HANDLE hObject; // [sp+560h] [bp-1D0h]@9
  DWORD ThreadId; // [sp+564h] [bp-1CCh]@49
  HWND v26; // [sp+568h] [bp-1C8h]@1
  struct WSAData WSAData; // [sp+56Ch] [bp-1C4h]@4
  WNDCLASSEXA v28; // [sp+6FCh] [bp-34h]@4
  char v29[4]; // [sp+72Ch] [bp-4h]@4

  v26 = FindWindowA(0, ::WindowName);
  if ( v26 )
  {
    MessageBoxA(0, Text, Caption, 0x10u);
    exit(0);
  }
  sub_407E2E(a_5_9431Xt, 21);
  sub_40A10F(&unk_472468, a932X11sa4sd__a);
  v28.cbSize = 48;
  v28.style = 64;
  v28.lpfnWndProc = sub_42C570;
  v28.cbClsExtra = 0;
  v28.cbWndExtra = 0;
  v28.hInstance = hInstance;
  v28.hIcon = 0;
  v28.hCursor = LoadCursorA(0, (LPCSTR)0x7F00);
  v28.hbrBackground = 0;
  v28.lpszMenuName = 0;
  v28.lpszClassName = aAuthserver_0;
  v28.hIconSm = 0;
  LOWORD(v23) = RegisterClassExA(&v28);
  ::hInstance = hInstance;
  sub_417B55();
  *(_DWORD *)v29 = WSAStartup(0x202u, &WSAData);
  if ( *(_DWORD *)v29 )
  {
    sub_42DBFC((int)&unk_47FA00, 3, aWsastartupErro, *(_DWORD *)v29);
    result = 0;
  }
  else
  {
    sprintf(&WindowName, aAuthserverD, *(_DWORD *)dword_46977C);
    hWndParent = CreateWindowExA(
                   0,
                   (LPCSTR)(unsigned __int16)v23,
                   &WindowName,
                   0xCF0000u,
                   2147483648,
                   0,
                   600,
                   440,
                   0,
                   0,
                   hInstance,
                   0);
    dword_47F8B0 = CreateWindowExA(
                     0x200u,
                     (LPCSTR)(unsigned __int16)v23,
                     byte_47F8BC,
                     0x40000000u,
                     0,
                     30,
                     640,
                     720,
                     hWndParent,
                     0,
                     hInstance,
                     0);
    hWnd = CreateWindowExA(
             0x200u,
             (LPCSTR)(unsigned __int16)v23,
             byte_47F8C0,
             0x40000000u,
             0,
             0,
             640,
             30,
             hWndParent,
             0,
             hInstance,
             0);
    dword_47F8A8 = CreateWindowExA(
                     0,
                     ClassName,
                     aReset,
                     0x40000000u,
                     600,
                     0,
                     40,
                     30,
                     hWndParent,
                     (HMENU)1,
                     hInstance,
                     0);
    dword_47F8AC = CreateWindowExA(
                     0,
                     aButton_0,
                     aReload,
                     0x40000000u,
                     600,
                     0,
                     40,
                     30,
                     hWndParent,
                     (HMENU)2,
                     hInstance,
                     0);
    Concurrency::details::SchedulingRing::SetOwningNode(
      (Concurrency::details::SchedulingRing *)&unk_47FA00,
      (struct Concurrency::details::SchedulingNode *)dword_47F8B0);
    sub_4327C9((int)&unk_480420, (int)hWnd);
    v5 = GetCurrentProcess();
    SetProcessPriorityBoost(v5, 1);
    ShowWindow(hWndParent, nShowCmd);
    UpdateWindow(hWndParent);
    ShowWindow(dword_47F8B0, 5);
    UpdateWindow(dword_47F8B0);
    ShowWindow(hWnd, 5);
    UpdateWindow(hWnd);
    ShowWindow(dword_47F8A8, 5);
    UpdateWindow(dword_47F8A8);
    ShowWindow(dword_47F8AC, 5);
    UpdateWindow(dword_47F8AC);
    sub_40A348(&dword_478538, aEtcConfig_txt);
    if ( dword_478570 )
    {
      memset(&v20, 0, 0x400u);
      strcpy(&v20, dword_478570);
      sub_415670(&v20);
    }
    else
    {
      sub_415670(aTest);
    }
    hObject = 0;
    if ( strlen(lpDirectoryName) )
    {
      sub_42DE5D(&unk_47FA00, (char *)lpDirectoryName);
      sub_42DBC9((int)&unk_47FA00, 1);
      sub_42DFC6(&unk_47FB68, (char *)lpDirectoryName);
      sub_42DFC6(&unk_47FDD8, (char *)lpDirectoryName);
      sub_42DFC6(&unk_47F8C8, (char *)lpDirectoryName);
      sub_42E49E(&unk_47FCA0, (char *)lpDirectoryName);
      SetTimer(hWndParent, 0x66u, 0x7D0u, 0);
      SetTimer(hWndParent, 0x67u, 0xEA60u, 0);
      switch ( dword_478568 )
      {
        case 4:
          dword_47F898 = sub_43AA2B;
          break;
        case 8:
        case 16:
        case 32:
          dword_47F898 = sub_43AB0C;
          break;
        default:
          dword_47F898 = (int (__cdecl *)(_DWORD))sub_43ABED;
          break;
      }
      sub_42DBFC((int)&unk_47FA00, 0, "Loading AuthExt.dll");
      LoadLibraryA("AuthExt.dll");
      sub_42DBFC((int)&unk_47FA00, 2, aLoadedConfig);
      sub_42DBFC((int)&unk_47FA00, 0, aBuildnumberD, *(_DWORD *)dword_46977C);
      if ( !dword_4785A0 )
      {
        sub_42DBFC((int)&unk_47FA00, 3, aAcceptcallnull);
        dword_4785A0 = 1;
      }
      if ( !Period )
      {
        sub_42DBFC((int)&unk_47FA00, 3, aSockettimeout0);
        Period = 180;
      }
      if ( !dword_4785A4 )
      {
        sub_42DBFC((int)&unk_47FA00, 3, aWaitinguserl_0);
        dword_4785A4 = 100;
      }
      if ( byte_4785D1 )
      {
        if ( dword_478590 )
          sub_42DBFC((int)&unk_47FA00, 0, aLoadForbiddenI);
        else
          sub_42DBFC((int)&unk_47FA00, 0, aV);
        sub_41E5DD(&unk_47F4C8, aEtcBlockips_tx);
      }
      if ( ::name && strlen(::name) )
      {
        if ( sub_432AB3(&unk_480468) )
          SetTimer(hWndParent, 0x6Eu, 0x6DDD00u, 0);
        else
          sub_42DBFC((int)&unk_47FA00, 3, aSendmailInitia);
      }
      sub_4134F8((int)&unk_478608, dword_478548);
      sub_433921((int)&unk_480D50);
      sub_413E9E((int)&v19, (int)&unk_478608);
      sub_414123((int)&v19, aUpdateWorlds_3);
      sub_413F5F((int)&v19);
      sub_43A4A3();
      if ( byte_4785A8 )
      {
        s = socket(2, 1, 0);
        name.sa_family = 2;
        *(_DWORD *)&name.sa_data[2] = dword_4785AC;
        *(_WORD *)&name.sa_data[0] = htons(word_4785B0);
        v17 = connect(s, &name, 16);
        dword_481704 = sub_42EC33(s);
        sub_42D3E0(dword_481704, dword_4785AC);
        if ( v17 == -1 )
          sub_41D61F(dword_481704);
        else
          sub_41D687(dword_481704, ExistingCompletionPort);
      }
      if ( byte_47857A )
      {
        v15 = socket(2, 1, 0);
        v14.sa_family = 2;
        *(_DWORD *)&v14.sa_data[2] = dword_478580;
        *(_WORD *)&v14.sa_data[0] = htons(hostshort);
        v13 = connect(v15, &v14, 16);
        v9 = (DNameNode *)unknown_libname_49(0x88u);
        if ( v9 )
          v7 = sub_425EF9(v9, v15);
        else
          v7 = 0;
        dword_481700 = v7;
        sub_428610(v7, dword_478580);
        if ( v13 == -1 )
          sub_41D61F(dword_481700);
        else
          sub_41D687(dword_481700, CompletionPort);
      }
      if ( byte_4785C0 )
      {
        v12 = socket(2, 1, 0);
        v11.sa_family = 2;
        *(_DWORD *)&v11.sa_data[2] = dword_4785C4;
        *(_WORD *)&v11.sa_data[0] = htons(word_4785C8);
        v10 = connect(v12, &v11, 16);
        v8 = (DNameNode *)unknown_libname_49(0x80u);
        if ( v8 )
          v6 = sub_43C0E0(v8, v12);
        else
          v6 = 0;
        dword_481750 = v6;
        sub_42D400(v6, dword_4785C4);
        if ( v10 == -1 )
          sub_41D61F(dword_481750);
        else
          sub_41D687(dword_481750, ExistingCompletionPort);
      }
      hObject = (HANDLE)_beginthreadex(0, 0, (int)sub_43A2F1, 0, 0, &ThreadId);
      sub_436CD0(&unk_481648);
    }
    else
    {
      sub_42DE5D(&unk_47FA00, aLog);
      sub_42DBC9((int)&unk_47FA00, 1);
      sub_42DFC6(&unk_47FB68, (char *)lpDirectoryName);
      sub_42DFC6(&unk_47FDD8, (char *)lpDirectoryName);
      sub_42E49E(&unk_47FCA0, (char *)lpDirectoryName);
      sub_42DBFC((int)&unk_47FA00, 3, aErrorLoadConfi);
      sub_42E49E(&unk_47FCA0, (char *)lpDirectoryName);
    }
    while ( GetMessageA(&Msg, 0, 0, 0) )
    {
      TranslateMessage(&Msg);
      DispatchMessageA(&Msg);
    }
    if ( hObject )
      CloseHandle(hObject);
    while ( !byte_47F8B8 )
      Sleep(0x3E8u);
    Sleep(0x7D0u);
    WSACleanup();
    result = 0;
  }
  return result;
}
// 43A2F1: using guessed type int __stdcall sub_43A2F1(int);
// 43AA2B: using guessed type int __cdecl sub_43AA2B(int);
// 43AB0C: using guessed type int __cdecl sub_43AB0C(int);
// 478548: using guessed type int dword_478548;
// 478568: using guessed type int dword_478568;
// 47857A: using guessed type char byte_47857A;
// 478580: using guessed type int dword_478580;
// 478590: using guessed type int dword_478590;
// 4785A0: using guessed type int dword_4785A0;
// 4785A4: using guessed type int dword_4785A4;
// 4785A8: using guessed type char byte_4785A8;
// 4785AC: using guessed type int dword_4785AC;
// 4785C0: using guessed type char byte_4785C0;
// 4785C4: using guessed type int dword_4785C4;
// 4785D1: using guessed type char byte_4785D1;
// 47F898: using guessed type int (__cdecl *dword_47F898)(_DWORD);
// 47F8B8: using guessed type char byte_47F8B8;
// 481700: using guessed type int dword_481700;
// 481704: using guessed type int dword_481704;
// 481750: using guessed type int dword_481750;

//----- (0042D361) --------------------------------------------------------
BOOL __stdcall sub_42D361(HWND hDlg, UINT a2, WPARAM a3, LPARAM a4)
{
  if ( a2 == 273 )
  {
    if ( a3 == 1 )
    {
      DestroyWindow(hWndParent);
      EndDialog(hDlg, 0);
    }
    else if ( a3 == 2 )
    {
      EndDialog(hDlg, 0);
    }
  }
  return 0;
}

//----- (0042D3C0) --------------------------------------------------------
int sub_42D3C0()
{
  return atexit(sub_402150);
}

//----- (0042D3E0) --------------------------------------------------------
int __thiscall sub_42D3E0(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 112) = a2;
  return result;
}

//----- (0042D400) --------------------------------------------------------
int __thiscall sub_42D400(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 104) = a2;
  return result;
}

//----- (0042D420) --------------------------------------------------------
LPCRITICAL_SECTION __thiscall sub_42D420(struct _RTL_CRITICAL_SECTION *this, int a2, DWORD dwSpinCount)
{
  LPCRITICAL_SECTION lpCriticalSection; // [sp+0h] [bp-4h]@1

  lpCriticalSection = this;
  this[1].LockCount = a2;
  if ( a2 == 2 )
  {
    this[1].DebugInfo = 0;
  }
  else if ( a2 == 1 )
  {
    InitializeCriticalSectionAndSpinCount(this, dwSpinCount);
  }
  else
  {
    InitializeCriticalSection(this);
  }
  return lpCriticalSection;
}

//----- (0042D46B) --------------------------------------------------------
void __thiscall sub_42D46B(struct _RTL_CRITICAL_SECTION *this)
{
  if ( this[1].LockCount != 2 )
    DeleteCriticalSection(this);
}

//----- (0042D4B5) --------------------------------------------------------
void __thiscall sub_42D4B5(int this)
{
  LPCRITICAL_SECTION lpCriticalSection; // [sp+0h] [bp-4h]@1

  lpCriticalSection = (LPCRITICAL_SECTION)this;
  if ( *(_DWORD *)(this + 28) == 2 )
  {
    if ( InterlockedExchange((volatile LONG *)(this + 24), 1) )
      sub_42D51F((LONG)lpCriticalSection);
  }
  else
  {
    EnterCriticalSection((LPCRITICAL_SECTION)this);
  }
}

//----- (0042D4F0) --------------------------------------------------------
void __thiscall sub_42D4F0(int this)
{
  if ( *(_DWORD *)(this + 28) == 2 )
    InterlockedExchange((volatile LONG *)(this + 24), 0);
  else
    LeaveCriticalSection((LPCRITICAL_SECTION)this);
}

//----- (0042D51F) --------------------------------------------------------
LONG __thiscall sub_42D51F(LONG this)
{
  LONG result; // eax@1
  LONG v2; // [sp+Ch] [bp-8h]@1
  signed int v3; // [sp+10h] [bp-4h]@2
  signed int v4; // [sp+10h] [bp-4h]@6

  v2 = this;
  result = this;
  if ( *(_DWORD *)(this + 28) == 2 )
  {
    v3 = 4000;
    while ( --v3 >= 0 )
    {
      result = InterlockedExchange((volatile LONG *)(v2 + 24), 1);
      if ( !result )
        return result;
      _mm_pause();
    }
    v4 = 4000;
    while ( --v4 >= 0 )
    {
      SwitchToThread();
      result = InterlockedExchange((volatile LONG *)(v2 + 24), 1);
      if ( !result )
        return result;
    }
    do
    {
      Sleep(0x3E8u);
      result = InterlockedExchange((volatile LONG *)(v2 + 24), 1);
    }
    while ( result );
  }
  return result;
}

//----- (0042D5C4) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION *__thiscall sub_42D5C4(struct _RTL_CRITICAL_SECTION *this)
{
  struct _RTL_CRITICAL_SECTION *lpCriticalSection; // ST10_4@1

  lpCriticalSection = this;
  this[1].LockCount = 0;
  this[1].DebugInfo = (PRTL_CRITICAL_SECTION_DEBUG)CreateSemaphoreA(0, 1, 1, 0);
  InitializeCriticalSection(lpCriticalSection);
  return lpCriticalSection;
}

//----- (0042D5FA) --------------------------------------------------------
void __thiscall sub_42D5FA(struct _RTL_CRITICAL_SECTION *this)
{
  struct _RTL_CRITICAL_SECTION *lpCriticalSection; // ST04_4@1

  lpCriticalSection = this;
  CloseHandle(this[1].DebugInfo);
  DeleteCriticalSection(lpCriticalSection);
}

//----- (0042D61C) --------------------------------------------------------
void __fastcall sub_42D61C(int a1)
{
  LPCRITICAL_SECTION lpCriticalSection; // [sp+0h] [bp-4h]@1

  lpCriticalSection = (LPCRITICAL_SECTION)a1;
  EnterCriticalSection((LPCRITICAL_SECTION)a1);
  if ( ++lpCriticalSection[1].LockCount == 1 && WaitForSingleObject(lpCriticalSection[1].DebugInfo, 0xFFFFFFFF) )
    sub_42DBFC((int)&unk_47FA00, 3, aReadlockFailed);
  LeaveCriticalSection(lpCriticalSection);
}

//----- (0042D67A) --------------------------------------------------------
void __thiscall sub_42D67A(struct _RTL_CRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION lpCriticalSection; // [sp+0h] [bp-8h]@1
  __int32 PreviousCount; // [sp+4h] [bp-4h]@2

  lpCriticalSection = this;
  EnterCriticalSection(this);
  if ( !--lpCriticalSection[1].LockCount )
    ReleaseSemaphore(lpCriticalSection[1].DebugInfo, 1, &PreviousCount);
  LeaveCriticalSection(lpCriticalSection);
}

//----- (0042D6C6) --------------------------------------------------------
DWORD __thiscall sub_42D6C6(int this)
{
  return WaitForSingleObject(*(HANDLE *)(this + 24), 0xFFFFFFFF);
}

//----- (0042D6FF) --------------------------------------------------------
int __thiscall sub_42D6FF(int this)
{
  int result; // eax@1
  __int32 PreviousCount; // [sp+4h] [bp-4h]@1

  result = ReleaseSemaphore(*(HANDLE *)(this + 24), 1, &PreviousCount);
  if ( PreviousCount )
    result = sub_42DBFC((int)&unk_47FA00, 3, aWriteunlockSem);
  return result;
}

//----- (0042D748) --------------------------------------------------------
int sub_42D748()
{
  return atexit(sub_402150);
}

//----- (0042D76F) --------------------------------------------------------
int sub_42D76F()
{
  return sub_42D920((int)&unk_47FA00, 128, aWinlog);
}

//----- (0042D788) --------------------------------------------------------
int sub_42D788()
{
  return atexit(sub_42D79A);
}

//----- (0042D79A) --------------------------------------------------------
void __cdecl sub_42D79A()
{
  sub_42D8D0((int)&unk_47FA00);
}

//----- (0042D7B8) --------------------------------------------------------
int sub_42D7B8()
{
  return sub_42DF47((int)&unk_47FB68, aUse);
}

//----- (0042D7CC) --------------------------------------------------------
int sub_42D7CC()
{
  return atexit(sub_42D7DE);
}

//----- (0042D7DE) --------------------------------------------------------
void __cdecl sub_42D7DE()
{
  sub_42DF8F((int)&unk_47FB68);
}

//----- (0042D7FC) --------------------------------------------------------
int sub_42D7FC()
{
  return sub_42DF47((int)&unk_47FDD8, aAct);
}

//----- (0042D810) --------------------------------------------------------
int sub_42D810()
{
  return atexit(sub_42D822);
}

//----- (0042D822) --------------------------------------------------------
void __cdecl sub_42D822()
{
  sub_42DF8F((int)&unk_47FDD8);
}

//----- (0042D840) --------------------------------------------------------
int sub_42D840()
{
  return sub_42DF47((int)&unk_47F8C8, aErr);
}

//----- (0042D854) --------------------------------------------------------
int sub_42D854()
{
  return atexit(sub_42D866);
}

//----- (0042D866) --------------------------------------------------------
void __cdecl sub_42D866()
{
  sub_42DF8F((int)&unk_47F8C8);
}

//----- (0042D884) --------------------------------------------------------
_DWORD *sub_42D884()
{
  return sub_42E261(&unk_47FCA0, aLog_0);
}

//----- (0042D898) --------------------------------------------------------
int sub_42D898()
{
  return atexit(sub_42D8AA);
}

//----- (0042D8AA) --------------------------------------------------------
void __cdecl sub_42D8AA()
{
  sub_42E2C4(&unk_47FCA0);
}

//----- (0042D8D0) --------------------------------------------------------
void __thiscall sub_42D8D0(int this)
{
  int v1; // [sp+0h] [bp-8h]@1

  v1 = this;
  *(_DWORD *)this = &off_45F854;
  sub_43CA18(*(LPVOID *)(this + 20));
  DeleteCriticalSection((LPCRITICAL_SECTION)(v1 + 24));
  if ( *(_DWORD *)(v1 + 80) )
    fclose(*(FILE **)(v1 + 80));
}
// 45F854: using guessed type int (__stdcall *off_45F854)(int);

//----- (0042D920) --------------------------------------------------------
int __thiscall sub_42D920(int this, int a2, char *a3)
{
  int v3; // ST0C_4@1

  v3 = this;
  *(_DWORD *)this = &off_45F854;
  *(_DWORD *)(this + 12) = a2;
  *(_DWORD *)(this + 20) = operator new(520 * a2);
  memset(*(void **)(v3 + 20), 0, 520 * a2);
  *(_DWORD *)(v3 + 16) = 0;
  InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)(v3 + 24), 0xFA0u);
  *(_DWORD *)(v3 + 72) = 0;
  *(_BYTE *)(v3 + 8) = 0;
  strcpy((char *)(v3 + 92), a3);
  return v3;
}
// 45F854: using guessed type int (__stdcall *off_45F854)(int);

//----- (0042D9D3) --------------------------------------------------------
BOOL __thiscall sub_42D9D3(int this)
{
  BOOL result; // eax@1
  int v2; // [sp+0h] [bp-60h]@1
  struct tagPAINTSTRUCT Paint; // [sp+4h] [bp-5Ch]@2
  HDC hdc; // [sp+44h] [bp-1Ch]@2
  int y; // [sp+48h] [bp-18h]@5
  int v6; // [sp+4Ch] [bp-14h]@5
  RECT rc; // [sp+50h] [bp-10h]@8

  v2 = this;
  result = this;
  if ( *(_BYTE *)(this + 8) )
  {
    hdc = BeginPaint(*(HWND *)(this + 4), &Paint);
    if ( *(_DWORD *)(v2 + 72) )
    {
      SelectObject(hdc, *(HGDIOBJ *)(v2 + 72));
    }
    else
    {
      *(_DWORD *)(v2 + 72) = GetStockObject(16);
      SelectObject(hdc, *(HGDIOBJ *)(v2 + 72));
      GetClientRect(*(HWND *)(v2 + 4), (LPRECT)(v2 + 48));
      *(_DWORD *)(v2 + 76) = GetStockObject(0);
      GetTextExtentPoint32A(hdc, String, 1, (LPSIZE)(v2 + 64));
    }
    y = *(_DWORD *)(v2 + 60);
    v6 = *(_DWORD *)(v2 + 16);
    do
    {
      y -= *(_DWORD *)(v2 + 68);
      v6 = (*(_DWORD *)(v2 + 12) - 1) & (v6 - 1);
      if ( *(_DWORD *)(v2 + 20) + 520 * v6 != -4 )
      {
        SetTextColor(hdc, *(&color + *(_DWORD *)(*(_DWORD *)(v2 + 20) + 520 * v6)));
        TextOutA(
          hdc,
          0,
          y,
          (LPCSTR)(*(_DWORD *)(v2 + 20) + 520 * v6 + 4),
          *(_DWORD *)(*(_DWORD *)(v2 + 20) + 520 * v6 + 516));
      }
      rc.left = *(_DWORD *)(v2 + 64) * *(_DWORD *)(*(_DWORD *)(v2 + 20) + 520 * v6 + 516);
      rc.right = *(_DWORD *)(v2 + 56);
      rc.top = y;
      rc.bottom = *(_DWORD *)(v2 + 68) + y;
      FillRect(hdc, &rc, *(HBRUSH *)(v2 + 76));
    }
    while ( y >= 0 );
    result = EndPaint(*(HWND *)(v2 + 4), &Paint);
  }
  return result;
}

//----- (0042DB8D) --------------------------------------------------------
BOOL __thiscall sub_42DB8D(int this, int a2, BOOL a3)
{
  BOOL result; // eax@1

  *(_DWORD *)(this + 56) = a2;
  result = a3;
  *(_DWORD *)(this + 60) = a3;
  if ( *(_BYTE *)(this + 8) )
    result = InvalidateRect(*(HWND *)(this + 4), 0, 0);
  return result;
}

//----- (0042DBC9) --------------------------------------------------------
BOOL __thiscall sub_42DBC9(int this, char a2)
{
  BOOL result; // eax@1

  *(_BYTE *)(this + 8) = a2;
  result = *(_BYTE *)(this + 8);
  if ( *(_BYTE *)(this + 8) )
    result = InvalidateRect(*(HWND *)(this + 4), 0, 0);
  return result;
}

//----- (0042DBFC) --------------------------------------------------------
int sub_42DBFC(int a1, int a2, char *a3, ...)
{
  int result; // eax@1
  char v4; // [sp+0h] [bp-510h]@5
  char v5; // [sp+100h] [bp-410h]@6
  char v6; // [sp+114h] [bp-3FCh]@6
  unsigned int v7; // [sp+500h] [bp-10h]@6
  va_list v8; // [sp+504h] [bp-Ch]@6
  time_t v9; // [sp+508h] [bp-8h]@2
  struct tm *v10; // [sp+50Ch] [bp-4h]@2
  va_list va; // [sp+524h] [bp+14h]@1

  va_start(va, a3);
  result = a1;
  if ( *(_BYTE *)(a1 + 8) )
  {
    v9 = time(0);
    v10 = localtime(&v9);
    if ( (v10->tm_mday != *(_DWORD *)(a1 + 84) || v10->tm_hour != *(_DWORD *)(a1 + 88)) && *(_DWORD *)(a1 + 80) )
    {
      fclose(*(FILE **)(a1 + 80));
      sprintf(&v4, aS04d02d02d_02d, a1 + 100, v10->tm_year + 1900, v10->tm_mon + 1, v10->tm_mday, v10->tm_hour, a1 + 92);
      *(_DWORD *)(a1 + 80) = fopen(&v4, aA);
      *(_DWORD *)(a1 + 84) = v10->tm_mday;
      *(_DWORD *)(a1 + 88) = v10->tm_hour;
    }
    sprintf(
      &v5,
      a02d_02d_02d02d,
      v10->tm_year + 1900,
      v10->tm_mon + 1,
      v10->tm_mday,
      v10->tm_hour,
      v10->tm_min,
      v10->tm_sec);
    v8 = va;
    result = vsprintf(&v6, a3, va);
    v7 = result;
    v8 = 0;
    if ( result > 0 )
    {
      v7 += 20;
      if ( v7 > 0x1FE )
        v7 = 510;
      EnterCriticalSection((LPCRITICAL_SECTION)(a1 + 24));
      *(_DWORD *)(*(_DWORD *)(a1 + 20) + 520 * *(_DWORD *)(a1 + 16)) = a2;
      memcpy((void *)(*(_DWORD *)(a1 + 20) + 520 * *(_DWORD *)(a1 + 16) + 4), &v5, v7 + 1);
      *(_DWORD *)(*(_DWORD *)(a1 + 20) + 520 * (*(_DWORD *)(a1 + 16))++ + 516) = v7;
      *(_DWORD *)(a1 + 16) &= *(_DWORD *)(a1 + 12) - 1;
      LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 24));
      if ( *(_DWORD *)(a1 + 80) )
        fprintf(*(FILE **)(a1 + 80), aS_4, &v5);
      result = *(_BYTE *)(a1 + 8);
      if ( *(_BYTE *)(a1 + 8) )
        result = InvalidateRect(*(HWND *)(a1 + 4), 0, 0);
    }
  }
  return result;
}

//----- (0042DE5D) --------------------------------------------------------
struct tm *__thiscall sub_42DE5D(void *this, char *a2)
{
  void *v2; // ST20_4@1
  struct tm *result; // eax@1
  time_t v4; // [sp+4h] [bp-108h]@1
  struct tm *v5; // [sp+8h] [bp-104h]@1
  char v6; // [sp+Ch] [bp-100h]@1

  v2 = this;
  v4 = time(0);
  v5 = localtime(&v4);
  strcpy((char *)v2 + 100, a2);
  sprintf(
    &v6,
    aS04d02d02d_0_0,
    (char *)v2 + 100,
    v5->tm_year + 1900,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    (char *)v2 + 92);
  *((_DWORD *)v2 + 20) = fopen(&v6, aA_0);
  *((_DWORD *)v2 + 21) = v5->tm_mday;
  result = v5;
  *((_DWORD *)v2 + 22) = v5->tm_hour;
  return result;
}

//----- (0042DF47) --------------------------------------------------------
int __thiscall sub_42DF47(int this, char *a2)
{
  int v2; // ST08_4@1

  v2 = this;
  *(_DWORD *)this = off_45F858;
  InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)(this + 4), 0xFA0u);
  *(_DWORD *)(v2 + 28) = -1;
  strcpy((char *)(v2 + 40), a2);
  return v2;
}
// 45F858: using guessed type int (__cdecl *off_45F858[2])(int, int, char *, char);

//----- (0042DF8F) --------------------------------------------------------
void __thiscall sub_42DF8F(int this)
{
  int v1; // [sp+0h] [bp-4h]@1

  v1 = this;
  *(_DWORD *)this = off_45F858;
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 4));
  if ( *(_DWORD *)(v1 + 28) != -1 )
    CloseHandle(*(HANDLE *)(v1 + 28));
}
// 45F858: using guessed type int (__cdecl *off_45F858[2])(int, int, char *, char);

//----- (0042DFC6) --------------------------------------------------------
struct tm *__thiscall sub_42DFC6(void *this, char *a2)
{
  struct tm *result; // eax@3
  void *v3; // [sp+0h] [bp-10Ch]@1
  time_t v4; // [sp+4h] [bp-108h]@1
  struct tm *v5; // [sp+8h] [bp-104h]@1
  CHAR FileName; // [sp+Ch] [bp-100h]@1

  v3 = this;
  v4 = time(0);
  v5 = localtime(&v4);
  strcpy((char *)v3 + 48, a2);
  sprintf(
    &FileName,
    aS04d02d02d_0_1,
    (char *)v3 + 48,
    v5->tm_year + 1900,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    (char *)v3 + 40);
  *((_DWORD *)v3 + 7) = CreateFileA(&FileName, 0x40000000u, 1u, 0, 4u, 0x80u, 0);
  if ( *((_DWORD *)v3 + 7) != -1 )
    SetFilePointer(*((HANDLE *)v3 + 7), 0, 0, 2u);
  *((_DWORD *)v3 + 8) = v5->tm_mday;
  result = v5;
  *((_DWORD *)v3 + 9) = v5->tm_hour;
  return result;
}

//----- (0042E0DD) --------------------------------------------------------
int sub_42E0DD(int a1, int a2, char *a3, ...)
{
  int result; // eax@7
  DWORD v4; // eax@9
  HANDLE hObject; // [sp+0h] [bp-51Ch]@4
  CHAR FileName; // [sp+4h] [bp-518h]@4
  LONG Value; // [sp+104h] [bp-418h]@4
  char Buffer; // [sp+108h] [bp-414h]@7
  int v9; // [sp+508h] [bp-14h]@7
  va_list v10; // [sp+50Ch] [bp-10h]@7
  DWORD NumberOfBytesWritten; // [sp+510h] [bp-Ch]@9
  time_t v12; // [sp+514h] [bp-8h]@1
  struct tm *v13; // [sp+518h] [bp-4h]@1
  va_list va; // [sp+530h] [bp+14h]@1

  va_start(va, a3);
  v12 = time(0);
  v13 = localtime(&v12);
  EnterCriticalSection((LPCRITICAL_SECTION)(a1 + 4));
  if ( (v13->tm_mday != *(_DWORD *)(a1 + 32) || v13->tm_hour != *(_DWORD *)(a1 + 36)) && *(_DWORD *)(a1 + 28) != -1 )
  {
    sprintf(
      &FileName,
      aS04d02d02d_0_2,
      a1 + 48,
      v13->tm_year + 1900,
      v13->tm_mon + 1,
      v13->tm_mday,
      v13->tm_hour,
      a1 + 40);
    Value = (LONG)CreateFileA(&FileName, 0x40000000u, 1u, 0, 2u, 0x80u, 0);
    hObject = (HANDLE)InterlockedExchange((volatile LONG *)(a1 + 28), Value);
    if ( hObject )
      CloseHandle(hObject);
    *(_DWORD *)(a1 + 32) = v13->tm_mday;
    *(_DWORD *)(a1 + 36) = v13->tm_hour;
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 4));
  v10 = va;
  result = vsprintf(&Buffer, a3, va);
  v9 = result;
  v10 = 0;
  if ( result > 0 && *(_DWORD *)(a1 + 28) != -1 )
  {
    v4 = strlen(&Buffer);
    result = WriteFile(*(HANDLE *)(a1 + 28), &Buffer, v4, &NumberOfBytesWritten, 0);
  }
  return result;
}

//----- (0042E261) --------------------------------------------------------
_DWORD *__thiscall sub_42E261(_DWORD *this, char *a2)
{
  _DWORD *v2; // ST04_4@1
  struct tm *v3; // eax@1
  int v4; // ST08_4@1
  time_t v6; // [sp+8h] [bp-8h]@1
  struct tm *v7; // [sp+Ch] [bp-4h]@1

  v2 = this;
  sub_42DF47((int)this, a2);
  *v2 = &off_45F85C;
  v6 = time(0);
  v3 = localtime(&v6);
  v7 = v3;
  v4 = v3->tm_min >= 30;
  return v2;
}
// 45F85C: using guessed type int (__cdecl *off_45F85C)(int, int, char *, char);

//----- (0042E2C4) --------------------------------------------------------
void __thiscall sub_42E2C4(void *this)
{
  *(_DWORD *)this = &off_45F85C;
  sub_42DF8F((int)this);
}
// 45F85C: using guessed type int (__cdecl *off_45F85C)(int, int, char *, char);

//----- (0042E2E0) --------------------------------------------------------
int sub_42E2E0(int a1, int a2, char *a3, ...)
{
  int result; // eax@8
  DWORD v4; // eax@10
  HANDLE hObject; // [sp+0h] [bp-520h]@4
  CHAR FileName; // [sp+4h] [bp-51Ch]@4
  LONG Value; // [sp+104h] [bp-41Ch]@4
  char Buffer; // [sp+108h] [bp-418h]@8
  int v9; // [sp+508h] [bp-18h]@8
  va_list v10; // [sp+50Ch] [bp-14h]@8
  DWORD NumberOfBytesWritten; // [sp+510h] [bp-10h]@10
  int v12; // [sp+514h] [bp-Ch]@1
  time_t v13; // [sp+518h] [bp-8h]@1
  struct tm *v14; // [sp+51Ch] [bp-4h]@1
  va_list va; // [sp+534h] [bp+14h]@1

  va_start(va, a3);
  v13 = time(0);
  v14 = localtime(&v13);
  v12 = 0;
  v12 = v14->tm_min >= 30;
  EnterCriticalSection((LPCRITICAL_SECTION)(a1 + 4));
  if ( v14->tm_mday != *(_DWORD *)(a1 + 32) || v14->tm_hour != *(_DWORD *)(a1 + 36) || v12 != *(_DWORD *)(a1 + 308) )
  {
    sprintf(
      &FileName,
      aS04d02d02d1000,
      a1 + 48,
      v14->tm_year + 1900,
      v14->tm_mon + 1,
      v14->tm_mday,
      v14->tm_hour,
      v12,
      a1 + 40);
    Value = (LONG)CreateFileA(&FileName, 0x40000000u, 1u, 0, 2u, 0x80u, 0);
    hObject = (HANDLE)InterlockedExchange((volatile LONG *)(a1 + 28), Value);
    if ( hObject && hObject != (HANDLE)-1 )
      CloseHandle(hObject);
    *(_DWORD *)(a1 + 32) = v14->tm_mday;
    *(_DWORD *)(a1 + 36) = v14->tm_hour;
    *(_DWORD *)(a1 + 308) = v12;
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 4));
  v10 = va;
  result = vsprintf(&Buffer, a3, va);
  v9 = result;
  v10 = 0;
  if ( result > 0 && *(_DWORD *)(a1 + 28) != -1 )
  {
    v4 = strlen(&Buffer);
    result = WriteFile(*(HANDLE *)(a1 + 28), &Buffer, v4, &NumberOfBytesWritten, 0);
  }
  return result;
}

//----- (0042E49E) --------------------------------------------------------
int __thiscall sub_42E49E(void *this, char *a2)
{
  int result; // eax@6
  int v3; // [sp+0h] [bp-10Ch]@1
  time_t v4; // [sp+4h] [bp-108h]@1
  struct tm *v5; // [sp+8h] [bp-104h]@1
  CHAR FileName; // [sp+Ch] [bp-100h]@2

  v3 = (int)this;
  v4 = time(0);
  v5 = localtime(&v4);
  strcpy((char *)(v3 + 48), a2);
  if ( v5->tm_min >= 30 )
  {
    sprintf(&FileName, aS04d02d02d10_1, v3 + 48, v5->tm_year + 1900, v5->tm_mon + 1, v5->tm_mday, v5->tm_hour, v3 + 40);
    *(_DWORD *)(v3 + 308) = 1;
  }
  else
  {
    sprintf(&FileName, aS04d02d02d10_0, v3 + 48, v5->tm_year + 1900, v5->tm_mon + 1, v5->tm_mday, v5->tm_hour, v3 + 40);
    *(_DWORD *)(v3 + 308) = 0;
  }
  *(_DWORD *)(v3 + 28) = CreateFileA(&FileName, 0x40000000u, 1u, 0, 4u, 0x80u, 0);
  if ( *(_DWORD *)(v3 + 28) != -1 )
    SetFilePointer(*(HANDLE *)(v3 + 28), 0, 0, 2u);
  *(_DWORD *)(v3 + 32) = v5->tm_mday;
  result = v3;
  *(_DWORD *)(v3 + 36) = v5->tm_hour;
  return result;
}

//----- (0042E649) --------------------------------------------------------
int sub_42E649()
{
  return atexit(sub_402150);
}

//----- (0042E660) --------------------------------------------------------
void *__thiscall sub_42E660(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_42D8D0((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0042E69F) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION *sub_42E69F()
{
  return sub_42D5C4((struct _RTL_CRITICAL_SECTION *)&unk_47FF10);
}

//----- (0042E6AE) --------------------------------------------------------
int sub_42E6AE()
{
  return atexit(sub_42E6C0);
}

//----- (0042E6C0) --------------------------------------------------------
void __cdecl sub_42E6C0()
{
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)&unk_47FF10);
}

//----- (0042E6CF) --------------------------------------------------------
void __stdcall sub_42E6CF(PVOID a1, BOOLEAN a2)
{
  SOCKET s; // ST10_4@4
  int v3; // ST14_4@4
  int v4; // ST0C_4@6
  int v5; // [sp+Ch] [bp-14h]@4
  struct sockaddr name; // [sp+10h] [bp-10h]@4

  if ( dword_48017C )
    DeleteTimerQueueTimer(0, dword_48017C, 0);
  dword_48017C = 0;
  if ( byte_480179 == 1 )
  {
    s = socket(2, 1, 0);
    name.sa_family = 2;
    *(_DWORD *)&name.sa_data[2] = dword_4785AC;
    *(_WORD *)&name.sa_data[0] = htons(word_4785B0);
    v3 = connect(s, &name, 16);
    v5 = sub_42EC33(s);
    sub_42D3E0(v5, dword_4785AC);
    if ( v3 == -1 )
    {
      sub_41D61F(v5);
      sub_4180B3(v5);
    }
    else
    {
      sub_42D6C6((int)&unk_47FF10);
      v4 = dword_481704;
      dword_481704 = v5;
      byte_480179 = 0;
      byte_4785A8 = 1;
      sub_41D687(v5, ExistingCompletionPort);
      sub_4180B3(v4);
      sub_42D6FF((int)&unk_47FF10);
    }
  }
}
// 4785A8: using guessed type char byte_4785A8;
// 4785AC: using guessed type int dword_4785AC;
// 480179: using guessed type char byte_480179;
// 481704: using guessed type int dword_481704;

//----- (0042E7E3) --------------------------------------------------------
int sub_42E7E3()
{
  return `eh vector constructor iterator'(&unk_47FF38, 0x24u, 16, (int)sub_42F3E0, unknown_libname_186);
}

//----- (0042E800) --------------------------------------------------------
int sub_42E800()
{
  return atexit(sub_42E812);
}

//----- (0042E812) --------------------------------------------------------
void __cdecl sub_42E812()
{
  if ( !(byte_480178 & 1) )
  {
    byte_480178 |= 1u;
    `eh vector destructor iterator'(&unk_47FF38, 0x24u, 16, unknown_libname_186);
  }
}
// 480178: using guessed type char byte_480178;

//----- (0042E856) --------------------------------------------------------
void sub_42E856()
{
  ;
}

//----- (0042E85B) --------------------------------------------------------
int sub_42E85B()
{
  return atexit(sub_42E86D);
}

//----- (0042E86D) --------------------------------------------------------
void __cdecl sub_42E86D()
{
  sub_42F430();
}

//----- (0042E87C) --------------------------------------------------------
DNameNode *sub_42E87C()
{
  DNameNode *v1; // [sp+0h] [bp-20h]@4
  DNameNode *v2; // [sp+4h] [bp-1Ch]@3
  char *v3; // [sp+Ch] [bp-14h]@1
  DNameNode *v4; // [sp+10h] [bp-10h]@1

  v3 = (char *)&unk_47FF38 + 36 * (InterlockedIncrement(&dword_46CB44) & 0xF);
  sub_42D4B5((int)(v3 + 4));
  v4 = *(DNameNode **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = *((_DWORD *)v4 + 2);
    sub_42D4F0((int)(v3 + 4));
  }
  else
  {
    sub_42D4F0((int)(v3 + 4));
    v2 = (DNameNode *)unknown_libname_49(0x14u);
    if ( v2 )
      v1 = sub_42F440(v2);
    else
      v1 = 0;
    v4 = v1;
  }
  return v4;
}

//----- (0042E93E) --------------------------------------------------------
void sub_42E93E()
{
  char *v0; // [sp+Ch] [bp-Ch]@3
  int v1; // [sp+10h] [bp-8h]@4
  signed int i; // [sp+14h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v0 = (char *)&unk_47FF38 + 36 * i;
    sub_42D4B5((int)&unk_47FF38 + 36 * i + 4);
    while ( 1 )
    {
      v1 = *(_DWORD *)v0;
      if ( !*(_DWORD *)v0 )
        break;
      *(_DWORD *)v0 = *(_DWORD *)(v1 + 8);
      if ( v1 )
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
    }
    sub_42D4F0((int)(v0 + 4));
  }
}

//----- (0042E9CC) --------------------------------------------------------
void __thiscall sub_42E9CC(_DWORD *this)
{
  _DWORD *v1; // ST04_4@1
  char *v2; // ST08_4@1

  v1 = this;
  v2 = (char *)&unk_47FF38 + 36 * (InterlockedDecrement(&dword_480180) & 0xF);
  sub_42D4B5((int)(v2 + 4));
  v1[2] = *(_DWORD *)v2;
  *(_DWORD *)v2 = v1;
  sub_42D4F0((int)(v2 + 4));
}

//----- (0042EA1B) --------------------------------------------------------
void __cdecl sub_42EA1B(int a1, int a2)
{
  int v2; // ecx@0
  int v3; // [sp+Ch] [bp-20h]@1

  v3 = v2;
  if ( (*(int (__cdecl **)(_DWORD, int))(v2 + 16))(*(_DWORD *)(v2 + 8), *(_DWORD *)(v2 + 12) + a2 + 5) & 0xFF )
    sub_41D61F(*(_DWORD *)(v3 + 8));
  sub_4180B3(*(_DWORD *)(v3 + 8));
  sub_41E170(*(_DWORD *)(v3 + 12));
  InterlockedDecrement(&dword_47FF34);
  sub_42E9CC((_DWORD *)v3);
}

//----- (0042EB08) --------------------------------------------------------
char sub_42EB08()
{
  sub_42DBFC((int)&unk_47FA00, 2, aCallDummypac_0);
  return 0;
}

//----- (0042EB23) --------------------------------------------------------
void *__thiscall sub_42EB23(void *this)
{
  int v1; // ST10_4@1

  v1 = (int)this;
  *(_DWORD *)this = &off_45F8B4;
  sub_42DBFC((int)&unk_47FA00, 1, aDeleteLogsocke, this);
  return sub_41D583(v1);
}
// 45F8B4: using guessed type int (__stdcall *off_45F8B4)(int);

//----- (0042EB84) --------------------------------------------------------
int __thiscall sub_42EB84(DNameNode *this, int a2)
{
  int v2; // ST04_4@1

  v2 = (int)this;
  sub_41D4D0(this, a2);
  *(_DWORD *)v2 = &off_45F8B4;
  *(_DWORD *)(v2 + 112) = dword_4785AC;
  *(_DWORD *)(v2 + 132) = 0;
  *(_DWORD *)(v2 + 104) = 0;
  sub_418095(v2);
  *(_WORD *)(v2 + 116) = 2;
  *(_DWORD *)(v2 + 120) = dword_4785AC;
  *(_WORD *)(v2 + 118) = htons(word_4785B0);
  *(_DWORD *)(v2 + 108) = &off_46CB48;
  return v2;
}
// 45F8B4: using guessed type int (__stdcall *off_45F8B4)(int);
// 46CB48: using guessed type void *off_46CB48;
// 4785AC: using guessed type int dword_4785AC;

//----- (0042EC33) --------------------------------------------------------
int __cdecl sub_42EC33(int a1)
{
  int v2; // [sp+0h] [bp-18h]@2
  DNameNode *v3; // [sp+4h] [bp-14h]@1

  v3 = (DNameNode *)unknown_libname_49(0x88u);
  if ( v3 )
    v2 = sub_42EB84(v3, a1);
  else
    v2 = 0;
  return v2;
}

//----- (0042ECA1) --------------------------------------------------------
LONG __thiscall sub_42ECA1(int this)
{
  LONG result; // eax@2
  int v2; // ecx@14
  char *v3; // eax@17
  int v4; // [sp+0h] [bp-18h]@1
  int v5; // [sp+8h] [bp-10h]@1
  int v6; // [sp+Ch] [bp-Ch]@1
  signed int v7; // [sp+10h] [bp-8h]@9
  signed __int32 dwNumberOfBytesTransferred; // [sp+14h] [bp-4h]@1

  v4 = this;
  dwNumberOfBytesTransferred = 0;
  v6 = *(_DWORD *)(*(_DWORD *)(this + 72) + 8196);
  v5 = *(_DWORD *)(this + 72) + 4;
  if ( *(_DWORD *)(this + 104) == 2 )
  {
    result = sub_41D61F(this);
  }
  else
  {
    while ( 1 )
    {
      if ( dwNumberOfBytesTransferred >= v6 )
        return sub_41D995(this, 0);
      if ( *(_DWORD *)(this + 104) )
        break;
      if ( dwNumberOfBytesTransferred + 3 > v6 )
        return sub_41D995(this, v6 - dwNumberOfBytesTransferred);
      *(_DWORD *)(this + 100) = *(_BYTE *)(dwNumberOfBytesTransferred + v5)
                              + (*(_BYTE *)(dwNumberOfBytesTransferred + v5 + 1) << 8)
                              + 1
                              - dword_478558;
      if ( *(_DWORD *)(this + 100) <= 0 || *(_DWORD *)(this + 100) > 0x2000 )
      {
        v7 = 1;
        sub_42DBFC((int)&unk_47FA00, 3, aDBadPacketSi_1, *(_DWORD *)(this + 88), *(_DWORD *)(this + 100));
        goto LABEL_17;
      }
      dwNumberOfBytesTransferred += 2;
      *(_DWORD *)(this + 104) = 1;
    }
    if ( *(_DWORD *)(this + 104) == 1 )
    {
      if ( *(_DWORD *)(this + 100) + dwNumberOfBytesTransferred > v6 )
        return sub_41D995(this, v6 - dwNumberOfBytesTransferred);
      v2 = *(_BYTE *)(dwNumberOfBytesTransferred + v5);
      sub_42DBFC((int)&unk_47FA00, 3, aUnknownProto_1, v2);
      v7 = 2;
    }
    else
    {
      v7 = 3;
    }
LABEL_17:
    v3 = sub_42F2AE(v4);
    sub_42E0DD((int)&unk_47F8C8, 0, aLogdServerConn, v3, v7);
    result = sub_41D61F(v4);
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (0042EEE1) --------------------------------------------------------
int __thiscall sub_42EEE1(void *this)
{
  int v1; // ST20_4@1

  v1 = (int)this;
  sub_42F131((int)this, (int)aCd_0, 1);
  sub_42F131(v1, (int)aCdd_0, 3);
  byte_48017A = 1;
  return (*(int (__thiscall **)(int))(*(_DWORD *)v1 + 32))(v1);
}
// 48017A: using guessed type char byte_48017A;

//----- (0042EFA9) --------------------------------------------------------
LONG __cdecl sub_42EFA9(int a1, int a2, char a3)
{
  LONG result; // eax@5
  char *v4; // [sp+10h] [bp-24h]@6
  _DWORD *v5; // [sp+18h] [bp-1Ch]@6

  sub_418095(a1);
  if ( *(_DWORD *)(a1 + 104) != 2 && byte_480179 != 1 && *(_DWORD *)(a1 + 88) != -1 && byte_48017A )
  {
    v5 = sub_417DD3();
    v4 = sub_43A690((char *)v5 + 6, 8190, a2, (int)&a3);
    if ( v4 )
    {
      v4 += 2;
      *((_BYTE *)v5 + 4) = (_BYTE)v4;
      *((_BYTE *)v5 + 5) = BYTE1(v4);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_2, *(_DWORD *)(a1 + 88), a2);
    }
    v5[2049] = v4;
    sub_41DB1A(a1, (int)v5);
    result = sub_4180B3(a1);
  }
  else
  {
    sub_42DBFC((int)&unk_47FA00, 1, aLogdsocketCall);
    result = sub_4180B3(a1);
  }
  return result;
}
// 480179: using guessed type char byte_480179;
// 48017A: using guessed type char byte_48017A;

//----- (0042F131) --------------------------------------------------------
LONG __cdecl sub_42F131(int a1, int a2, char a3)
{
  LONG result; // eax@4
  char *v4; // [sp+10h] [bp-24h]@5
  _DWORD *v5; // [sp+18h] [bp-1Ch]@5

  sub_418095(a1);
  if ( *(_DWORD *)(a1 + 104) != 2 && byte_480179 != 1 && *(_DWORD *)(a1 + 88) != -1 )
  {
    v5 = sub_417DD3();
    v4 = sub_43A690((char *)v5 + 6, 8190, a2, (int)&a3);
    if ( v4 )
    {
      v4 += 2;
      *((_BYTE *)v5 + 4) = (_BYTE)v4;
      *((_BYTE *)v5 + 5) = BYTE1(v4);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_3, *(_DWORD *)(a1 + 88), a2);
    }
    v5[2049] = v4;
    sub_41DB1A(a1, (int)v5);
    result = sub_4180B3(a1);
  }
  else
  {
    sub_42DBFC((int)&unk_47FA00, 1, aLogdsocketCa_0);
    result = sub_4180B3(a1);
  }
  return result;
}
// 480179: using guessed type char byte_480179;

//----- (0042F2AE) --------------------------------------------------------
char *__thiscall sub_42F2AE(int this)
{
  return inet_ntoa(*(struct in_addr *)(this + 112));
}

//----- (0042F2D1) --------------------------------------------------------
BOOL __thiscall sub_42F2D1(int this)
{
  _DWORD *Parameter; // ST34_4@1
  int v2; // ST24_4@1
  char *v3; // eax@1
  int v4; // ST28_4@1
  char *v5; // eax@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  time_t v13; // [sp+30h] [bp-4h]@1

  Parameter = (_DWORD *)this;
  byte_480179 = 1;
  byte_4785A8 = 0;
  *(_DWORD *)(this + 104) = 2;
  v13 = time(0);
  qmemcpy(&v7, localtime(&v13), 0x24u);
  v2 = Parameter[22];
  v3 = sub_42F2AE((int)Parameter);
  sub_42DBFC((int)&unk_47FA00, 3, aCloseLogdConne, v3, v2, Parameter);
  v4 = Parameter[22];
  v5 = sub_42F2AE((int)Parameter);
  sub_42E0DD((int)&unk_47F8C8, 0, aDDDDDDMainSe_0, v12 + 1900, v11 + 1, v10, v9, v8, v7, v5, v4);
  sub_418095((int)Parameter);
  return CreateTimerQueueTimer(&dword_48017C, 0, sub_42E6CF, Parameter, dword_4785B4, 0, 0);
}
// 4785A8: using guessed type char byte_4785A8;
// 480179: using guessed type char byte_480179;

//----- (0042F3C3) --------------------------------------------------------
int sub_42F3C3()
{
  return atexit(sub_402150);
}

//----- (0042F3E0) --------------------------------------------------------
int __thiscall sub_42F3E0(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (0042F430) --------------------------------------------------------
void sub_42F430()
{
  sub_42E93E();
}

//----- (0042F440) --------------------------------------------------------
DNameNode *__thiscall sub_42F440(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F860;
  return v1;
}
// 45F860: using guessed type int (__stdcall *off_45F860)(int);

//----- (0042F460) --------------------------------------------------------
void *__thiscall sub_42F460(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_187();
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);
// 42F490: using guessed type int unknown_libname_187(void);

//----- (0042F4B0) --------------------------------------------------------
void *__thiscall sub_42F4B0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_42EB23(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0042F529) --------------------------------------------------------
void __thiscall sub_42F529(int this, char *a2, int a3)
{
  int v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+4h] [bp-Ch]@1
  int i; // [sp+Ch] [bp-4h]@4

  v3 = this;
  v4 = (*(_DWORD *)(this + 16) >> 3) & 0x3F;
  *(_DWORD *)(this + 16) += 8 * a3;
  if ( *(_DWORD *)(this + 16) < (unsigned int)(8 * a3) )
    ++*(_DWORD *)(this + 20);
  *(_DWORD *)(this + 20) += (unsigned int)a3 >> 29;
  if ( a3 < (unsigned int)(64 - v4) )
  {
    i = 0;
  }
  else
  {
    und_memcpy((char *)(this + v4 + 24), a2, 64 - v4);
    sub_42F6C5(v3, v3 + 24);
    for ( i = 64 - v4; i + 63 < (unsigned int)a3; i += 64 )
      sub_42F6C5(v3, (int)&a2[i]);
    v4 = 0;
  }
  und_memcpy((char *)(v3 + v4 + 24), &a2[i], a3 - i);
}

//----- (0042F6C5) --------------------------------------------------------
int __cdecl sub_42F6C5(int a1, int a2)
{
  int v3; // [sp+0h] [bp-50h]@1
  int v4; // [sp+4h] [bp-4Ch]@1
  int v5; // [sp+8h] [bp-48h]@1
  int v6; // [sp+Ch] [bp-44h]@1
  int v7; // [sp+10h] [bp-40h]@1
  int v8; // [sp+14h] [bp-3Ch]@1
  int v9; // [sp+18h] [bp-38h]@1
  int v10; // [sp+1Ch] [bp-34h]@1
  int v11; // [sp+20h] [bp-30h]@1
  int v12; // [sp+24h] [bp-2Ch]@1
  int v13; // [sp+28h] [bp-28h]@1
  int v14; // [sp+2Ch] [bp-24h]@1
  int v15; // [sp+30h] [bp-20h]@1
  int v16; // [sp+34h] [bp-1Ch]@1
  int v17; // [sp+38h] [bp-18h]@1
  int v18; // [sp+3Ch] [bp-14h]@1
  unsigned int v19; // [sp+40h] [bp-10h]@1
  unsigned int v20; // [sp+44h] [bp-Ch]@1
  unsigned int v21; // [sp+48h] [bp-8h]@1
  unsigned int v22; // [sp+4Ch] [bp-4h]@1

  v22 = *(_DWORD *)a1;
  v21 = *(_DWORD *)(a1 + 4);
  v20 = *(_DWORD *)(a1 + 8);
  v19 = *(_DWORD *)(a1 + 12);
  sub_43060E((int)&v3, a2, 0x40u);
  v22 = v22 + v3 + (v19 & ~v21 | v20 & v21) - 680876936;
  v22 = v21 + ((v22 >> 25) | (v22 << 7));
  v19 = v19 + v4 + (v20 & ~v22 | v21 & v22) - 389564586;
  v19 = v22 + ((v19 >> 20) | (v19 << 12));
  v20 += v5 + (v21 & ~v19 | v22 & v19) + 606105819;
  v20 = v19 + ((v20 >> 15) | (v20 << 17));
  v21 = v21 + v6 + (v22 & ~v20 | v19 & v20) - 1044525330;
  v21 = v20 + ((v21 >> 10) | (v21 << 22));
  v22 = v22 + v7 + (v19 & ~v21 | v20 & v21) - 176418897;
  v22 = v21 + ((v22 >> 25) | (v22 << 7));
  v19 += v8 + (v20 & ~v22 | v21 & v22) + 1200080426;
  v19 = v22 + ((v19 >> 20) | (v19 << 12));
  v20 = v20 + v9 + (v21 & ~v19 | v22 & v19) - 1473231341;
  v20 = v19 + ((v20 >> 15) | (v20 << 17));
  v21 = v21 + v10 + (v22 & ~v20 | v19 & v20) - 45705983;
  v21 = v20 + ((v21 >> 10) | (v21 << 22));
  v22 += v11 + (v19 & ~v21 | v20 & v21) + 1770035416;
  v22 = v21 + ((v22 >> 25) | (v22 << 7));
  v19 = v19 + v12 + (v20 & ~v22 | v21 & v22) - 1958414417;
  v19 = v22 + ((v19 >> 20) | (v19 << 12));
  v20 = v20 + v13 + (v21 & ~v19 | v22 & v19) - 42063;
  v20 = v19 + ((v20 >> 15) | (v20 << 17));
  v21 = v21 + v14 + (v22 & ~v20 | v19 & v20) - 1990404162;
  v21 = v20 + ((v21 >> 10) | (v21 << 22));
  v22 += v15 + (v19 & ~v21 | v20 & v21) + 1804603682;
  v22 = v21 + ((v22 >> 25) | (v22 << 7));
  v19 = v19 + v16 + (v20 & ~v22 | v21 & v22) - 40341101;
  v19 = v22 + ((v19 >> 20) | (v19 << 12));
  v20 = v20 + v17 + (v21 & ~v19 | v22 & v19) - 1502002290;
  v20 = v19 + ((v20 >> 15) | (v20 << 17));
  v21 += v18 + (v22 & ~v20 | v19 & v20) + 1236535329;
  v21 = v20 + ((v21 >> 10) | (v21 << 22));
  v22 = v22 + v4 + (~v19 & v20 | v19 & v21) - 165796510;
  v22 = v21 + ((v22 >> 27) | 32 * v22);
  v19 = v19 + v9 + (~v20 & v21 | v20 & v22) - 1069501632;
  v19 = v22 + ((v19 >> 23) | (v19 << 9));
  v20 += v14 + (~v21 & v22 | v21 & v19) + 643717713;
  v20 = v19 + ((v20 >> 18) | (v20 << 14));
  v21 = v21 + v3 + (~v22 & v19 | v22 & v20) - 373897302;
  v21 = v20 + ((v21 >> 12) | (v21 << 20));
  v22 = v22 + v8 + (~v19 & v20 | v19 & v21) - 701558691;
  v22 = v21 + ((v22 >> 27) | 32 * v22);
  v19 += v13 + (~v20 & v21 | v20 & v22) + 38016083;
  v19 = v22 + ((v19 >> 23) | (v19 << 9));
  v20 = v20 + v18 + (~v21 & v22 | v21 & v19) - 660478335;
  v20 = v19 + ((v20 >> 18) | (v20 << 14));
  v21 = v21 + v7 + (~v22 & v19 | v22 & v20) - 405537848;
  v21 = v20 + ((v21 >> 12) | (v21 << 20));
  v22 += v12 + (~v19 & v20 | v19 & v21) + 568446438;
  v22 = v21 + ((v22 >> 27) | 32 * v22);
  v19 = v19 + v17 + (~v20 & v21 | v20 & v22) - 1019803690;
  v19 = v22 + ((v19 >> 23) | (v19 << 9));
  v20 = v20 + v6 + (~v21 & v22 | v21 & v19) - 187363961;
  v20 = v19 + ((v20 >> 18) | (v20 << 14));
  v21 += v11 + (~v22 & v19 | v22 & v20) + 1163531501;
  v21 = v20 + ((v21 >> 12) | (v21 << 20));
  v22 = v22 + v16 + (~v19 & v20 | v19 & v21) - 1444681467;
  v22 = v21 + ((v22 >> 27) | 32 * v22);
  v19 = v19 + v5 + (~v20 & v21 | v20 & v22) - 51403784;
  v19 = v22 + ((v19 >> 23) | (v19 << 9));
  v20 += v10 + (~v21 & v22 | v21 & v19) + 1735328473;
  v20 = v19 + ((v20 >> 18) | (v20 << 14));
  v21 = v21 + v15 + (~v22 & v19 | v22 & v20) - 1926607734;
  v21 = v20 + ((v21 >> 12) | (v21 << 20));
  v22 = v22 + v8 + (v19 ^ v20 ^ v21) - 378558;
  v22 = v21 + ((v22 >> 28) | 16 * v22);
  v19 = v19 + v11 + (v20 ^ v21 ^ v22) - 2022574463;
  v19 = v22 + ((v19 >> 21) | (v19 << 11));
  v20 += v14 + (v21 ^ v22 ^ v19) + 1839030562;
  v20 = v19 + ((v20 >> 16) | (v20 << 16));
  v21 = v21 + v17 + (v22 ^ v19 ^ v20) - 35309556;
  v21 = v20 + ((v21 >> 9) | (v21 << 23));
  v22 = v22 + v4 + (v19 ^ v20 ^ v21) - 1530992060;
  v22 = v21 + ((v22 >> 28) | 16 * v22);
  v19 += v7 + (v20 ^ v21 ^ v22) + 1272893353;
  v19 = v22 + ((v19 >> 21) | (v19 << 11));
  v20 = v20 + v10 + (v21 ^ v22 ^ v19) - 155497632;
  v20 = v19 + ((v20 >> 16) | (v20 << 16));
  v21 = v21 + v13 + (v22 ^ v19 ^ v20) - 1094730640;
  v21 = v20 + ((v21 >> 9) | (v21 << 23));
  v22 += v16 + (v19 ^ v20 ^ v21) + 681279174;
  v22 = v21 + ((v22 >> 28) | 16 * v22);
  v19 = v19 + v3 + (v20 ^ v21 ^ v22) - 358537222;
  v19 = v22 + ((v19 >> 21) | (v19 << 11));
  v20 = v20 + v6 + (v21 ^ v22 ^ v19) - 722521979;
  v20 = v19 + ((v20 >> 16) | (v20 << 16));
  v21 += v9 + (v22 ^ v19 ^ v20) + 76029189;
  v21 = v20 + ((v21 >> 9) | (v21 << 23));
  v22 = v22 + v12 + (v19 ^ v20 ^ v21) - 640364487;
  v22 = v21 + ((v22 >> 28) | 16 * v22);
  v19 = v19 + v15 + (v20 ^ v21 ^ v22) - 421815835;
  v19 = v22 + ((v19 >> 21) | (v19 << 11));
  v20 += v18 + (v21 ^ v22 ^ v19) + 530742520;
  v20 = v19 + ((v20 >> 16) | (v20 << 16));
  v21 = v21 + v5 + (v22 ^ v19 ^ v20) - 995338651;
  v21 = v20 + ((v21 >> 9) | (v21 << 23));
  v22 = v22 + v3 + ((~v19 | v21) ^ v20) - 198630844;
  v22 = v21 + ((v22 >> 26) | (v22 << 6));
  v19 += v10 + ((~v20 | v22) ^ v21) + 1126891415;
  v19 = v22 + ((v19 >> 22) | (v19 << 10));
  v20 = v20 + v17 + ((~v21 | v19) ^ v22) - 1416354905;
  v20 = v19 + ((v20 >> 17) | (v20 << 15));
  v21 = v21 + v8 + ((~v22 | v20) ^ v19) - 57434055;
  v21 = v20 + ((v21 >> 11) | (v21 << 21));
  v22 += v15 + ((~v19 | v21) ^ v20) + 1700485571;
  v22 = v21 + ((v22 >> 26) | (v22 << 6));
  v19 = v19 + v6 + ((~v20 | v22) ^ v21) - 1894986606;
  v19 = v22 + ((v19 >> 22) | (v19 << 10));
  v20 = v20 + v13 + ((~v21 | v19) ^ v22) - 1051523;
  v20 = v19 + ((v20 >> 17) | (v20 << 15));
  v21 = v21 + v4 + ((~v22 | v20) ^ v19) - 2054922799;
  v21 = v20 + ((v21 >> 11) | (v21 << 21));
  v22 += v11 + ((~v19 | v21) ^ v20) + 1873313359;
  v22 = v21 + ((v22 >> 26) | (v22 << 6));
  v19 = v19 + v18 + ((~v20 | v22) ^ v21) - 30611744;
  v19 = v22 + ((v19 >> 22) | (v19 << 10));
  v20 = v20 + v9 + ((~v21 | v19) ^ v22) - 1560198380;
  v20 = v19 + ((v20 >> 17) | (v20 << 15));
  v21 += v16 + ((~v22 | v20) ^ v19) + 1309151649;
  v21 = v20 + ((v21 >> 11) | (v21 << 21));
  v22 = v22 + v7 + ((~v19 | v21) ^ v20) - 145523070;
  v22 = v21 + ((v22 >> 26) | (v22 << 6));
  v19 = v19 + v14 + ((~v20 | v22) ^ v21) - 1120210379;
  v19 = v22 + ((v19 >> 22) | (v19 << 10));
  v20 += v5 + ((~v21 | v19) ^ v22) + 718787259;
  v20 = v19 + ((v20 >> 17) | (v20 << 15));
  v21 = v21 + v12 + ((~v22 | v20) ^ v19) - 343485551;
  v21 = v20 + ((v21 >> 11) | (v21 << 21));
  *(_DWORD *)a1 += v22;
  *(_DWORD *)(a1 + 4) += v21;
  *(_DWORD *)(a1 + 8) += v20;
  *(_DWORD *)(a1 + 12) += v19;
  return sub_4306BB((int)&v3, 0, 0x40u);
}

//----- (0043056E) --------------------------------------------------------
int __cdecl sub_43056E(int a1, int a2, unsigned int a3)
{
  int result; // eax@3
  unsigned int i; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v5 = 0;
  for ( i = 0; i < a3; i += 4 )
  {
    *(_BYTE *)(i + a1) = *(_DWORD *)(a2 + 4 * v5);
    *(_BYTE *)(i + a1 + 1) = *(_WORD *)(a2 + 4 * v5) >> 8;
    *(_BYTE *)(i + a1 + 2) = *(_DWORD *)(a2 + 4 * v5) >> 16;
    *(_BYTE *)(i + a1 + 3) = (unsigned __int16)(*(_DWORD *)(a2 + 4 * v5) >> 16) >> 16;
    result = v5++ + 1;
  }
  return result;
}

//----- (0043060E) --------------------------------------------------------
int __cdecl sub_43060E(int a1, int a2, unsigned int a3)
{
  int result; // eax@3
  unsigned int i; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v5 = 0;
  for ( i = 0; i < a3; i += 4 )
  {
    *(_DWORD *)(a1 + 4 * v5) = (*(_BYTE *)(i + a2 + 3) << 24) | (*(_BYTE *)(i + a2 + 2) << 16) | (*(_BYTE *)(i + a2 + 1) << 8) | *(_BYTE *)(i + a2);
    result = v5++ + 1;
  }
  return result;
}

//----- (004306BB) --------------------------------------------------------
int __cdecl sub_4306BB(int a1, char a2, unsigned int a3)
{
  int result; // eax@3
  unsigned int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < a3; ++i )
  {
    *(_BYTE *)(i + a1) = a2;
    result = i + 1;
  }
  return result;
}

//----- (004306FF) --------------------------------------------------------
void *sub_4306FF()
{
  return sub_43072F(&unk_480184);
}

//----- (0043070E) --------------------------------------------------------
int sub_43070E()
{
  return atexit(sub_430720);
}

//----- (00430720) --------------------------------------------------------
void __cdecl sub_430720()
{
  sub_4307C9(&unk_480184);
}

//----- (0043072F) --------------------------------------------------------
void *__thiscall sub_43072F(void *this)
{
  int v2; // [sp+0h] [bp-20h]@4
  void *v3; // [sp+4h] [bp-1Ch]@1
  void *v4; // [sp+8h] [bp-18h]@3
  signed int i; // [sp+10h] [bp-10h]@1

  v3 = this;
  *(_DWORD *)this = off_45F8E0;
  for ( i = 0; i < 16; ++i )
  {
    v4 = operator new(0x38u);
    if ( v4 )
      v2 = sub_430828((int)v4);
    else
      v2 = 0;
    dword_48018C[i] = v2;
  }
  return v3;
}
// 45F8E0: using guessed type int (__stdcall *off_45F8E0[2])(int);
// 48018C: using guessed type int dword_48018C[];

//----- (004307C9) --------------------------------------------------------
void *__thiscall sub_4307C9(void *this)
{
  void *result; // eax@1
  void *v2; // [sp+Ch] [bp-8h]@3
  signed int i; // [sp+10h] [bp-4h]@1

  result = this;
  *(_DWORD *)this = off_45F8E0;
  for ( i = 0; i < 16; ++i )
  {
    result = (void *)dword_48018C[i];
    v2 = (void *)dword_48018C[i];
    if ( v2 )
      result = sub_431A40(v2, 1);
  }
  return result;
}
// 45F8E0: using guessed type int (__stdcall *off_45F8E0[2])(int);
// 48018C: using guessed type int dword_48018C[];

//----- (00430828) --------------------------------------------------------
int __thiscall sub_430828(int this)
{
  int v1; // ST04_4@1

  v1 = this;
  InitializeCriticalSection((LPCRITICAL_SECTION)(this + 32));
  *(_DWORD *)(v1 + 28) = 0;
  sub_430875((HANDLE *)v1);
  return v1;
}

//----- (00430855) --------------------------------------------------------
void __thiscall sub_430855(void *this)
{
  void *v1; // ST04_4@1

  v1 = this;
  sub_4308CF((int)this);
  DeleteCriticalSection((LPCRITICAL_SECTION)((char *)v1 + 32));
}

//----- (00430875) --------------------------------------------------------
signed int __thiscall sub_430875(HANDLE *this)
{
  signed int result; // eax@2
  HANDLE *v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  *this = HeapCreate(1u, 0x2000u, 0);
  if ( *v2 )
  {
    if ( sub_43097B((int)v2, 1016) )
    {
      result = 1;
    }
    else
    {
      HeapDestroy(*v2);
      *v2 = 0;
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004308CF) --------------------------------------------------------
BOOL __thiscall sub_4308CF(int this)
{
  BOOL result; // eax@1
  int v2; // [sp+0h] [bp-Ch]@1
  int v3; // [sp+4h] [bp-8h]@2
  int i; // [sp+8h] [bp-4h]@2

  v2 = this;
  result = this;
  if ( *(_DWORD *)this )
  {
    v3 = *(_DWORD *)(this + 8);
    for ( i = 0; i < *(_DWORD *)(v2 + 20); ++i )
    {
      VirtualFree(*(LPVOID *)(v3 + 12), 0x200000u, 0x4000u);
      VirtualFree(*(LPVOID *)(v3 + 12), 0, 0x8000u);
      HeapFree(*(HANDLE *)v2, 0, *(LPVOID *)(v3 + 16));
      v3 += 20;
    }
    HeapFree(*(HANDLE *)v2, 0, *(LPVOID *)(v2 + 8));
    result = HeapDestroy(*(HANDLE *)v2);
  }
  return result;
}

//----- (0043097B) --------------------------------------------------------
signed int __thiscall sub_43097B(int this, int a2)
{
  signed int result; // eax@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 8) = HeapAlloc(*(HANDLE *)this, 0, 0x140u);
  if ( *(_DWORD *)(v3 + 8) )
  {
    *(_DWORD *)(v3 + 4) = a2;
    *(_DWORD *)(v3 + 12) = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 24) = 0;
    *(_DWORD *)(v3 + 20) = 0;
    *(_DWORD *)(v3 + 16) = 16;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004309E6) --------------------------------------------------------
_DWORD *__cdecl sub_4309E6(int a1)
{
  int v2; // [sp+0h] [bp-8h]@1
  _DWORD *v3; // [sp+4h] [bp-4h]@1

  v2 = dword_48018C[InterlockedIncrement(&dword_480188) & 0xF];
  v3 = sub_430A34(v2, a1 + 4);
  if ( v3 )
  {
    *v3 = v2;
    ++v3;
  }
  return v3;
}
// 48018C: using guessed type int dword_48018C[];

//----- (00430A34) --------------------------------------------------------
LPVOID __thiscall sub_430A34(int this, SIZE_T dwBytes)
{
  LPVOID result; // eax@3
  SIZE_T v3; // eax@4
  LPVOID v4; // ST10_4@4
  HANDLE *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@2
  SIZE_T dwBytesa; // [sp+10h] [bp+8h]@4

  v5 = (HANDLE *)this;
  if ( dwBytes <= *(_DWORD *)(this + 4)
    && (sub_431A70(this), v6 = sub_430AAB((int)v5, dwBytes), sub_431A90((int)v5), v6) )
  {
    result = (LPVOID)v6;
  }
  else
  {
    v3 = dwBytes + 15;
    LOBYTE(v3) = (dwBytes + 15) & 0xF0;
    dwBytesa = v3;
    sub_431A70((int)v5);
    v4 = HeapAlloc(*v5, 0, dwBytesa);
    sub_431A90((int)v5);
    result = v4;
  }
  return result;
}

//----- (00430AAB) --------------------------------------------------------
int __thiscall sub_430AAB(int this, int a2)
{
  int result; // eax@24
  int v3; // ST38_4@47
  int v4; // edx@49
  int v5; // edx@52
  int v6; // edx@57
  int v7; // [sp+4h] [bp-3Ch]@1
  _DWORD *v8; // [sp+8h] [bp-38h]@27
  unsigned int v9; // [sp+Ch] [bp-34h]@2
  int j; // [sp+10h] [bp-30h]@27
  unsigned int v11; // [sp+14h] [bp-2Ch]@1
  signed int v12; // [sp+18h] [bp-28h]@1
  unsigned int v13; // [sp+1Ch] [bp-24h]@2
  int v14; // [sp+20h] [bp-20h]@1
  signed int v15; // [sp+20h] [bp-20h]@32
  int v16; // [sp+24h] [bp-1Ch]@32
  unsigned int i; // [sp+28h] [bp-18h]@4
  int v18; // [sp+2Ch] [bp-14h]@36
  int v19; // [sp+30h] [bp-10h]@36
  char *v20; // [sp+30h] [bp-10h]@57
  signed int v21; // [sp+38h] [bp-8h]@36
  _DWORD *v22; // [sp+3Ch] [bp-4h]@32

  v7 = this;
  v11 = 20 * *(_DWORD *)(this + 20) + *(_DWORD *)(this + 8);
  v12 = (a2 + 23) & 0xFFFFFFF0;
  v14 = (v12 >> 4) - 1;
  if ( v14 >= 32 )
  {
    v13 = 0;
    v9 = 0xFFFFFFFF >> ((v12 >> 4) - 33);
  }
  else
  {
    v13 = 0xFFFFFFFF >> v14;
    v9 = -1;
  }
  for ( i = *(_DWORD *)(this + 12); i < v11 && !(*(_DWORD *)(i + 4) & v9 | *(_DWORD *)i & v13); i += 20 )
    ;
  if ( i != v11 )
    goto LABEL_64;
  for ( i = *(_DWORD *)(this + 8); i < *(_DWORD *)(this + 12) && !(*(_DWORD *)(i + 4) & v9 | *(_DWORD *)i & v13); i += 20 )
    ;
  if ( i != *(_DWORD *)(this + 12) )
    goto LABEL_64;
  while ( i < v11 && !*(_DWORD *)(i + 8) )
    i += 20;
  if ( i == v11 )
  {
    for ( i = *(_DWORD *)(this + 8); i < *(_DWORD *)(this + 12) && !*(_DWORD *)(i + 8); i += 20 )
      ;
    if ( i == *(_DWORD *)(this + 12) )
    {
      i = sub_430FEE(this);
      if ( !i )
        return 0;
    }
  }
  **(_DWORD **)(i + 16) = sub_431104(i);
  if ( **(_DWORD **)(i + 16) != -1 )
  {
LABEL_64:
    *(_DWORD *)(v7 + 12) = i;
    v8 = *(_DWORD **)(i + 16);
    j = *v8;
    if ( *v8 == -1 || !(v8[j + 49] & v9 | v8[j + 17] & v13) )
    {
      for ( j = 0; !(v8[j + 49] & v9 | v8[j + 17] & v13); ++j )
        ;
    }
    v22 = &v8[129 * j + 81];
    v15 = 0;
    v16 = v8[j + 17] & v13;
    if ( !v16 )
    {
      v15 = 32;
      v16 = v8[j + 49] & v9;
    }
    while ( v16 >= 0 )
    {
      v16 *= 2;
      ++v15;
    }
    v19 = v22[2 * v15 + 1];
    v21 = *(_DWORD *)v19 - v12;
    v18 = (v21 >> 4) - 1;
    if ( v18 > 63 )
      v18 = 63;
    if ( v18 != v15 )
    {
      if ( *(_DWORD *)(v19 + 4) == *(_DWORD *)(v19 + 8) )
      {
        if ( v15 >= 32 )
        {
          v8[j + 49] &= ~(0x80000000 >> (v15 - 32));
          if ( !--*((_BYTE *)v8 + v15 + 4) )
            *(_DWORD *)(i + 4) &= ~(0x80000000 >> (v15 - 32));
        }
        else
        {
          v8[j + 17] &= ~(0x80000000 >> v15);
          if ( !--*((_BYTE *)v8 + v15 + 4) )
            *(_DWORD *)i &= ~(0x80000000 >> v15);
        }
      }
      *(_DWORD *)(*(_DWORD *)(v19 + 8) + 4) = *(_DWORD *)(v19 + 4);
      *(_DWORD *)(*(_DWORD *)(v19 + 4) + 8) = *(_DWORD *)(v19 + 8);
      if ( v21 )
      {
        v3 = (int)&v22[2 * v18];
        *(_DWORD *)(v19 + 4) = v22[2 * v18 + 1];
        *(_DWORD *)(v19 + 8) = v3;
        *(_DWORD *)(v3 + 4) = v19;
        *(_DWORD *)(*(_DWORD *)(v19 + 4) + 8) = v19;
        if ( *(_DWORD *)(v19 + 4) == *(_DWORD *)(v19 + 8) )
        {
          if ( v18 >= 32 )
          {
            v5 = (*((_BYTE *)v8 + v18 + 4))++;
            if ( !v5 )
              *(_DWORD *)(i + 4) |= 0x80000000 >> (v18 - 32);
            v8[j + 49] |= 0x80000000 >> (v18 - 32);
          }
          else
          {
            v4 = (*((_BYTE *)v8 + v18 + 4))++;
            if ( !v4 )
              *(_DWORD *)i |= 0x80000000 >> v18;
            v8[j + 17] |= 0x80000000 >> v18;
          }
        }
      }
    }
    if ( v21 )
    {
      *(_DWORD *)v19 = v21;
      *(_DWORD *)(v21 + v19 - 4) = v21;
    }
    v20 = (char *)(v21 + v19);
    *(_DWORD *)v20 = v12 + 1;
    *(_DWORD *)&v20[v12 - 4] = v12 + 1;
    v6 = (*v22)++;
    if ( !v6 && i == *(_DWORD *)(v7 + 24) && j == *(_DWORD *)(v7 + 28) )
      *(_DWORD *)(v7 + 24) = 0;
    *v8 = j;
    result = (int)(v20 + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00430FEE) --------------------------------------------------------
int __thiscall sub_430FEE(int this)
{
  int result; // eax@3
  int v2; // [sp+0h] [bp-8h]@1
  LPVOID v3; // [sp+4h] [bp-4h]@2
  int v4; // [sp+4h] [bp-4h]@5

  v2 = this;
  if ( *(_DWORD *)(this + 20) == *(_DWORD *)(this + 16) )
  {
    v3 = HeapReAlloc(*(HANDLE *)this, 0, *(LPVOID *)(this + 8), 20 * (*(_DWORD *)(this + 16) + 16));
    if ( !v3 )
      return 0;
    *(_DWORD *)(v2 + 8) = v3;
    *(_DWORD *)(v2 + 16) += 16;
  }
  v4 = 20 * *(_DWORD *)(v2 + 20) + *(_DWORD *)(v2 + 8);
  *(_DWORD *)(v4 + 16) = HeapAlloc(*(HANDLE *)v2, 8u, 0x41C4u);
  if ( *(_DWORD *)(v4 + 16) )
  {
    *(_DWORD *)(v4 + 12) = VirtualAlloc(0, 0x200000u, 0x2000u, 4u);
    if ( *(_DWORD *)(v4 + 12) )
    {
      *(_DWORD *)v4 = 0;
      *(_DWORD *)(v4 + 4) = 0;
      *(_DWORD *)(v4 + 8) = -1;
      ++*(_DWORD *)(v2 + 20);
      **(_DWORD **)(v4 + 16) = -1;
      result = v4;
    }
    else
    {
      HeapFree(*(HANDLE *)v2, 0, *(LPVOID *)(v4 + 16));
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00431104) --------------------------------------------------------
signed int __stdcall sub_431104(int a1)
{
  signed int result; // eax@8
  int v2; // ST28_4@11
  int v3; // edx@12
  int v4; // [sp+4h] [bp-2Ch]@1
  signed int v5; // [sp+8h] [bp-28h]@1
  signed int i; // [sp+10h] [bp-20h]@4
  char *lpAddress; // [sp+20h] [bp-10h]@7
  int v8; // [sp+24h] [bp-Ch]@4
  int v9; // [sp+28h] [bp-8h]@1
  unsigned int j; // [sp+2Ch] [bp-4h]@9

  v4 = *(_DWORD *)(a1 + 16);
  v9 = *(_DWORD *)(a1 + 8);
  v5 = 0;
  while ( v9 >= 0 )
  {
    v9 *= 2;
    ++v5;
  }
  v8 = v4 + 516 * v5 + 324;
  for ( i = 0; i < 63; ++i )
  {
    *(_DWORD *)(v8 + 8 * i + 8) = v8 + 8 * i;
    *(_DWORD *)(v8 + 8 * i + 4) = v8 + 8 * i;
  }
  lpAddress = (char *)((v5 << 16) + *(_DWORD *)(a1 + 12));
  if ( VirtualAlloc(lpAddress, 0x10000u, 0x1000u, 4u) )
  {
    for ( j = (unsigned int)lpAddress; j <= (unsigned int)(lpAddress + 57344); j += 0x2000 )
    {
      *(_DWORD *)(j + 8) = -1;
      *(_DWORD *)(j + 8188) = -1;
      v2 = j + 12;
      *(_DWORD *)(j + 12) = 8176;
      *(_DWORD *)(v2 + 4) = v2 + 0x2000;
      *(_DWORD *)(v2 + 8) = v2 - 0x2000;
      *(_DWORD *)(v2 + 8172) = 8176;
    }
    *(_DWORD *)(v4 + 516 * v5 + 832) = lpAddress + 12;
    *(_DWORD *)(*(_DWORD *)(v4 + 516 * v5 + 832) + 8) = v4 + 516 * v5 + 828;
    *(_DWORD *)(v4 + 516 * v5 + 836) = lpAddress + 57356;
    *(_DWORD *)(*(_DWORD *)(v4 + 516 * v5 + 836) + 4) = v4 + 516 * v5 + 828;
    *(_DWORD *)(v4 + 4 * v5 + 68) = 0;
    *(_DWORD *)(v4 + 4 * v5 + 196) = 1;
    v3 = (*(_BYTE *)(v4 + 67))++;
    if ( !v3 )
      *(_DWORD *)(a1 + 4) |= 1u;
    *(_DWORD *)(a1 + 8) &= ~(0x80000000 >> v5);
    result = v5;
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (004312F7) --------------------------------------------------------
void __cdecl sub_4312F7(int a1)
{
  int v1; // [sp+4h] [bp-8h]@2
  LPVOID lpMem; // [sp+8h] [bp-4h]@2

  if ( a1 )
  {
    lpMem = (LPVOID)(a1 - 4);
    v1 = *(_DWORD *)(a1 - 4);
    if ( *(_DWORD *)(v1 + 4) != 1016 )
      v0 = 0;
    *(_DWORD *)lpMem = 0;
    sub_43134E((HANDLE *)v1, lpMem);
  }
}

//----- (0043134E) --------------------------------------------------------
void __thiscall sub_43134E(HANDLE *this, LPVOID lpMem)
{
  HANDLE *v2; // [sp+0h] [bp-8h]@1
  unsigned int v3; // [sp+4h] [bp-4h]@1

  v2 = this;
  sub_431A70((int)this);
  v3 = sub_4313A6((int)v2, (int)lpMem);
  if ( v3 )
    sub_431401((int)v2, v3, (int)lpMem);
  else
    HeapFree(*v2, 0, lpMem);
  sub_431A90((int)v2);
}

//----- (004313A6) --------------------------------------------------------
unsigned int __thiscall sub_4313A6(int this, int a2)
{
  unsigned int i; // [sp+8h] [bp-8h]@1

  for ( i = *(_DWORD *)(this + 8); i < 20 * *(_DWORD *)(this + 20) + *(_DWORD *)(this + 8); i += 20 )
  {
    if ( (unsigned int)(a2 - *(_DWORD *)(i + 12)) < 0x200000 )
      return i;
  }
  return 0;
}

//----- (00431401) --------------------------------------------------------
int __thiscall sub_431401(int this, unsigned int a2, int a3)
{
  int result; // eax@1
  int v4; // ST30_4@32
  int v5; // edx@34
  int v6; // edx@37
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@2
  int v10; // [sp+10h] [bp-34h]@16
  signed int v11; // [sp+14h] [bp-30h]@1
  unsigned int v12; // [sp+18h] [bp-2Ch]@0
  unsigned int v13; // [sp+1Ch] [bp-28h]@13
  unsigned int v14; // [sp+20h] [bp-24h]@3
  int v15; // [sp+28h] [bp-1Ch]@1
  signed int v16; // [sp+30h] [bp-14h]@2
  signed int v17; // [sp+38h] [bp-Ch]@2
  int *v18; // [sp+3Ch] [bp-8h]@1
  unsigned int v19; // [sp+40h] [bp-4h]@1

  v7 = this;
  v8 = *(_DWORD *)(a2 + 16);
  v19 = (unsigned int)(a3 - *(_DWORD *)(a2 + 12)) >> 16;
  v18 = (int *)(v8 + 516 * v19 + 324);
  v15 = a3 - 4;
  result = a3 - 4;
  v11 = *(_DWORD *)(a3 - 4) - 1;
  if ( !(v11 & 1) )
  {
    v9 = v11 + v15;
    v16 = *(_DWORD *)(v11 + v15);
    v17 = *(_DWORD *)(a3 - 8);
    if ( !(v16 & 1) )
    {
      v14 = (v16 >> 4) - 1;
      if ( v14 > 0x3F )
        v14 = 63;
      if ( *(_DWORD *)(v9 + 4) == *(_DWORD *)(v9 + 8) )
      {
        if ( v14 >= 0x20 )
        {
          *(_DWORD *)(v8 + 4 * v19 + 196) &= ~(0x80000000 >> (v14 - 32));
          if ( !--*(_BYTE *)(v14 + v8 + 4) )
            *(_DWORD *)(a2 + 4) &= ~(0x80000000 >> (v14 - 32));
        }
        else
        {
          *(_DWORD *)(v8 + 4 * v19 + 68) &= ~(0x80000000 >> v14);
          if ( !--*(_BYTE *)(v14 + v8 + 4) )
            *(_DWORD *)a2 &= ~(0x80000000 >> v14);
        }
      }
      *(_DWORD *)(*(_DWORD *)(v9 + 8) + 4) = *(_DWORD *)(v9 + 4);
      *(_DWORD *)(*(_DWORD *)(v9 + 4) + 8) = *(_DWORD *)(v9 + 8);
      v11 += v16;
    }
    v13 = (v11 >> 4) - 1;
    if ( v13 > 0x3F )
      v13 = 63;
    if ( !(v17 & 1) )
    {
      v10 = v15 - v17;
      v12 = (v17 >> 4) - 1;
      if ( v12 > 0x3F )
        v12 = 63;
      v11 += v17;
      v13 = (v11 >> 4) - 1;
      if ( v13 > 0x3F )
        v13 = 63;
      if ( v12 != v13 )
      {
        if ( *(_DWORD *)(v10 + 4) == *(_DWORD *)(v10 + 8) )
        {
          if ( v12 >= 0x20 )
          {
            *(_DWORD *)(v8 + 4 * v19 + 196) &= ~(0x80000000 >> (v12 - 32));
            if ( !--*(_BYTE *)(v12 + v8 + 4) )
              *(_DWORD *)(a2 + 4) &= ~(0x80000000 >> (v12 - 32));
          }
          else
          {
            *(_DWORD *)(v8 + 4 * v19 + 68) &= ~(0x80000000 >> v12);
            if ( !--*(_BYTE *)(v12 + v8 + 4) )
              *(_DWORD *)a2 &= ~(0x80000000 >> v12);
          }
        }
        *(_DWORD *)(*(_DWORD *)(v10 + 8) + 4) = *(_DWORD *)(v10 + 4);
        *(_DWORD *)(*(_DWORD *)(v10 + 4) + 8) = *(_DWORD *)(v10 + 8);
      }
      v15 -= v17;
    }
    if ( v17 & 1 || v12 != v13 )
    {
      v4 = (int)&v18[2 * v13];
      *(_DWORD *)(v15 + 4) = v18[2 * v13 + 1];
      *(_DWORD *)(v15 + 8) = v4;
      *(_DWORD *)(v4 + 4) = v15;
      *(_DWORD *)(*(_DWORD *)(v15 + 4) + 8) = v15;
      if ( *(_DWORD *)(v15 + 4) == *(_DWORD *)(v15 + 8) )
      {
        if ( v13 >= 0x20 )
        {
          v6 = (*(_BYTE *)(v13 + v8 + 4))++;
          if ( !v6 )
            *(_DWORD *)(a2 + 4) |= 0x80000000 >> (v13 - 32);
          *(_DWORD *)(v8 + 4 * v19 + 196) |= 0x80000000 >> (v13 - 32);
        }
        else
        {
          v5 = (*(_BYTE *)(v13 + v8 + 4))++;
          if ( !v5 )
            *(_DWORD *)a2 |= 0x80000000 >> v13;
          *(_DWORD *)(v8 + 4 * v19 + 68) |= 0x80000000 >> v13;
        }
      }
    }
    *(_DWORD *)v15 = v11;
    *(_DWORD *)(v11 + v15 - 4) = v11;
    result = *v18 - 1;
    *v18 = result;
    if ( !*v18 )
    {
      if ( *(_DWORD *)(this + 24) )
      {
        VirtualFree(
          (LPVOID)((*(_DWORD *)(this + 28) << 16) + *(_DWORD *)(*(_DWORD *)(this + 24) + 12)),
          0x10000u,
          0x4000u);
        *(_DWORD *)(*(_DWORD *)(v7 + 24) + 8) |= 0x80000000 >> *(_DWORD *)(v7 + 28);
        *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v7 + 24) + 16) + 4 * *(_DWORD *)(v7 + 28) + 196) = 0;
        if ( !--*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v7 + 24) + 16) + 67) )
          *(_DWORD *)(*(_DWORD *)(v7 + 24) + 4) &= 0xFFFFFFFE;
        if ( *(_DWORD *)(*(_DWORD *)(v7 + 24) + 8) == -1 )
        {
          VirtualFree(*(LPVOID *)(*(_DWORD *)(v7 + 24) + 12), 0, 0x8000u);
          HeapFree(*(HANDLE *)v7, 0, *(LPVOID *)(*(_DWORD *)(v7 + 24) + 16));
          memcpy_0(
            *(void **)(v7 + 24),
            (const void *)(*(_DWORD *)(v7 + 24) + 20),
            20 * *(_DWORD *)(v7 + 20) + *(_DWORD *)(v7 + 8) - (*(_DWORD *)(v7 + 24) + 20));
          --*(_DWORD *)(v7 + 20);
          if ( a2 > *(_DWORD *)(v7 + 24) )
            a2 -= 20;
          *(_DWORD *)(v7 + 12) = *(_DWORD *)(v7 + 8);
        }
      }
      *(_DWORD *)(v7 + 24) = a2;
      result = v7;
      *(_DWORD *)(v7 + 28) = v19;
    }
  }
  return result;
}

//----- (004319FB) --------------------------------------------------------
int sub_4319FB()
{
  return atexit(sub_402150);
}

//----- (00431A10) --------------------------------------------------------
void *__thiscall sub_431A10(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4307C9(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00431A40) --------------------------------------------------------
void *__thiscall sub_431A40(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_430855(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00431A70) --------------------------------------------------------
void __thiscall sub_431A70(int this)
{
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 32));
}

//----- (00431A90) --------------------------------------------------------
void __thiscall sub_431A90(int this)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 32));
}

//----- (00431ABF) --------------------------------------------------------
int sub_431ABF()
{
  return `eh vector constructor iterator'(&unk_4801D8, 0x24u, 16, (int)sub_431D90, unknown_libname_188);
}

//----- (00431ADC) --------------------------------------------------------
int sub_431ADC()
{
  return atexit(sub_431AEE);
}

//----- (00431AEE) --------------------------------------------------------
void __cdecl sub_431AEE()
{
  if ( !(byte_480419 & 1) )
  {
    byte_480419 |= 1u;
    `eh vector destructor iterator'(&unk_4801D8, 0x24u, 16, unknown_libname_188);
  }
}
// 480419: using guessed type char byte_480419;

//----- (00431B32) --------------------------------------------------------
void sub_431B32()
{
  ;
}

//----- (00431B37) --------------------------------------------------------
int sub_431B37()
{
  return atexit(sub_431B49);
}

//----- (00431B49) --------------------------------------------------------
void __cdecl sub_431B49()
{
  sub_431DE0();
}

//----- (00431B58) --------------------------------------------------------
DNameNode *sub_431B58()
{
  DNameNode *v1; // [sp+0h] [bp-20h]@4
  DNameNode *v2; // [sp+4h] [bp-1Ch]@3
  char *v3; // [sp+Ch] [bp-14h]@1
  DNameNode *v4; // [sp+10h] [bp-10h]@1

  v3 = (char *)&unk_4801D8 + 36 * (InterlockedIncrement(&dword_46CEA0) & 0xF);
  sub_42D4B5((int)(v3 + 4));
  v4 = *(DNameNode **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = *((_DWORD *)v4 + 2);
    sub_42D4F0((int)(v3 + 4));
  }
  else
  {
    sub_42D4F0((int)(v3 + 4));
    v2 = (DNameNode *)unknown_libname_49(0x14u);
    if ( v2 )
      v1 = sub_431DF0(v2);
    else
      v1 = 0;
    v4 = v1;
  }
  return v4;
}

//----- (00431C1A) --------------------------------------------------------
void __thiscall sub_431C1A(_DWORD *this)
{
  _DWORD *v1; // ST04_4@1
  char *v2; // ST08_4@1

  v1 = this;
  v2 = (char *)&unk_4801D8 + 36 * (InterlockedDecrement(&dword_48041C) & 0xF);
  sub_42D4B5((int)(v2 + 4));
  v1[2] = *(_DWORD *)v2;
  *(_DWORD *)v2 = v1;
  sub_42D4F0((int)(v2 + 4));
}

//----- (00431C69) --------------------------------------------------------
void sub_431C69()
{
  char *v0; // [sp+Ch] [bp-Ch]@3
  int v1; // [sp+10h] [bp-8h]@4
  signed int i; // [sp+14h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v0 = (char *)&unk_4801D8 + 36 * i;
    sub_42D4B5((int)&unk_4801D8 + 36 * i + 4);
    while ( 1 )
    {
      v1 = *(_DWORD *)v0;
      if ( !*(_DWORD *)v0 )
        break;
      *(_DWORD *)v0 = *(_DWORD *)(v1 + 8);
      if ( v1 )
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
    }
    sub_42D4F0((int)(v0 + 4));
  }
}

//----- (00431CF7) --------------------------------------------------------
void __thiscall sub_431CF7(int this, int a2, int a3, int a4)
{
  int v4; // [sp+0h] [bp-8h]@1

  v4 = this;
  if ( (*(int (__cdecl **)(_DWORD, int))(this + 16))(*(_DWORD *)(this + 8), *(_DWORD *)(this + 12) + a3 + 5) & 0xFF )
    sub_41D61F(*(_DWORD *)(v4 + 8));
  sub_4180B3(*(_DWORD *)(v4 + 8));
  sub_41E170(*(_DWORD *)(v4 + 12));
  InterlockedDecrement(&dword_4801D0);
  sub_431C1A((_DWORD *)v4);
}

//----- (00431D79) --------------------------------------------------------
int sub_431D79()
{
  return atexit(sub_402150);
}

//----- (00431D90) --------------------------------------------------------
int __thiscall sub_431D90(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (00431DE0) --------------------------------------------------------
void sub_431DE0()
{
  sub_431C69();
}

//----- (00431DF0) --------------------------------------------------------
DNameNode *__thiscall sub_431DF0(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F8E4;
  return v1;
}
// 45F8E4: using guessed type int (__stdcall *off_45F8E4)(int);

//----- (00431E10) --------------------------------------------------------
void *__thiscall sub_431E10(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_189();
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);
// 431E40: using guessed type int unknown_libname_189(void);

//----- (00431E60) --------------------------------------------------------
signed int __cdecl sub_431E60(int a1, _BYTE *a2, char a3)
{
  int v3; // edx@1
  signed int result; // eax@2
  int v5; // edx@19
  int v6; // edx@26
  int v7; // edx@32
  int v8; // edx@49
  signed int v9; // [sp+4h] [bp-Ch]@18
  _BYTE *v10; // [sp+8h] [bp-8h]@18
  int v11; // [sp+Ch] [bp-4h]@3

  if ( (unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
    return 13;
  do
    sub_4325A0(v3, a1, &v11);
  while ( sub_432360(v11) && !(unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) );
  if ( (unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
    return 13;
  switch ( (unsigned __int8)v11 )
  {
    case 0x2Eu:
      return 1;
    case 0x2Cu:
      return 2;
    case 0x3Au:
      return 4;
    case 0x3Bu:
      return 5;
    case 0x3Du:
      return 6;
    case 0x2Fu:
      return 7;
    case 0x26u:
      return 8;
    case 0x28u:
      return 9;
    case 0x29u:
      return 10;
    case 0xAu:
      return 11;
    default:
      v10 = a2;
      v9 = 0;
      if ( (unsigned __int8)v11 != 45 )
        goto LABEL_22;
      sub_4325A0(45, a1, &v11);
      if ( sub_432330(v11) )
      {
        *a2 = 45;
        v10 = a2 + 1;
        v9 = 1;
LABEL_22:
        if ( sub_432330(v11) )
        {
          do
          {
            *v10++ = v11;
            sub_4325A0(++v9, a1, &v11);
          }
          while ( sub_432330(v11)
               && v9 < 70
               && !(unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) );
          if ( !(unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
            sub_4323E0(a1, v6, v11);
          *v10 = 0;
          if ( a3 )
            result = 0;
          else
            result = 12;
        }
        else if ( (unsigned __int8)v11 == 34 )
        {
          sub_4325A0(a1, a1, &v11);
          while ( (unsigned __int8)v11 != 34
               && (unsigned __int8)v11 != 10
               && v9 < 70
               && !(unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
          {
            *v10++ = v11;
            ++v9;
            sub_4325A0((int)&v11, a1, &v11);
          }
          if ( (unsigned __int8)v11 == 10 )
          {
            LOBYTE(v7) = v11;
            sub_4323E0(a1, v7, v11);
          }
          *v10 = 0;
          result = 0;
        }
        else if ( sub_4323A0(v11) || (signed int)(unsigned __int8)v11 >= 161 && (signed int)(unsigned __int8)v11 < 254 )
        {
          do
          {
            *v10++ = v11;
            ++v9;
            sub_4325A0((int)&v11, a1, &v11);
          }
          while ( (sub_4323A0(v11)
                || (signed int)(unsigned __int8)v11 >= 161 && (signed int)(unsigned __int8)v11 < 254
                || (unsigned __int8)v11 == 95)
               && !(unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) );
          if ( !(unsigned __int8)sub_4326E0((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
          {
            sub_4323E0(a1, v8, v11);
            if ( (unsigned __int8)sub_432700((void *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)) )
              sub_42DBFC((int)&unk_47FA00, 3, aPutback);
          }
          *v10 = 0;
          result = 0;
        }
        else
        {
          sub_42DBFC((int)&unk_47FA00, 3, aUnexpectedChar, (unsigned __int8)v11);
          result = 13;
        }
      }
      else
      {
        sub_4323E0(a1, v5, v11);
        result = 3;
      }
      return result;
  }
}

//----- (0043231B) --------------------------------------------------------
int sub_43231B()
{
  return atexit(sub_402150);
}

//----- (00432330) --------------------------------------------------------
bool __cdecl sub_432330(char a1)
{
  return a1 >= 48 && a1 <= 57;
}

//----- (00432360) --------------------------------------------------------
bool __cdecl sub_432360(char a1)
{
  return a1 == 32 || a1 == 9 || a1 == 13;
}

//----- (004323A0) --------------------------------------------------------
bool __cdecl sub_4323A0(char a1)
{
  return a1 >= 97 && a1 <= 122 || a1 >= 65 && a1 <= 90;
}

//----- (004323E0) --------------------------------------------------------
int __fastcall sub_4323E0(int a1, int a2, char a3)
{
  int v4; // [sp+0h] [bp-40h]@1
  int v5; // [sp+Ch] [bp-34h]@2
  int v6; // [sp+10h] [bp-30h]@2
  int v7; // [sp+14h] [bp-2Ch]@2
  void *v8; // [sp+18h] [bp-28h]@2
  int v9; // [sp+1Ch] [bp-24h]@1
  int v10; // [sp+20h] [bp-20h]@2
  int v11; // [sp+24h] [bp-1Ch]@2
  char v12; // [sp+28h] [bp-18h]@1
  int v13; // [sp+2Ch] [bp-14h]@1
  int *v14; // [sp+30h] [bp-10h]@1
  int v15; // [sp+3Ch] [bp-4h]@2

  v14 = &v4;
  v9 = a1;
  v13 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  sub_420310(&v12, a2, v9, 1);
  if ( sub_420340(&v12) )
  {
    v15 = 0;
    v8 = (void *)unknown_libname_110(*(_DWORD *)(*(_DWORD *)v9 + 4) + v9);
    v7 = sub_4324F0(v8, a3);
    v11 = v7;
    v6 = std::char_traits<char>::eof();
    v10 = v6;
    LOBYTE(v5) = std::char_traits<char>::eq_int_type(&v10, &v11);
    if ( (_BYTE)v5 )
      v13 |= 4u;
    v15 = -1;
  }
  sub_40BC90((void *)(*(_DWORD *)(*(_DWORD *)v9 + 4) + v9), v13, 0);
  return v9;
}
// 40B4D0: using guessed type int std::char_traits<char>::eof(void);
// 40B590: using guessed type _DWORD __cdecl std::char_traits<char>::eq_int_type(_DWORD, _DWORD);
// 4202F0: using guessed type int __thiscall unknown_libname_110(_DWORD);

//----- (004324F0) --------------------------------------------------------
int __thiscall sub_4324F0(void *this, char a2)
{
  unsigned int v2; // esi@2
  int v3; // eax@3
  int v4; // eax@4
  int v5; // eax@5
  int v7; // [sp+4h] [bp-8h]@4
  void *v8; // [sp+8h] [bp-4h]@1

  v8 = this;
  if ( std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(this)
    && (v2 = std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::eback(v8),
        v2 < std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(v8))
    && (v3 = std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(v8), sub_432580(&a2, (_BYTE *)(v3 - 1))) )
  {
    v4 = std::basic_streambuf<char,std::char_traits<char>>::_Gndec(v8);
    v7 = std::char_traits<char>::to_int_type(v4);
  }
  else
  {
    v5 = std::char_traits<char>::to_int_type(&a2);
    v7 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v8 + 8))(v8, v5);
  }
  return v7;
}
// 40B580: using guessed type _DWORD __cdecl std::char_traits<char>::to_int_type(_DWORD);
// 40B6E0: using guessed type int __thiscall std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::gptr(_DWORD);
// 420740: using guessed type int __thiscall std::basic_streambuf<wchar_t,std::char_traits<wchar_t>>::eback(_DWORD);
// 420770: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Gndec(_DWORD);

//----- (00432580) --------------------------------------------------------
bool __cdecl sub_432580(_BYTE *a1, _BYTE *a2)
{
  return *a1 == *a2;
}

//----- (004325A0) --------------------------------------------------------
int __usercall sub_4325A0@<eax>(int a1@<edx>, int a2, _BYTE *a3)
{
  return sub_4325C0(a1, a2, a3);
}

//----- (004325C0) --------------------------------------------------------
int __usercall sub_4325C0@<eax>(int a1@<edx>, int a2, _BYTE *a3)
{
  int v4; // [sp+0h] [bp-40h]@1
  char v5; // [sp+Fh] [bp-31h]@4
  int v6; // [sp+10h] [bp-30h]@2
  int v7; // [sp+14h] [bp-2Ch]@2
  int v8; // [sp+18h] [bp-28h]@2
  int v9; // [sp+1Ch] [bp-24h]@2
  int v10; // [sp+20h] [bp-20h]@2
  char v11; // [sp+24h] [bp-1Ch]@1
  int v12; // [sp+28h] [bp-18h]@2
  int v13; // [sp+2Ch] [bp-14h]@1
  int *v14; // [sp+30h] [bp-10h]@1
  int v15; // [sp+3Ch] [bp-4h]@2

  v14 = &v4;
  v13 = 0;
  sub_420310(&v11, a1, a2, 0);
  if ( sub_420340(&v11) )
  {
    v15 = 0;
    v9 = unknown_libname_110(*(_DWORD *)(*(_DWORD *)a2 + 4) + a2);
    v8 = std::basic_streambuf<char,std::char_traits<char>>::sbumpc(v9);
    v12 = v8;
    v7 = std::char_traits<char>::eof();
    v10 = v7;
    LOBYTE(v6) = std::char_traits<char>::eq_int_type(&v10, &v12);
    if ( (_BYTE)v6 )
    {
      v13 |= 3u;
    }
    else
    {
      v5 = std::char_traits<char>::to_char_type(&v12);
      *a3 = v5;
    }
    v15 = -1;
  }
  sub_40BC90((void *)(*(_DWORD *)(*(_DWORD *)a2 + 4) + a2), v13, 0);
  return a2;
}
// 40B4D0: using guessed type int std::char_traits<char>::eof(void);
// 40B590: using guessed type _DWORD __cdecl std::char_traits<char>::eq_int_type(_DWORD, _DWORD);
// 40B6D0: using guessed type _DWORD __cdecl std::char_traits<char>::to_char_type(_DWORD);
// 4202F0: using guessed type int __thiscall unknown_libname_110(_DWORD);
// 4206E0: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sbumpc(_DWORD);

//----- (004326E0) --------------------------------------------------------
int __thiscall sub_4326E0(void *this)
{
  return unknown_libname_29(this) & 1;
}
// 40BCC0: using guessed type int __thiscall unknown_libname_29(_DWORD);

//----- (00432700) --------------------------------------------------------
BOOL __thiscall sub_432700(void *this)
{
  return (unknown_libname_29(this) & 4) != 0;
}
// 40BCC0: using guessed type int __thiscall unknown_libname_29(_DWORD);

//----- (0043272F) --------------------------------------------------------
int sub_43272F()
{
  return sub_43275F((int)&unk_480420);
}

//----- (0043273E) --------------------------------------------------------
int sub_43273E()
{
  return atexit(sub_432750);
}

//----- (00432750) --------------------------------------------------------
void __cdecl sub_432750()
{
  sub_4327B5(&unk_480420);
}

//----- (0043275F) --------------------------------------------------------
int __thiscall sub_43275F(int this)
{
  int v1; // ST04_4@1

  v1 = this;
  *(_DWORD *)this = &off_45F8FC;
  *(_DWORD *)(this + 24) = 0;
  GetLocalTime((LPSYSTEMTIME)(this + 56));
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  *(_DWORD *)(v1 + 16) = 0;
  *(_DWORD *)(v1 + 4) = 0;
  return v1;
}
// 45F8FC: using guessed type int (__stdcall *off_45F8FC)(int);

//----- (004327B5) --------------------------------------------------------
void *__thiscall sub_4327B5(void *this)
{
  void *result; // eax@1

  result = this;
  *(_DWORD *)this = &off_45F8FC;
  return result;
}
// 45F8FC: using guessed type int (__stdcall *off_45F8FC)(int);

//----- (004327C9) --------------------------------------------------------
int __thiscall sub_4327C9(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 20) = a2;
  return result;
}

//----- (00432819) --------------------------------------------------------
BOOL __thiscall sub_432819(int this)
{
  int v1; // eax@4
  int v3; // [sp+0h] [bp-C8h]@1
  struct tagPAINTSTRUCT Paint; // [sp+4h] [bp-C4h]@1
  HDC hdc; // [sp+44h] [bp-84h]@1
  CHAR String; // [sp+48h] [bp-80h]@4

  v3 = this;
  hdc = BeginPaint(*(HWND *)(this + 20), &Paint);
  if ( *(_DWORD *)(v3 + 24) )
  {
    SelectObject(hdc, *(HGDIOBJ *)(v3 + 24));
  }
  else
  {
    *(_DWORD *)(v3 + 24) = GetStockObject(16);
    SelectObject(hdc, *(HGDIOBJ *)(v3 + 24));
    GetClientRect(*(HWND *)(v3 + 20), (LPRECT)(v3 + 28));
    *(_DWORD *)(v3 + 44) = GetStockObject(0);
    GetTextExtentPoint32A(hdc, asc_46CEC4, 1, (LPSIZE)(v3 + 48));
  }
  FillRect(hdc, (const RECT *)(v3 + 28), *(HBRUSH *)(v3 + 44));
  sprintf(&String, aUser6dSocket4d, *(_DWORD *)(v3 + 8), *(_DWORD *)(v3 + 12), dword_47EFD0, dword_4816F4);
  SetTextColor(hdc, 0);
  v1 = strlen(&String);
  TextOutA(hdc, 0, 0, &String, v1);
  return EndPaint(*(HWND *)(v3 + 20), &Paint);
}

//----- (0043297A) --------------------------------------------------------
BOOL __thiscall sub_43297A(int this, int a2, int a3)
{
  *(_DWORD *)(this + 36) = a2;
  *(_DWORD *)(this + 40) = a3;
  return InvalidateRect(*(HWND *)(this + 20), 0, 0);
}

//----- (004329B9) --------------------------------------------------------
int sub_4329B9()
{
  return atexit(sub_402150);
}

//----- (004329D0) --------------------------------------------------------
void *__thiscall sub_4329D0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4327B5(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00432A0F) --------------------------------------------------------
int sub_432A0F()
{
  return Replicator::Replicator((Replicator *)&unk_480468);
}

//----- (00432A1E) --------------------------------------------------------
int sub_432A1E()
{
  return atexit(sub_432A30);
}

//----- (00432A30) --------------------------------------------------------
void __cdecl sub_432A30()
{
  unknown_libname_191(&unk_480468);
}
// 432A56: using guessed type int __thiscall unknown_libname_191(_DWORD);

//----- (00432A61) --------------------------------------------------------
SOCKET __thiscall sub_432A61(volatile LONG *this)
{
  SOCKET result; // eax@1
  SOCKET s; // [sp+4h] [bp-8h]@1
  char optval[2]; // [sp+8h] [bp-4h]@2
  __int16 v4; // [sp+Ah] [bp-2h]@2

  result = InterlockedExchange(this, -1);
  s = result;
  if ( result != -1 )
  {
    v4 = 0;
    strcpy(optval, "\x01");
    setsockopt(result, 0xFFFF, 128, optval, 4);
    result = closesocket(s);
  }
  return result;
}

//----- (00432AB3) --------------------------------------------------------
signed int __thiscall sub_432AB3(_WORD *this)
{
  signed int result; // eax@3
  char *v2; // eax@4
  _WORD *v3; // [sp+0h] [bp-8Ch]@1
  signed int v4; // [sp+4h] [bp-88h]@1
  char cp; // [sp+8h] [bp-84h]@4
  struct hostent *v6; // [sp+88h] [bp-4h]@1

  v3 = this;
  v6 = 0;
  v4 = strlen(name);
  if ( v4 > 0 && v4 <= 128 )
  {
    v6 = gethostbyname(name);
    memset(&cp, 0, 0x80u);
    v2 = inet_ntoa(**(struct in_addr **)v6->h_addr_list);
    memcpy(&cp, v2, 0x14u);
    v3[2] = 2;
    v3[3] = htons(0x19u);
    *((_DWORD *)v3 + 2) = inet_addr(&cp);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00432C19) --------------------------------------------------------
int __thiscall sub_432C19(void *this)
{
  int result; // eax@2
  void *v2; // [sp+0h] [bp-410h]@1
  char buf; // [sp+4h] [bp-40Ch]@7
  char optval[4]; // [sp+404h] [bp-Ch]@1
  DWORD v5; // [sp+408h] [bp-8h]@1
  int v6; // [sp+40Ch] [bp-4h]@1

  v2 = this;
  *(_DWORD *)optval = 5000;
  v5 = 0;
  v6 = 0;
  *(_DWORD *)this = socket(2, 1, 0);
  if ( *(_DWORD *)v2 == -1 )
  {
    v5 = GetLastError();
    result = 0;
  }
  else if ( setsockopt(*(_DWORD *)v2, 0xFFFF, 4102, optval, 4) == -1 )
  {
    v5 = GetLastError();
    result = 0;
  }
  else if ( setsockopt(*(_DWORD *)v2, 0xFFFF, 4101, optval, 4) == -1 )
  {
    v5 = GetLastError();
    result = 0;
  }
  else
  {
    memset(&buf, 0, 0x400u);
    if ( connect(*(_DWORD *)v2, (const struct sockaddr *)((char *)v2 + 4), 16) == -1 )
    {
      v5 = GetLastError();
    }
    else if ( recv(*(_DWORD *)v2, &buf, 1024, 0) == -1 )
    {
      v5 = GetLastError();
    }
    else
    {
      v6 = 1;
    }
    if ( v6 )
    {
      if ( strncmp(&buf, a220, 3u) )
      {
        sub_432A61((volatile LONG *)v2);
        v6 = 0;
      }
    }
    else
    {
      sub_432A61((volatile LONG *)v2);
    }
    result = v6;
  }
  return result;
}

//----- (00432D8F) --------------------------------------------------------
int __thiscall sub_432D8F(void *this, char *a2, char *a3, char *a4)
{
  void *v5; // [sp+18h] [bp-24h]@1
  signed int v6; // [sp+1Ch] [bp-20h]@1
  signed int v7; // [sp+1Ch] [bp-20h]@4
  signed int v8; // [sp+1Ch] [bp-20h]@11
  int v9; // [sp+20h] [bp-1Ch]@1

  v5 = this;
  v9 = 0;
  v6 = strlen(a3);
  if ( v6 <= 0 || v6 > 1024 )
    return 0;
  v7 = strlen(a4);
  if ( v7 <= 0 || v7 > 1024 )
    return 0;
  if ( strchr(dword_4785D8, 64) )
  {
    if ( strchr(a2, 64) )
    {
      if ( strlen(dword_4785D8) > 4 && strlen(dword_4785D8) < 0x400 )
      {
        v8 = strlen(a2);
        if ( v8 > 4 && v8 < 1024 )
        {
          strcpy((char *)v5 + 24, a2);
          *((_BYTE *)v5 + v8 + 24) = 0;
          if ( !sub_432C19(v5) )
            return 0;
          v9 = sub_432FC9((SOCKET *)v5);
          if ( v9 )
          {
            v9 = sub_433100((SOCKET *)v5);
            if ( v9 )
            {
              v9 = sub_43322F(v5);
              if ( v9 )
              {
                v9 = sub_4333B7((SOCKET *)v5, (int)a3, (int)a4);
                if ( v9 )
                  v9 = sub_433661((SOCKET *)v5);
              }
            }
          }
          if ( !v9 )
            sub_42DBFC((int)&unk_47FA00, 3, aMailsendErrorS, a4);
        }
      }
    }
  }
  return v9;
}

//----- (00432FC9) --------------------------------------------------------
int __thiscall sub_432FC9(SOCKET *this)
{
  int result; // eax@2
  size_t len; // ST14_4@3
  SOCKET *v3; // [sp+0h] [bp-410h]@1
  char buf; // [sp+8h] [bp-408h]@1
  DWORD v5; // [sp+408h] [bp-8h]@1
  int v6; // [sp+40Ch] [bp-4h]@1

  v3 = this;
  v5 = 0;
  v6 = 0;
  memset(&buf, 0, 0x400u);
  if ( *v3 == -1 )
  {
    result = 0;
  }
  else
  {
    strcpy(&buf, aHeloMail_ncsof);
    len = strlen(&buf);
    if ( send(*v3, &buf, len, 0) == -1 )
    {
      v5 = GetLastError();
    }
    else
    {
      memset(&buf, 0, 0x400u);
      if ( recv(*v3, &buf, 1024, 0) == -1 )
        v5 = GetLastError();
      else
        v6 = 1;
    }
    if ( v6 )
    {
      if ( strncmp(&buf, a250, 3u) )
      {
        sub_432A61((volatile LONG *)v3);
        v6 = 0;
      }
    }
    else
    {
      sub_432A61((volatile LONG *)v3);
    }
    result = v6;
  }
  return result;
}

//----- (00433100) --------------------------------------------------------
int __thiscall sub_433100(SOCKET *this)
{
  int result; // eax@2
  int len; // ST14_4@3
  SOCKET *v3; // [sp+0h] [bp-410h]@1
  char buf; // [sp+8h] [bp-408h]@1
  DWORD v5; // [sp+408h] [bp-8h]@1
  int v6; // [sp+40Ch] [bp-4h]@1

  v3 = this;
  v5 = 0;
  v6 = 0;
  memset(&buf, 0, 0x400u);
  if ( *v3 == -1 )
  {
    result = 0;
  }
  else
  {
    len = sprintf(&buf, aMailFromS_0, dword_4785D8);
    if ( send(*v3, &buf, len, 0) == -1 )
    {
      v5 = GetLastError();
    }
    else
    {
      memset(&buf, 0, 0x400u);
      if ( recv(*v3, &buf, 1024, 0) == -1 )
        v5 = GetLastError();
      else
        v6 = 1;
    }
    if ( v6 )
    {
      if ( strncmp(&buf, a250_0, 3u) )
      {
        sub_432A61((volatile LONG *)v3);
        v6 = 0;
      }
    }
    else
    {
      sub_432A61((volatile LONG *)v3);
    }
    result = v6;
  }
  return result;
}

//----- (0043322F) --------------------------------------------------------
int __thiscall sub_43322F(void *this)
{
  int result; // eax@2
  int len; // ST14_4@5
  void *v3; // [sp+0h] [bp-814h]@1
  char buf; // [sp+8h] [bp-80Ch]@5
  DWORD v5; // [sp+408h] [bp-40Ch]@1
  char v6; // [sp+40Ch] [bp-408h]@3
  char *i; // [sp+80Ch] [bp-8h]@3
  int v8; // [sp+810h] [bp-4h]@1

  v3 = this;
  v5 = 0;
  v8 = 0;
  if ( *(_DWORD *)this == -1 )
  {
    result = 0;
  }
  else
  {
    memset(&v6, 0, 0x400u);
    strcpy(&v6, (const char *)v3 + 24);
    for ( i = strtok(&v6, asc_46CFBC); i; i = strtok(0, asc_46CFD4) )
    {
      memset(&buf, 0, 0x400u);
      len = sprintf(&buf, aRcptToS_0, i);
      if ( send(*(_DWORD *)v3, &buf, len, 0) == -1 )
      {
        v5 = GetLastError();
      }
      else
      {
        memset(&buf, 0, 0x400u);
        if ( recv(*(_DWORD *)v3, &buf, 1024, 0) == -1 )
        {
          v5 = GetLastError();
        }
        else if ( !strncmp(&buf, a250_1, 3u) )
        {
          v8 = 1;
        }
      }
    }
    if ( !v8 )
      sub_432A61((volatile LONG *)v3);
    result = v8;
  }
  return result;
}

//----- (004333B7) --------------------------------------------------------
int __thiscall sub_4333B7(SOCKET *this, int a2, int a3)
{
  int result; // eax@2
  size_t len; // ST14_4@3
  int v5; // ST14_4@9
  int v6; // ST14_4@11
  size_t v7; // ST14_4@13
  SOCKET *v8; // [sp+0h] [bp-410h]@1
  char buf; // [sp+8h] [bp-408h]@1
  DWORD v10; // [sp+408h] [bp-8h]@1
  int v11; // [sp+40Ch] [bp-4h]@1

  v8 = this;
  v10 = 0;
  v11 = 0;
  memset(&buf, 0, 0x400u);
  if ( *v8 == -1 )
  {
    result = 0;
  }
  else
  {
    strcpy(&buf, aData_0);
    len = strlen(&buf);
    if ( send(*v8, &buf, len, 0) == -1 )
    {
      v10 = GetLastError();
    }
    else
    {
      memset(&buf, 0, 0x400u);
      if ( recv(*v8, &buf, 1024, 0) == -1 )
        v10 = GetLastError();
      else
        v11 = 1;
    }
    if ( v11 )
    {
      v11 = 0;
      memset(&buf, 0, 0x400u);
      v5 = sprintf(&buf, aSubjectSToS, a2, v8 + 6);
      if ( send(*v8, &buf, v5, 0) == -1 )
      {
        v10 = GetLastError();
      }
      else
      {
        memset(&buf, 0, 0x400u);
        v6 = sprintf(&buf, aS_5, a3);
        if ( send(*v8, &buf, v6, 0) == -1 )
        {
          v10 = GetLastError();
        }
        else
        {
          v7 = strlen(a__0);
          if ( send(*v8, a__1, v7, 0) == -1 )
          {
            v10 = GetLastError();
          }
          else
          {
            memset(&buf, 0, 0x400u);
            if ( recv(*v8, &buf, 1024, 0) == -1 )
              v10 = GetLastError();
            else
              v11 = 1;
          }
        }
      }
    }
    if ( v11 )
    {
      if ( strncmp(&buf, a250_2, 3u) )
      {
        sub_432A61((volatile LONG *)v8);
        v11 = 0;
      }
    }
    else
    {
      sub_432A61((volatile LONG *)v8);
    }
    result = v11;
  }
  return result;
}

//----- (00433661) --------------------------------------------------------
int __thiscall sub_433661(SOCKET *this)
{
  int result; // eax@2
  size_t len; // ST14_4@3
  SOCKET *v3; // [sp+0h] [bp-410h]@1
  char buf; // [sp+8h] [bp-408h]@1
  DWORD v5; // [sp+408h] [bp-8h]@1
  int v6; // [sp+40Ch] [bp-4h]@1

  v3 = this;
  v5 = 0;
  v6 = 0;
  memset(&buf, 0, 0x400u);
  if ( *v3 == -1 )
  {
    result = 0;
  }
  else
  {
    strcpy(&buf, aQuit_0);
    len = strlen(&buf);
    if ( send(*v3, &buf, len, 0) == -1 )
      v5 = GetLastError();
    else
      v6 = 1;
    sub_432A61((volatile LONG *)v3);
    result = v6;
  }
  return result;
}

//----- (0043372D) --------------------------------------------------------
int sub_43372D()
{
  return atexit(sub_402150);
}

//----- (0043374F) --------------------------------------------------------
int sub_43374F()
{
  return sub_4337BE((int)&unk_480D50);
}

//----- (0043375E) --------------------------------------------------------
int sub_43375E()
{
  return atexit(sub_433770);
}

//----- (00433770) --------------------------------------------------------
void __cdecl sub_433770()
{
  sub_43387B(&unk_480D50);
}

//----- (0043378E) --------------------------------------------------------
PVOID sub_43378E()
{
  return sub_434E0F((int)&unk_480880);
}

//----- (0043379D) --------------------------------------------------------
int sub_43379D()
{
  return atexit(sub_4337AF);
}

//----- (004337AF) --------------------------------------------------------
void __cdecl sub_4337AF()
{
  sub_434ECF((int)&unk_480880);
}

//----- (004337BE) --------------------------------------------------------
int __thiscall sub_4337BE(int this)
{
  int v2; // [sp+0h] [bp-18h]@1
  char v3; // [sp+4h] [bp-14h]@1
  int i; // [sp+8h] [bp-10h]@1
  int v5; // [sp+14h] [bp-4h]@1

  v2 = this;
  sub_42D5C4((struct _RTL_CRITICAL_SECTION *)(this + 16));
  v5 = 0;
  unknown_libname_193(&v3);
  *(_DWORD *)v2 = &off_45F90C;
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 152) = 0;
  *(_DWORD *)(v2 + 12) = 0;
  for ( i = 0; i < 10; ++i )
  {
    *(_DWORD *)(v2 + 4 * i + 156) = 0;
    *(_DWORD *)(v2 + 4 * i + 196) = 0;
  }
  return v2;
}
// 4352E0: using guessed type _DWORD __stdcall unknown_libname_193(_DWORD);
// 45F90C: using guessed type int (__stdcall *off_45F90C)(int);

//----- (0043387B) --------------------------------------------------------
void __thiscall sub_43387B(void *this)
{
  void *v1; // [sp+0h] [bp-18h]@1
  signed int i; // [sp+8h] [bp-10h]@1

  v1 = this;
  *(_DWORD *)this = &off_45F90C;
  for ( i = 1; i < 10; ++i )
  {
    if ( *((_DWORD *)v1 + i + 39) )
      sub_43CA18(*((LPVOID *)v1 + i + 39));
  }
  unknown_libname_192((char *)v1 + 48);
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)((char *)v1 + 16));
}
// 4352C0: using guessed type int __thiscall unknown_libname_192(_DWORD);
// 45F90C: using guessed type int (__stdcall *off_45F90C)(int);

//----- (00433921) --------------------------------------------------------
void __thiscall sub_433921(int this)
{
  int v1; // eax@34
  int v2; // [sp+0h] [bp-46Ch]@1
  unsigned int i; // [sp+4h] [bp-468h]@32
  int v4; // [sp+8h] [bp-464h]@24
  int v5; // [sp+Ch] [bp-460h]@24
  unsigned int v6; // [sp+10h] [bp-45Ch]@23
  LONG Value; // [sp+14h] [bp-458h]@23
  int v8; // [sp+18h] [bp-454h]@13
  int v9; // [sp+1Ch] [bp-450h]@13
  char *v10; // [sp+20h] [bp-44Ch]@8
  char *v11; // [sp+24h] [bp-448h]@8
  char *v12; // [sp+28h] [bp-444h]@8
  char *cp; // [sp+2Ch] [bp-440h]@8
  char *v14; // [sp+30h] [bp-43Ch]@8
  char *v15; // [sp+34h] [bp-438h]@8
  char v16; // [sp+38h] [bp-434h]@3
  int v17; // [sp+438h] [bp-34h]@3
  char *v18; // [sp+43Ch] [bp-30h]@2
  FILE *v19; // [sp+440h] [bp-2Ch]@2
  int v20; // [sp+444h] [bp-28h]@11
  int v21; // [sp+458h] [bp-14h]@1
  char v22; // [sp+45Ch] [bp-10h]@1
  int v23; // [sp+468h] [bp-4h]@11

  v2 = this;
  v21 = *(_DWORD *)(this + 12);
  sub_42D6C6(this + 16);
  v22 = 0;
  *(_DWORD *)(v2 + 8) = dword_478544;
  if ( byte_478574 )
  {
    v18 = 0;
    v19 = fopen(aEtcServerlist, aRt);
    if ( v19 )
    {
      memset(&v16, 0, 0x400u);
      v18 = fgets(&v16, 1024, v19);
      v17 = 0;
      while ( v18 || !(v19->_flag & 0x10) )
      {
        if ( strlen(&v16) <= 0xA )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aCanTLoadServer);
          return;
        }
        v12 = strtok(&v16, asc_46D04C);
        *(_BYTE *)(v2 + 64) = atoi(v12);
        v14 = strtok(0, asc_46D050);
        strcpy((char *)(v2 + 97), v14);
        cp = strtok(0, asc_46D054);
        *(_DWORD *)(v2 + 128) = inet_addr(cp);
        strcpy((char *)(v2 + 81), cp);
        v11 = strtok(0, asc_46D058);
        strcpy((char *)(v2 + 65), v11);
        v10 = strtok(0, asc_46D05C);
        *(_BYTE *)(v2 + 132) = atoi(v10);
        v15 = strtok(0, asc_46D060);
        *(_DWORD *)(v2 + 144) = atoi(v15);
        *(_DWORD *)(v2 + 124) = inet_addr((const char *)(v2 + 65));
        *(_DWORD *)(v2 + 140) = -1;
        *(_BYTE *)(v2 + 133) = 1;
        v21 = 12;
        *(_DWORD *)(v2 + 136) = 0;
        sub_435470((void *)(v2 + 48), (const void *)(v2 + 64));
        memcpy((void *)(v2 + 9 * v17 + 237), (const void *)(v2 + 64), 1u);
        memcpy((void *)(v2 + 9 * v17 + 238), (const void *)(v2 + 124), 4u);
        memcpy((void *)(v2 + 9 * v17 + 242), (const void *)(v2 + 8), 4u);
        ++*(_DWORD *)(v2 + 4);
        ++v17;
        sub_42DBFC((int)&unk_47FA00, 0, aServerDLoadedI, *(_BYTE *)(v2 + 64), v2 + 81, v2 + 65, *(_DWORD *)(v2 + 8));
        memset(&v16, 0, 0x400u);
        v18 = fgets(&v16, 1024, v19);
      }
      memcpy((void *)(v2 + 236), (const void *)(v2 + 4), 1u);
      *(_DWORD *)(v2 + 152) = 9 * *(_DWORD *)(v2 + 4) + 1;
      fclose(v19);
    }
    *(_DWORD *)(v2 + 2284) = sub_4353B0(v2 + 48);
    *(_DWORD *)(v2 + 156) = v2 + 236;
    *(_DWORD *)(v2 + 196) = *(_DWORD *)(v2 + 152);
    sub_4346C7((void *)v2);
    sub_42D6FF(v2 + 16);
  }
  else
  {
    sub_413E9E((int)&v20, (int)&unk_478608);
    v23 = 0;
    sub_4146F6((int)&v20, (SQLPOINTER)(v2 + 64));
    sub_41477C((int)&v20, (SQLPOINTER)(v2 + 97), 26);
    sub_41477C((int)&v20, (SQLPOINTER)(v2 + 65), 16);
    sub_41477C((int)&v20, (SQLPOINTER)(v2 + 81), 16);
    sub_4146F6((int)&v20, (SQLPOINTER)(v2 + 132));
    sub_414739((int)&v20, (SQLPOINTER)(v2 + 133));
    sub_414804((int)&v20, (SQLPOINTER)(v2 + 144));
    sub_414804((int)&v20, (SQLPOINTER)(v2 + 148));
    if ( (unsigned __int8)sub_4353F0((void *)(v2 + 48)) )
    {
      *(_DWORD *)(v2 + 4) = 0;
      *(_DWORD *)(v2 + 152) = 0;
      if ( sub_414123((int)&v20, aSelectIdNameIp) )
      {
        sub_4143F1((SQLHSTMT *)&v20, (bool *)&v8);
        v9 = 0;
        while ( !(_BYTE)v8 )
        {
          if ( v22 + 1 < *(_BYTE *)(v2 + 64) )
          {
            sub_42DBFC((int)&unk_47FA00, 3, aLoadingServerl);
            byte_4816F0 = 1;
            break;
          }
          ++v22;
          *(_DWORD *)(v2 + 128) = inet_addr((const char *)(v2 + 81));
          *(_DWORD *)(v2 + 124) = inet_addr((const char *)(v2 + 65));
          *(_DWORD *)(v2 + 140) = -1;
          *(_DWORD *)(v2 + 136) = 0;
          if ( !v21 || v21 > *(_BYTE *)(v2 + 132) )
            v21 = *(_BYTE *)(v2 + 132);
          sub_435470((void *)(v2 + 48), (const void *)(v2 + 64));
          ++*(_DWORD *)(v2 + 4);
          memcpy((void *)(v2 + 9 * v9 + 237), (const void *)(v2 + 64), 1u);
          memcpy((void *)(v2 + 9 * v9 + 238), (const void *)(v2 + 124), 4u);
          memcpy((void *)(v2 + 9 * v9 + 242), (const void *)(v2 + 148), 4u);
          sub_42DBFC(
            (int)&unk_47FA00,
            0,
            aServerDLoade_0,
            *(_BYTE *)(v2 + 64),
            v2 + 81,
            v2 + 65,
            *(_DWORD *)(v2 + 148),
            *(_BYTE *)(v2 + 132),
            *(_BYTE *)(v2 + 133));
          sub_4143F1((SQLHSTMT *)&v20, (bool *)&v8);
          ++v9;
        }
        memcpy((void *)(v2 + 236), (const void *)(v2 + 4), 1u);
        *(_DWORD *)(v2 + 152) = 9 * *(_DWORD *)(v2 + 4) + 1;
        *(_DWORD *)(v2 + 2284) = sub_4353B0(v2 + 48);
        *(_DWORD *)(v2 + 156) = v2 + 236;
        *(_DWORD *)(v2 + 196) = *(_DWORD *)(v2 + 152);
      }
    }
    else
    {
      Value = *(_DWORD *)(v2 + 152);
      v6 = sub_4353B0(v2 + 48);
      if ( sub_414123((int)&v20, aSelectIdName_0) )
      {
        sub_4143F1((SQLHSTMT *)&v20, (bool *)&v4);
        v5 = 0;
        while ( !(_BYTE)v4 )
        {
          if ( v22 + 1 < *(_BYTE *)(v2 + 64) )
          {
            sub_42DBFC((int)&unk_47FA00, 3, aLoadingServe_0);
            byte_4816F0 = 1;
            break;
          }
          ++v22;
          if ( *(_BYTE *)(v2 + 64) > v6 )
          {
            *(_DWORD *)(v2 + 128) = inet_addr((const char *)(v2 + 81));
            *(_DWORD *)(v2 + 124) = inet_addr((const char *)(v2 + 65));
            *(_DWORD *)(v2 + 136) = 0;
            *(_DWORD *)(v2 + 140) = -1;
            sub_435470((void *)(v2 + 48), (const void *)(v2 + 64));
            ++*(_DWORD *)(v2 + 4);
            memcpy((void *)(9 * v5 + v2 + *(_DWORD *)(v2 + 152) + 236), (const void *)(v2 + 64), 1u);
            memcpy((void *)(9 * v5 + v2 + *(_DWORD *)(v2 + 152) + 237), (const void *)(v2 + 124), 4u);
            memcpy((void *)(9 * v5++ + v2 + *(_DWORD *)(v2 + 152) + 241), (const void *)(v2 + 148), 4u);
            sub_42DBFC((int)&unk_47FA00, 0, aServerDLoade_1, *(_BYTE *)(v2 + 64), v2 + 81, v2 + 65, *(_DWORD *)(v2 + 8));
          }
          sub_4143F1((SQLHSTMT *)&v20, (bool *)&v4);
        }
        if ( *(_BYTE *)(v2 + 64) < v6 )
        {
          for ( i = *(_BYTE *)(v2 + 64) + 1; i <= v6; ++i )
          {
            v1 = sub_435450((void *)(v2 + 48), i - 1);
            sub_4354A0((void *)(v2 + 48), v1);
          }
        }
        *(_DWORD *)(v2 + 2284) = sub_4353B0(v2 + 48);
        Value = 9 * *(_DWORD *)(v2 + 4) + 1;
        InterlockedExchange((volatile LONG *)(v2 + 152), Value);
        memcpy((void *)(v2 + 236), (const void *)(v2 + 4), 1u);
      }
    }
    if ( (unsigned __int8)sub_4353F0((void *)(v2 + 48)) )
      sub_42DBFC((int)&unk_47FA00, 3, aServerLoadFail);
    *(_DWORD *)(v2 + 2284) = sub_4353B0(v2 + 48);
    *(_DWORD *)(v2 + 156) = v2 + 236;
    *(_DWORD *)(v2 + 196) = *(_DWORD *)(v2 + 152);
    sub_4346C7((void *)v2);
    sub_434848((void *)v2);
    sub_434A4F((void *)v2);
    *(_DWORD *)(v2 + 12) = v21;
    sub_42D6FF(v2 + 16);
    sub_434D36((void *)v2);
    v23 = -1;
    sub_413F5F((int)&v20);
  }
}
// 478544: using guessed type int dword_478544;
// 478574: using guessed type char byte_478574;
// 4816F0: using guessed type char byte_4816F0;

//----- (00434524) --------------------------------------------------------
void *__thiscall sub_434524(void *this, void *a2, int a3)
{
  void *result; // eax@3
  void *v4; // [sp+8h] [bp-60h]@1
  char v5; // [sp+Ch] [bp-5Ch]@4
  const void *v6; // [sp+64h] [bp-4h]@3

  v4 = this;
  sub_42D61C((int)this + 16);
  if ( a3 > *((_DWORD *)v4 + 571) || a3 <= 0 )
  {
    v5 = 0;
    sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v4 + 16));
    qmemcpy(a2, &v5, 0x58u);
    result = a2;
  }
  else
  {
    v6 = (const void *)sub_435410((char *)v4 + 48, a3 - 1);
    sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v4 + 16));
    qmemcpy(a2, v6, 0x58u);
    result = a2;
  }
  return result;
}

//----- (004345A7) --------------------------------------------------------
int __thiscall sub_4345A7(void *this, char a2, int a3)
{
  void *v3; // ST0C_4@1
  int v5; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@1
  char v7; // [sp+8h] [bp-4h]@1

  v3 = this;
  v7 = 0;
  sub_42D6C6((int)this + 16);
  for ( i = unknown_libname_194(v3); i != unknown_libname_195(v5 + 48); i += 88 )
  {
    if ( !memcmp((const void *)(i + 64), &a2, 4u) )
    {
      if ( *(_DWORD *)(i + 76) == -1 )
      {
        *(_DWORD *)(i + 76) = a3;
        v7 = *(_BYTE *)i;
      }
      else if ( *(_DWORD *)(i + 76) == a3 )
      {
        *(_DWORD *)(i + 76) = -1;
        v7 = *(_BYTE *)i;
      }
      else
      {
        v7 = -1;
      }
      break;
    }
  }
  sub_42D6FF(v5 + 16);
  return v7;
}
// 435370: using guessed type int __cdecl unknown_libname_194(_DWORD);
// 435390: using guessed type int __thiscall unknown_libname_195(_DWORD);

//----- (00434659) --------------------------------------------------------
int __thiscall sub_434659(void *this, int a2, char a3, char a4)
{
  void *v5; // [sp+0h] [bp-4h]@1

  v5 = this;
  sub_42D61C((int)this + 16);
  if ( a4 > 0 )
  {
    memcpy((void *)(dword_480DF0 + 16 * a4 - 3), &a3, 4u);
    memcpy((void *)(dword_480DF8 + 20 * a4 - 7), &a3, 4u);
  }
  sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v5 + 16));
  return a4;
}
// 480DF0: using guessed type int dword_480DF0;
// 480DF8: using guessed type int dword_480DF8;

//----- (004346C7) --------------------------------------------------------
void __thiscall sub_4346C7(void *this)
{
  _BYTE *v1; // ST20_4@3
  void *v2; // [sp+8h] [bp-78h]@1
  _BYTE *v3; // [sp+14h] [bp-6Ch]@1
  signed int i; // [sp+1Ch] [bp-64h]@1
  void *v5; // [sp+20h] [bp-60h]@1
  char v6; // [sp+24h] [bp-5Ch]@3
  char v7; // [sp+60h] [bp-20h]@3
  char v8; // [sp+68h] [bp-18h]@3
  char v9; // [sp+69h] [bp-17h]@3
  char v10; // [sp+78h] [bp-8h]@3
  void *v11; // [sp+7Ch] [bp-4h]@4

  v2 = this;
  v5 = operator new(0x800u);
  memset(v5, 0, 0x800u);
  *(_BYTE *)v5 = *((_BYTE *)v2 + 2284);
  *((_BYTE *)v5 + 1) = 0;
  v3 = (char *)v5 + 2;
  for ( i = 1; i <= *((_DWORD *)v2 + 571); ++i )
  {
    qmemcpy(&v6, (const void *)sub_435410((char *)v2 + 48, i - 1), 0x58u);
    *v3 = v6;
    v1 = v3 + 1;
    memcpy(v1, &v7, 4u);
    v1 += 4;
    memcpy(v1, &v10, 4u);
    v1 += 4;
    *v1++ = v8;
    *v1 = v9;
    v3 = v1 + 6;
  }
  v11 = 0;
  if ( *((_DWORD *)v2 + 40) )
    v11 = (void *)*((_DWORD *)v2 + 40);
  *((_DWORD *)v2 + 50) = 16 * *((_DWORD *)v2 + 571) + 2;
  *((_DWORD *)v2 + 40) = v5;
  if ( v11 )
    sub_43CA18(v11);
}

//----- (00434848) --------------------------------------------------------
void __thiscall sub_434848(void *this)
{
  void *v1; // [sp+8h] [bp-8Ch]@1
  char v2; // [sp+14h] [bp-80h]@5
  char v3; // [sp+27h] [bp-6Dh]@5
  wchar_t *v4; // [sp+28h] [bp-6Ch]@1
  int v5; // [sp+2Ch] [bp-68h]@1
  int i; // [sp+30h] [bp-64h]@1
  void *v7; // [sp+34h] [bp-60h]@1
  char v8; // [sp+38h] [bp-5Ch]@3
  char v9; // [sp+59h] [bp-3Bh]@3
  char v10; // [sp+74h] [bp-20h]@6
  char v11; // [sp+7Ch] [bp-18h]@6
  char v12; // [sp+7Dh] [bp-17h]@6
  char v13; // [sp+8Ch] [bp-8h]@6
  void *v14; // [sp+90h] [bp-4h]@7

  v1 = this;
  v7 = operator new(0x1000u);
  memset(v7, 0, 0x1000u);
  v4 = (wchar_t *)v7;
  *(_BYTE *)v7 = *((_BYTE *)v1 + 2284);
  v4 = (wchar_t *)((char *)v4 + 1);
  *(_BYTE *)v4 = 0;
  v4 = (wchar_t *)((char *)v4 + 1);
  v5 = 56;
  for ( i = 1; i <= *((_DWORD *)v1 + 571); ++i )
  {
    qmemcpy(&v8, (const void *)sub_435410((char *)v1 + 48, i - 1), 0x58u);
    *(_BYTE *)v4 = v8;
    v4 = (wchar_t *)((char *)v4 + 1);
    if ( strlen(&v9) >= 0x14 )
    {
      strncpy(&v2, &v9, 0x13u);
      v3 = 0;
      swprintf(v4, aS_7, &v2);
    }
    else
    {
      swprintf(v4, aS_6, &v9);
    }
    v4 += 20;
    memcpy(v4, &v10, 4u);
    v4 += 2;
    memcpy(v4, &v13, 4u);
    v4 += 2;
    *(_BYTE *)v4 = v11;
    v4 = (wchar_t *)((char *)v4 + 1);
    *(_BYTE *)v4 = v12;
    v4 = (wchar_t *)((char *)v4 + 1);
    v4 = (wchar_t *)((char *)v4 + 5);
  }
  v14 = 0;
  if ( *((_DWORD *)v1 + 41) )
    v14 = (void *)*((_DWORD *)v1 + 41);
  *((_DWORD *)v1 + 51) = 56 * *((_DWORD *)v1 + 571) + 2;
  *((_DWORD *)v1 + 41) = v7;
  if ( v14 )
    sub_43CA18(v14);
}

//----- (00434A4F) --------------------------------------------------------
void __thiscall sub_434A4F(void *this)
{
  _BYTE *v1; // ST28_4@3
  void *v2; // [sp+Ch] [bp-90h]@1
  _BYTE *v3; // [sp+18h] [bp-84h]@1
  signed int i; // [sp+20h] [bp-7Ch]@1
  void *v5; // [sp+24h] [bp-78h]@1
  char v6; // [sp+28h] [bp-74h]@3
  char v7; // [sp+64h] [bp-38h]@3
  char v8; // [sp+6Ch] [bp-30h]@3
  char v9; // [sp+6Dh] [bp-2Fh]@3
  char v10; // [sp+78h] [bp-24h]@3
  char v11; // [sp+7Ch] [bp-20h]@3
  void *v12; // [sp+80h] [bp-1Ch]@4
  CPPEH_RECORD ms_exc; // [sp+84h] [bp-18h]@1

  v2 = this;
  ms_exc.registration.TryLevel = 0;
  v5 = operator new(0x800u);
  memset(v5, 0, 0x800u);
  *(_BYTE *)v5 = *((_BYTE *)v2 + 2284);
  *((_BYTE *)v5 + 1) = 0;
  v3 = (char *)v5 + 2;
  for ( i = 1; i <= *((_DWORD *)v2 + 571); ++i )
  {
    qmemcpy(&v6, (const void *)sub_435410((char *)v2 + 48, i - 1), 0x58u);
    *v3 = v6;
    v1 = v3 + 1;
    memcpy(v1, &v7, 4u);
    v1 += 4;
    memcpy(v1, &v11, 4u);
    v1 += 4;
    *v1++ = v8;
    *v1 = v9;
    v1 += 6;
    memcpy(v1, &v10, 4u);
    v3 = v1 + 4;
  }
  v12 = 0;
  if ( *((_DWORD *)v2 + 42) )
    v12 = (void *)*((_DWORD *)v2 + 42);
  *((_DWORD *)v2 + 52) = 20 * *((_DWORD *)v2 + 571) + 2;
  *((_DWORD *)v2 + 42) = v5;
  if ( v12 )
    sub_43CA18(v12);
}

//----- (00434CD9) --------------------------------------------------------
int __thiscall sub_434CD9(void *this, char a2, char a3)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = (int)this;
  sub_42D6C6((int)this + 16);
  if ( a2 > 0 && a2 <= dword_48163C )
  {
    *(_BYTE *)(dword_480DF0 + 16 * a2 + 1) = a3;
    *(_BYTE *)(dword_480DF8 + 20 * a2 - 3) = a3;
  }
  return sub_42D6FF(v4 + 16);
}
// 480DF0: using guessed type int dword_480DF0;
// 480DF8: using guessed type int dword_480DF8;
// 48163C: using guessed type int dword_48163C;

//----- (00434D36) --------------------------------------------------------
void __thiscall sub_434D36(void *this)
{
  _DWORD *v1; // eax@3
  void *v2; // [sp+0h] [bp-60h]@1
  char v3; // [sp+4h] [bp-5Ch]@3
  int i; // [sp+5Ch] [bp-4h]@1

  v2 = this;
  for ( i = 1; i <= dword_48163C; ++i )
  {
    v1 = sub_434524(v2, &v3, i);
    if ( sub_418976((int)&unk_47EF80, v1[16]) )
      sub_434CD9(v2, i, 1);
  }
}
// 48163C: using guessed type int dword_48163C;

//----- (00434D97) --------------------------------------------------------
char __thiscall sub_434D97(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-Ch]@1
  char v4; // [sp+4h] [bp-8h]@0
  char v5; // [sp+8h] [bp-4h]@1

  v3 = this;
  v5 = 0;
  sub_42D61C((int)this + 16);
  if ( a2 > 0 && a2 <= dword_48163C )
    v4 = *(_BYTE *)(dword_480DF0 + 16 * a2 + 1);
  sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v3 + 16));
  if ( v4 == 1 )
    v5 = 1;
  return v5;
}
// 480DF0: using guessed type int dword_480DF0;
// 48163C: using guessed type int dword_48163C;

//----- (00434E0F) --------------------------------------------------------
PVOID __thiscall sub_434E0F(int this)
{
  PVOID Parameter; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  Parameter = (PVOID)this;
  InitializeCriticalSection((LPCRITICAL_SECTION)(this + 1200));
  *((_DWORD *)Parameter + 306) = GetTickCount();
  EnterCriticalSection((LPCRITICAL_SECTION)Parameter + 50);
  for ( i = 0; i < 100; ++i )
  {
    *((_DWORD *)Parameter + 3 * i + 1) = 0;
    *((_DWORD *)Parameter + 3 * i + 2) = 0;
    *((_BYTE *)Parameter + 12 * i) = i;
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)Parameter + 50);
  CreateTimerQueueTimer(
    (PHANDLE)Parameter + 307,
    0,
    Concurrency::details::Transmogrificator::TransmogrificationHandler,
    Parameter,
    0x493E0u,
    0x493E0u,
    0);
  return Parameter;
}

//----- (00434ECF) --------------------------------------------------------
BOOL __thiscall sub_434ECF(int this)
{
  int v1; // ST0C_4@1

  v1 = this;
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 1200));
  return DeleteTimerQueueTimer(0, *(HANDLE *)(v1 + 1228), 0);
}

//----- (00434EFD) --------------------------------------------------------
void __thiscall sub_434EFD(int this, unsigned __int8 a2, __int16 a3, __int16 a4)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  if ( (signed int)a2 <= 100 )
  {
    EnterCriticalSection((LPCRITICAL_SECTION)(this + 1200));
    *(_DWORD *)(v4 + 12 * a2 + 4) = a4;
    *(_DWORD *)(v4 + 12 * a2 + 8) = a3;
    LeaveCriticalSection((LPCRITICAL_SECTION)(v4 + 1200));
  }
}

//----- (00434F73) --------------------------------------------------------
void __thiscall sub_434F73(int this)
{
  int v1; // ST04_4@1

  v1 = this;
  ++*(_DWORD *)(this + 1224);
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 1200));
  *(_DWORD *)(v1 + 4) = *(_DWORD *)dword_478594;
  *(_DWORD *)(v1 + 8) = dword_480428;
  LeaveCriticalSection((LPCRITICAL_SECTION)(v1 + 1200));
}

//----- (00434FCA) --------------------------------------------------------
void __thiscall sub_434FCA(void *this)
{
  int v1; // [sp+0h] [bp-228h]@1
  int v2; // [sp+4h] [bp-224h]@1
  int i; // [sp+18h] [bp-210h]@1
  char v4; // [sp+1Ch] [bp-20Ch]@3
  int v5; // [sp+224h] [bp-4h]@1

  v1 = (int)this;
  sub_413E9E((int)&v2, (int)&unk_478608);
  v5 = 0;
  sub_434F73(v1);
  for ( i = 0; i <= dword_48163C; ++i )
  {
    EnterCriticalSection((LPCRITICAL_SECTION)(v1 + 1200));
    sprintf(
      &v4,
      aInsertUser_cou,
      i,
      *(_DWORD *)(v1 + 12 * i + 8),
      *(_DWORD *)(v1 + 12 * i + 4),
      *(_DWORD *)(v1 + 8),
      dword_48042C);
    LeaveCriticalSection((LPCRITICAL_SECTION)(v1 + 1200));
    sub_414123((int)&v2, &v4);
    sub_414A7B((int)&v2);
  }
  v5 = -1;
  sub_413F5F((int)&v2);
}
// 48163C: using guessed type int dword_48163C;

//----- (004350FC) --------------------------------------------------------
signed int __cdecl sub_4350FC(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@2

  if ( byte_4785E0 )
    v3 = sub_4372E1(&unk_481648, a1, a2);
  else
    v3 = sub_4345A7(&unk_480D50, a1, a2);
  return v3;
}
// 4785E0: using guessed type char byte_4785E0;

//----- (00435145) --------------------------------------------------------
int __cdecl sub_435145(char a1, char a2)
{
  int result; // eax@2

  if ( byte_4785E0 )
    result = sub_43738C((int)&unk_481648, a1, a2);
  else
    result = sub_434CD9(&unk_480D50, a1, a2);
  return result;
}
// 4785E0: using guessed type char byte_4785E0;

//----- (0043517B) --------------------------------------------------------
char __cdecl sub_43517B(char a1)
{
  char v2; // [sp+0h] [bp-4h]@2

  if ( byte_4785E0 )
    v2 = sub_43808B((int)&unk_481648, a1);
  else
    v2 = sub_434D97(&unk_480D50, a1);
  return v2;
}
// 4785E0: using guessed type char byte_4785E0;

//----- (004351B9) --------------------------------------------------------
char *__cdecl sub_4351B9(char *a1, char a2)
{
  char v3; // [sp+8h] [bp-108h]@3
  char v4; // [sp+60h] [bp-B0h]@2
  char v5; // [sp+B8h] [bp-58h]@2

  if ( byte_4785E0 )
    qmemcpy(&v5, sub_437261(&unk_481648, &v4, a2), 0x58u);
  else
    qmemcpy(&v5, sub_434524(&unk_480D50, &v3, a2), 0x58u);
  qmemcpy(a1, &v5, 0x58u);
  return a1;
}
// 4785E0: using guessed type char byte_4785E0;

//----- (0043522B) --------------------------------------------------------
int __cdecl sub_43522B(int a1, char a2, char a3)
{
  int result; // eax@2

  if ( byte_4785E0 )
    result = sub_43741A((int)&unk_481648, a3, a2);
  else
    result = sub_434659(&unk_480D50, a1, a2, a3);
  return result;
}
// 4785E0: using guessed type char byte_4785E0;

//----- (00435274) --------------------------------------------------------
int sub_435274()
{
  return atexit(sub_402150);
}

//----- (00435290) --------------------------------------------------------
void *__thiscall sub_435290(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_43387B(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00435300) --------------------------------------------------------
int __thiscall sub_435300(int this)
{
  int v1; // ST08_4@1
  int result; // eax@1

  v1 = this;
  sub_435590(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
  unknown_libname_198(*(LPVOID *)(v1 + 4), (*(_DWORD *)(v1 + 12) - *(_DWORD *)(v1 + 4)) / 88);
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  result = v1;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}
// 435AD0: using guessed type _DWORD __stdcall unknown_libname_198(LPVOID lpMem, _DWORD);

//----- (004353B0) --------------------------------------------------------
int __thiscall sub_4353B0(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 88;
  else
    v2 = 0;
  return v2;
}

//----- (004353F0) --------------------------------------------------------
BOOL __thiscall sub_4353F0(void *this)
{
  return sub_4353B0((int)this) == 0;
}

//----- (00435410) --------------------------------------------------------
int __thiscall sub_435410(void *this, unsigned int a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( sub_4353B0((int)this) <= a2 )
    sub_4355C0();
  return 88 * a2 + unknown_libname_194(v3);
}
// 435370: using guessed type int __cdecl unknown_libname_194(_DWORD);

//----- (00435450) --------------------------------------------------------
int __thiscall sub_435450(void *this, int a2)
{
  return 88 * a2 + unknown_libname_194(this);
}
// 435370: using guessed type int __cdecl unknown_libname_194(_DWORD);

//----- (00435470) --------------------------------------------------------
int __thiscall sub_435470(void *this, const void *a2)
{
  void *v2; // ST08_4@1
  char *v3; // eax@1

  v2 = this;
  v3 = (char *)unknown_libname_195(this);
  return sub_435540(v2, v3, a2);
}
// 435390: using guessed type int __thiscall unknown_libname_195(_DWORD);

//----- (004354A0) --------------------------------------------------------
int __thiscall sub_4354A0(void *this, int a2)
{
  void *v2; // ST0C_4@1
  const void *v3; // eax@1

  v2 = this;
  v3 = (const void *)unknown_libname_195(this);
  sub_435E30((const void *)(a2 + 88), v3, (void *)a2);
  sub_435590(*((_DWORD *)v2 + 2) - 88, *((_DWORD *)v2 + 2));
  *((_DWORD *)v2 + 2) -= 88;
  return a2;
}
// 435390: using guessed type int __thiscall unknown_libname_195(_DWORD);

//----- (00435500) --------------------------------------------------------
int __thiscall sub_435500(int this, _BYTE *a2)
{
  *(_BYTE *)this = *a2;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (00435540) --------------------------------------------------------
int __thiscall sub_435540(void *this, char *a2, const void *a3)
{
  int v3; // ST10_4@1
  int v4; // ST0C_4@1

  v3 = (signed int)&a2[-unknown_libname_194(this)] / 88;
  sub_435B10(v4, a2, 1u, a3);
  return 88 * v3 + unknown_libname_194(v4);
}
// 435370: using guessed type int __cdecl unknown_libname_194(_DWORD);

//----- (00435590) --------------------------------------------------------
int __stdcall sub_435590(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_435D50(a1);
    result = a1 + 88;
    a1 += 88;
  }
  return result;
}

//----- (004355C0) --------------------------------------------------------
void __noreturn sub_4355C0()
{
  int v0; // [sp+4h] [bp-3Ch]@1
  char v1; // [sp+8h] [bp-38h]@1
  char v2; // [sp+18h] [bp-28h]@2
  int v3; // [sp+3Ch] [bp-4h]@1

  sub_435900(&v1, aInvalidVectorT, (int)&v0);
  v3 = 0;
  unknown_libname_196(&v1);
  _CxxThrowException(&v2, &unk_463570);
}
// 435770: using guessed type _DWORD __stdcall unknown_libname_196(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (00435620) --------------------------------------------------------
void *__thiscall sub_435620(void *this, int a2)
{
  void *v2; // ST04_4@1

  v2 = this;
  exception::exception(a2);
  sub_4358C0((char *)v2 + 12, (_BYTE *)(a2 + 12));
  *(_DWORD *)v2 = &off_45FBD8;
  return v2;
}
// 44DC47: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FBD8: using guessed type int (__stdcall *off_45FBD8)(int);

//----- (004356B0) --------------------------------------------------------
void __thiscall __noreturn sub_4356B0(void *this)
{
  char v1; // [sp+4h] [bp-1Ch]@1

  sub_435620(&v1, (int)this);
  _CxxThrowException(&v1, &unk_4635E0);
}
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (004356E0) --------------------------------------------------------
void __thiscall sub_4356E0(void *this)
{
  int v1; // ST00_4@1

  v1 = (int)this;
  *(_DWORD *)this = &off_45FBD8;
  sub_41FD50();
  sub_44DCB0(v1);
}
// 45FBD8: using guessed type int (__stdcall *off_45FBD8)(int);

//----- (00435740) --------------------------------------------------------
void *__thiscall sub_435740(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_4356E0(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (004357A0) --------------------------------------------------------
void *__thiscall sub_4357A0(void *this, _BYTE *a2)
{
  void *v2; // ST04_4@1
  CHAR *v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+10h] [bp-4h]@1

  v2 = this;
  v4 = byte_481640;
  exception::exception(&v4);
  v5 = 0;
  sub_4358C0((char *)v2 + 12, a2);
  *(_DWORD *)v2 = &off_45FBD8;
  return v2;
}
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FBD8: using guessed type int (__stdcall *off_45FBD8)(int);

//----- (00435810) --------------------------------------------------------
void __thiscall sub_435810(void *this)
{
  *(_DWORD *)this = &off_45FBE8;
  sub_4356E0(this);
}
// 45FBE8: using guessed type int (__stdcall *off_45FBE8)(int);

//----- (00435830) --------------------------------------------------------
void __thiscall __noreturn sub_435830(void *this)
{
  char v1; // [sp+4h] [bp-1Ch]@2

  unknown_libname_197(this);
  _CxxThrowException(&v1, &unk_463570);
}
// 435890: using guessed type _DWORD __stdcall unknown_libname_197(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (00435860) --------------------------------------------------------
void *__thiscall sub_435860(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_435810(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (004358C0) --------------------------------------------------------
void *__thiscall sub_4358C0(void *this, _BYTE *a2)
{
  void *v2; // ST0C_4@1

  v2 = this;
  *(_BYTE *)this = *a2;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(a2, 0, -1);
  return v2;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 435960: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(_DWORD, _DWORD, _DWORD);

//----- (00435900) --------------------------------------------------------
void *__thiscall sub_435900(void *this, char *a2, int a3)
{
  void *v3; // ST04_4@1

  v3 = this;
  *(_BYTE *)this = *(_BYTE *)a3;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(a2);
  return v3;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);

//----- (00435930) --------------------------------------------------------
void *__thiscall sub_435930(int this)
{
  void *v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = *(void **)(this + 4);
  else
    v2 = sub_435AC0();
  return v2;
}

//----- (00435AC0) --------------------------------------------------------
void *sub_435AC0()
{
  return &unk_45F91C;
}

//----- (00435B10) --------------------------------------------------------
unsigned int __thiscall sub_435B10(int this, char *a2, unsigned int a3, const void *a4)
{
  int v4; // ST14_4@5
  void *v5; // ST18_4@5
  void *v6; // ST1C_4@5
  int v7; // ecx@5
  unsigned int result; // eax@5
  int v9; // [sp+0h] [bp-14h]@3
  int v10; // [sp+4h] [bp-10h]@1

  v10 = this;
  if ( (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 8)) / 88 >= a3 )
  {
    result = (*(_DWORD *)(this + 8) - (signed int)a2) / 88;
    if ( result >= a3 )
    {
      if ( a3 )
      {
        sub_435D70(*(_DWORD *)(this + 8) - 88 * a3, *(_DWORD *)(this + 8), *(void **)(this + 8));
        sub_435EA0(a2, (char *)(*(_DWORD *)(v10 + 8) - 88 * a3), *(char **)(v10 + 8));
        sub_435E70(a2, &a2[88 * a3], a4);
        result = v10;
        *(_DWORD *)(v10 + 8) += 88 * a3;
      }
    }
    else
    {
      sub_435D70((int)a2, *(_DWORD *)(this + 8), &a2[88 * a3]);
      sub_435DB0(*(void **)(v10 + 8), a3 - (*(_DWORD *)(v10 + 8) - (signed int)a2) / 88, (int)a4);
      sub_435E70(a2, *(void **)(v10 + 8), a4);
      result = v10;
      *(_DWORD *)(v10 + 8) += 88 * a3;
    }
  }
  else
  {
    if ( a3 >= sub_4353B0(this) )
      v9 = a3;
    else
      v9 = sub_4353B0(v10);
    v4 = v9 + sub_4353B0(v10);
    v5 = sub_435DF0(v4, 0);
    v6 = sub_435D70(*(_DWORD *)(v10 + 4), (int)a2, v5);
    sub_435DB0(v6, a3, (int)a4);
    sub_435D70((int)a2, *(_DWORD *)(v10 + 8), (char *)v6 + 88 * a3);
    sub_435590(*(_DWORD *)(v10 + 4), *(_DWORD *)(v10 + 8));
    unknown_libname_198(*(LPVOID *)(v10 + 4), (*(_DWORD *)(v10 + 12) - *(_DWORD *)(v10 + 4)) / 88);
    *(_DWORD *)(v10 + 12) = (char *)v5 + 88 * v4;
    v7 = (int)v5 + 88 * sub_4353B0(v10);
    result = v10;
    *(_DWORD *)(v10 + 8) = 88 * a3 + v7;
    *(_DWORD *)(v10 + 4) = v5;
  }
  return result;
}
// 435AD0: using guessed type _DWORD __stdcall unknown_libname_198(LPVOID lpMem, _DWORD);

//----- (00435D50) --------------------------------------------------------
void __stdcall sub_435D50(int a1)
{
  sub_435EE0();
}

//----- (00435D70) --------------------------------------------------------
void *__stdcall sub_435D70(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_435E10(a3, a1);
    a3 = (char *)a3 + 88;
    a1 += 88;
  }
  return a3;
}

//----- (00435DB0) --------------------------------------------------------
int __stdcall sub_435DB0(void *a1, int a2, int a3)
{
  int result; // eax@2

  while ( a2 )
  {
    sub_435E10(a1, a3);
    result = a2-- - 1;
    a1 = (char *)a1 + 88;
  }
  return result;
}

//----- (00435DF0) --------------------------------------------------------
void *__stdcall sub_435DF0(int a1, int a2)
{
  return sub_435EF0(a1);
}

//----- (00435E10) --------------------------------------------------------
void *__stdcall sub_435E10(void *a1, int a2)
{
  return sub_435F20(a1, a2);
}

//----- (00435E30) --------------------------------------------------------
void *__cdecl sub_435E30(const void *a1, const void *a2, void *a3)
{
  while ( a1 != a2 )
  {
    qmemcpy(a3, a1, 0x58u);
    a3 = (char *)a3 + 88;
    a1 = (char *)a1 + 88;
  }
  return a3;
}

//----- (00435E70) --------------------------------------------------------
int __cdecl sub_435E70(void *a1, void *a2, const void *a3)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    qmemcpy(a1, a3, 0x58u);
    result = (int)a1 + 88;
    a1 = (char *)a1 + 88;
  }
  return result;
}

//----- (00435EA0) --------------------------------------------------------
char *__cdecl sub_435EA0(char *a1, char *a2, char *a3)
{
  while ( a1 != a2 )
  {
    a2 -= 88;
    a3 -= 88;
    qmemcpy(a3, a2, 0x58u);
  }
  return a3;
}

//----- (00435EE0) --------------------------------------------------------
void sub_435EE0()
{
  ;
}

//----- (00435EF0) --------------------------------------------------------
void *__cdecl sub_435EF0(int a1)
{
  if ( a1 < 0 )
    a1 = 0;
  return malloc(88 * a1);
}

//----- (00435F20) --------------------------------------------------------
void *__cdecl sub_435F20(void *a1, int a2)
{
  void *result; // eax@1

  result = operator new(0x58u, a1);
  if ( result )
    qmemcpy(result, (const void *)a2, 0x58u);
  return result;
}

//----- (00435F7F) --------------------------------------------------------
void *sub_435F7F()
{
  return sub_436B4F(&unk_481648);
}

//----- (00435F8E) --------------------------------------------------------
int sub_435F8E()
{
  return atexit(sub_435FA0);
}

//----- (00435FA0) --------------------------------------------------------
void __cdecl sub_435FA0()
{
  sub_436BC3(&unk_481648);
}

//----- (00435FAF) --------------------------------------------------------
int __thiscall sub_435FAF(int this)
{
  int v1; // ST00_4@1

  v1 = this;
  sub_42D5C4((struct _RTL_CRITICAL_SECTION *)(this + 4));
  *(_DWORD *)v1 = &off_45F920;
  *(_DWORD *)(v1 + 2092) = 0;
  *(_DWORD *)(v1 + 2096) = 0;
  *(_DWORD *)(v1 + 2088) = 0;
  return v1;
}
// 45F920: using guessed type int (__stdcall *off_45F920)(int);

//----- (00435FF8) --------------------------------------------------------
void __thiscall sub_435FF8(int this)
{
  *(_DWORD *)this = &off_45F920;
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)(this + 4));
}
// 45F920: using guessed type int (__stdcall *off_45F920)(int);

//----- (00436017) --------------------------------------------------------
int __thiscall sub_436017(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  memset((void *)(this + 40), 0, 0x800u);
  *(_DWORD *)(v4 + 2092) = a3;
  result = v4;
  *(_DWORD *)(v4 + 2096) = a2;
  if ( *(_DWORD *)(v4 + 2096) )
  {
    *(_DWORD *)(v4 + 2088) = 2;
  }
  else
  {
    result = v4;
    *(_DWORD *)(v4 + 2088) = 1;
  }
  *(_DWORD *)(v4 + 36) = 0;
  return result;
}

//----- (00436084) --------------------------------------------------------
char __thiscall sub_436084(int this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23)
{
  char v24; // [sp-58h] [bp-6Ch]@4
  int v25; // [sp-54h] [bp-68h]@4
  int v26; // [sp-50h] [bp-64h]@4
  int v27; // [sp-4Ch] [bp-60h]@4
  int v28; // [sp-48h] [bp-5Ch]@4
  int v29; // [sp-44h] [bp-58h]@4
  int v30; // [sp-40h] [bp-54h]@4
  int v31; // [sp-3Ch] [bp-50h]@4
  int v32; // [sp-38h] [bp-4Ch]@4
  int v33; // [sp-34h] [bp-48h]@4
  int v34; // [sp-30h] [bp-44h]@4
  int v35; // [sp-2Ch] [bp-40h]@4
  int v36; // [sp-28h] [bp-3Ch]@4
  int v37; // [sp-24h] [bp-38h]@4
  int v38; // [sp-20h] [bp-34h]@4
  char v39; // [sp-1Ch] [bp-30h]@4
  int v40; // [sp-18h] [bp-2Ch]@4
  int v41; // [sp-14h] [bp-28h]@4
  int v42; // [sp-10h] [bp-24h]@4
  int v43; // [sp-Ch] [bp-20h]@4
  int v44; // [sp-8h] [bp-1Ch]@4
  char v45; // [sp-4h] [bp-18h]@4
  int v46; // [sp+8h] [bp-Ch]@1
  _DWORD *v47; // [sp+Ch] [bp-8h]@1
  char v48; // [sp+10h] [bp-4h]@1

  v47 = (_DWORD *)this;
  v48 = 0;
  v46 = *(_DWORD *)(this + 2096);
  switch ( v46 )
  {
    case 1:
      qmemcpy(&v24, &a2, 0x58u);
      v48 = sub_4361DF(
              v47,
              v24,
              v25,
              v26,
              v27,
              v28,
              v29,
              v30,
              v31,
              v32,
              v33,
              v34,
              v35,
              v36,
              v37,
              v38,
              v39,
              v40,
              v41,
              v42,
              v43,
              v44,
              v45);
      break;
    case 2:
      qmemcpy(&v24, &a2, 0x58u);
      v48 = sub_4362E7(
              v47,
              v24,
              v25,
              v26,
              v27,
              v28,
              v29,
              v30,
              v31,
              v32,
              v33,
              v34,
              v35,
              v36,
              v37,
              v38,
              v39,
              v40,
              v41,
              v42,
              v43,
              v44,
              v45);
      break;
    case 3:
      qmemcpy(&v24, &a2, 0x58u);
      v48 = sub_436452(
              v47,
              v24,
              v25,
              v26,
              v27,
              v28,
              v29,
              v30,
              v31,
              v32,
              v33,
              v34,
              v35,
              v36,
              v37,
              v38,
              v39,
              v40,
              v41,
              v42,
              v43,
              v44,
              v45);
      break;
    default:
      qmemcpy(&v24, &a2, 0x58u);
      v48 = sub_43612C(
              v47,
              v24,
              v25,
              v26,
              v27,
              v28,
              v29,
              v30,
              v31,
              v32,
              v33,
              v34,
              v35,
              v36,
              v37,
              v38,
              v39,
              v40,
              v41,
              v42,
              v43,
              v44,
              v45);
      break;
  }
  return v48;
}

//----- (0043612C) --------------------------------------------------------
char __thiscall sub_43612C(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, int a19, int a20, int a21, int a22, char a23)
{
  _DWORD *v23; // ST0C_4@1
  int v24; // ST10_4@1

  v23 = this;
  sub_42D6C6((int)(this + 1));
  ++v23[9];
  v24 = v23[522];
  *((_BYTE *)v23 + v24++ + 40) = a2;
  memcpy((char *)v23 + v24 + 40, &a17, 4u);
  v24 += 4;
  memcpy((char *)v23 + v24 + 40, &a23, 4u);
  v23[522] = v24 + 4;
  sub_42D6FF((int)(v23 + 1));
  return 1;
}

//----- (004361DF) --------------------------------------------------------
char __thiscall sub_4361DF(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, __int16 a19, char a20, int a21, int a22, char a23)
{
  _DWORD *v23; // ST0C_4@1
  int v24; // ST10_4@1

  v23 = this;
  sub_42D6C6((int)(this + 1));
  ++v23[9];
  v24 = v23[522];
  *((_BYTE *)v23 + v24++ + 40) = a2;
  memcpy((char *)v23 + v24 + 40, &a17, 4u);
  v24 += 4;
  memcpy((char *)v23 + v24 + 40, &a23, 4u);
  v24 += 4;
  *((_BYTE *)v23 + v24++ + 40) = a19;
  *((_BYTE *)v23 + v24 + 40) = HIBYTE(a19);
  v24 += 3;
  memcpy((char *)v23 + v24 + 40, &a20, 2u);
  v23[522] = v24 + 3;
  sub_42D6FF((int)(v23 + 1));
  return 1;
}

//----- (004362E7) --------------------------------------------------------
char __thiscall sub_4362E7(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, __int16 a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, __int16 a19, char a20, int a21, int a22, char a23)
{
  int v23; // ST10_4@1
  int v24; // ST10_4@4
  _DWORD *v26; // [sp+0h] [bp-20h]@1
  int v27; // [sp+4h] [bp-1Ch]@1
  char v28; // [sp+Ch] [bp-14h]@3
  char v29; // [sp+1Fh] [bp-1h]@3

  v26 = this;
  sub_42D6C6((int)(this + 1));
  ++v26[9];
  v23 = v26[522];
  *((_BYTE *)v26 + v23 + 40) = a2;
  v27 = v23 + 1;
  if ( strlen((const char *)&a10 + 1) >= 0x14 )
  {
    strncpy(&v28, (const char *)&a10 + 1, 0x13u);
    v29 = 0;
    swprintf((wchar_t *)((char *)v26 + v27 + 40), aS_9, &v28);
  }
  else
  {
    swprintf((wchar_t *)((char *)v26 + v27 + 40), aS_8, (char *)&a10 + 1);
  }
  v24 = v27 + 40;
  memcpy((char *)v26 + v24 + 40, &a17, 4u);
  v24 += 4;
  memcpy((char *)v26 + v24 + 40, &a23, 4u);
  v24 += 4;
  *((_BYTE *)v26 + v24++ + 40) = a19;
  *((_BYTE *)v26 + v24 + 40) = HIBYTE(a19);
  v24 += 3;
  memcpy((char *)v26 + v24 + 40, &a20, 2u);
  v26[522] = v24 + 3;
  sub_42D6FF((int)(v26 + 1));
  return 1;
}

//----- (00436452) --------------------------------------------------------
char __thiscall sub_436452(_DWORD *this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, char a17, int a18, __int16 a19, char a20, int a21, char a22, char a23)
{
  _DWORD *v23; // ST0C_4@1
  int v24; // ST10_4@1

  v23 = this;
  sub_42D6C6((int)(this + 1));
  ++v23[9];
  v24 = v23[522];
  *((_BYTE *)v23 + v24++ + 40) = a2;
  memcpy((char *)v23 + v24 + 40, &a17, 4u);
  v24 += 4;
  memcpy((char *)v23 + v24 + 40, &a23, 4u);
  v24 += 4;
  *((_BYTE *)v23 + v24++ + 40) = a19;
  *((_BYTE *)v23 + v24 + 40) = HIBYTE(a19);
  v24 += 3;
  memcpy((char *)v23 + v24 + 40, &a20, 2u);
  v24 += 3;
  memcpy((char *)v23 + v24 + 40, &a22, 4u);
  v23[522] = v24 + 4;
  sub_42D6FF((int)(v23 + 1));
  return 1;
}

//----- (00436576) --------------------------------------------------------
void __thiscall sub_436576(void *this)
{
  void *v1; // ST00_4@1

  v1 = this;
  sub_42D61C((int)this + 4);
  *((_BYTE *)v1 + 40) = *((_BYTE *)v1 + 36);
  sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v1 + 4));
}

//----- (004365A3) --------------------------------------------------------
int __thiscall sub_4365A3(_DWORD *this, char a2, char a3)
{
  int result; // eax@1
  int v4; // [sp+4h] [bp-8h]@4
  _DWORD *v5; // [sp+8h] [bp-4h]@1

  v5 = this;
  result = a2;
  if ( a2 > 0 )
  {
    result = unknown_libname_200(&unk_481648);
    if ( a2 <= result )
    {
      v4 = v5[524];
      switch ( v4 )
      {
        case 1:
          result = sub_436624(v5, a2, a3);
          break;
        case 2:
          result = sub_436699(v5, a2, a3);
          break;
        case 3:
          result = sub_43670E(v5, a2, a3);
          break;
      }
    }
  }
  return result;
}
// 437250: using guessed type int __thiscall unknown_libname_200(_DWORD);

//----- (00436624) --------------------------------------------------------
int __thiscall sub_436624(void *this, char a2, char a3)
{
  int result; // eax@5
  int v4; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v4 = (int)this;
  for ( i = 0; i < *(_DWORD *)(v4 + 36); ++i )
  {
    if ( *(_BYTE *)(v4 + 16 * i + 42) == a2 )
    {
      sub_42D61C(v4 + 4);
      *(_BYTE *)(v4 + 16 * i + 57) = a3;
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v4 + 4));
    }
    result = i + 1;
  }
  return result;
}

//----- (00436699) --------------------------------------------------------
int __thiscall sub_436699(void *this, char a2, char a3)
{
  int result; // eax@5
  int v4; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v4 = (int)this;
  for ( i = 0; i < *(_DWORD *)(v4 + 36); ++i )
  {
    if ( *(_BYTE *)(v4 + 56 * i + 42) == a2 )
    {
      sub_42D61C(v4 + 4);
      *(_BYTE *)(v4 + 56 * i + 97) = a3;
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v4 + 4));
    }
    result = i + 1;
  }
  return result;
}

//----- (0043670E) --------------------------------------------------------
int __thiscall sub_43670E(void *this, char a2, char a3)
{
  int result; // eax@5
  int v4; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v4 = (int)this;
  for ( i = 0; i < *(_DWORD *)(v4 + 36); ++i )
  {
    if ( *(_BYTE *)(v4 + 20 * i + 42) == a2 )
    {
      sub_42D61C(v4 + 4);
      *(_BYTE *)(v4 + 20 * i + 57) = a3;
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v4 + 4));
    }
    result = i + 1;
  }
  return result;
}

//----- (00436783) --------------------------------------------------------
int __thiscall sub_436783(_DWORD *this, char a2, char a3)
{
  int result; // eax@1
  int v4; // [sp+4h] [bp-8h]@4
  _DWORD *v5; // [sp+8h] [bp-4h]@1

  v5 = this;
  result = a2;
  if ( a2 > 0 )
  {
    result = unknown_libname_200(&unk_481648);
    if ( a2 <= result )
    {
      v4 = v5[524];
      switch ( v4 )
      {
        case 1:
          result = sub_436804(v5, a2, a3);
          break;
        case 2:
          result = sub_436885(v5, a2, a3);
          break;
        case 3:
          result = sub_436906(v5, a2, a3);
          break;
      }
    }
  }
  return result;
}
// 437250: using guessed type int __thiscall unknown_libname_200(_DWORD);

//----- (00436804) --------------------------------------------------------
int __thiscall sub_436804(void *this, char a2, char a3)
{
  int result; // eax@5
  int v4; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v4 = (int)this;
  for ( i = 0; i < *(_DWORD *)(v4 + 36); ++i )
  {
    if ( *(_BYTE *)(v4 + 16 * i + 42) == a2 )
    {
      sub_42D61C(v4 + 4);
      memcpy((void *)(v4 + 16 * i + 53), &a3, 4u);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v4 + 4));
    }
    result = i + 1;
  }
  return result;
}

//----- (00436885) --------------------------------------------------------
int __thiscall sub_436885(void *this, char a2, char a3)
{
  int result; // eax@5
  int v4; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v4 = (int)this;
  for ( i = 0; i < *(_DWORD *)(v4 + 36); ++i )
  {
    if ( *(_BYTE *)(v4 + 56 * i + 42) == a2 )
    {
      sub_42D61C(v4 + 4);
      memcpy((void *)(v4 + 56 * i + 93), &a3, 4u);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v4 + 4));
    }
    result = i + 1;
  }
  return result;
}

//----- (00436906) --------------------------------------------------------
int __thiscall sub_436906(void *this, char a2, char a3)
{
  int result; // eax@5
  int v4; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v4 = (int)this;
  for ( i = 0; i < *(_DWORD *)(v4 + 36); ++i )
  {
    if ( *(_BYTE *)(v4 + 20 * i + 42) == a2 )
    {
      sub_42D61C(v4 + 4);
      memcpy((void *)(v4 + 20 * i + 53), &a3, 4u);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v4 + 4));
    }
    result = i + 1;
  }
  return result;
}

//----- (00436987) --------------------------------------------------------
int __thiscall sub_436987(int this, _DWORD *a2)
{
  int result; // eax@2

  if ( this == -40 )
  {
    result = 0;
  }
  else
  {
    *a2 = this + 40;
    result = *(_DWORD *)(this + 2088);
  }
  return result;
}

//----- (004369B6) --------------------------------------------------------
char __thiscall sub_4369B6(int this, int a2, int a3, int a4, void *a5)
{
  int v6; // [sp+0h] [bp-8h]@1
  char v7; // [sp+4h] [bp-4h]@1

  v6 = this;
  v7 = 0;
  if ( a2 == *(_DWORD *)(this + 2096) && a3 == *(_DWORD *)(this + 2092) && a5 )
  {
    sub_42D6C6(this + 4);
    memcpy((void *)(v6 + 40), a5, 0x800u);
    *(_DWORD *)(v6 + 36) = *(_BYTE *)(v6 + 40);
    *(_DWORD *)(v6 + 2088) = a4;
    sub_42D6FF(v6 + 4);
    v7 = 1;
  }
  return v7;
}

//----- (00436A39) --------------------------------------------------------
char __thiscall sub_436A39(int this, char a2)
{
  int v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+8h] [bp-Ch]@0
  int i; // [sp+Ch] [bp-8h]@1
  char v6; // [sp+10h] [bp-4h]@1

  v3 = this;
  v6 = 0;
  for ( i = 0; i < *(_DWORD *)(this + 36); ++i )
  {
    if ( *(_BYTE *)(this + 16 * i + 42) == a2 )
    {
      sub_42D61C(this + 4);
      v4 = *(_BYTE *)(v3 + 16 * i + 57);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)(v3 + 4));
      break;
    }
  }
  if ( v4 == 1 )
    v6 = 1;
  return v6;
}

//----- (00436B4F) --------------------------------------------------------
void *__thiscall sub_436B4F(void *this)
{
  void *v1; // ST04_4@1
  char v3; // [sp+4h] [bp-10h]@1
  int v4; // [sp+10h] [bp-4h]@1

  v1 = this;
  unknown_libname_193(&v3);
  v4 = 0;
  sub_42D5C4((struct _RTL_CRITICAL_SECTION *)((char *)v1 + 44));
  *(_DWORD *)v1 = &off_45F924;
  *((_DWORD *)v1 + 1) = 0;
  *((_DWORD *)v1 + 10) = 0;
  return v1;
}
// 4352E0: using guessed type _DWORD __stdcall unknown_libname_193(_DWORD);
// 45F924: using guessed type int (__stdcall *off_45F924)(int);

//----- (00436BC3) --------------------------------------------------------
int __thiscall sub_436BC3(void *this)
{
  void *v2; // [sp+4h] [bp-24h]@1
  void (__thiscall ***v3)(_DWORD, _DWORD); // [sp+10h] [bp-18h]@6
  int j; // [sp+14h] [bp-14h]@3
  signed int i; // [sp+18h] [bp-10h]@1

  v2 = this;
  *(_DWORD *)this = &off_45F924;
  for ( i = 0; i < 4; ++i )
  {
    for ( j = 0; j < *((_DWORD *)v2 + 1); ++j )
    {
      if ( *(_DWORD *)(*((_DWORD *)v2 + i + 6) + 4 * j) )
      {
        v3 = *(void (__thiscall ****)(_DWORD, _DWORD))(*((_DWORD *)v2 + i + 6) + 4 * j);
        if ( v3 )
          (**v3)(v3, 1);
      }
    }
    if ( *((_DWORD *)v2 + i + 6) )
      sub_43CA18(*((LPVOID *)v2 + i + 6));
  }
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)((char *)v2 + 44));
  return unknown_libname_192((char *)v2 + 8);
}
// 4352C0: using guessed type int __thiscall unknown_libname_192(_DWORD);
// 45F924: using guessed type int (__stdcall *off_45F924)(int);

//----- (00436CD0) --------------------------------------------------------
char __thiscall sub_436CD0(void *this)
{
  char v1; // ST2C_1@5
  char v3; // ST18_1@27
  char v4; // ST14_1@40
  int v5; // [sp+0h] [bp-B4h]@16
  int v6; // [sp+4h] [bp-B0h]@1
  void *v7; // [sp+14h] [bp-A0h]@15
  int v8; // [sp+24h] [bp-90h]@1
  int v9; // [sp+28h] [bp-8Ch]@1
  int v10; // [sp+2Ch] [bp-88h]@1
  int j; // [sp+40h] [bp-74h]@1
  int i; // [sp+44h] [bp-70h]@1
  char v13; // [sp+48h] [bp-6Ch]@1
  char TargetValue; // [sp+4Ch] [bp-68h]@28
  char v15; // [sp+4Dh] [bp-67h]@28
  char cp; // [sp+5Dh] [bp-57h]@28
  char v17; // [sp+6Dh] [bp-47h]@28
  char v18; // [sp+86h] [bp-2Eh]@33
  unsigned __int32 v19; // [sp+88h] [bp-2Ch]@33
  unsigned __int32 v20; // [sp+8Ch] [bp-28h]@33
  char v21; // [sp+90h] [bp-24h]@28
  char v22; // [sp+91h] [bp-23h]@28
  int v23; // [sp+94h] [bp-20h]@33
  int v24; // [sp+98h] [bp-1Ch]@33
  char v25; // [sp+9Ch] [bp-18h]@28
  char v26; // [sp+A0h] [bp-14h]@28
  int v27; // [sp+A4h] [bp-10h]@1
  int v28; // [sp+B0h] [bp-4h]@1

  v6 = (int)this;
  LOBYTE(v27) = 1;
  LOBYTE(v8) = 0;
  v9 = 0;
  i = 0;
  j = 0;
  v13 = 0;
  sub_413E9E((int)&v10, (int)&unk_478608);
  v28 = 0;
  sub_42D6C6(v6 + 44);
  if ( (unsigned __int8)sub_4353F0((void *)(v6 + 8)) )
  {
    sub_414804((int)&v10, &v9);
    if ( sub_414123((int)&v10, aSelectMaxKindF) )
    {
      if ( sub_4143F1((SQLHSTMT *)&v10, (bool *)&v8) )
      {
        if ( (_BYTE)v8 )
        {
          sub_42D6FF(v6 + 44);
          sub_414A7B((int)&v10);
          sub_42DBFC((int)&unk_47FA00, 3, aLoadServerkind);
          v1 = v27;
          v28 = -1;
          sub_413F5F((int)&v10);
          return v1;
        }
        sub_414A7B((int)&v10);
        while ( v9 )
        {
          v9 >>= 1;
          ++*(_DWORD *)(v6 + 4);
        }
        ++*(_DWORD *)(v6 + 4);
        for ( i = 0; i < 4; ++i )
        {
          *(_DWORD *)(v6 + 4 * i + 24) = operator new(4 * *(_DWORD *)(v6 + 4));
          if ( !*(_DWORD *)(v6 + 4 * i + 24) )
          {
            sub_42DBFC((int)&unk_47FA00, 3, aLoadServerki_0);
            LOBYTE(v27) = 0;
            break;
          }
          memset(*(void **)(v6 + 4 * i + 24), 0, 4 * *(_DWORD *)(v6 + 4));
          for ( j = 0; j < *(_DWORD *)(v6 + 4); ++j )
          {
            v7 = operator new(0x834u);
            LOBYTE(v28) = 1;
            if ( v7 )
              v5 = sub_435FAF((int)v7);
            else
              v5 = 0;
            LOBYTE(v28) = 0;
            *(_DWORD *)(*(_DWORD *)(v6 + 4 * i + 24) + 4 * j) = v5;
            if ( !*(_DWORD *)(*(_DWORD *)(v6 + 4 * i + 24) + 4 * j) )
            {
              sub_42DBFC((int)&unk_47FA00, 3, aLoadServerki_1);
              v28 = -1;
              sub_413F5F((int)&v10);
              return 0;
            }
            sub_436017(*(_DWORD *)(*(_DWORD *)(v6 + 4 * i + 24) + 4 * j), i, j);
          }
        }
      }
      else
      {
        LOBYTE(v27) = 0;
      }
    }
    else
    {
      LOBYTE(v27) = 0;
    }
    if ( !(_BYTE)v27 )
    {
      sub_42D6FF(v6 + 44);
      sub_414A7B((int)&v10);
      sub_42DBFC((int)&unk_47FA00, 3, aLoadServerki_2);
      v3 = v27;
      v28 = -1;
      sub_413F5F((int)&v10);
      return v3;
    }
    sub_4146F6((int)&v10, &TargetValue);
    sub_41477C((int)&v10, &v17, 26);
    sub_41477C((int)&v10, &v15, 16);
    sub_41477C((int)&v10, &cp, 16);
    sub_4146F6((int)&v10, &v21);
    sub_414739((int)&v10, &v22);
    sub_414804((int)&v10, &v25);
    sub_414804((int)&v10, &v26);
    if ( sub_414123((int)&v10, aSelectIdName_1) )
    {
      sub_4143F1((SQLHSTMT *)&v10, (bool *)&v8);
      while ( !(_BYTE)v8 )
      {
        if ( v13 + 1 < TargetValue )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aLoadingServe_1);
          LOBYTE(v27) = 0;
          break;
        }
        ++v13;
        v20 = inet_addr(&cp);
        v19 = inet_addr(&v15);
        v23 = 0;
        v24 = -1;
        v18 = 0;
        sub_435470((void *)(v6 + 8), &TargetValue);
        ++*(_DWORD *)(v6 + 40);
        sub_4143F1((SQLHSTMT *)&v10, (bool *)&v8);
      }
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aLoadingServe_2);
      LOBYTE(v27) = 0;
    }
  }
  sub_42D6FF(v6 + 44);
  if ( *(_DWORD *)(v6 + 40) )
  {
    if ( (_BYTE)v27 )
      LOBYTE(v27) = sub_437BB6((char *)v6);
  }
  else
  {
    LOBYTE(v27) = 0;
  }
  v4 = v27;
  v28 = -1;
  sub_413F5F((int)&v10);
  return v4;
}

//----- (00437261) --------------------------------------------------------
void *__thiscall sub_437261(void *this, void *a2, int a3)
{
  void *result; // eax@3
  void *v4; // [sp+8h] [bp-60h]@1
  char v5; // [sp+Ch] [bp-5Ch]@4
  const void *v6; // [sp+64h] [bp-4h]@3

  v4 = this;
  sub_42D61C((int)this + 44);
  if ( a3 <= 0 || a3 > *((_DWORD *)v4 + 10) )
  {
    v5 = 0;
    sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v4 + 44));
    qmemcpy(a2, &v5, 0x58u);
    result = a2;
  }
  else
  {
    v6 = (const void *)sub_435410((char *)v4 + 8, a3 - 1);
    sub_42D67A((struct _RTL_CRITICAL_SECTION *)((char *)v4 + 44));
    qmemcpy(a2, v6, 0x58u);
    result = a2;
  }
  return result;
}

//----- (004372E1) --------------------------------------------------------
signed int __thiscall sub_4372E1(void *this, int a2, int a3)
{
  void *v3; // ST00_4@1
  int v5; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@1
  signed int v7; // [sp+8h] [bp-4h]@1

  v3 = this;
  v7 = -1;
  sub_42D6C6((int)this + 44);
  for ( i = unknown_libname_194(v3); i != unknown_libname_195(v5 + 8); i += 88 )
  {
    if ( *(_DWORD *)(i + 64) == a2 )
    {
      if ( *(_DWORD *)(i + 76) == -1 )
      {
        v7 = *(_BYTE *)i;
        *(_DWORD *)(i + 76) = a3;
      }
      else if ( *(_DWORD *)(i + 76) == a3 )
      {
        *(_DWORD *)(i + 76) = -1;
        v7 = *(_BYTE *)i;
      }
      else
      {
        v7 = -1;
      }
      break;
    }
  }
  sub_42D6FF(v5 + 44);
  return v7;
}
// 435370: using guessed type int __cdecl unknown_libname_194(_DWORD);
// 435390: using guessed type int __thiscall unknown_libname_195(_DWORD);

//----- (0043738C) --------------------------------------------------------
int __thiscall sub_43738C(int this, char a2, char a3)
{
  int result; // eax@1
  int v4; // [sp+0h] [bp-Ch]@1
  int j; // [sp+4h] [bp-8h]@6
  signed int i; // [sp+8h] [bp-4h]@4

  v4 = this;
  result = a2;
  if ( a2 > 0 && (signed int)a2 <= *(_DWORD *)(this + 40) )
  {
    for ( i = 0; i < 4; ++i )
    {
      for ( j = 0; j < *(_DWORD *)(v4 + 4); ++j )
      {
        if ( *(_DWORD *)(*(_DWORD *)(v4 + 4 * i + 24) + 4 * j) )
          sub_4365A3(*(_DWORD **)(*(_DWORD *)(v4 + 4 * i + 24) + 4 * j), a2, a3);
      }
      result = i + 1;
    }
  }
  return result;
}

//----- (0043741A) --------------------------------------------------------
int __thiscall sub_43741A(int this, char a2, char a3)
{
  int result; // eax@1
  int v4; // [sp+0h] [bp-Ch]@1
  int j; // [sp+4h] [bp-8h]@6
  signed int i; // [sp+8h] [bp-4h]@4

  v4 = this;
  result = a2;
  if ( a2 > 0 && (signed int)a2 <= *(_DWORD *)(this + 40) )
  {
    for ( i = 0; i < 4; ++i )
    {
      for ( j = 0; j < *(_DWORD *)(v4 + 4); ++j )
      {
        if ( *(_DWORD *)(*(_DWORD *)(v4 + 4 * i + 24) + 4 * j) )
          sub_436783(*(_DWORD **)(*(_DWORD *)(v4 + 4 * i + 24) + 4 * j), a2, a3);
      }
      result = i + 1;
    }
  }
  return result;
}

//----- (004374A8) --------------------------------------------------------
char __thiscall sub_4374A8(void *this)
{
  char result; // al@2
  char v2; // ST18_1@52
  int v3; // [sp+4h] [bp-F0h]@23
  int v4; // [sp+8h] [bp-ECh]@1
  void *v5; // [sp+20h] [bp-D4h]@22
  int v6[4]; // [sp+3Ch] [bp-B8h]@43
  int v7; // [sp+4Ch] [bp-A8h]@1
  int v8; // [sp+50h] [bp-A4h]@1
  int v9; // [sp+54h] [bp-A0h]@1
  int j; // [sp+68h] [bp-8Ch]@1
  int i; // [sp+6Ch] [bp-88h]@1
  char v12; // [sp+70h] [bp-84h]@1
  char TargetValue; // [sp+74h] [bp-80h]@29
  char v14; // [sp+75h] [bp-7Fh]@29
  char cp; // [sp+85h] [bp-6Fh]@29
  char v16; // [sp+95h] [bp-5Fh]@29
  unsigned __int32 v17; // [sp+B0h] [bp-44h]@35
  unsigned __int32 v18; // [sp+B4h] [bp-40h]@35
  char v19; // [sp+B8h] [bp-3Ch]@29
  char v20; // [sp+B9h] [bp-3Bh]@29
  int v21; // [sp+BCh] [bp-38h]@35
  int v22; // [sp+C0h] [bp-34h]@35
  char v23; // [sp+C4h] [bp-30h]@29
  char v24; // [sp+CCh] [bp-28h]@1
  int v25; // [sp+D0h] [bp-24h]@1
  int v26[4]; // [sp+D4h] [bp-20h]@13
  int v27; // [sp+E4h] [bp-10h]@1
  int v28; // [sp+F0h] [bp-4h]@1

  v4 = (int)this;
  LOBYTE(v7) = 0;
  v24 = 0;
  v8 = 0;
  i = 0;
  j = 0;
  v27 = 0;
  v25 = 0;
  v12 = 0;
  sub_413E9E((int)&v9, (int)&unk_478608);
  v28 = 0;
  if ( (unsigned __int8)sub_4353F0((void *)(v4 + 8)) )
  {
    sub_42DBFC((int)&unk_47FA00, 3, aReloadServerki);
    v28 = -1;
    sub_413F5F((int)&v9);
    result = 0;
  }
  else
  {
    sub_414804((int)&v9, &v8);
    if ( sub_414123((int)&v9, aSelectMaxKin_0) )
    {
      if ( sub_4143F1((SQLHSTMT *)&v9, (bool *)&v7) )
      {
        sub_414A7B((int)&v9);
        if ( (_BYTE)v7 )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aReloadServer_1);
          v28 = -1;
          sub_413F5F((int)&v9);
          result = 0;
        }
        else
        {
          while ( v8 )
          {
            v8 >>= 1;
            ++v27;
          }
          if ( ++v27 > *(_DWORD *)(v4 + 4) )
          {
            for ( i = 0; i < 4; ++i )
            {
              v26[i] = (int)operator new(4 * v27);
              if ( !v26[i] )
              {
                sub_42DBFC((int)&unk_47FA00, 3, aReloadServer_2);
                v28 = -1;
                sub_413F5F((int)&v9);
                return 0;
              }
              for ( j = 0; j < *(_DWORD *)(v4 + 4); ++j )
              {
                if ( *(_DWORD *)(*(_DWORD *)(v4 + 4 * i + 24) + 4 * j) )
                  *(_DWORD *)(v26[i] + 4 * j) = *(_DWORD *)(*(_DWORD *)(v4 + 4 * i + 24) + 4 * j);
              }
              for ( j = *(_DWORD *)(v4 + 4); j < v27; ++j )
              {
                v5 = operator new(0x834u);
                LOBYTE(v28) = 1;
                if ( v5 )
                  v3 = sub_435FAF((int)v5);
                else
                  v3 = 0;
                LOBYTE(v28) = 0;
                *(_DWORD *)(v26[i] + 4 * j) = v3;
                if ( *(_DWORD *)(v26[i] + 4 * j) )
                  sub_436017(*(_DWORD *)(v26[i] + 4 * j), i, j);
              }
            }
          }
          sub_4146F6((int)&v9, &TargetValue);
          sub_41477C((int)&v9, &v16, 26);
          sub_41477C((int)&v9, &v14, 16);
          sub_41477C((int)&v9, &cp, 16);
          sub_4146F6((int)&v9, &v19);
          sub_414739((int)&v9, &v20);
          sub_414804((int)&v9, &v23);
          if ( sub_414123((int)&v9, aSelectIdName_2) )
          {
            sub_4143F1((SQLHSTMT *)&v9, (bool *)&v7);
            while ( !(_BYTE)v7 )
            {
              if ( v12 + 1 < TargetValue )
              {
                sub_42DBFC((int)&unk_47FA00, 3, aReloadingServe);
                v28 = -1;
                sub_413F5F((int)&v9);
                return 0;
              }
              if ( *(_DWORD *)(v4 + 40) < (signed int)++v12 )
              {
                v18 = inet_addr(&cp);
                v17 = inet_addr(&v14);
                v21 = 0;
                v22 = -1;
                ++v25;
                sub_42D6C6(v4 + 44);
                sub_435470((void *)(v4 + 8), &TargetValue);
                sub_42D6FF(v4 + 44);
              }
              sub_4143F1((SQLHSTMT *)&v9, (bool *)&v7);
            }
            if ( *(_DWORD *)(v4 + 4) < v27 )
            {
              for ( i = 0; i < 4; ++i )
              {
                v6[i] = *(_DWORD *)(v4 + 4 * i + 24);
                *(_DWORD *)(v4 + 4 * i + 24) = v26[i];
              }
              for ( i = 0; i < 4; ++i )
              {
                if ( v6[i] )
                  sub_43CA18((LPVOID)v6[i]);
              }
              *(_DWORD *)(v4 + 4) = v27;
            }
            v24 = sub_437BB6((char *)v4);
            if ( v25 > 0 )
              *(_DWORD *)(v4 + 40) += v25;
            v2 = v24;
            v28 = -1;
            sub_413F5F((int)&v9);
            result = v2;
          }
          else
          {
            sub_42DBFC((int)&unk_47FA00, 3, aReloadServerli);
            v28 = -1;
            sub_413F5F((int)&v9);
            result = 0;
          }
        }
      }
      else
      {
        sub_414A7B((int)&v9);
        sub_42DBFC((int)&unk_47FA00, 3, aReloadServer_3);
        v28 = -1;
        sub_413F5F((int)&v9);
        result = 0;
      }
    }
    else
    {
      sub_414A7B((int)&v9);
      sub_42DBFC((int)&unk_47FA00, 3, aReloadServer_0);
      v28 = -1;
      sub_413F5F((int)&v9);
      result = 0;
    }
  }
  return result;
}
// 4374A8: using guessed type int var_20[4];
// 4374A8: using guessed type int var_B8[4];

//----- (00437BB6) --------------------------------------------------------
char __thiscall sub_437BB6(char *this)
{
  int v1; // eax@4
  int v2; // eax@16
  char v4; // [sp-58h] [bp-8CCh]@5
  int v5; // [sp-54h] [bp-8C8h]@5
  int v6; // [sp-50h] [bp-8C4h]@5
  int v7; // [sp-4Ch] [bp-8C0h]@5
  int v8; // [sp-48h] [bp-8BCh]@5
  int v9; // [sp-44h] [bp-8B8h]@5
  int v10; // [sp-40h] [bp-8B4h]@5
  int v11; // [sp-3Ch] [bp-8B0h]@5
  int v12; // [sp-38h] [bp-8ACh]@5
  int v13; // [sp-34h] [bp-8A8h]@5
  int v14; // [sp-30h] [bp-8A4h]@5
  int v15; // [sp-2Ch] [bp-8A0h]@5
  int v16; // [sp-28h] [bp-89Ch]@5
  int v17; // [sp-24h] [bp-898h]@5
  int v18; // [sp-20h] [bp-894h]@5
  int v19; // [sp-1Ch] [bp-890h]@5
  int v20; // [sp-18h] [bp-88Ch]@5
  int v21; // [sp-14h] [bp-888h]@5
  int v22; // [sp-10h] [bp-884h]@5
  int v23; // [sp-Ch] [bp-880h]@5
  int v24; // [sp-8h] [bp-87Ch]@5
  void *v25; // [sp-4h] [bp-878h]@5
  int v26; // [sp+0h] [bp-874h]@3
  char *v27; // [sp+8h] [bp-86Ch]@1
  char v28; // [sp+Ch] [bp-868h]@29
  int v29; // [sp+10h] [bp-864h]@1
  int j; // [sp+14h] [bp-860h]@3
  int k; // [sp+18h] [bp-85Ch]@1
  int i; // [sp+1Ch] [bp-858h]@1
  int v33; // [sp+20h] [bp-854h]@1
  int v34; // [sp+24h] [bp-850h]@1
  void *v35; // [sp+28h] [bp-84Ch]@1
  char v36; // [sp+2Ch] [bp-848h]@1
  int v37; // [sp+860h] [bp-14h]@1
  int v38; // [sp+864h] [bp-10h]@1
  int v39; // [sp+870h] [bp-4h]@1

  v27 = this;
  LOBYTE(v33) = 1;
  v37 = 0;
  v29 = 0;
  k = 0;
  v38 = 0;
  LOBYTE(v34) = 0;
  v35 = 0;
  sub_435FAF((int)&v36);
  v39 = 0;
  for ( i = 0; i < 4; ++i )
  {
    sub_436017((int)&v36, i, 0);
    for ( j = unknown_libname_194(v26); ; j += 88 )
    {
      v1 = unknown_libname_195(v27 + 8);
      if ( j == v1 )
        break;
      qmemcpy(&v4, (const void *)j, 0x58u);
      sub_436084(
        (int)&v36,
        v4,
        v5,
        v6,
        v7,
        v8,
        v9,
        v10,
        v11,
        v12,
        v13,
        v14,
        v15,
        v16,
        v17,
        v18,
        v19,
        v20,
        v21,
        v22,
        v23,
        v24,
        (int)v25);
    }
    sub_436576(&v36);
    v35 = 0;
    v38 = sub_436987((int)&v36, &v35);
    if ( v38 > 0 && v35 )
    {
      if ( **(_DWORD **)&v27[4 * i + 24] )
      {
        v25 = v35;
        v24 = v38;
        v23 = 0;
        v22 = i;
        LOBYTE(v33) = sub_4369B6(**(_DWORD **)&v27[4 * i + 24], i, 0, v38, v35);
      }
    }
  }
  for ( i = 0; i < 4; ++i )
  {
    v37 = 1;
    for ( k = 1; k < *((_DWORD *)v27 + 1); ++k )
    {
      sub_436017((int)&v36, i, k);
      for ( j = unknown_libname_194(v26); ; j += 88 )
      {
        v2 = unknown_libname_195(v27 + 8);
        if ( j == v2 )
          break;
        if ( v37 & *(_DWORD *)(j + 80) )
        {
          qmemcpy(&v4, (const void *)j, 0x58u);
          sub_436084(
            (int)&v36,
            v4,
            v5,
            v6,
            v7,
            v8,
            v9,
            v10,
            v11,
            v12,
            v13,
            v14,
            v15,
            v16,
            v17,
            v18,
            v19,
            v20,
            v21,
            v22,
            v23,
            v24,
            (int)v25);
          LOBYTE(v34) = 1;
        }
      }
      if ( (_BYTE)v34 )
      {
        sub_436576(&v36);
        v35 = 0;
        v38 = sub_436987((int)&v36, &v35);
        if ( v38 > 0 && v35 && *(_DWORD *)(*(_DWORD *)&v27[4 * i + 24] + 4 * k) )
        {
          v25 = v35;
          v24 = v38;
          v23 = k;
          v22 = i;
          LOBYTE(v33) = sub_4369B6(*(_DWORD *)(*(_DWORD *)&v27[4 * i + 24] + 4 * k), i, k, v38, v35);
        }
      }
      LOBYTE(v34) = 0;
      v37 *= 2;
    }
  }
  sub_437FCA(v27);
  if ( !(_BYTE)v33 )
    sub_42DBFC((int)&unk_47FA00, 3, aReloadserverli);
  v28 = v33;
  v39 = -1;
  sub_435FF8((int)&v36);
  return v28;
}
// 435370: using guessed type int __cdecl unknown_libname_194(_DWORD);
// 435390: using guessed type int __thiscall unknown_libname_195(_DWORD);

//----- (00437F68) --------------------------------------------------------
int __thiscall sub_437F68(int this, char a2, int a3, _DWORD *a4)
{
  int result; // eax@3

  if ( a2 >= 0 && a2 <= 4 )
  {
    if ( a3 >= 0 && a3 < *(_DWORD *)(this + 4) )
      result = sub_436987(*(_DWORD *)(*(_DWORD *)(this + 4 * a2 + 24) + 4 * a3), a4);
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00437FCA) --------------------------------------------------------
int __thiscall sub_437FCA(void *this)
{
  int result; // eax@12
  _DWORD *v2; // eax@3
  void *v3; // [sp+0h] [bp-68h]@1
  char v4; // [sp+4h] [bp-64h]@3
  int k; // [sp+5Ch] [bp-Ch]@6
  int j; // [sp+60h] [bp-8h]@4
  int i; // [sp+64h] [bp-4h]@1

  v3 = this;
  for ( i = 1; i <= *((_DWORD *)v3 + 10); ++i )
  {
    v2 = sub_437261(v3, &v4, i);
    if ( sub_418976((int)&unk_47EF80, v2[16]) )
    {
      for ( j = 0; j < 4; ++j )
      {
        for ( k = 0; k < *((_DWORD *)v3 + 1); ++k )
        {
          if ( *(_DWORD *)(*((_DWORD *)v3 + j + 6) + 4 * k) )
            sub_4365A3(*(_DWORD **)(*((_DWORD *)v3 + j + 6) + 4 * k), i, 1);
        }
      }
    }
    result = i + 1;
  }
  return result;
}

//----- (0043808B) --------------------------------------------------------
char __thiscall sub_43808B(int this, char a2)
{
  char v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  if ( a2 > 0 && (signed int)a2 <= *(_DWORD *)(this + 40) )
    v3 = sub_436A39(**(_DWORD **)(this + 28), a2);
  return v3;
}

//----- (004380D8) --------------------------------------------------------
int sub_4380D8()
{
  return atexit(sub_402150);
}

//----- (004380F0) --------------------------------------------------------
void *__thiscall sub_4380F0(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_435FF8((int)this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (00438120) --------------------------------------------------------
void *__thiscall sub_438120(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_436BC3(this);
  if ( a2 & 1 )
    sub_43CA18(v3);
  return v3;
}

//----- (0043815F) --------------------------------------------------------
int sub_43815F()
{
  return sub_402281((int)&unk_481698);
}

//----- (0043816E) --------------------------------------------------------
int sub_43816E()
{
  return atexit(sub_438180);
}

//----- (00438180) --------------------------------------------------------
void __cdecl sub_438180()
{
  sub_4022E9((int)&unk_481698);
}

//----- (0043818F) --------------------------------------------------------
char __cdecl sub_43818F(int a1, void *a2)
{
  void *v2; // esp@1
  int v4; // eax@15
  int v5; // esi@17
  _DWORD *v6; // eax@26
  char v7; // al@28
  char v8; // al@36
  char v9; // [sp+28h] [bp-1110h]@26
  void *v10; // [sp+2Ch] [bp-110Ch]@26
  char v11; // [sp+34h] [bp-1104h]@21
  int v12; // [sp+4Ch] [bp-10ECh]@27
  int v13; // [sp+50h] [bp-10E8h]@22
  int v14; // [sp+64h] [bp-10D4h]@22
  int v15; // [sp+68h] [bp-10D0h]@15
  int v16; // [sp+6Ch] [bp-10CCh]@15
  __int16 v17; // [sp+70h] [bp-10C8h]@15
  char v18; // [sp+72h] [bp-10C6h]@15
  char v19; // [sp+73h] [bp-10C5h]@15
  char v20; // [sp+1070h] [bp-C8h]@1
  char v21; // [sp+1074h] [bp-C4h]@4
  int v22; // [sp+1088h] [bp-B0h]@7
  char rgbValue; // [sp+108Ch] [bp-ACh]@4
  __int16 v24; // [sp+109Ch] [bp-9Ch]@1
  unsigned int v25; // [sp+10A0h] [bp-98h]@1
  char v26; // [sp+10A4h] [bp-94h]@1
  int v27; // [sp+10A8h] [bp-90h]@14
  int v28; // [sp+10ACh] [bp-8Ch]@12
  int v29; // [sp+10B0h] [bp-88h]@26
  int v30; // [sp+10B4h] [bp-84h]@24
  char v31[4]; // [sp+10B8h] [bp-80h]@26
  int v32; // [sp+10BCh] [bp-7Ch]@19
  int v33; // [sp+10CCh] [bp-6Ch]@26
  int v34; // [sp+10D0h] [bp-68h]@26
  char v35; // [sp+10D4h] [bp-64h]@17
  char v36; // [sp+10D5h] [bp-63h]@26
  char v37; // [sp+10D6h] [bp-62h]@22
  char v38; // [sp+10F3h] [bp-45h]@26
  char v39; // [sp+1104h] [bp-34h]@5
  char v40; // [sp+1112h] [bp-26h]@5
  int v41; // [sp+1124h] [bp-14h]@26
  int v42; // [sp+1128h] [bp-10h]@26
  int v43; // [sp+1134h] [bp-4h]@1

  v2 = alloca(4396);
  sub_401000((int)&v26);
  v43 = 0;
  v20 = 0;
  v24 = 0;
  sub_43A080(a1, &v25);
  if ( byte_4785D1 && sub_41ECDF(&unk_47F4C8, v25) )
  {
    sub_439D55(a1, (int)&unk_46D6B4, 1);
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  *(_DWORD *)(a1 + 120) = GetTickCount();
  memset(&rgbValue, 0, 0xFu);
  memset(&v21, 0, 0x11u);
  if ( byte_47856C )
  {
    memcpy(&v39, a2, 0x1Eu);
    a2 = (char *)a2 + 30;
    sub_415657(&v39, 30);
    strncpy(&rgbValue, &v39, 0xEu);
    strncpy(&v21, &v40, 0x10u);
  }
  else
  {
    memcpy(&rgbValue, a2, 0xEu);
    a2 = (char *)a2 + 14;
    memcpy(&v21, a2, 0x10u);
    a2 = (char *)a2 + 16;
  }
  v22 = sub_411480((int **)&a2);
  v24 = sub_4114E0((__int16 **)&a2);
  if ( byte_4785E2 )
    v20 = sub_401B99(&v26, &rgbValue, &v21);
  else
    v20 = sub_401ACF(&v26, &rgbValue, &v21);
  if ( v20 )
  {
    sub_439D55(a1, (int)&unk_46D6B8, 1);
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  if ( v28 )
  {
    sub_439D55(a1, (int)&unk_46D6BC, 2);
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  if ( v27 )
  {
    memset(&v17, 0, 0x1000u);
    v4 = sub_401088(&v26, &v19);
    v16 = v4;
    v15 = dword_478558 + v4;
    v17 = dword_478558 + v4;
    v18 = 9;
    sub_439F30(a1, &v17, v4 + 3);
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  if ( !dword_478590 )
  {
    v5 = v35;
    if ( v5 < unknown_libname_202(&unk_480D50) )
    {
      sub_439D55(a1, (int)&unk_46D6C0, 1);
      v43 = -1;
      sub_401074(&v26);
      return 0;
    }
  }
  if ( v32 & 0x10 && byte_4785B8 && *sub_43A080(a1, &v11) != dword_4785BC )
  {
    sub_43A080(a1, &v14);
    sub_413E9E((int)&v13, (int)&unk_478608);
    LOBYTE(v43) = 1;
    sub_414123((int)&v13, aInsertGm_illeg, &v37, (unsigned __int8)v14, BYTE1(v14), BYTE2(v14), BYTE3(v14));
    sub_439D55(a1, (int)aCc_10, 1);
    LOBYTE(v43) = 0;
    sub_413F5F((int)&v13);
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  if ( byte_4785D0 && v30 )
    v30 = 1002;
  v10 = operator new(0x50u);
  v42 = (int)v10;
  v6 = sub_43A080(a1, &v9);
  *(_DWORD *)(v42 + 8) = *v6;
  *(_DWORD *)(v42 + 4) = unknown_libname_6(a1);
  *(_DWORD *)(v42 + 12) = v30;
  *(_DWORD *)(v42 + 20) = *(_DWORD *)(a1 + 88);
  *(_BYTE *)(v42 + 48) = v36;
  *(_DWORD *)(v42 + 44) = 0;
  *(_DWORD *)(v42 + 24) = 1;
  *(_DWORD *)(v42 + 52) = v33;
  *(_DWORD *)(v42 + 56) = v34;
  *(_DWORD *)(v42 + 60) = v32;
  *(_DWORD *)(v42 + 64) = v29;
  *(_BYTE *)(v42 + 68) = v35;
  *(_WORD *)(v42 + 70) = v24;
  strncpy((char *)(v42 + 28), &v37, 0xFu);
  *(_BYTE *)(v42 + 42) = 0;
  *(_BYTE *)(v42 + 72) = v38;
  *(_DWORD *)v42 = time(0);
  *(_BYTE *)(v42 + 16) = 0;
  *(_BYTE *)(v42 + 73) = 0;
  *(_DWORD *)(v42 + 76) = v22;
  *(_DWORD *)(a1 + 100) = *(_DWORD *)v31;
  v41 = v30 % 1000 / 100;
  if ( !byte_47857A )
    goto LABEL_45;
  v12 = 0;
  if ( byte_478579 )
  {
    v7 = sub_424F76(&unk_47F548, v42, v31[0]);
    v12 = v7;
    if ( v7 )
    {
      if ( v7 == 11 )
      {
        sub_439D55(a1, (int)aCc_11, 1);
        sub_43CA18((LPVOID)v42);
      }
      else
      {
        sub_40481A(a1, v42, *(int *)v31);
        sub_43CA18((LPVOID)v42);
      }
    }
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  if ( v30 && v41 != 2 )
  {
LABEL_45:
    sub_40481A(a1, v42, *(int *)v31);
    sub_43CA18((LPVOID)v42);
    v43 = -1;
    sub_401074(&v26);
    return 0;
  }
  v8 = sub_424F76(&unk_47F548, v42, v31[0]);
  v12 = v8;
  if ( v8 )
  {
    if ( v8 == 11 )
    {
      sub_439D55(a1, (int)aCc_12, 1);
      sub_43CA18((LPVOID)v42);
    }
    else
    {
      sub_40481A(a1, v42, *(int *)v31);
      sub_43CA18((LPVOID)v42);
    }
  }
  v43 = -1;
  sub_401074(&v26);
  return 0;
}
// 4056D0: using guessed type int __thiscall unknown_libname_6(_DWORD);
// 43A0A0: using guessed type int __thiscall unknown_libname_202(_DWORD);
// 478558: using guessed type int dword_478558;
// 47856C: using guessed type char byte_47856C;
// 478579: using guessed type char byte_478579;
// 47857A: using guessed type char byte_47857A;
// 478590: using guessed type int dword_478590;
// 4785B8: using guessed type char byte_4785B8;
// 4785BC: using guessed type int dword_4785BC;
// 4785D0: using guessed type char byte_4785D0;
// 4785D1: using guessed type char byte_4785D1;
// 4785E2: using guessed type char byte_4785E2;

//----- (0043896C) --------------------------------------------------------
char __cdecl sub_43896C(int a1, char a2)
{
  char result; // al@2
  __int16 v3; // [sp+0h] [bp-420h]@5
  char v4; // [sp+2h] [bp-41Eh]@5
  char v5; // [sp+3h] [bp-41Dh]@5
  size_t v6; // [sp+400h] [bp-20h]@5
  int v7; // [sp+404h] [bp-1Ch]@1
  char v8[4]; // [sp+408h] [bp-18h]@1
  char v9; // [sp+40Ch] [bp-14h]@1
  char v10; // [sp+41Ch] [bp-4h]@1

  *(_DWORD *)v8 = sub_411480((int **)&a2);
  v7 = sub_411480((int **)&a2);
  *(_DWORD *)(a1 + 100) = *(_DWORD *)v8;
  v10 = sub_402340(&unk_481698, v8[0], &v9);
  if ( v10 >= 0 )
  {
    *(_DWORD *)(a1 + 120) = GetTickCount();
    if ( (signed int)dword_480DE8 >= 10 )
    {
      memcpy(&v5, &unk_480E3C, dword_480DE8);
      v6 = dword_480DE8 + dword_478558;
      v3 = dword_480DE8 + dword_478558;
      v4 = 4;
      sub_439F30(a1, &v3, dword_480DE8 + dword_478558 + 3 - dword_478558);
      result = 0;
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aServerListErro);
      sub_439D55(a1, (int)aCc_13, 5);
      result = 0;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (00438A69) --------------------------------------------------------
char __cdecl sub_438A69(int a1, char a2)
{
  char result; // al@2
  char v3; // ST20_1@10
  int v4; // ST1C_4@10
  int *v5; // eax@10
  char v6; // [sp+14h] [bp-58h]@10
  char v7; // [sp+18h] [bp-54h]@10
  int v8; // [sp+1Ch] [bp-50h]@1
  int v9; // [sp+20h] [bp-4Ch]@8
  int v10; // [sp+24h] [bp-48h]@13
  int v11; // [sp+28h] [bp-44h]@1
  char v12; // [sp+2Ch] [bp-40h]@13
  int v13; // [sp+30h] [bp-3Ch]@1
  int v14; // [sp+34h] [bp-38h]@1
  char rgbValue[4]; // [sp+38h] [bp-34h]@1
  char v16; // [sp+3Ch] [bp-30h]@1
  char v17; // [sp+4Ch] [bp-20h]@1
  int v18; // [sp+50h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+54h] [bp-18h]@1

  v18 = 0;
  v13 = 0;
  ms_exc.registration.TryLevel = 0;
  memset(&v16, 0, 0xFu);
  *(_DWORD *)rgbValue = sub_411480((int **)&a2);
  v14 = sub_411480((int **)&a2);
  v17 = sub_4114B0(&a2);
  v11 = 0;
  v8 = 0;
  *(_DWORD *)(a1 + 120) = GetTickCount();
  if ( sub_402411(&unk_481698, rgbValue[0], &v16, (int)&v18, (int)&v13, (int)&v11, (int)&v8) )
  {
    if ( v8 == v14 )
    {
      sub_43ADF4(&v16);
      if ( v17 <= dword_48163C && v17 >= 1 )
      {
        v9 = v11 % 1000 / 100;
        if ( v11 < 1000 && byte_47857A )
        {
          v3 = v17;
          v4 = v11;
          v5 = sub_43A080(a1, &v6);
          v7 = sub_42666C(&unk_47F548, rgbValue[0], *v5, v4, v3);
          if ( v7 == 10 )
            sub_439D55(a1, (int)aCc_17, 6);
          ms_exc.registration.TryLevel = -1;
          result = 0;
        }
        else
        {
          v10 = 0;
          v12 = 0;
          if ( v9 && v9 == 2 )
            v12 = sub_40492F(rgbValue[0], &v10);
          if ( v12 )
          {
            sub_439D55(a1, (int)aCc_18, 6);
            ms_exc.registration.TryLevel = -1;
            result = 0;
          }
          else
          {
            sub_418095(a1);
            sub_404A52(&unk_481698, *(int *)rgbValue, (int)&v16, v10, v18, v13, v14, a1, v17, v11);
            sub_4180B3(a1);
            result = 0;
          }
        }
      }
      else
      {
        sub_439D55(a1, (int)aCc_16, 6);
        ms_exc.registration.TryLevel = -1;
        result = 0;
      }
    }
    else
    {
      sub_439D55(a1, (int)aCc_15, 6);
      sub_42DBFC((int)&unk_47FA00, 3, aMd5keyDoesNotM);
      ms_exc.registration.TryLevel = -1;
      result = 0;
    }
  }
  else
  {
    sub_439D55(a1, (int)aCc_14, 6);
    ms_exc.registration.TryLevel = -1;
    result = 0;
  }
  return result;
}
// 47857A: using guessed type char byte_47857A;
// 48163C: using guessed type int dword_48163C;

//----- (00438D5A) --------------------------------------------------------
bool __cdecl sub_438D5A(int a1, char a2)
{
  void *v2; // ST0C_4@1
  int v3; // ST08_4@1

  v2 = (void *)sub_411480((int **)&a2);
  v3 = sub_411480((int **)&a2);
  return sub_4035F9(&unk_481698, v2, v3) != 0;
}

//----- (00438DA3) --------------------------------------------------------
char __cdecl sub_438DA3(int a1, char a2)
{
  int v3; // [sp+14h] [bp-84Ch]@9
  void *v4; // [sp+18h] [bp-848h]@15
  int v5; // [sp+1Ch] [bp-844h]@7
  char v6; // [sp+20h] [bp-840h]@1
  int v7; // [sp+24h] [bp-83Ch]@1
  char v8[4]; // [sp+28h] [bp-838h]@1
  char v9; // [sp+2Ch] [bp-834h]@1
  char v10; // [sp+3Ch] [bp-824h]@1
  __int16 v11; // [sp+40h] [bp-820h]@20
  char v12; // [sp+42h] [bp-81Eh]@20
  char v13; // [sp+43h] [bp-81Dh]@6
  char v14; // [sp+44h] [bp-81Ch]@19
  size_t v15; // [sp+840h] [bp-20h]@1
  size_t v16; // [sp+844h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+848h] [bp-18h]@1

  v15 = 0;
  v16 = 0;
  ms_exc.registration.TryLevel = 0;
  *(_DWORD *)v8 = sub_411480((int **)&a2);
  v7 = sub_411480((int **)&a2);
  sub_4114B0(&a2);
  v6 = 1;
  *(_DWORD *)(a1 + 100) = *(_DWORD *)v8;
  v10 = sub_402340(&unk_481698, v8[0], &v9);
  if ( v10 < 0 )
  {
    ms_exc.registration.TryLevel = -1;
    return 1;
  }
  *(_DWORD *)(a1 + 120) = GetTickCount();
  if ( byte_4785E0 )
  {
    v5 = sub_411480((int **)&a2);
    if ( v5 < 0 )
    {
      sub_439D55(a1, (int)aCc_20, 5);
      ms_exc.registration.TryLevel = -1;
      return 0;
    }
    v3 = 0;
    while ( v5 > 0 )
    {
      ++v3;
      v5 >>= 1;
    }
    if ( v3 < 0 || v3 >= unknown_libname_201(&unk_481648) )
    {
      sub_439D55(a1, (int)aCc_21, 5);
      ms_exc.registration.TryLevel = -1;
      return 0;
    }
    v4 = 0;
    v16 = sub_437F68((int)&unk_481648, v6, v3, &v4);
    if ( (signed int)v16 <= 0 )
    {
      sub_439D55(a1, (int)aCc_22, 5);
      ms_exc.registration.TryLevel = -1;
      return 0;
    }
    memcpy(&v13, v4, v16);
  }
  else
  {
    if ( dword_480E14[v6] < 10 )
    {
      sub_42DBFC((int)&unk_47FA00, 3, aServerListEr_0);
      sub_439D55(a1, (int)aCc_19, 5);
      ms_exc.registration.TryLevel = -1;
      return 0;
    }
    v16 = dword_480E14[v6];
    memcpy(&v13, *(&dword_480DEC + v6), v16);
  }
  if ( v6 > 0 )
    v14 = v10;
  v15 = v16 + dword_478558;
  v11 = v16 + dword_478558;
  v12 = 4;
  sub_439F30(a1, &v11, v16 + dword_478558 + 3 - dword_478558);
  return 0;
}
// 437F57: using guessed type int __thiscall unknown_libname_201(_DWORD);
// 478558: using guessed type int dword_478558;
// 4785E0: using guessed type char byte_4785E0;
// 480E14: using guessed type int dword_480E14[];

//----- (00439142) --------------------------------------------------------
signed int __cdecl sub_439142(char a1, int a2, char a3)
{
  signed int result; // eax@2
  int v4; // [sp+0h] [bp-14h]@1
  char *v5; // [sp+8h] [bp-Ch]@3
  _DWORD *v6; // [sp+10h] [bp-4h]@3

  v4 = sub_4188F9((int)&unk_47EF80, a1);
  if ( v4 )
  {
    v6 = sub_417DD3();
    v5 = sub_43A690((char *)v6 + 6, 8190, a2, (int)&a3);
    if ( v5 )
    {
      v5 = &v5[dword_478558 - 1];
      *((_BYTE *)v6 + 4) = (_BYTE)v5;
      *((_BYTE *)v6 + 5) = BYTE1(v5);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_4, *(_DWORD *)(v4 + 88), a2);
    }
    v6[2049] = &v5[-dword_478558 + 3];
    sub_41DB1A(v4, (int)v6);
    sub_4180B3(v4);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (00439225) --------------------------------------------------------
char __cdecl sub_439225(int a1)
{
  char v2; // [sp+0h] [bp-20h]@1
  char v3; // [sp+10h] [bp-10h]@1

  memset(&v3, 0, 0xFu);
  memset(&v2, 0, 0x10u);
  *(_DWORD *)(a1 + 120) = GetTickCount();
  return 0;
}

//----- (0043925D) --------------------------------------------------------
char __cdecl sub_43925D(int a1, char a2)
{
  char result; // al@2
  _DWORD *v3; // eax@15
  char v4; // [sp+8h] [bp-B0h]@15
  void *v5; // [sp+60h] [bp-58h]@5
  int v6; // [sp+68h] [bp-50h]@3
  int v7; // [sp+7Ch] [bp-3Ch]@1
  int v8; // [sp+80h] [bp-38h]@1
  int i; // [sp+84h] [bp-34h]@12
  char v10[4]; // [sp+88h] [bp-30h]@1
  char v11; // [sp+8Ch] [bp-2Ch]@1
  int v12; // [sp+9Ch] [bp-1Ch]@1
  char TargetValue; // [sp+A0h] [bp-18h]@1
  void *v14; // [sp+A4h] [bp-14h]@5
  int v15; // [sp+A8h] [bp-10h]@5
  int v16; // [sp+B4h] [bp-4h]@3

  v12 = 0;
  TargetValue = 0;
  v8 = 0;
  LOBYTE(v7) = 0;
  v11 = 0;
  *(_DWORD *)v10 = sub_411480((int **)&a2);
  if ( sub_402340(&unk_481698, v10[0], &v11) >= 0 )
  {
    sub_413E9E((int)&v6, (int)&unk_478608);
    v16 = 0;
    sub_4146F6((int)&v6, &TargetValue);
    if ( sub_414123((int)&v6, aSelectWorld_id, *(_DWORD *)v10) )
    {
      v15 = sub_411590((int)&unk_480D50);
      v5 = operator new(v15 + 1);
      v14 = v5;
      memset(v5, 0, v15 + 1);
      while ( sub_4143F1((SQLHSTMT *)&v6, (bool *)&v7) && !(_BYTE)v7 )
      {
        if ( TargetValue > 0 && TargetValue <= v15 )
          *((_BYTE *)v14 + TargetValue) = 1;
      }
      for ( i = 1; i <= v15; ++i )
      {
        if ( *((_BYTE *)v14 + i) )
        {
          v3 = sub_434524(&unk_480D50, &v4, i);
          sub_439142(v3[16], (int)aCd_1, 6);
        }
      }
      sub_43CA18(v14);
      v16 = -1;
      sub_413F5F((int)&v6);
      result = 0;
    }
    else
    {
      v16 = -1;
      sub_413F5F((int)&v6);
      result = 0;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (00439436) --------------------------------------------------------
char __cdecl sub_439436(int a1, int a2)
{
  char result; // al@2
  int v3; // esi@6
  _DWORD *v4; // eax@7
  char v5; // [sp+8h] [bp-A8h]@7
  int v6; // [sp+68h] [bp-48h]@10
  int v7; // [sp+6Ch] [bp-44h]@8
  int v8; // [sp+70h] [bp-40h]@7
  int v9; // [sp+74h] [bp-3Ch]@4
  int v10; // [sp+78h] [bp-38h]@2
  char v11; // [sp+7Ch] [bp-34h]@1
  int v12; // [sp+80h] [bp-30h]@1
  char v13; // [sp+84h] [bp-2Ch]@1
  int v14; // [sp+98h] [bp-18h]@1
  char v15; // [sp+9Ch] [bp-14h]@1
  int v16; // [sp+A0h] [bp-10h]@1
  int v17; // [sp+ACh] [bp-4h]@1

  v11 = 0;
  v12 = sub_411480((int **)&a2);
  v15 = sub_4114B0(&a2);
  v16 = sub_4114E0((__int16 **)&a2);
  sub_413E9E((int)&v13, (int)&unk_478608);
  v17 = 0;
  v14 = 0;
  v14 = sub_404E9A(v12);
  if ( v14 >= 0 )
  {
    if ( v14 < 11 )
    {
      if ( v15 <= 0 || (v3 = v15, v3 > sub_411590((int)&unk_480D50)) )
      {
        v6 = 0;
        sub_439D55(a1, (int)aCcdd_2, 11);
      }
      else
      {
        v4 = sub_434524(&unk_480D50, &v5, v15);
        v8 = sub_439142(v4[16], (int)aCdchb, 7);
        if ( !v8 )
        {
          v7 = 0;
          sub_439D55(a1, (int)aCcdd_1, 11);
        }
      }
      v17 = -1;
      sub_413F5F((int)&v13);
      result = 0;
    }
    else
    {
      v9 = 0;
      sub_439D55(a1, (int)aCcdd_0, 11);
      v17 = -1;
      sub_413F5F((int)&v13);
      result = 0;
    }
  }
  else
  {
    v10 = 0;
    sub_439D55(a1, (int)aCcdd, 11);
    v17 = -1;
    sub_413F5F((int)&v13);
    result = 0;
  }
  return result;
}

//----- (00439627) --------------------------------------------------------
char __cdecl sub_439627(int a1, char a2)
{
  _DWORD *v2; // eax@3
  char v4; // [sp+0h] [bp-6Ch]@3
  int v5; // [sp+58h] [bp-14h]@3
  int v6; // [sp+5Ch] [bp-10h]@1
  int v7; // [sp+60h] [bp-Ch]@1
  int v8; // [sp+64h] [bp-8h]@1
  __int16 v9; // [sp+68h] [bp-4h]@1

  v6 = sub_411480((int **)&a2);
  v8 = sub_411480((int **)&a2);
  v7 = sub_411480((int **)&a2);
  v9 = 0;
  if ( v8 <= 0 || v8 > sub_411590((int)&unk_480D50) )
  {
    sub_439D55(a1, (int)aCdch_0, 12);
  }
  else
  {
    v2 = sub_434524(&unk_480D50, &v4, v8);
    v5 = sub_439142(v2[16], (int)aCdcd, 8);
    if ( !v5 )
      sub_439D55(a1, (int)aCdch, 12);
  }
  return 0;
}

//----- (004396FC) --------------------------------------------------------
void __stdcall sub_4396FC(PVOID a1, BOOLEAN a2)
{
  int v2; // [sp+0h] [bp-8h]@1

  v2 = sub_419532((int)&unk_47ECB8, (char)a1);
  if ( v2 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v2 + 8))(v2);
}

//----- (00439730) --------------------------------------------------------
int __thiscall sub_439730(DNameNode *this, int a2)
{
  int v3; // [sp+0h] [bp-18h]@1

  v3 = (int)this;
  sub_41D4D0(this, a2);
  *(_DWORD *)v3 = &off_45F944;
  sub_418095(v3);
  *(_DWORD *)(v3 + 92) = a2;
  *(_DWORD *)(v3 + 152) = 0;
  *(_DWORD *)(v3 + 156) = 0;
  *(_DWORD *)(v3 + 144) = 0;
  *(_DWORD *)(v3 + 148) = &off_46D690;
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 140) = 0;
  *(_DWORD *)(v3 + 120) = GetTickCount();
  InterlockedIncrement(&dword_48042C);
  if ( !CreateTimerQueueTimer((PHANDLE)(v3 + 140), TimerQueue, sub_4396FC, *(PVOID *)(v3 + 92), Period, Period, 0) )
    sub_42DBFC((int)&unk_47FA00, 3, aCreateSocketTi);
  if ( dword_47855C == 30206 )
  {
    *(_DWORD *)(v3 + 124) = sub_43ACA0;
    *(_DWORD *)(v3 + 128) = sub_43ABF2;
  }
  else if ( dword_47855C == 30810 )
  {
    *(_DWORD *)(v3 + 124) = sub_43B6F6;
    *(_DWORD *)(v3 + 128) = sub_43B77E;
  }
  return v3;
}
// 45F944: using guessed type int (__stdcall *off_45F944)(int);
// 46D690: using guessed type int (__cdecl *off_46D690)(int, void *);
// 47855C: using guessed type int dword_47855C;

//----- (0043989F) --------------------------------------------------------
void *__thiscall sub_43989F(void *this)
{
  *(_DWORD *)this = &off_45F944;
  return sub_41D583((int)this);
}
// 45F944: using guessed type int (__stdcall *off_45F944)(int);

//----- (004398BB) --------------------------------------------------------
int __cdecl sub_4398BB(int a1)
{
  int v2; // [sp+0h] [bp-18h]@2
  DNameNode *v3; // [sp+4h] [bp-14h]@1

  v3 = (DNameNode *)unknown_libname_49(0x10F0u);
  if ( v3 )
    v2 = sub_439730(v3, a1);
  else
    v2 = 0;
  return v2;
}

//----- (00439929) --------------------------------------------------------
char __thiscall sub_439929(int this)
{
  int *v1; // eax@7
  int v3; // [sp+0h] [bp-Ch]@1
  char v4; // [sp+4h] [bp-8h]@7
  HANDLE Timer; // [sp+8h] [bp-4h]@1

  v3 = this;
  Timer = (HANDLE)InterlockedExchange((volatile LONG *)(this + 140), 0);
  if ( Timer )
    DeleteTimerQueueTimer(TimerQueue, Timer, 0);
  *(_DWORD *)(v3 + 140) = 0;
  *(_DWORD *)(v3 + 144) = 2;
  InterlockedDecrement(&dword_48042C);
  sub_4195AF((int)&unk_47ECB8, *(_DWORD *)(v3 + 92));
  if ( *(_DWORD *)(v3 + 96) != 3 && *(_DWORD *)(v3 + 100) )
    sub_40340F(&unk_481698, *(_DWORD *)(v3 + 100), *(_DWORD *)(v3 + 92));
  else
    sub_402507(&unk_481698, *(_DWORD *)(v3 + 100), -1, *(_DWORD *)(v3 + 160), 0);
  v1 = sub_43A080(v3, &v4);
  return sub_41E461((char *)&unk_47F240, *v1);
}

//----- (00439A04) --------------------------------------------------------
LONG __thiscall sub_439A04(int this)
{
  LONG result; // eax@2
  DNameNode *v2; // ST18_4@17
  int v3; // [sp+0h] [bp-18h]@1
  int v4; // [sp+8h] [bp-10h]@1
  int v5; // [sp+Ch] [bp-Ch]@1
  signed __int32 dwNumberOfBytesTransferred; // [sp+10h] [bp-8h]@1

  v3 = this;
  dwNumberOfBytesTransferred = 0;
  v5 = *(_DWORD *)(*(_DWORD *)(this + 72) + 8196);
  v4 = *(_DWORD *)(this + 72) + 4;
  if ( *(_DWORD *)(this + 144) == 2 )
  {
    result = sub_41D61F(this);
  }
  else
  {
    while ( 1 )
    {
      while ( 1 )
      {
        if ( dwNumberOfBytesTransferred >= v5 )
          return sub_41D995(v3, 0);
        if ( *(_DWORD *)(v3 + 144) )
          break;
        if ( dwNumberOfBytesTransferred + 3 > v5 )
          return sub_41D995(v3, v5 - dwNumberOfBytesTransferred);
        *(_DWORD *)(v3 + 132) = *(_BYTE *)(dwNumberOfBytesTransferred + v4)
                              + (*(_BYTE *)(dwNumberOfBytesTransferred + v4 + 1) << 8)
                              + 1
                              - dword_478558;
        if ( *(_DWORD *)(v3 + 132) <= 0 || *(_DWORD *)(v3 + 132) > 0x2000 )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aDBadPacketSi_2, *(_DWORD *)(v3 + 88), *(_DWORD *)(v3 + 132));
          goto LABEL_21;
        }
        dwNumberOfBytesTransferred += 2;
        *(_DWORD *)(v3 + 144) = 1;
      }
      if ( *(_DWORD *)(v3 + 144) != 1 )
        goto LABEL_21;
      if ( *(_DWORD *)(v3 + 132) + dwNumberOfBytesTransferred > v5 )
        return sub_41D995(v3, v5 - dwNumberOfBytesTransferred);
      if ( !(unsigned __int8)(*(int (__cdecl **)(int, int, _DWORD))(v3 + 128))(v4 + 2, v3 + 112, *(_DWORD *)(v3 + 132)) )
        goto LABEL_21;
      if ( (signed int)*(_BYTE *)(dwNumberOfBytesTransferred + v4) >= 9 )
        break;
      v2 = sub_431B58();
      *((_DWORD *)v2 + 2) = v3;
      *((_DWORD *)v2 + 3) = *(_DWORD *)(v3 + 72);
      *((_DWORD *)v2 + 4) = *(&off_46D690 + *(_BYTE *)(dwNumberOfBytesTransferred + v4));
      sub_418095(v3);
      sub_4116D0(*(_DWORD *)(v3 + 72));
      InterlockedIncrement(&dword_4801D0);
      sub_4180FB((void *)v2, dwNumberOfBytesTransferred, CompletionPort);
      dwNumberOfBytesTransferred += *(_DWORD *)(v3 + 132);
      *(_DWORD *)(v3 + 144) = 0;
      *(_DWORD *)(v3 + 120) = GetTickCount();
    }
    sub_42DBFC((int)&unk_47FA00, 3, aUnknownProto_2, *(_BYTE *)(dwNumberOfBytesTransferred + v4));
LABEL_21:
    result = sub_41D61F(v3);
  }
  return result;
}
// 46D690: using guessed type int (__cdecl *off_46D690)(int, void *);
// 478558: using guessed type int dword_478558;

//----- (00439C87) --------------------------------------------------------
int __thiscall sub_439C87(void *this)
{
  int v1; // esi@1
  __int64 v2; // rax@1
  __int64 v3; // rax@1
  int v4; // ST0C_4@2
  int v5; // ST0C_4@3
  int v7; // [sp+4h] [bp-4h]@1

  v7 = (int)this;
  v1 = rand() << 16;
  *(_DWORD *)(v7 + 160) = rand() | v1;
  v2 = *(_DWORD *)(v7 + 160);
  *(_DWORD *)(v7 + 104) = v2;
  *(_DWORD *)(v7 + 108) = HIDWORD(v2) | 0x87546CA1;
  v3 = *(_DWORD *)(v7 + 160);
  *(_DWORD *)(v7 + 112) = v3;
  *(_DWORD *)(v7 + 116) = HIDWORD(v3) | 0x87546CA1;
  if ( byte_478554 == 1 )
  {
    v4 = *(_DWORD *)(v7 + 160);
    sub_439E5B(v7, (int)aCdd_1, 0);
  }
  else
  {
    v5 = *(_DWORD *)(v7 + 160);
    sub_439E5B(v7, (int)aCdd_2, 0);
  }
  return (*(int (__thiscall **)(int))(*(_DWORD *)v7 + 32))(v7);
}
// 478554: using guessed type char byte_478554;
// 47855C: using guessed type int dword_47855C;

//----- (00439D3C) --------------------------------------------------------
int __thiscall sub_439D3C(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 152) = a2;
  return result;
}

//----- (00439D55) --------------------------------------------------------
DWORD __cdecl sub_439D55(int a1, int a2, char a3)
{
  DWORD result; // eax@1
  char *v4; // [sp+0h] [bp-14h]@4
  _DWORD *v5; // [sp+4h] [bp-10h]@2
  char *v6; // [sp+8h] [bp-Ch]@2
  int v7; // [sp+Ch] [bp-8h]@2
  _DWORD *v8; // [sp+10h] [bp-4h]@2

  result = a1;
  if ( *(_DWORD *)(a1 + 144) != 2 )
  {
    v8 = sub_417DD3();
    v5 = v8 + 1;
    v6 = sub_43A690((char *)v8 + 6, 8190, a2, (int)&a3);
    v7 = 0;
    if ( v6 )
    {
      v6 = &v6[dword_478558 - 1];
      v4 = &v6[-dword_478558 + 1];
      (*(void (__cdecl **)(int, int, int *))(a1 + 124))((int)v5 + 2, a1 + 104, (int *)&v4);
      v6 = &v4[dword_478558 - 1];
      *(_BYTE *)v5 = (_BYTE)v4 + dword_478558 - 1;
      *((_BYTE *)v5 + 1) = BYTE1(v6);
      v8[2049] = v4 + 2;
      sub_41DB1A(a1, (int)v8);
      result = GetTickCount();
      *(_DWORD *)(a1 + 120) = result;
    }
    else
    {
      result = sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_5, *(_DWORD *)(a1 + 88), a2);
    }
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (00439E5B) --------------------------------------------------------
DWORD __cdecl sub_439E5B(int a1, int a2, char a3)
{
  DWORD result; // eax@1
  char *v4; // [sp+4h] [bp-Ch]@2
  _DWORD *v5; // [sp+Ch] [bp-4h]@2

  result = a1;
  if ( *(_DWORD *)(a1 + 144) != 2 )
  {
    v5 = sub_417DD3();
    v4 = sub_43A690((char *)v5 + 6, 8190, a2, (int)&a3);
    if ( v4 )
    {
      v4 = &v4[dword_478558 - 1];
      *((_BYTE *)v5 + 4) = (_BYTE)v4;
      *((_BYTE *)v5 + 5) = BYTE1(v4);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_6, *(_DWORD *)(a1 + 88), a2);
    }
    v5[2049] = &v4[-dword_478558 + 3];
    sub_41DB1A(a1, (int)v5);
    result = GetTickCount();
    *(_DWORD *)(a1 + 120) = result;
  }
  return result;
}
// 478558: using guessed type int dword_478558;

//----- (00439F30) --------------------------------------------------------
void __thiscall sub_439F30(int this, void *a2, size_t a3)
{
  _BYTE *v3; // ST10_4@2
  int v4; // [sp+0h] [bp-14h]@1
  size_t v5; // [sp+8h] [bp-Ch]@2
  size_t v6; // [sp+Ch] [bp-8h]@2
  _DWORD *v7; // [sp+10h] [bp-4h]@2

  v4 = this;
  if ( *(_DWORD *)(this + 144) != 2 )
  {
    v7 = sub_417DD3();
    v3 = v7 + 1;
    memcpy(v7 + 1, a2, a3);
    v5 = a3 - 2;
    (*(void (__cdecl **)(int, int, int *))(v4 + 124))((int)v7 + 6, v4 + 104, (int *)&v5);
    v6 = v5 + dword_478558 - 1;
    *v3 = v5 + dword_478558 - 1;
    v3[1] = BYTE1(v6);
    v7[2049] = v5 + 2;
    sub_41DB1A(v4, (int)v7);
  }
}
// 478558: using guessed type int dword_478558;

//----- (00439FD8) --------------------------------------------------------
LONG __thiscall sub_439FD8(int this)
{
  LONG result; // eax@2
  int v2; // [sp+0h] [bp-8h]@1

  v2 = this;
  if ( *(_DWORD *)(this + 144) == 2 )
  {
    result = sub_4180B3(this);
  }
  else
  {
    if ( GetTickCount() - *(_DWORD *)(this + 120) >= Period - 500 )
      sub_41D61F(v2);
    result = sub_4180B3(v2);
  }
  return result;
}

//----- (0043A03A) --------------------------------------------------------
int sub_43A03A()
{
  return atexit(sub_402150);
}

//----- (0043A050) --------------------------------------------------------
void *__thiscall sub_43A050(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_43989F(this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0043A080) --------------------------------------------------------
_DWORD *__thiscall sub_43A080(int this, _DWORD *a2)
{
  *a2 = *(_DWORD *)(this + 152);
  return a2;
}

//----- (0043A0C0) --------------------------------------------------------
int __stdcall sub_43A0C0(int a1)
{
  sub_42A5FC((int)&unk_47F830);
  sub_42DBFC((int)&unk_47FA00, 1, aTimerThreadTer);
  return 0;
}

//----- (0043A0E7) --------------------------------------------------------
int __stdcall sub_43A0E7(int a1)
{
  unsigned int v1; // eax@1
  unsigned __int32 CompletionKey; // [sp+Ch] [bp-28h]@4
  LPOVERLAPPED Overlapped; // [sp+10h] [bp-24h]@4
  DWORD NumberOfBytesTransferred; // [sp+14h] [bp-20h]@4
  int v6; // [sp+18h] [bp-1Ch]@4
  CPPEH_RECORD ms_exc; // [sp+1Ch] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  v1 = time(0);
  srand(v1);
  while ( !byte_4816F0 )
  {
    v6 = GetQueuedCompletionStatus(CompletionPort, &NumberOfBytesTransferred, &CompletionKey, &Overlapped, 0xFFFFFFFF);
    InterlockedIncrement(&dword_4816F4);
    (*(void (__thiscall **)(unsigned __int32, int, DWORD, LPOVERLAPPED))(*(_DWORD *)CompletionKey + 4))(
      CompletionKey,
      v6,
      NumberOfBytesTransferred,
      Overlapped);
    InterlockedDecrement(&dword_4816F4);
  }
  sub_42DBFC((int)&unk_47FA00, 1, aTerminateIothr);
  sub_42DBFC((int)&unk_47FA00, 1, aIothreadServer);
  ms_exc.registration.TryLevel = -1;
  return 0;
}
// 4816F0: using guessed type char byte_4816F0;

//----- (0043A201) --------------------------------------------------------
int __stdcall sub_43A201(int a1)
{
  unsigned int v1; // eax@1
  unsigned __int32 CompletionKey; // [sp+Ch] [bp-28h]@4
  LPOVERLAPPED Overlapped; // [sp+10h] [bp-24h]@4
  DWORD NumberOfBytesTransferred; // [sp+14h] [bp-20h]@4
  int v6; // [sp+18h] [bp-1Ch]@4
  CPPEH_RECORD ms_exc; // [sp+1Ch] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  v1 = time(0);
  srand(v1);
  while ( !byte_4816F0 )
  {
    v6 = GetQueuedCompletionStatus(
           ExistingCompletionPort,
           &NumberOfBytesTransferred,
           &CompletionKey,
           &Overlapped,
           0xFFFFFFFF);
    (*(void (__thiscall **)(unsigned __int32, int, DWORD, LPOVERLAPPED))(*(_DWORD *)CompletionKey + 4))(
      CompletionKey,
      v6,
      NumberOfBytesTransferred,
      Overlapped);
  }
  sub_42DBFC((int)&unk_47FA00, 1, aTerminateIot_0);
  ms_exc.registration.TryLevel = -1;
  return 0;
}
// 4816F0: using guessed type char byte_4816F0;

//----- (0043A2F1) --------------------------------------------------------
int __stdcall sub_43A2F1(int a1)
{
  sub_4188A6((int)&unk_47EF80, *(int *)&dword_478538, (int)sub_410CA3, 0);
  sub_4192BD((ULONG_PTR)&unk_47ECB8, *(int *)&dword_47853C, (int)sub_4398BB);
  sub_418BF7((int)&unk_47ECF8, *(int *)&dword_478540, (int)sub_40F2CC);
  sub_42A7A4(&unk_47F830);
  sub_41834E((int)&unk_47EF80);
  unknown_libname_71(&unk_47ECB8);
  sub_41834E((int)&unk_47ECF8);
  if ( dword_481700 )
  {
    sub_42D6C6((int)&unk_47F7F0);
    if ( !byte_47F811 )
      sub_41D61F(dword_481700);
    sub_4180B3(dword_481700);
    sub_42D6FF((int)&unk_47F7F0);
  }
  if ( dword_481704 )
  {
    sub_42D6C6((int)&unk_47FF10);
    if ( !byte_480179 )
      sub_41D61F(dword_481704);
    sub_4180B3(dword_481704);
    sub_42D6FF((int)&unk_47FF10);
  }
  sub_4312F7(dword_4816D4);
  sub_4312F7(dword_4816D8);
  sub_4312F7(dword_4816E0);
  sub_4312F7(dword_4816EC);
  byte_47F8B8 = 1;
  return 0;
}
// 419258: using guessed type int __thiscall unknown_libname_71(_DWORD);
// 43A2F1: using guessed type int __stdcall sub_43A2F1(int);
// 47F811: using guessed type char byte_47F811;
// 47F8B8: using guessed type char byte_47F8B8;
// 480179: using guessed type char byte_480179;
// 4816D4: using guessed type int dword_4816D4;
// 4816D8: using guessed type int dword_4816D8;
// 4816E0: using guessed type int dword_4816E0;
// 4816EC: using guessed type int dword_4816EC;
// 481700: using guessed type int dword_481700;
// 481704: using guessed type int dword_481704;

//----- (0043A4A3) --------------------------------------------------------
signed int sub_43A4A3()
{
  DWORD ThreadId; // [sp+Ch] [bp-20h]@1
  int i; // [sp+10h] [bp-1Ch]@1
  CPPEH_RECORD ms_exc; // [sp+14h] [bp-18h]@1

  ms_exc.registration.TryLevel = 0;
  i = 0;
  _beginthreadex(0, 0, (int)sub_43A0C0, 0, 0, &ThreadId);
  CompletionPort = CreateIoCompletionPort((HANDLE)0xFFFFFFFF, 0, 0, 0);
  ExistingCompletionPort = CreateIoCompletionPort((HANDLE)0xFFFFFFFF, 0, 0, 0);
  dword_4816D4 = (int)sub_4309E6(4 * dword_47854C);
  dword_4816D8 = (int)sub_4309E6(4 * dword_47854C);
  dword_4816E0 = (int)sub_4309E6(4 * dword_478550);
  dword_4816EC = (int)sub_4309E6(4 * dword_478550);
  for ( i = 0; i < dword_47854C; ++i )
    *(_DWORD *)(dword_4816D4 + 4 * i) = _beginthreadex(0, 0, (int)sub_43A0E7, i, 0, (LPDWORD)(dword_4816D8 + 4 * i));
  for ( i = 0; i < dword_478550; ++i )
    *(_DWORD *)(dword_4816E0 + 4 * i) = _beginthreadex(0, 0, (int)sub_43A201, i, 0, (LPDWORD)(dword_4816EC + 4 * i));
  return 1;
}
// 47854C: using guessed type int dword_47854C;
// 478550: using guessed type int dword_478550;
// 4816D4: using guessed type int dword_4816D4;
// 4816D8: using guessed type int dword_4816D8;
// 4816E0: using guessed type int dword_4816E0;
// 4816EC: using guessed type int dword_4816EC;

//----- (0043A67A) --------------------------------------------------------
int sub_43A67A()
{
  return atexit(sub_402150);
}

//----- (0043A690) --------------------------------------------------------
char *__cdecl sub_43A690(char *a1, int a2, int a3, int a4)
{
  wchar_t *v5; // [sp+4h] [bp-20h]@4
  char *v6; // [sp+8h] [bp-1Ch]@1
  size_t v7; // [sp+Ch] [bp-18h]@5
  size_t v8; // [sp+Ch] [bp-18h]@11
  size_t v9; // [sp+Ch] [bp-18h]@16
  int v10; // [sp+10h] [bp-14h]@20
  signed int v11; // [sp+10h] [bp-14h]@22
  char *v12; // [sp+18h] [bp-Ch]@1
  int v13; // [sp+1Ch] [bp-8h]@2
  char *v14; // [sp+20h] [bp-4h]@10
  char *v15; // [sp+2Ch] [bp+8h]@8
  char *v16; // [sp+2Ch] [bp+8h]@21
  char *v17; // [sp+2Ch] [bp+8h]@23
  int v18; // [sp+38h] [bp+14h]@16

  v6 = a1;
  v12 = &a1[a2];
  while ( 2 )
  {
    v13 = *(_BYTE *)a3++;
    if ( !v13 )
      return (char *)(a1 - v6);
    switch ( v13 )
    {
      case 83:
        a4 += 4;
        v5 = *(wchar_t **)(a4 - 4);
        if ( v5 )
        {
          v7 = 2 * wcslen(v5) + 2;
          if ( &a1[v7] > v12 )
            return 0;
          memcpy(a1, v5, v7);
          a1 += v7;
        }
        else
        {
          if ( a1 + 2 > v12 )
            return 0;
          *a1 = 0;
          v15 = a1 + 1;
          *v15 = 0;
          a1 = v15 + 1;
        }
        continue;
      case 115:
        a4 += 4;
        v14 = *(char **)(a4 - 4);
        if ( v14 )
        {
          v8 = strlen(v14);
          if ( &a1[v8 + 1] > v12 )
            return 0;
          strcpy(a1, v14);
          a1 += v8 + 1;
          continue;
        }
        if ( a1 + 1 <= v12 )
        {
          *a1++ = 0;
          continue;
        }
        return 0;
      case 98:
        v18 = a4 + 4;
        v9 = *(_DWORD *)(v18 - 4);
        a4 = v18 + 4;
        if ( &a1[v9] > v12 )
          return 0;
        memcpy(a1, *(const void **)(a4 - 4), v9);
        a1 += v9;
        continue;
      case 99:
        a4 += 4;
        if ( a1 + 1 > v12 )
          return 0;
        *a1++ = *(_DWORD *)(a4 - 4);
        continue;
      case 104:
        a4 += 4;
        v10 = *(_DWORD *)(a4 - 4);
        if ( a1 + 2 > v12 )
          return 0;
        *a1 = v10;
        v16 = a1 + 1;
        *v16 = BYTE1(v10);
        a1 = v16 + 1;
        continue;
      case 100:
        a4 += 4;
        v11 = *(_DWORD *)(a4 - 4);
        if ( a1 + 4 > v12 )
          return 0;
        *a1 = v11;
        v17 = a1 + 1;
        *v17++ = BYTE1(v11);
        *v17++ = v11 >> 16;
        *v17 = BYTE3(v11);
        a1 = v17 + 1;
        continue;
      default:
        continue;
    }
  }
}

//----- (0043A9D8) --------------------------------------------------------
signed int __cdecl sub_43A9D8(_BYTE *a1, _BYTE *a2, signed int a3)
{
  signed int v4; // [sp+0h] [bp-4h]@1

  v4 = 1;
  while ( *a2 )
  {
    *a1 = *a2++;
    if ( ++v4 > a3 )
      break;
    ++a1;
  }
  *a1 = 0;
  return v4;
}

//----- (0043AA2B) --------------------------------------------------------
int __cdecl sub_43AA2B(int a1)
{
  int result; // eax@1
  int v2; // [sp+0h] [bp-14h]@1
  int v3; // [sp+4h] [bp-10h]@1
  int v4; // [sp+8h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-8h]@1
  int i; // [sp+10h] [bp-4h]@1

  v2 = 214013 * *(_DWORD *)a1 + 2529077;
  v3 = 213287 * *(_DWORD *)(a1 + 4) + 2529089;
  v4 = 212987 * *(_DWORD *)(a1 + 8) + 2529589;
  v5 = 211741 * *(_DWORD *)(a1 + 12) + 2529997;
  result = (char)v2 ^ *(_BYTE *)a1;
  *(_BYTE *)a1 = result;
  for ( i = 1; i < 16; ++i )
  {
    *(_BYTE *)(i + a1) ^= *((_BYTE *)&v2 + (i & 0xF)) ^ *(_BYTE *)(i + a1 - 1);
    result = i + 1;
  }
  for ( i = 0; i < 16; ++i )
  {
    result = *(_BYTE *)(i + a1);
    if ( !*(_BYTE *)(i + a1) )
      *(_BYTE *)(i + a1) = 102;
  }
  return result;
}
// 43AA2B: using guessed type int __cdecl sub_43AA2B(int);

//----- (0043AB0C) --------------------------------------------------------
int __cdecl sub_43AB0C(int a1)
{
  int result; // eax@1
  int v2; // [sp+0h] [bp-14h]@1
  int v3; // [sp+4h] [bp-10h]@1
  int v4; // [sp+8h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-8h]@1
  int i; // [sp+10h] [bp-4h]@1

  v2 = 213119 * *(_DWORD *)a1 + 2529077;
  v3 = 213247 * *(_DWORD *)(a1 + 4) + 2529089;
  v4 = 213203 * *(_DWORD *)(a1 + 8) + 2529589;
  v5 = 213821 * *(_DWORD *)(a1 + 12) + 2529997;
  result = (char)v2 ^ *(_BYTE *)a1;
  *(_BYTE *)a1 = result;
  for ( i = 1; i < 16; ++i )
  {
    *(_BYTE *)(i + a1) ^= *((_BYTE *)&v2 + (i & 0xF)) ^ *(_BYTE *)(i + a1 - 1);
    result = i + 1;
  }
  for ( i = 0; i < 16; ++i )
  {
    result = *(_BYTE *)(i + a1);
    if ( !*(_BYTE *)(i + a1) )
      *(_BYTE *)(i + a1) = 102;
  }
  return result;
}
// 43AB0C: using guessed type int __cdecl sub_43AB0C(int);

//----- (0043ABED) --------------------------------------------------------
void sub_43ABED()
{
  ;
}

//----- (0043ABF2) --------------------------------------------------------
char __cdecl sub_43ABF2(char *a1, _BYTE *a2, signed int a3)
{
  char result; // al@2
  char v4; // ST10_1@5
  signed int i; // [sp+8h] [bp-Ch]@3
  char v6; // [sp+Ch] [bp-8h]@3

  if ( byte_478554 )
  {
    v6 = *a1;
    *a1 ^= *a2;
    for ( i = 1; i < a3; ++i )
    {
      v4 = a1[i];
      a1[i] ^= a2[i & 7] ^ v6;
      v6 = v4;
    }
    *(_QWORD *)a2 += a3;
    result = 1;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 478554: using guessed type char byte_478554;

//----- (0043ACA0) --------------------------------------------------------
int __cdecl sub_43ACA0(_BYTE *a1, _BYTE *a2, signed int *a3)
{
  int result; // eax@1
  __int64 v4; // kr08_8@5
  signed int i; // [sp+8h] [bp-4h]@2

  result = (unsigned __int8)byte_478554;
  if ( byte_478554 )
  {
    *a1 ^= *a2;
    for ( i = 1; i < *a3; ++i )
      a1[i] ^= a2[i & 7] ^ a1[i - 1];
    v4 = *a3 + *(_QWORD *)a2;
    result = HIDWORD(v4);
    *(_QWORD *)a2 = v4;
  }
  return result;
}
// 478554: using guessed type char byte_478554;

//----- (0043ADF4) --------------------------------------------------------
char *__cdecl sub_43ADF4(char *a1)
{
  char *result; // eax@1
  char *v2; // [sp+Ch] [bp-20h]@1
  signed int i; // [sp+10h] [bp-1Ch]@2

  a1[14] = 0;
  result = (char *)strlen(a1);
  v2 = result;
  if ( (signed int)result > 0 )
  {
    *a1 = toupper(*a1);
    for ( i = 1; ; ++i )
    {
      result = (char *)i;
      if ( i >= (signed int)v2 )
        break;
      if ( a1[i] == 32 )
      {
        result = &a1[i];
        a1[i] = 0;
        return result;
      }
      a1[i] = tolower(a1[i]);
    }
  }
  return result;
}

//----- (0043AFA2) --------------------------------------------------------
void __cdecl sub_43AFA2(int a1, LPCSTR lpMultiByteStr, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  void *v9; // esp@1
  int v10; // [sp-Ch] [bp-1058h]@1
  char v11; // [sp+0h] [bp-104Ch]@16
  char v12; // [sp+3FFh] [bp-C4Dh]@24
  wchar_t v13; // [sp+800h] [bp-84Ch]@7
  WCHAR WideCharStr; // [sp+1000h] [bp-4Ch]@4
  __int16 v15; // [sp+101Ch] [bp-30h]@4
  int v16; // [sp+1020h] [bp-2Ch]@4
  struct _SYSTEMTIME SystemTime; // [sp+1024h] [bp-28h]@2
  CPPEH_RECORD ms_exc; // [sp+1034h] [bp-18h]@1

  v9 = alloca(4148);
  ms_exc.old_esp = (DWORD)&v10;
  if ( dword_478568 & 8 )
  {
    ms_exc.registration.TryLevel = 0;
    GetLocalTime(&SystemTime);
    if ( strlen(lpMultiByteStr) > 0xE )
      *((_BYTE *)lpMultiByteStr + 14) = 0;
    v16 = sub_43B6A8(lpMultiByteStr, 15, &WideCharStr);
    v15 = 0;
    if ( byte_4785A8 && !byte_480179 && byte_48017A )
    {
      memset(&v13, 0, 0x800u);
      switch ( a1 )
      {
        case 801:
          swprintf(
            &v13,
            a02d02d04d02d02,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            801,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            a8,
            a7,
            &WideCharStr);
          break;
        case 802:
          swprintf(
            &v13,
            a02d02d04d02d_0,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            802,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            a8,
            a7,
            &WideCharStr);
          break;
        case 804:
          swprintf(
            &v13,
            a02d02d04d02d_1,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            804,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            a8,
            a7,
            &WideCharStr);
          break;
        case 831:
          swprintf(
            &v13,
            a02d02d04d02d_2,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            831,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            &WideCharStr);
          break;
      }
      sub_42D61C((int)&unk_47FF10);
      sub_42EFA9(dword_481704, (int)aCdds, 0);
      sub_42D67A((struct _RTL_CRITICAL_SECTION *)&unk_47FF10);
    }
    else
    {
      memset(&v11, 0, 0x800u);
      switch ( a1 )
      {
        case 801:
          sprintf(
            &v11,
            a02d02d04d02d_3,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            801,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            a8,
            a7,
            lpMultiByteStr);
          break;
        case 802:
          sprintf(
            &v11,
            a02d02d04d02d_4,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            802,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            a8,
            a7,
            lpMultiByteStr);
          break;
        case 804:
          sprintf(
            &v11,
            a02d02d04d02d_5,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            804,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            a8,
            a7,
            lpMultiByteStr);
          break;
        case 831:
          sprintf(
            &v11,
            a02d02d04d02d_6,
            SystemTime.wMonth,
            SystemTime.wDay,
            SystemTime.wYear,
            SystemTime.wHour,
            SystemTime.wMinute,
            SystemTime.wSecond,
            SystemTime.wMilliseconds,
            831,
            a9,
            (unsigned __int8)a3,
            BYTE1(a3),
            BYTE2(a3),
            BYTE3(a3),
            a4,
            a5,
            a6,
            lpMultiByteStr);
          break;
      }
      v12 = 0;
      sub_42E2E0((int)&unk_47FCA0, 0, aS_10, &v11);
    }
  }
}
// 478568: using guessed type int dword_478568;
// 4785A8: using guessed type char byte_4785A8;
// 480179: using guessed type char byte_480179;
// 48017A: using guessed type char byte_48017A;
// 481704: using guessed type int dword_481704;

//----- (0043B6A8) --------------------------------------------------------
int __cdecl sub_43B6A8(LPCSTR lpMultiByteStr, int a2, LPWSTR lpWideCharStr)
{
  int cchWideChar; // ST18_4@1

  cchWideChar = MultiByteToWideChar(0, 0, lpMultiByteStr, -1, 0, 0);
  MultiByteToWideChar(0, 0, lpMultiByteStr, -1, lpWideCharStr, cchWideChar);
  lpWideCharStr[cchWideChar - 1] = 0;
  return cchWideChar;
}

//----- (0043B6F6) --------------------------------------------------------
int *__cdecl sub_43B6F6(int a1, int a2, signed int *a3)
{
  signed int i; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-4h]@1

  *a3 = (*a3 + 7) & 0xFFFFFFF8;
  v5 = 0;
  for ( i = 0; i < *a3 >> 2; ++i )
    v5 ^= *(_DWORD *)(a1 + 4 * i);
  *(_DWORD *)(a1 + 4 * i) = v5;
  *a3 += 8;
  return sub_407DE3(a1, *a3);
}

//----- (0043B77E) --------------------------------------------------------
bool __cdecl sub_43B77E(int a1, int a2, signed int a3)
{
  bool result; // al@5
  int i; // [sp+4h] [bp-Ch]@2
  int v5; // [sp+Ch] [bp-4h]@2

  if ( a3 & 7 )
  {
    result = 0;
  }
  else
  {
    sub_407D98(a1, a3);
    v5 = 0;
    for ( i = 0; i < (a3 - 8) >> 2; ++i )
      v5 ^= *(_DWORD *)(a1 + 4 * i);
    result = *(_DWORD *)(a1 + 4 * i) == v5;
  }
  return result;
}

//----- (0043B878) --------------------------------------------------------
char __cdecl sub_43B878(_BYTE *a1)
{
  char result; // al@2
  signed int i; // [sp+10h] [bp-1Ch]@5

  if ( a1 )
  {
    if ( isalpha(*a1) )
    {
      for ( i = 1; i <= 14; ++i )
      {
        if ( !a1[i] )
          return 1;
        if ( !isalpha(a1[i]) && !isdigit(a1[i]) )
          return 0;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0043B9BA) --------------------------------------------------------
char __cdecl sub_43B9BA(int a1, int a2)
{
  char result; // al@3
  int i; // [sp+0h] [bp-4h]@4

  if ( a1 && a2 > 0 )
  {
    for ( i = 0; i < a2; ++i )
    {
      if ( (signed int)*(_BYTE *)(i + a1) < 48 || (signed int)*(_BYTE *)(i + a1) > 57 )
        return 0;
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0043BA17) --------------------------------------------------------
char __cdecl sub_43BA17(LPCSTR lpDirectoryName, int a2, int a3)
{
  DWORD v3; // eax@9
  char v5; // [sp+0h] [bp-40Ch]@3
  ULARGE_INTEGER TotalNumberOfFreeBytes; // [sp+400h] [bp-Ch]@1
  char v7; // [sp+408h] [bp-4h]@1

  v7 = 0;
  if ( GetDiskFreeSpaceExA(lpDirectoryName, 0, 0, &TotalNumberOfFreeBytes) )
  {
    if ( __PAIR__((unsigned int)a3, a2) <= TotalNumberOfFreeBytes.QuadPart )
    {
      v7 = 1;
    }
    else
    {
      sprintf(&v5, aInsufficientFr, lpDirectoryName);
      if ( dword_4785DC && dword_4785D8 )
        sub_432D8F(&unk_480468, dword_4785DC, aAuthdInsuffici, &v5);
      sub_42DBFC((int)&unk_47FA00, 2, &v5);
    }
  }
  else
  {
    v3 = GetLastError();
    sub_42DBFC((int)&unk_47FA00, 3, aCheckdiskfrees, v3);
  }
  return v7;
}

//----- (0043BAE2) --------------------------------------------------------
int sub_43BAE2()
{
  return atexit(sub_402150);
}

//----- (0043BB0F) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION *sub_43BB0F()
{
  return sub_42D5C4((struct _RTL_CRITICAL_SECTION *)&unk_481758);
}

//----- (0043BB1E) --------------------------------------------------------
int sub_43BB1E()
{
  return atexit(sub_43BB30);
}

//----- (0043BB30) --------------------------------------------------------
void __cdecl sub_43BB30()
{
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)&unk_481758);
}

//----- (0043BB3F) --------------------------------------------------------
void __stdcall sub_43BB3F(PVOID a1, BOOLEAN a2)
{
  SOCKET s; // ST14_4@4
  int v3; // ST10_4@4
  int v4; // ST0C_4@6
  int v5; // [sp+Ch] [bp-14h]@4
  struct sockaddr name; // [sp+10h] [bp-10h]@4

  if ( dword_4819BC )
    DeleteTimerQueueTimer(0, dword_4819BC, 0);
  dword_4819BC = 0;
  if ( byte_4819B9 == 1 )
  {
    s = socket(2, 1, 0);
    name.sa_family = 2;
    *(_DWORD *)&name.sa_data[2] = dword_4785C4;
    *(_WORD *)&name.sa_data[0] = htons(word_4785C8);
    v3 = connect(s, &name, 16);
    v5 = sub_43C072(s);
    sub_42D400(v5, dword_4785C4);
    if ( v3 == -1 )
    {
      sub_41D61F(v5);
      sub_4180B3(v5);
    }
    else
    {
      sub_42D6C6((int)&unk_481758);
      v4 = dword_481750;
      dword_481750 = v5;
      sub_4180B3(v4);
      byte_4819B9 = 0;
      byte_4785C0 = 1;
      sub_41D687(dword_481750, ExistingCompletionPort);
      sub_42D6FF((int)&unk_481758);
    }
  }
}
// 4785C0: using guessed type char byte_4785C0;
// 4785C4: using guessed type int dword_4785C4;
// 481750: using guessed type int dword_481750;
// 4819B9: using guessed type char byte_4819B9;

//----- (0043BC53) --------------------------------------------------------
int sub_43BC53()
{
  return `eh vector constructor iterator'(&unk_481778, 0x24u, 16, (int)sub_43C590, unknown_libname_204);
}

//----- (0043BC70) --------------------------------------------------------
int sub_43BC70()
{
  return atexit(sub_43BC82);
}

//----- (0043BC82) --------------------------------------------------------
void __cdecl sub_43BC82()
{
  if ( !(byte_4819B8 & 1) )
  {
    byte_4819B8 |= 1u;
    `eh vector destructor iterator'(&unk_481778, 0x24u, 16, unknown_libname_204);
  }
}
// 4819B8: using guessed type char byte_4819B8;

//----- (0043BCC6) --------------------------------------------------------
void sub_43BCC6()
{
  ;
}

//----- (0043BCCB) --------------------------------------------------------
int sub_43BCCB()
{
  return atexit(sub_43BCDD);
}

//----- (0043BCDD) --------------------------------------------------------
void __cdecl sub_43BCDD()
{
  sub_43C5E0();
}

//----- (0043BCEC) --------------------------------------------------------
DNameNode *sub_43BCEC()
{
  DNameNode *v1; // [sp+0h] [bp-20h]@4
  DNameNode *v2; // [sp+4h] [bp-1Ch]@3
  char *v3; // [sp+Ch] [bp-14h]@1
  DNameNode *v4; // [sp+10h] [bp-10h]@1

  v3 = (char *)&unk_481778 + 36 * (InterlockedIncrement(&dword_46E160) & 0xF);
  sub_42D4B5((int)(v3 + 4));
  v4 = *(DNameNode **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = *((_DWORD *)v4 + 2);
    sub_42D4F0((int)(v3 + 4));
  }
  else
  {
    sub_42D4F0((int)(v3 + 4));
    v2 = (DNameNode *)unknown_libname_49(0x14u);
    if ( v2 )
      v1 = sub_43C5F0(v2);
    else
      v1 = 0;
    v4 = v1;
  }
  return v4;
}

//----- (0043BDAE) --------------------------------------------------------
void sub_43BDAE()
{
  char *v0; // [sp+Ch] [bp-Ch]@3
  int v1; // [sp+10h] [bp-8h]@4
  signed int i; // [sp+14h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    v0 = (char *)&unk_481778 + 36 * i;
    sub_42D4B5((int)&unk_481778 + 36 * i + 4);
    while ( 1 )
    {
      v1 = *(_DWORD *)v0;
      if ( !*(_DWORD *)v0 )
        break;
      *(_DWORD *)v0 = *(_DWORD *)(v1 + 8);
      if ( v1 )
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
    }
    sub_42D4F0((int)(v0 + 4));
  }
}

//----- (0043BE3C) --------------------------------------------------------
void __thiscall sub_43BE3C(_DWORD *this)
{
  _DWORD *v1; // ST04_4@1
  char *v2; // ST08_4@1

  v1 = this;
  v2 = (char *)&unk_481778 + 36 * (InterlockedDecrement(&dword_4819C0) & 0xF);
  sub_42D4B5((int)(v2 + 4));
  v1[2] = *(_DWORD *)v2;
  *(_DWORD *)v2 = v1;
  sub_42D4F0((int)(v2 + 4));
}

//----- (0043BE8B) --------------------------------------------------------
void __cdecl sub_43BE8B(int a1, int a2)
{
  int v2; // ecx@0
  int v3; // [sp+Ch] [bp-20h]@1

  v3 = v2;
  if ( (*(int (__cdecl **)(_DWORD, int))(v2 + 16))(*(_DWORD *)(v2 + 8), *(_DWORD *)(v2 + 12) + a2 + 5) & 0xFF )
    sub_41D61F(*(_DWORD *)(v3 + 8));
  sub_4180B3(*(_DWORD *)(v3 + 8));
  sub_41E170(*(_DWORD *)(v3 + 12));
  InterlockedDecrement(&dword_48174C);
  sub_43BE3C((_DWORD *)v3);
}

//----- (0043BF78) --------------------------------------------------------
char sub_43BF78()
{
  sub_42DBFC((int)&unk_47FA00, 2, aCallDummypac_1);
  return 0;
}

//----- (0043BF93) --------------------------------------------------------
char __cdecl sub_43BF93(int a1, char a2)
{
  int v2; // ST10_4@1

  v2 = sub_411480((int **)&a2);
  sub_42DBFC((int)&unk_47FA00, 1, aGetVersionD, v2);
  return 0;
}

//----- (0043BFC4) --------------------------------------------------------
char __cdecl sub_43BFC4(int a1, char a2)
{
  sub_411480((int **)&a2);
  return 0;
}

//----- (0043BFDD) --------------------------------------------------------
char __cdecl sub_43BFDD(int a1, char a2)
{
  sub_4114B0(&a2);
  return 0;
}

//----- (0043C072) --------------------------------------------------------
int __cdecl sub_43C072(int a1)
{
  int v2; // [sp+0h] [bp-18h]@2
  DNameNode *v3; // [sp+4h] [bp-14h]@1

  v3 = (DNameNode *)unknown_libname_49(0x80u);
  if ( v3 )
    v2 = sub_43C0E0(v3, a1);
  else
    v2 = 0;
  return v2;
}

//----- (0043C0E0) --------------------------------------------------------
int __thiscall sub_43C0E0(DNameNode *this, int a2)
{
  int v2; // ST04_4@1

  v2 = (int)this;
  sub_41D4D0(this, a2);
  *(_DWORD *)v2 = &off_45FA14;
  *(_DWORD *)(v2 + 104) = dword_4785C4;
  *(_DWORD *)(v2 + 124) = 0;
  *(_DWORD *)(v2 + 96) = 0;
  *(_DWORD *)(v2 + 100) = off_46E164;
  sub_418095(v2);
  byte_4819B9 = 0;
  return v2;
}
// 45FA14: using guessed type int (__stdcall *off_45FA14)(int);
// 46E164: using guessed type int (__cdecl *off_46E164[3])(int, char);
// 4785C4: using guessed type int dword_4785C4;
// 4819B9: using guessed type char byte_4819B9;

//----- (0043C16A) --------------------------------------------------------
void *__fastcall sub_43C16A(int a1)
{
  int v1; // ST0C_4@1

  v1 = a1;
  *(_DWORD *)a1 = &off_45FA14;
  sub_42DBFC((int)&unk_47FA00, 3, aWantedsocketDe);
  return sub_41D583(v1);
}
// 45FA14: using guessed type int (__stdcall *off_45FA14)(int);

//----- (0043C1C7) --------------------------------------------------------
BOOL __thiscall sub_43C1C7(int this)
{
  PVOID Parameter; // ST1C_4@1
  int v2; // ST18_4@1
  int v3; // ST14_4@1
  char *v4; // eax@1

  Parameter = (PVOID)this;
  *(_DWORD *)(this + 96) = 2;
  byte_4819B9 = 1;
  byte_4785C0 = 0;
  v2 = this;
  v3 = *(_DWORD *)(this + 88);
  v4 = sub_43C246(this);
  sub_42DBFC((int)&unk_47FA00, 3, aCloseConnect_2, v4, v3, v2);
  sub_418095((int)Parameter);
  return CreateTimerQueueTimer(&dword_4819BC, 0, sub_43BB3F, Parameter, dword_4785CC, 0, 0);
}
// 4785C0: using guessed type char byte_4785C0;
// 4819B9: using guessed type char byte_4819B9;

//----- (0043C246) --------------------------------------------------------
char *__thiscall sub_43C246(int this)
{
  return inet_ntoa(*(struct in_addr *)(this + 104));
}

//----- (0043C25E) --------------------------------------------------------
int __thiscall sub_43C25E(void *this)
{
  void *v1; // ST00_4@1

  v1 = this;
  sub_418095((int)this);
  return (*(int (__thiscall **)(void *))(*(_DWORD *)v1 + 32))(v1);
}

//----- (0043C27C) --------------------------------------------------------
LONG __thiscall sub_43C27C(int this)
{
  LONG result; // eax@2
  DNameNode *v2; // ST18_4@16
  int v3; // [sp+0h] [bp-14h]@1
  int v4; // [sp+8h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-8h]@1
  signed __int32 dwNumberOfBytesTransferred; // [sp+10h] [bp-4h]@1

  v3 = this;
  dwNumberOfBytesTransferred = 0;
  v5 = *(_DWORD *)(*(_DWORD *)(this + 72) + 8196);
  v4 = *(_DWORD *)(this + 72) + 4;
  if ( *(_DWORD *)(this + 96) == 2 )
  {
    result = sub_41D61F(this);
  }
  else
  {
    while ( 1 )
    {
      while ( 1 )
      {
        if ( dwNumberOfBytesTransferred >= v5 )
          return sub_41D995(v3, 0);
        if ( *(_DWORD *)(v3 + 96) )
          break;
        if ( dwNumberOfBytesTransferred + 3 > v5 )
          return sub_41D995(v3, v5 - dwNumberOfBytesTransferred);
        *(_DWORD *)(v3 + 92) = *(_BYTE *)(dwNumberOfBytesTransferred + v4)
                             + (*(_BYTE *)(dwNumberOfBytesTransferred + v4 + 1) << 8)
                             + 1;
        if ( *(_DWORD *)(v3 + 92) <= 0 || *(_DWORD *)(v3 + 92) > 0x2000 )
        {
          sub_42DBFC((int)&unk_47FA00, 3, aDBadPacketSi_3, *(_DWORD *)(v3 + 88), *(_DWORD *)(v3 + 92));
          goto LABEL_20;
        }
        dwNumberOfBytesTransferred += 2;
        *(_DWORD *)(v3 + 96) = 1;
      }
      if ( *(_DWORD *)(v3 + 96) != 1 )
        goto LABEL_20;
      if ( *(_DWORD *)(v3 + 92) + dwNumberOfBytesTransferred > v5 )
        return sub_41D995(v3, v5 - dwNumberOfBytesTransferred);
      if ( (signed int)*(_BYTE *)(dwNumberOfBytesTransferred + v4) >= 3 )
        break;
      v2 = sub_43BCEC();
      *((_DWORD *)v2 + 2) = v3;
      *((_DWORD *)v2 + 3) = *(_DWORD *)(v3 + 72);
      *((_DWORD *)v2 + 4) = *(_DWORD *)(*(_DWORD *)(v3 + 100) + 4 * *(_BYTE *)(dwNumberOfBytesTransferred + v4));
      sub_418095(v3);
      sub_4116D0(*(_DWORD *)(v3 + 72));
      InterlockedIncrement(&dword_48174C);
      sub_4180FB((void *)v2, dwNumberOfBytesTransferred, CompletionPort);
      dwNumberOfBytesTransferred += *(_DWORD *)(v3 + 92);
      *(_DWORD *)(v3 + 96) = 0;
    }
    sub_42DBFC((int)&unk_47FA00, 3, aUnknownProto_3, *(_BYTE *)(dwNumberOfBytesTransferred + v4));
LABEL_20:
    result = sub_41D61F(v3);
  }
  return result;
}

//----- (0043C476) --------------------------------------------------------
char __cdecl sub_43C476(int a1, int a2, char a3)
{
  char result; // al@5
  char *v4; // [sp+4h] [bp-Ch]@6
  _DWORD *v5; // [sp+Ch] [bp-4h]@6

  sub_418095(a1);
  if ( *(_DWORD *)(a1 + 96) != 2 && !byte_4819B9 && byte_4785C0 && *(_DWORD *)(a1 + 88) != -1 )
  {
    v5 = sub_417DD3();
    v4 = sub_43A690((char *)v5 + 6, 8190, a2, (int)&a3);
    if ( v4 )
    {
      *((_BYTE *)v5 + 4) = (_BYTE)--v4;
      *((_BYTE *)v5 + 5) = BYTE1(v4);
    }
    else
    {
      sub_42DBFC((int)&unk_47FA00, 3, aDAssembleToo_7, *(_DWORD *)(a1 + 88), a2);
    }
    v5[2049] = v4 + 3;
    sub_41DB1A(a1, (int)v5);
    sub_4180B3(a1);
    result = 1;
  }
  else
  {
    sub_4180B3(a1);
    result = 0;
  }
  return result;
}
// 4785C0: using guessed type char byte_4785C0;
// 4819B9: using guessed type char byte_4819B9;

//----- (0043C57C) --------------------------------------------------------
int sub_43C57C()
{
  return atexit(sub_402150);
}

//----- (0043C590) --------------------------------------------------------
int __thiscall sub_43C590(int this)
{
  int v1; // ST08_4@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_42D420((struct _RTL_CRITICAL_SECTION *)(this + 4), 2, 0);
  return v1;
}

//----- (0043C5E0) --------------------------------------------------------
void sub_43C5E0()
{
  sub_43BDAE();
}

//----- (0043C5F0) --------------------------------------------------------
DNameNode *__thiscall sub_43C5F0(DNameNode *this)
{
  DNameNode *v1; // ST00_4@1

  v1 = this;
  DNameNode::DNameNode(this);
  *(_DWORD *)v1 = &off_45F9DC;
  return v1;
}
// 45F9DC: using guessed type int (__stdcall *off_45F9DC)(int);

//----- (0043C610) --------------------------------------------------------
void *__thiscall sub_43C610(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  unknown_libname_205();
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);
// 43C640: using guessed type int unknown_libname_205(void);

//----- (0043C660) --------------------------------------------------------
void *__thiscall sub_43C660(void *this, char a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_43C16A((int)this);
  if ( a2 & 1 )
    unknown_libname_48(v3);
  return v3;
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0043CA18) --------------------------------------------------------
void __cdecl sub_43CA18(LPVOID lpMem)
{
  sub_44BDA0(lpMem);
}

//----- (0043D2E7) --------------------------------------------------------
_DWORD *__thiscall sub_43D2E7(_DWORD *this, int a2, int a3, char a4, int a5)
{
  _DWORD *v5; // esi@1
  int v6; // ecx@4

  v5 = this;
  if ( a5 )
  {
    *this = &unk_45FAF8;
    this[10] = 0;
    this[1] = &off_45FACC;
  }
  *(_DWORD *)((char *)this + *(_DWORD *)(*this + 4)) = &off_45FADC;
  if ( a4 )
  {
    v6 = *(_DWORD *)(*this + 4);
    std::basic_ios<char,std::char_traits<char>>::init(a2, a3);
  }
  return v5;
}
// 40BC20: using guessed type _DWORD __stdcall std::basic_ios<char,std::char_traits<char>>::init(_DWORD, _DWORD);
// 45FACC: using guessed type int (__stdcall *off_45FACC)(int);
// 45FADC: using guessed type int (__stdcall *off_45FADC)(char);

//----- (0043D414) --------------------------------------------------------
char *__thiscall sub_43D414(char *this, char a2)
{
  char *v2; // esi@1

  v2 = this - 4;
  sub_43D45E(this - 4);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0043D45E) --------------------------------------------------------
int __thiscall sub_43D45E(void *this)
{
  int v1; // eax@1
  std::ios_base *v2; // ecx@1

  v1 = *(_DWORD *)this;
  v2 = (std::ios_base *)((char *)this + 4);
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v1 + 4) - 4) = &off_45FADC;
  return sub_40B190(v2);
}
// 45FADC: using guessed type int (__stdcall *off_45FADC)(char);

//----- (0043D49D) --------------------------------------------------------
int sub_43D49D()
{
  return atexit(sub_402150);
}

//----- (0043D552) --------------------------------------------------------
_BYTE *__thiscall sub_43D552(_BYTE *this, _BYTE *a2)
{
  _BYTE *v2; // esi@1
  CHAR *v4; // [sp+10h] [bp-10h]@1
  int v5; // [sp+1Ch] [bp-4h]@1

  v2 = this;
  v4 = byte_481640;
  exception::exception(&v4);
  v5 = 0;
  v2[12] = *a2;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(a2, 0, -1);
  *(_DWORD *)v2 = &off_45FB68;
  return v2;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 435960: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(_DWORD, _DWORD, _DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FB68: using guessed type int (__stdcall *off_45FB68)(char);

//----- (0043D5C3) --------------------------------------------------------
void __thiscall __noreturn sub_43D5C3(void *this)
{
  char v1; // [sp+0h] [bp-1Ch]@1

  sub_43D639(&v1, (int)this);
  _CxxThrowException(&v1, &unk_463AC8);
}
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (0043D61D) --------------------------------------------------------
void *__thiscall sub_43D61D(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  unknown_libname_207();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 43D5E0: using guessed type int unknown_libname_207(void);

//----- (0043D639) --------------------------------------------------------
_BYTE *__thiscall sub_43D639(_BYTE *this, int a2)
{
  _BYTE *v2; // esi@1

  v2 = this;
  exception::exception(a2);
  v2[12] = *(_BYTE *)(a2 + 12);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(a2 + 12, 0, -1);
  *(_DWORD *)v2 = &off_45FB68;
  return v2;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 435960: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(_DWORD, _DWORD, _DWORD);
// 44DC47: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FB68: using guessed type int (__stdcall *off_45FB68)(char);

//----- (0043D6D3) --------------------------------------------------------
void __thiscall __noreturn sub_43D6D3(void *this)
{
  char v1; // [sp+0h] [bp-1Ch]@1

  sub_43D70C(&v1, (int)this);
  _CxxThrowException(&v1, &unk_463A58);
}
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (0043D6F0) --------------------------------------------------------
void *__thiscall sub_43D6F0(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  unknown_libname_208();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 43D696: using guessed type int unknown_libname_208(void);

//----- (0043D70C) --------------------------------------------------------
_DWORD *__thiscall sub_43D70C(_BYTE *this, int a2)
{
  _DWORD *v2; // esi@1

  v2 = this;
  sub_43D639(this, a2);
  *v2 = &off_45FB24;
  return v2;
}
// 45FB24: using guessed type int (__stdcall *off_45FB24)(char);

//----- (0043DD3E) --------------------------------------------------------
void __thiscall sub_43DD3E(void *this)
{
  struct std::locale::facet *v1; // eax@2
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  if ( dword_481A20 )
  {
    v1 = std::locale::facet::_Decref(dword_481A20);
    if ( v1 )
      (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  }
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0043DF4D) --------------------------------------------------------
int sub_43DF4D()
{
  return atexit(sub_402150);
}

//----- (0043DF65) --------------------------------------------------------
void __noreturn sub_43DF65()
{
  size_t v0; // eax@1
  int (__stdcall **v1)(char); // [sp+4h] [bp-3Ch]@1
  char v2; // [sp+20h] [bp-20h]@1
  char v3; // [sp+33h] [bp-Dh]@1
  int v4; // [sp+3Ch] [bp-4h]@1

  v2 = v3;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  v0 = strlen("string too long");
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign("string too long", v0);
  v4 = 0;
  sub_4357A0(&v1, &v2);
  v1 = &off_45FBB8;
  _CxxThrowException(&v1, &unk_463D10);
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FBB8: using guessed type int (__stdcall *off_45FBB8)(char);

//----- (0043DFFC) --------------------------------------------------------
void __thiscall __noreturn sub_43DFFC(void *this)
{
  char v1; // [sp+0h] [bp-1Ch]@1

  sub_43E035(&v1, (int)this);
  _CxxThrowException(&v1, &unk_463D10);
}
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (0043E019) --------------------------------------------------------
void *__thiscall sub_43E019(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  unknown_libname_210();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 43DFBF: using guessed type int unknown_libname_210(void);

//----- (0043E035) --------------------------------------------------------
_DWORD *__thiscall sub_43E035(_DWORD *this, int a2)
{
  _DWORD *v2; // esi@1

  v2 = this;
  sub_435620(this, a2);
  *v2 = &off_45FBB8;
  return v2;
}
// 45FBB8: using guessed type int (__stdcall *off_45FBB8)(char);

//----- (0043E04D) --------------------------------------------------------
void __noreturn sub_43E04D()
{
  size_t v0; // eax@1
  int (__stdcall **v1)(int); // [sp+4h] [bp-3Ch]@1
  char v2; // [sp+20h] [bp-20h]@1
  char v3; // [sp+33h] [bp-Dh]@1
  int v4; // [sp+3Ch] [bp-4h]@1

  v2 = v3;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  v0 = strlen("invalid string position");
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign("invalid string position", v0);
  v4 = 0;
  sub_4357A0(&v1, &v2);
  v1 = &off_45FBE8;
  _CxxThrowException(&v1, &unk_463570);
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FBE8: using guessed type int (__stdcall *off_45FBE8)(int);

//----- (0043E0D1) --------------------------------------------------------
int sub_43E0D1()
{
  return atexit(sub_402150);
}

//----- (0043E18C) --------------------------------------------------------
int sub_43E18C()
{
  return atexit(sub_402150);
}

//----- (0043EC89) --------------------------------------------------------
int __stdcall sub_43EC89(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, bool *a8)
{
  int v8; // edi@1
  int v9; // eax@1
  std::locale *v10; // eax@2
  int v11; // eax@2
  int v12; // eax@2
  void *v13; // eax@2
  int v14; // eax@4
  std::locale *v15; // eax@5
  int v16; // edi@5
  int v17; // eax@5
  unsigned __int32 v18; // eax@5
  unsigned int v19; // edi@5
  bool v20; // zf@9
  _DWORD *v21; // eax@9
  int result; // eax@14
  char v23; // [sp+Ch] [bp-48h]@5
  char v24; // [sp+1Ch] [bp-38h]@2
  char v25; // [sp+2Ch] [bp-28h]@2
  int v26; // [sp+30h] [bp-24h]@2
  char *v27; // [sp+3Ch] [bp-18h]@5
  char v28; // [sp+40h] [bp-14h]@5
  int v29; // [sp+44h] [bp-10h]@1
  int v30; // [sp+50h] [bp-4h]@2

  v29 = -1;
  v8 = a6;
  v9 = *(_DWORD *)(a6 + 12);
  if ( BYTE1(v9) & 0x40 )
  {
    v10 = (std::locale *)std::ios_base::getloc(&a6);
    sub_44099B(v10, 0, 1);
    std::locale::~locale((std::locale *)&a6);
    v25 = BYTE3(a6);
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(1u, 0);
    v30 = 1;
    v11 = unknown_libname_221(&v24);
    LOBYTE(v30) = 2;
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::append(v11, 0, 0xFFFFFFFF);
    LOBYTE(v30) = 1;
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::append(1u, 0);
    v12 = unknown_libname_222(&v24);
    LOBYTE(v30) = 3;
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::append(v12, 0, 0xFFFFFFFF);
    LOBYTE(v30) = 1;
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
    v13 = (void *)v26;
    if ( !v26 )
      v13 = &unk_45F91C;
    v14 = std::_Getloctxt((int)&a2, (int)&a4, 2u, (int)v13);
    v30 = -1;
    v29 = v14;
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
  }
  else
  {
    *_errno() = 0;
    v15 = (std::locale *)std::ios_base::getloc(&v28);
    v16 = *(_DWORD *)(v8 + 12);
    v30 = 4;
    v17 = std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(&v23, &a2, &a4, v16, v15);
    v18 = strtoul(&v23, &v27, v17);
    v30 = -1;
    v19 = v18;
    std::locale::~locale((std::locale *)&v28);
    if ( v27 != &v23 && !*_errno() && v19 <= 1 )
      v29 = v19;
  }
  v20 = (unsigned __int8)sub_440C62((int)&a2, (int)&a4) == 0;
  v21 = a7;
  if ( !v20 )
    *a7 |= 1u;
  if ( v29 >= 0 )
    *a8 = v29 != 0;
  else
    *v21 |= 2u;
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 43F96D: using guessed type _DWORD __cdecl std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *);
// 4405EE: using guessed type _DWORD __stdcall unknown_libname_221(_DWORD);
// 440605: using guessed type _DWORD __stdcall unknown_libname_222(_DWORD);

//----- (0043EE33) --------------------------------------------------------
int __stdcall sub_43EE33(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, _WORD *a8)
{
  int v8; // esi@1
  std::locale *v9; // eax@1
  int v10; // esi@1
  int v11; // eax@1
  int v12; // esi@1
  char *v13; // edi@1
  unsigned __int32 v14; // esi@3
  char v15; // al@3
  _DWORD *v16; // ebx@3
  int result; // eax@12
  char v18; // [sp+Ch] [bp-30h]@1
  char v19; // [sp+Dh] [bp-2Fh]@1
  char *v20; // [sp+2Ch] [bp-10h]@3
  int v21; // [sp+38h] [bp-4h]@1

  *_errno() = 0;
  v8 = a6;
  v9 = (std::locale *)std::ios_base::getloc(&a6);
  v10 = *(_DWORD *)(v8 + 12);
  v21 = 0;
  v11 = std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(&v18, &a2, &a4, v10, v9);
  v21 = -1;
  v12 = v11;
  std::locale::~locale((std::locale *)&a6);
  v13 = &v19;
  if ( v18 != 45 )
    v13 = &v18;
  v14 = strtoul(v13, &v20, v12);
  v15 = sub_440C62((int)&a2, (int)&a4);
  v16 = a7;
  if ( v15 )
    *a7 |= 1u;
  if ( v20 == v13 || *_errno() || v14 > 0xFFFF )
  {
    *v16 |= 2u;
  }
  else
  {
    if ( v18 == 45 )
      v14 = -v14;
    *a8 = v14;
  }
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 43F96D: using guessed type _DWORD __cdecl std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *);

//----- (0043EEFF) --------------------------------------------------------
int __stdcall sub_43EEFF(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, unsigned __int32 *a8)
{
  int v8; // esi@1
  std::locale *v9; // eax@1
  int v10; // esi@1
  int v11; // eax@1
  int v12; // esi@1
  char *v13; // edi@1
  unsigned __int32 v14; // esi@3
  char v15; // al@3
  _DWORD *v16; // ebx@3
  int result; // eax@12
  char v18; // [sp+Ch] [bp-30h]@1
  char v19; // [sp+Dh] [bp-2Fh]@1
  char *v20; // [sp+2Ch] [bp-10h]@3
  int v21; // [sp+38h] [bp-4h]@1

  *_errno() = 0;
  v8 = a6;
  v9 = (std::locale *)std::ios_base::getloc(&a6);
  v10 = *(_DWORD *)(v8 + 12);
  v21 = 0;
  v11 = std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(&v18, &a2, &a4, v10, v9);
  v21 = -1;
  v12 = v11;
  std::locale::~locale((std::locale *)&a6);
  v13 = &v19;
  if ( v18 != 45 )
    v13 = &v18;
  v14 = strtoul(v13, &v20, v12);
  v15 = sub_440C62((int)&a2, (int)&a4);
  v16 = a7;
  if ( v15 )
    *a7 |= 1u;
  if ( v20 == v13 || *_errno() || v14 > 0xFFFFFFFF )
  {
    *v16 |= 2u;
  }
  else
  {
    if ( v18 == 45 )
      v14 = -v14;
    *a8 = v14;
  }
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 43F96D: using guessed type _DWORD __cdecl std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *);

//----- (0043F123) --------------------------------------------------------
int __stdcall sub_43F123(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, float *a8)
{
  std::locale *v8; // eax@1
  __int32 v9; // eax@1
  char v10; // al@1
  _DWORD *v11; // esi@1
  int result; // eax@7
  char v13; // [sp+4h] [bp-60h]@1
  float v14; // [sp+50h] [bp-14h]@1
  char *v15; // [sp+54h] [bp-10h]@1
  int v16; // [sp+60h] [bp-4h]@1

  *_errno() = 0;
  v8 = (std::locale *)std::ios_base::getloc(&a6);
  v16 = 0;
  v9 = std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getffld(&v13, &a2, &a4, v8);
  v14 = sub_44A74B(&v13, &v15, v9);
  v16 = -1;
  std::locale::~locale((std::locale *)&a6);
  v10 = sub_440C62((int)&a2, (int)&a4);
  v11 = a7;
  if ( v10 )
    *a7 |= 1u;
  if ( v15 == &v13 || *_errno() )
    *v11 |= 2u;
  else
    *a8 = v14;
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 43FD02: using guessed type _DWORD __cdecl std::num_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getffld(_DWORD, _DWORD, _DWORD, std::locale *);

//----- (0043F5BF) --------------------------------------------------------
int __stdcall sub_43F5BF(int a1, int a2, int a3, int a4, int a5, int a6)
{
  const char *v6; // eax@1
  int v7; // eax@1
  int v8; // ecx@1
  int result; // eax@1
  char v10; // [sp+4h] [bp-50h]@1
  char v11; // [sp+44h] [bp-10h]@1
  char v12; // [sp+4Ch] [bp-8h]@1

  v6 = (const char *)unknown_libname_220(&v12, 100, *(_DWORD *)(a4 + 12));
  v7 = sprintf(&v10, v6, a6);
  v8 = std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Iput(&v11, a2, a3, a4, a5, &v10, v7);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v8;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v8 + 4);
  return result;
}
// 4402FF: using guessed type _DWORD __cdecl unknown_libname_220(_DWORD, char, _DWORD);
// 440359: using guessed type int __cdecl std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Iput(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0043F617) --------------------------------------------------------
int __stdcall sub_43F617(int a1, int a2, int a3, int a4, int a5, int a6)
{
  const char *v6; // eax@1
  int v7; // eax@1
  int v8; // ecx@1
  int result; // eax@1
  char v10; // [sp+4h] [bp-50h]@1
  char v11; // [sp+44h] [bp-10h]@1
  char v12; // [sp+4Ch] [bp-8h]@1

  v6 = (const char *)unknown_libname_220(&v12, 117, *(_DWORD *)(a4 + 12));
  v7 = sprintf(&v10, v6, a6);
  v8 = std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Iput(&v11, a2, a3, a4, a5, &v10, v7);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v8;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v8 + 4);
  return result;
}
// 4402FF: using guessed type _DWORD __cdecl unknown_libname_220(_DWORD, char, _DWORD);
// 440359: using guessed type int __cdecl std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Iput(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0043F66F) --------------------------------------------------------
int __stdcall sub_43F66F(int a1, int a2, int a3, int a4, int a5, double a6)
{
  signed int v6; // esi@1
  signed int v7; // ebx@4
  double v8; // ST2C_8@6
  const char *v9; // eax@6
  int v10; // eax@6
  int v11; // ecx@6
  int result; // eax@6
  char v13; // [sp+14h] [bp-54h]@6
  int v14; // [sp+60h] [bp-8h]@6

  v6 = *(_DWORD *)(a4 + 16);
  if ( v6 <= 0 && !(*(_BYTE *)(a4 + 13) & 0x20) )
    v6 = 6;
  v7 = 36;
  if ( v6 <= 36 )
    v7 = v6;
  v8 = a6;
  v9 = (const char *)unknown_libname_219(&a6, 0, *(_DWORD *)(a4 + 12));
  v10 = sprintf(&v13, v9, v7, v8);
  v11 = std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Fput(
          (int)&v14,
          a2,
          a3,
          a4,
          a5,
          &v13,
          v6 - v7,
          v10);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v11;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v11 + 4);
  return result;
}
// 43FFEE: using guessed type _DWORD __cdecl unknown_libname_219(_DWORD, char, _DWORD);

//----- (0043F6ED) --------------------------------------------------------
int __stdcall sub_43F6ED(int a1, int a2, int a3, int a4, int a5, double a6)
{
  signed int v6; // esi@1
  signed int v7; // ebx@4
  double v8; // ST2C_8@6
  const char *v9; // eax@6
  int v10; // eax@6
  int v11; // ecx@6
  int result; // eax@6
  char v13; // [sp+14h] [bp-54h]@6
  int v14; // [sp+60h] [bp-8h]@6

  v6 = *(_DWORD *)(a4 + 16);
  if ( v6 <= 0 && !(*(_BYTE *)(a4 + 13) & 0x20) )
    v6 = 6;
  v7 = 36;
  if ( v6 <= 36 )
    v7 = v6;
  v8 = a6;
  v9 = (const char *)unknown_libname_219(&a6, 76, *(_DWORD *)(a4 + 12));
  v10 = sprintf(&v13, v9, v7, v8);
  v11 = std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char>>>::_Fput(
          (int)&v14,
          a2,
          a3,
          a4,
          a5,
          &v13,
          v6 - v7,
          v10);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v11;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v11 + 4);
  return result;
}
// 43FFEE: using guessed type _DWORD __cdecl unknown_libname_219(_DWORD, char, _DWORD);

//----- (0043F835) --------------------------------------------------------
char __thiscall sub_43F835(int this)
{
  return *(_BYTE *)(this + 12);
}

//----- (0043F839) --------------------------------------------------------
char __thiscall sub_43F839(int this)
{
  return *(_BYTE *)(this + 13);
}

//----- (0043F8DF) --------------------------------------------------------
void *__thiscall sub_43F8DF(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_43F8FB(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0043F8FB) --------------------------------------------------------
void __thiscall sub_43F8FB(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (0043F902) --------------------------------------------------------
void *__thiscall sub_43F902(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_43F91E(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0043F91E) --------------------------------------------------------
void __thiscall sub_43F91E(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (0043F925) --------------------------------------------------------
void *__thiscall sub_43F925(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_43F941((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0043F941) --------------------------------------------------------
void __thiscall sub_43F941(int this)
{
  int v1; // esi@1
  void *v2; // ST08_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_45FCAC;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 16));
  sub_43CA18(*(LPVOID *)(v1 + 20));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FCAC: using guessed type int (__stdcall *off_45FCAC)(char);

//----- (004407E3) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_4407E3(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A30);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481A40;
    if ( !dword_481A40 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_45FCE8;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_440CFA(v7);
      dword_481A40 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FCE8: using guessed type int (__stdcall *off_45FCE8)(char);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481A40: using guessed type int dword_481A40;

//----- (004408BF) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_4408BF(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A3C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481A44;
    if ( !dword_481A44 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_45FCC8;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_440D48(v7);
      dword_481A44 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FCC8: using guessed type int (__stdcall *off_45FCC8)(char);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481A44: using guessed type int dword_481A44;

//----- (0044099B) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44099B(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A38);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481A48;
    if ( !dword_481A48 )
    {
      v5 = operator new(0x18u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_440CA1((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481A48 = (int)sub_440D96(v6);
      v4 = (const struct std::locale::facet *)dword_481A48;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481A48: using guessed type int dword_481A48;

//----- (00440C62) --------------------------------------------------------
signed int __thiscall sub_440C62(int this, int a2)
{
  _DWORD *v2; // esi@1

  v2 = (_DWORD *)this;
  if ( !*(_BYTE *)(this + 4) )
    ((void (*)(void))unknown_libname_223)();
  if ( !*(_BYTE *)(a2 + 4) )
    unknown_libname_223(a2);
  if ( !*v2 )
  {
    if ( *(_DWORD *)a2 )
      return 0;
    return 1;
  }
  if ( *(_DWORD *)a2 )
    return 1;
  return 0;
}
// 4406CD: using guessed type int __thiscall unknown_libname_223(_DWORD);

//----- (00440CA1) --------------------------------------------------------
int __thiscall sub_440CA1(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_45FCAC;
  v3 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v7) = 1;
  std::numpunct<char>::_Init(v3);
  LOBYTE(v7) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 44061C: using guessed type _DWORD __stdcall std::numpunct<char>::_Init(_DWORD);
// 45FCAC: using guessed type int (__stdcall *off_45FCAC)(char);

//----- (00440CFA) --------------------------------------------------------
std::locale::facet *__cdecl sub_440CFA(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481A4C = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_440DE4);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00440D48) --------------------------------------------------------
std::locale::facet *__cdecl sub_440D48(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481A50 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_440E31);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00440D96) --------------------------------------------------------
std::locale::facet *__cdecl sub_440D96(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481A54 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_440E7E);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00440DE4) --------------------------------------------------------
void __thiscall sub_440DE4(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481A4C);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481A4C = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00440E31) --------------------------------------------------------
void __thiscall sub_440E31(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481A50);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481A50 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00440E7E) --------------------------------------------------------
void __thiscall sub_440E7E(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481A54);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481A54 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00440EF5) --------------------------------------------------------
int sub_440EF5()
{
  return atexit(sub_402150);
}

//----- (0044134E) --------------------------------------------------------
LCID sub_44134E()
{
  signed int v0; // eax@1
  LCID v1; // ebx@3

  InterlockedIncrement(&dword_4832D8);
  v0 = 0;
  if ( dword_4832D4 )
  {
    InterlockedDecrement(&dword_4832D8);
    _lock(19);
    v0 = 1;
  }
  v1 = dword_481C60;
  if ( v0 )
    _unlock(19);
  else
    InterlockedDecrement(&dword_4832D8);
  return v1;
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 4832D4: using guessed type int dword_4832D4;

//----- (004415A2) --------------------------------------------------------
_DWORD *__thiscall sub_4415A2(_DWORD *this, char a2)
{
  _DWORD *v2; // esi@1

  v2 = this;
  exception::exception(&a2);
  *v2 = &off_45FD88;
  return v2;
}
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FD88: using guessed type int (__stdcall *off_45FD88)(char);

//----- (004415BB) --------------------------------------------------------
void __thiscall sub_4415BB(int this)
{
  *(_DWORD *)this = &off_45FD88;
  sub_44DCB0(this);
}
// 45FD88: using guessed type int (__stdcall *off_45FD88)(char);

//----- (004415C6) --------------------------------------------------------
void __thiscall __noreturn sub_4415C6(void *this)
{
  char v1; // [sp+0h] [bp-Ch]@1

  sub_4415FF(&v1, (int)this);
  _CxxThrowException(&v1, &unk_464490);
}
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);

//----- (004415E3) --------------------------------------------------------
void *__thiscall sub_4415E3(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4415BB((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004415FF) --------------------------------------------------------
_DWORD *__thiscall sub_4415FF(_DWORD *this, int a2)
{
  _DWORD *v2; // esi@1

  v2 = this;
  exception::exception(a2);
  *v2 = &off_45FD88;
  return v2;
}
// 44DC47: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 45FD88: using guessed type int (__stdcall *off_45FD88)(char);

//----- (00441617) --------------------------------------------------------
void __cdecl sub_441617()
{
  sub_4415BB((int)&unk_481A60);
}

//----- (00441D20) --------------------------------------------------------
char sub_441D20()
{
  return 0;
}

//----- (00441D23) --------------------------------------------------------
signed int sub_441D23()
{
  return 2;
}

//----- (00441D27) --------------------------------------------------------
int sub_441D27()
{
  return 0;
}

//----- (00441D2A) --------------------------------------------------------
void *__thiscall sub_441D2A(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_441D46(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00441D46) --------------------------------------------------------
void __thiscall sub_441D46(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (00441E4A) --------------------------------------------------------
_WORD *__thiscall sub_441E4A(void *this, _WORD *a2, _WORD *a3)
{
  _WORD *v3; // esi@1
  const _Ctypevec *v4; // edi@2

  v3 = a2;
  if ( a2 != a3 )
  {
    v4 = (const _Ctypevec *)((char *)this + 8);
    do
    {
      *v3 = _Tolower(*v3, v4);
      ++v3;
    }
    while ( v3 != a3 );
  }
  return v3;
}

//----- (00441EA8) --------------------------------------------------------
_WORD *__thiscall sub_441EA8(void *this, _WORD *a2, _WORD *a3)
{
  _WORD *v3; // esi@1
  const _Ctypevec *v4; // edi@2

  v3 = a2;
  if ( a2 != a3 )
  {
    v4 = (const _Ctypevec *)((char *)this + 8);
    do
    {
      *v3 = _Toupper(*v3, v4);
      ++v3;
    }
    while ( v3 != a3 );
  }
  return v3;
}

//----- (00441F11) --------------------------------------------------------
int __stdcall sub_441F11(wint_t a1, int a2)
{
  return wctob(a1);
}

//----- (00442026) --------------------------------------------------------
int __stdcall sub_442026(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, bool *a8)
{
  int v8; // edi@1
  int v9; // eax@1
  std::locale *v10; // eax@2
  int v11; // eax@2
  int v12; // eax@2
  void *v13; // eax@2
  int v14; // eax@4
  std::locale *v15; // eax@5
  int v16; // edi@5
  int v17; // eax@5
  unsigned __int32 v18; // eax@5
  unsigned int v19; // edi@5
  bool v20; // zf@9
  _DWORD *v21; // eax@9
  int result; // eax@14
  char v23; // [sp+Ch] [bp-48h]@5
  char v24; // [sp+1Ch] [bp-38h]@2
  char v25; // [sp+2Ch] [bp-28h]@2
  int v26; // [sp+30h] [bp-24h]@2
  char *v27; // [sp+3Ch] [bp-18h]@5
  char v28; // [sp+40h] [bp-14h]@5
  int v29; // [sp+44h] [bp-10h]@1
  int v30; // [sp+50h] [bp-4h]@2

  v29 = -1;
  v8 = a6;
  v9 = *(_DWORD *)(a6 + 12);
  if ( BYTE1(v9) & 0x40 )
  {
    v10 = (std::locale *)std::ios_base::getloc(&a6);
    sub_446317(v10, 0, 1);
    std::locale::~locale((std::locale *)&a6);
    v25 = BYTE3(a6);
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(0);
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::assign(1, 0);
    v30 = 1;
    v11 = unknown_libname_241(&v24);
    LOBYTE(v30) = 2;
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(
      v11,
      0,
      -1);
    LOBYTE(v30) = 1;
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(1);
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(1, 0);
    v12 = unknown_libname_242(&v24);
    LOBYTE(v30) = 3;
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(
      v12,
      0,
      -1);
    LOBYTE(v30) = 1;
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(1);
    v13 = (void *)v26;
    if ( !v26 )
      v13 = &unk_45FF28;
    v14 = std::_Getloctxt((int)&a2, (int)&a4, 2u, (int)v13);
    v30 = -1;
    v29 = v14;
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(1);
  }
  else
  {
    *_errno() = 0;
    v15 = (std::locale *)std::ios_base::getloc(&v28);
    v16 = *(_DWORD *)(v8 + 12);
    v30 = 4;
    v17 = std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(
            &v23,
            &a2,
            &a4,
            v16,
            v15);
    v18 = strtoul(&v23, &v27, v17);
    v30 = -1;
    v19 = v18;
    std::locale::~locale((std::locale *)&v28);
    if ( v27 != &v23 && !*_errno() && v19 <= 1 )
      v29 = v19;
  }
  v20 = (unsigned __int8)std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(&a4) == 0;
  v21 = a7;
  if ( !v20 )
    *a7 |= 1u;
  if ( v29 >= 0 )
    *a8 = v29 != 0;
  else
    *v21 |= 2u;
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 443962: using guessed type _DWORD __cdecl std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *);
// 4446C7: using guessed type _DWORD __stdcall unknown_libname_241(_DWORD);
// 4446DE: using guessed type _DWORD __stdcall unknown_libname_242(_DWORD);
// 4455FE: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(_DWORD, _DWORD);
// 445ACF: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::assign(_DWORD, _DWORD);
// 445D22: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(char);
// 445EA6: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(_DWORD, _DWORD, _DWORD);
// 446E30: using guessed type _DWORD __stdcall std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(_DWORD);

//----- (004421D0) --------------------------------------------------------
int __stdcall sub_4421D0(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, _WORD *a8)
{
  int v8; // esi@1
  std::locale *v9; // eax@1
  int v10; // esi@1
  int v11; // eax@1
  int v12; // esi@1
  char *v13; // edi@1
  unsigned __int32 v14; // esi@3
  char v15; // al@3
  _DWORD *v16; // ebx@3
  int result; // eax@12
  char v18; // [sp+Ch] [bp-30h]@1
  char v19; // [sp+Dh] [bp-2Fh]@1
  char *v20; // [sp+2Ch] [bp-10h]@3
  int v21; // [sp+38h] [bp-4h]@1

  *_errno() = 0;
  v8 = a6;
  v9 = (std::locale *)std::ios_base::getloc(&a6);
  v10 = *(_DWORD *)(v8 + 12);
  v21 = 0;
  v11 = std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(
          &v18,
          &a2,
          &a4,
          v10,
          v9);
  v21 = -1;
  v12 = v11;
  std::locale::~locale((std::locale *)&a6);
  v13 = &v19;
  if ( v18 != 45 )
    v13 = &v18;
  v14 = strtoul(v13, &v20, v12);
  v15 = std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(&a4);
  v16 = a7;
  if ( v15 )
    *a7 |= 1u;
  if ( v20 == v13 || *_errno() || v14 > 0xFFFF )
  {
    *v16 |= 2u;
  }
  else
  {
    if ( v18 == 45 )
      v14 = -v14;
    *a8 = v14;
  }
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 443962: using guessed type _DWORD __cdecl std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *);
// 446E30: using guessed type _DWORD __stdcall std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(_DWORD);

//----- (0044229C) --------------------------------------------------------
int __stdcall sub_44229C(int a1, int a2, int a3, char a4, int a5, int a6, _DWORD *a7, unsigned __int32 *a8)
{
  int v8; // esi@1
  std::locale *v9; // eax@1
  int v10; // esi@1
  int v11; // eax@1
  int v12; // esi@1
  char *v13; // edi@1
  unsigned __int32 v14; // esi@3
  char v15; // al@3
  _DWORD *v16; // ebx@3
  int result; // eax@12
  char v18; // [sp+Ch] [bp-30h]@1
  char v19; // [sp+Dh] [bp-2Fh]@1
  char *v20; // [sp+2Ch] [bp-10h]@3
  int v21; // [sp+38h] [bp-4h]@1

  *_errno() = 0;
  v8 = a6;
  v9 = (std::locale *)std::ios_base::getloc(&a6);
  v10 = *(_DWORD *)(v8 + 12);
  v21 = 0;
  v11 = std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(
          &v18,
          &a2,
          &a4,
          v10,
          v9);
  v21 = -1;
  v12 = v11;
  std::locale::~locale((std::locale *)&a6);
  v13 = &v19;
  if ( v18 != 45 )
    v13 = &v18;
  v14 = strtoul(v13, &v20, v12);
  v15 = std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(&a4);
  v16 = a7;
  if ( v15 )
    *a7 |= 1u;
  if ( v20 == v13 || *_errno() || v14 > 0xFFFFFFFF )
  {
    *v16 |= 2u;
  }
  else
  {
    if ( v18 == 45 )
      v14 = -v14;
    *a8 = v14;
  }
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 443962: using guessed type _DWORD __cdecl std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getifld(_DWORD, _DWORD, _DWORD, _DWORD, std::locale *);
// 446E30: using guessed type _DWORD __stdcall std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(_DWORD);

//----- (004424C0) --------------------------------------------------------
int __stdcall sub_4424C0(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, float *a8)
{
  struct std::locale *v8; // eax@1
  __int32 v9; // eax@1
  char v10; // al@1
  _DWORD *v11; // esi@1
  int result; // eax@7
  char v13[4]; // [sp+4h] [bp-60h]@1
  float v14; // [sp+50h] [bp-14h]@1
  char *v15; // [sp+54h] [bp-10h]@1
  int v16; // [sp+60h] [bp-4h]@1

  *_errno() = 0;
  v8 = (struct std::locale *)std::ios_base::getloc(&a6);
  v16 = 0;
  v9 = std::num_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getffld(
         (int)v13,
         (int)&a2,
         (int)&a4,
         v8);
  v14 = sub_44A74B(v13, &v15, v9);
  v16 = -1;
  std::locale::~locale((std::locale *)&a6);
  v10 = std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(&a4);
  v11 = a7;
  if ( v10 )
    *a7 |= 1u;
  if ( v15 == v13 || *_errno() )
    *v11 |= 2u;
  else
    *a8 = v14;
  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  return result;
}
// 4212F0: using guessed type int __stdcall std::ios_base::getloc(_DWORD);
// 446E30: using guessed type _DWORD __stdcall std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(_DWORD);

//----- (0044296F) --------------------------------------------------------
int __stdcall sub_44296F(int a1, int a2, int a3, int a4, int a5, int a6)
{
  const char *v6; // eax@1
  int v7; // eax@1
  int v8; // ecx@1
  int result; // eax@1
  char v10; // [sp+4h] [bp-50h]@1
  char v11; // [sp+44h] [bp-10h]@1
  char v12; // [sp+4Ch] [bp-8h]@1

  v6 = (const char *)unknown_libname_240(&v12, 100, *(_DWORD *)(a4 + 12));
  v7 = sprintf(&v10, v6, a6);
  v8 = std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Iput(
         &v11,
         a2,
         a3,
         a4,
         a5,
         &v10,
         v7);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v8;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v8 + 4);
  return result;
}
// 4443BF: using guessed type _DWORD __cdecl unknown_libname_240(_DWORD, char, _DWORD);
// 444419: using guessed type int __cdecl std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Iput(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004429C7) --------------------------------------------------------
int __stdcall sub_4429C7(int a1, int a2, int a3, int a4, int a5, int a6)
{
  const char *v6; // eax@1
  int v7; // eax@1
  int v8; // ecx@1
  int result; // eax@1
  char v10; // [sp+4h] [bp-50h]@1
  char v11; // [sp+44h] [bp-10h]@1
  char v12; // [sp+4Ch] [bp-8h]@1

  v6 = (const char *)unknown_libname_240(&v12, 117, *(_DWORD *)(a4 + 12));
  v7 = sprintf(&v10, v6, a6);
  v8 = std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Iput(
         &v11,
         a2,
         a3,
         a4,
         a5,
         &v10,
         v7);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v8;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v8 + 4);
  return result;
}
// 4443BF: using guessed type _DWORD __cdecl unknown_libname_240(_DWORD, char, _DWORD);
// 444419: using guessed type int __cdecl std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Iput(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00442A1F) --------------------------------------------------------
int __stdcall sub_442A1F(int a1, int a2, int a3, int a4, int a5, double a6)
{
  signed int v6; // esi@1
  signed int v7; // ebx@4
  double v8; // ST2C_8@6
  const char *v9; // eax@6
  int v10; // eax@6
  int v11; // ecx@6
  int result; // eax@6
  char v13; // [sp+14h] [bp-54h]@6
  int v14; // [sp+60h] [bp-8h]@6

  v6 = *(_DWORD *)(a4 + 16);
  if ( v6 <= 0 && !(*(_BYTE *)(a4 + 13) & 0x20) )
    v6 = 6;
  v7 = 36;
  if ( v6 <= 36 )
    v7 = v6;
  v8 = a6;
  v9 = (const char *)unknown_libname_239(&a6, 0, *(_DWORD *)(a4 + 12));
  v10 = sprintf(&v13, v9, v7, v8);
  v11 = std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Fput(
          (int)&v14,
          a2,
          a3,
          a4,
          a5,
          &v13,
          v6 - v7,
          v10);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v11;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v11 + 4);
  return result;
}
// 44407C: using guessed type _DWORD __cdecl unknown_libname_239(_DWORD, char, _DWORD);

//----- (00442A9D) --------------------------------------------------------
int __stdcall sub_442A9D(int a1, int a2, int a3, int a4, int a5, double a6)
{
  signed int v6; // esi@1
  signed int v7; // ebx@4
  double v8; // ST2C_8@6
  const char *v9; // eax@6
  int v10; // eax@6
  int v11; // ecx@6
  int result; // eax@6
  char v13; // [sp+14h] [bp-54h]@6
  int v14; // [sp+60h] [bp-8h]@6

  v6 = *(_DWORD *)(a4 + 16);
  if ( v6 <= 0 && !(*(_BYTE *)(a4 + 13) & 0x20) )
    v6 = 6;
  v7 = 36;
  if ( v6 <= 36 )
    v7 = v6;
  v8 = a6;
  v9 = (const char *)unknown_libname_239(&a6, 76, *(_DWORD *)(a4 + 12));
  v10 = sprintf(&v13, v9, v7, v8);
  v11 = std::num_put<unsigned short,std::ostreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Fput(
          (int)&v14,
          a2,
          a3,
          a4,
          a5,
          &v13,
          v6 - v7,
          v10);
  result = a1;
  *(_DWORD *)a1 = *(_DWORD *)v11;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v11 + 4);
  return result;
}
// 44407C: using guessed type _DWORD __cdecl unknown_libname_239(_DWORD, char, _DWORD);

//----- (00442DD5) --------------------------------------------------------
int __stdcall sub_442DD5(int a1, int a2)
{
  return 0;
}

//----- (00442F83) --------------------------------------------------------
int __stdcall sub_442F83(int a1, int a2, int a3, char a4, int a5, char a6, int a7, _DWORD *a8, int a9)
{
  bool v9; // zf@1
  _DWORD *v10; // eax@1
  char v12; // [sp+4h] [bp-1Ch]@1
  int v13; // [sp+Ch] [bp-14h]@3
  int v14; // [sp+1Ch] [bp-4h]@1

  std::money_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getmfld(
    &v12,
    &a2,
    &a4,
    a6,
    a7);
  v14 = 0;
  v9 = (unsigned __int8)std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(&a4) == 0;
  v10 = a8;
  if ( !v9 )
    *a8 |= 1u;
  if ( v13 )
    std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::assign(
      &v12,
      0,
      -1);
  else
    *v10 |= 2u;
  v14 = -1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(1);
  return a1;
}
// 44477A: using guessed type _DWORD __stdcall std::money_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Getmfld(_DWORD, _DWORD, _DWORD, char, _DWORD);
// 4459AF: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::assign(_DWORD, _DWORD, _DWORD);
// 445D22: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(char);
// 446E30: using guessed type _DWORD __stdcall std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>::equal(_DWORD);

//----- (0044335F) --------------------------------------------------------
int __thiscall sub_44335F(int this)
{
  return *(_DWORD *)(this + 28);
}

//----- (0044337B) --------------------------------------------------------
signed int sub_44337B()
{
  return 2;
}

//----- (00443656) --------------------------------------------------------
void *__thiscall sub_443656(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_443672((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00443672) --------------------------------------------------------
void __thiscall sub_443672(int this)
{
  _DWORD *v1; // esi@1
  bool v2; // zf@1

  v1 = (_DWORD *)this;
  v2 = *(_DWORD *)(this + 20) == 0;
  *(_DWORD *)this = &off_45FEEC;
  if ( !v2 )
    sub_44BDA0(*(LPVOID *)(this + 16));
  *v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FEEC: using guessed type int (__stdcall *off_45FEEC)(char);

//----- (00443692) --------------------------------------------------------
void *__thiscall sub_443692(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4436AE((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004436AE) --------------------------------------------------------
void __thiscall sub_4436AE(int this)
{
  _DWORD *v1; // esi@1
  void *v2; // ST00_4@1

  v1 = (_DWORD *)this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_45FDB8;
  sub_44BDA0(v2);
  *v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FDB8: using guessed type int (__stdcall *off_45FDB8)(char);

//----- (004436C8) --------------------------------------------------------
void *__thiscall sub_4436C8(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4436E4(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004436E4) --------------------------------------------------------
void __thiscall sub_4436E4(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (004436EB) --------------------------------------------------------
void *__thiscall sub_4436EB(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_443707(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00443707) --------------------------------------------------------
void __thiscall sub_443707(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (0044370E) --------------------------------------------------------
void *__thiscall sub_44370E(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_44372A((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0044372A) --------------------------------------------------------
void __thiscall sub_44372A(int this)
{
  int v1; // esi@1
  void *v2; // ST08_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_45FE84;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 16));
  sub_43CA18(*(LPVOID *)(v1 + 20));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FE84: using guessed type int (__stdcall *off_45FE84)(char);

//----- (00443756) --------------------------------------------------------
void *__thiscall sub_443756(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_443772(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00443772) --------------------------------------------------------
void __thiscall sub_443772(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (00443779) --------------------------------------------------------
void *__thiscall sub_443779(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_443795((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00443795) --------------------------------------------------------
void __thiscall sub_443795(int this)
{
  int v1; // esi@1
  void *v2; // ST04_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_45FE5C;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 12));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FE5C: using guessed type int (__stdcall *off_45FE5C)(char);

//----- (004437B8) --------------------------------------------------------
void *__thiscall sub_4437B8(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4437D4(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004437D4) --------------------------------------------------------
void __thiscall sub_4437D4(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (004437DB) --------------------------------------------------------
void *__thiscall sub_4437DB(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4437F7(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004437F7) --------------------------------------------------------
void __thiscall sub_4437F7(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (004437FE) --------------------------------------------------------
void *__thiscall sub_4437FE(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_443875();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 443875: using guessed type int sub_443875(void);

//----- (0044381A) --------------------------------------------------------
void *__thiscall sub_44381A(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4438CA();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 4438CA: using guessed type int sub_4438CA(void);

//----- (00443836) --------------------------------------------------------
void *__thiscall sub_443836(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_443852((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00443852) --------------------------------------------------------
void __thiscall sub_443852(int this)
{
  int v1; // esi@1
  void *v2; // ST04_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_45FDC4;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 12));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FDC4: using guessed type int (__stdcall *off_45FDC4)(char);

//----- (0044387A) --------------------------------------------------------
void __thiscall sub_44387A(int this)
{
  int v1; // esi@1
  void *v2; // ST0C_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_45FF54;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 16));
  sub_43CA18(*(LPVOID *)(v1 + 20));
  sub_43CA18(*(LPVOID *)(v1 + 24));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 45FF54: using guessed type int (__stdcall *off_45FF54)(char);

//----- (004438AE) --------------------------------------------------------
void *__thiscall sub_4438AE(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_44387A((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00445667) --------------------------------------------------------
int __thiscall sub_445667(int this, unsigned int a2)
{
  unsigned int v2; // edx@1
  int result; // eax@2

  v2 = *(_DWORD *)(this + 8);
  if ( a2 > v2 )
    result = std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(
               a2 - v2,
               0);
  else
    result = std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::erase(
               a2,
               -1);
  return result;
}
// 4455FE: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::append(_DWORD, _DWORD);
// 445C01: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::erase(_DWORD, _DWORD);

//----- (0044568D) --------------------------------------------------------
int __thiscall sub_44568D(int this, int a2, int a3, char a4)
{
  int v4; // esi@1

  v4 = this;
  *(_DWORD *)(this + 4) = a3;
  *(_BYTE *)(this + 40) = a4;
  *(_DWORD *)this = &off_45FF54;
  std::_Mpunct<unsigned short>::_Init(a2);
  return v4;
}
// 445DBB: using guessed type _DWORD __stdcall std::_Mpunct<unsigned short>::_Init(_DWORD);
// 45FF54: using guessed type int (__stdcall *off_45FF54)(char);

//----- (0044609B) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44609B(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@6
  int (__stdcall **v7)(int); // [sp+4h] [bp-1Ch]@11
  char v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v8);
  v9 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A88);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v7 = &off_45FD64;
      _CxxThrowException(&v7, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AA0;
    if ( !dword_481AA0 )
    {
      a3 = (int)operator new(0x18u);
      LOBYTE(v9) = 1;
      if ( a3 )
        v5 = (std::locale::facet *)std::ctype<unsigned short>::ctype<unsigned short>(v4);
      else
        v5 = 0;
      LOBYTE(v9) = 0;
      dword_481AA0 = (int)sub_446FE7(v5);
      v4 = (const struct std::locale::facet *)dword_481AA0;
    }
  }
  v9 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v8);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 446D63: using guessed type _DWORD __stdcall std::ctype<unsigned short>::ctype<unsigned short>(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481AA0: using guessed type int dword_481AA0;

//----- (0044615F) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44615F(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A8C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481AA4;
    if ( !dword_481AA4 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_45FEC0;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_447035(v7);
      dword_481AA4 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 45FEC0: using guessed type int (__stdcall *off_45FEC0)(char);
// 481AA4: using guessed type int dword_481AA4;

//----- (0044623B) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44623B(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A7C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481AA8;
    if ( !dword_481AA8 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_45FEA0;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_447083(v7);
      dword_481AA8 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 45FEA0: using guessed type int (__stdcall *off_45FEA0)(char);
// 481AA8: using guessed type int dword_481AA8;

//----- (00446317) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_446317(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A6C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AAC;
    if ( !dword_481AAC )
    {
      v5 = operator new(0x18u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_446E6F((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481AAC = (int)sub_4470D1(v6);
      v4 = (const struct std::locale::facet *)dword_481AAC;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481AAC: using guessed type int dword_481AAC;

//----- (004463DB) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_4463DB(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A80);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AB0;
    if ( !dword_481AB0 )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_446EC8((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481AB0 = (int)sub_44711F(v6);
      v4 = (const struct std::locale::facet *)dword_481AB0;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481AB0: using guessed type int dword_481AB0;

//----- (0044649F) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44649F(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A74);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AB4;
    if ( !dword_481AB4 )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_446F1C((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481AB4 = (int)sub_44716D(v6);
      v4 = (const struct std::locale::facet *)dword_481AB4;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481AB4: using guessed type int dword_481AB4;

//----- (00446563) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_446563(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A70);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481AB8;
    if ( !dword_481AB8 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_45FE4C;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_4471BB(v7);
      dword_481AB8 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 45FE4C: using guessed type int (__stdcall *off_45FE4C)(char);
// 481AB8: using guessed type int dword_481AB8;

//----- (0044663F) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44663F(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A9C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481ABC;
    if ( !dword_481ABC )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_45FE3C;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_447209(v7);
      dword_481ABC = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 45FE3C: using guessed type int (__stdcall *off_45FE3C)(char);
// 481ABC: using guessed type int dword_481ABC;

//----- (0044671B) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44671B(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@5
  std::locale::facet *v6; // esi@5
  int (__stdcall **v8)(int); // [sp+8h] [bp-1Ch]@11
  char v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+20h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A98);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AC0;
    if ( !dword_481AC0 )
    {
      v5 = (std::locale::facet *)operator new(0x2Cu);
      v6 = v5;
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
      {
        sub_4473DD((int)v5, 0, 0);
        *(_DWORD *)v6 = &off_45FE10;
      }
      else
      {
        v6 = 0;
      }
      LOBYTE(v10) = 0;
      dword_481AC0 = (int)sub_447257(v6);
      v4 = (const struct std::locale::facet *)dword_481AC0;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 45FE10: using guessed type int (__stdcall *off_45FE10)(char);
// 481AC0: using guessed type int dword_481AC0;

//----- (004467EA) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_4467EA(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@5
  std::locale::facet *v6; // esi@5
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A78);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AC4;
    if ( !dword_481AC4 )
    {
      v5 = (std::locale::facet *)operator new(0x2Cu);
      v6 = v5;
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
      {
        sub_4473DD((int)v5, 0, 1);
        *(_DWORD *)v6 = &off_45FDE4;
      }
      else
      {
        v6 = 0;
      }
      LOBYTE(v10) = 0;
      dword_481AC4 = (int)sub_4472A5(v6);
      v4 = (const struct std::locale::facet *)dword_481AC4;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 45FDE4: using guessed type int (__stdcall *off_45FDE4)(char);
// 481AC4: using guessed type int dword_481AC4;

//----- (004468B9) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_4468B9(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A84);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AC8;
    if ( !dword_481AC8 )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_446F8E((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481AC8 = (int)sub_4472F3(v6);
      v4 = (const struct std::locale::facet *)dword_481AC8;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481AC8: using guessed type int dword_481AC8;

//----- (0044697D) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_44697D(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A94);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481ACC;
    if ( !dword_481ACC )
    {
      v5 = operator new(0xCu);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_446DC3((int)v5, (LPVOID)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481ACC = (int)sub_447341(v6);
      v4 = (const struct std::locale::facet *)dword_481ACC;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481ACC: using guessed type int dword_481ACC;

//----- (00446A41) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_446A41(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481A90);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481AD0;
    if ( !dword_481AD0 )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_446B05((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481AD0 = (int)sub_44738F(v6);
      v4 = (const struct std::locale::facet *)dword_481AD0;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481AD0: using guessed type int dword_481AD0;

//----- (00446B05) --------------------------------------------------------
int __thiscall sub_446B05(int this, int a2)
{
  int v2; // esi@1
  int v3; // edx@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_45FD98;
  std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  *(_DWORD *)(v2 + 8) = sub_44134E();
  *(_DWORD *)(v2 + 12) = v3;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 45FD98: using guessed type int (__stdcall *off_45FD98)(char);

//----- (00446DC3) --------------------------------------------------------
int __thiscall sub_446DC3(int this, LPVOID lpMem)
{
  int v2; // esi@1
  int v3; // eax@1
  _DWORD *v4; // eax@1
  char v6; // [sp+4h] [bp-50h]@1
  int v7; // [sp+44h] [bp-10h]@1
  int v8; // [sp+50h] [bp-4h]@1

  v2 = this;
  v7 = this;
  *(_DWORD *)(this + 4) = lpMem;
  v8 = 0;
  *(_DWORD *)(this + 8) = 0;
  LOBYTE(v8) = 1;
  *(_DWORD *)this = &off_45FDB8;
  v3 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v6, aC_0);
  v4 = (_DWORD *)std::_Locinfo::_Gettnames(v3, &lpMem);
  *(_DWORD *)(v2 + 8) = *v4;
  *v4 = 0;
  sub_44BDA0(lpMem);
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v6);
  return v2;
}
// 4438F7: using guessed type int __thiscall std::_Locinfo::_Gettnames(_DWORD, _DWORD);
// 45FDB8: using guessed type int (__stdcall *off_45FDB8)(char);

//----- (00446E6F) --------------------------------------------------------
int __thiscall sub_446E6F(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_45FE84;
  v3 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v7) = 1;
  std::numpunct<unsigned short>::_Init(v3);
  LOBYTE(v7) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 4446F5: using guessed type _DWORD __stdcall std::numpunct<unsigned short>::_Init(_DWORD);
// 45FE84: using guessed type int (__stdcall *off_45FE84)(char);

//----- (00446EC8) --------------------------------------------------------
int __thiscall sub_446EC8(int this, int a2)
{
  int v2; // esi@1
  int v3; // edx@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_45FE70;
  std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  *(_DWORD *)(v2 + 8) = sub_44A86E();
  *(_DWORD *)(v2 + 12) = v3;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 45FE70: using guessed type int (__stdcall *off_45FE70)(char);

//----- (00446F1C) --------------------------------------------------------
int __thiscall sub_446F1C(int this, int a2)
{
  int v2; // esi@1
  unsigned __int16 *v3; // eax@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_45FE5C;
  std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v7) = 1;
  *(_DWORD *)(v2 + 8) = std::_Maklocstr("no", 0);
  v3 = std::_Maklocstr("yes", 0);
  LOBYTE(v7) = 0;
  *(_DWORD *)(v2 + 12) = v3;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 45FE5C: using guessed type int (__stdcall *off_45FE5C)(char);

//----- (00446F8E) --------------------------------------------------------
int __thiscall sub_446F8E(int this, int a2)
{
  int v2; // esi@1
  std::_Locinfo *v3; // eax@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_45FDC4;
  v3 = (std::_Locinfo *)std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v7) = 1;
  std::time_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Init(v3);
  LOBYTE(v7) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 4456D4: using guessed type _DWORD __stdcall std::time_get<unsigned short,std::istreambuf_iterator<unsigned short,std::char_traits<unsigned short>>>::_Init(std::_Locinfo *);
// 45FDC4: using guessed type int (__stdcall *off_45FDC4)(char);

//----- (00446FE7) --------------------------------------------------------
std::locale::facet *__cdecl sub_446FE7(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AD4 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44743C);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00447035) --------------------------------------------------------
std::locale::facet *__cdecl sub_447035(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AD8 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_447489);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00447083) --------------------------------------------------------
std::locale::facet *__cdecl sub_447083(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481ADC = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_4474D6);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (004470D1) --------------------------------------------------------
std::locale::facet *__cdecl sub_4470D1(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AE0 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_447523);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044711F) --------------------------------------------------------
std::locale::facet *__cdecl sub_44711F(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AE4 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_447570);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044716D) --------------------------------------------------------
std::locale::facet *__cdecl sub_44716D(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AE8 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_4475BD);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (004471BB) --------------------------------------------------------
std::locale::facet *__cdecl sub_4471BB(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AEC = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44760A);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00447209) --------------------------------------------------------
std::locale::facet *__cdecl sub_447209(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AF0 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_447657);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00447257) --------------------------------------------------------
std::locale::facet *__cdecl sub_447257(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AF4 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_4476A4);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (004472A5) --------------------------------------------------------
std::locale::facet *__cdecl sub_4472A5(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AF8 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_4476F1);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (004472F3) --------------------------------------------------------
std::locale::facet *__cdecl sub_4472F3(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481AFC = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44773E);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (00447341) --------------------------------------------------------
std::locale::facet *__cdecl sub_447341(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B00 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44778B);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044738F) --------------------------------------------------------
std::locale::facet *__cdecl sub_44738F(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B04 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_4477D8);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (004473DD) --------------------------------------------------------
int __thiscall sub_4473DD(int this, int a2, char a3)
{
  int v3; // esi@1
  int v4; // eax@1
  char v6; // [sp+4h] [bp-50h]@1
  int v7; // [sp+44h] [bp-10h]@1
  int v8; // [sp+50h] [bp-4h]@1

  v3 = this;
  v7 = this;
  *(_DWORD *)(this + 4) = a2;
  v8 = 0;
  *(_BYTE *)(this + 40) = a3;
  *(_DWORD *)this = &off_45FF54;
  v4 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v6, aC_0);
  LOBYTE(v8) = 1;
  std::_Mpunct<unsigned short>::_Init(v4);
  LOBYTE(v8) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v6);
  return v3;
}
// 445DBB: using guessed type _DWORD __stdcall std::_Mpunct<unsigned short>::_Init(_DWORD);
// 45FF54: using guessed type int (__stdcall *off_45FF54)(char);

//----- (0044743C) --------------------------------------------------------
void __thiscall sub_44743C(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AD4);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AD4 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00447489) --------------------------------------------------------
void __thiscall sub_447489(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AD8);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AD8 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (004474D6) --------------------------------------------------------
void __thiscall sub_4474D6(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481ADC);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481ADC = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00447523) --------------------------------------------------------
void __thiscall sub_447523(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AE0);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AE0 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00447570) --------------------------------------------------------
void __thiscall sub_447570(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AE4);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AE4 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (004475BD) --------------------------------------------------------
void __thiscall sub_4475BD(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AE8);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AE8 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044760A) --------------------------------------------------------
void __thiscall sub_44760A(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AEC);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AEC = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00447657) --------------------------------------------------------
void __thiscall sub_447657(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AF0);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AF0 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (004476A4) --------------------------------------------------------
void __thiscall sub_4476A4(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AF4);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AF4 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (004476F1) --------------------------------------------------------
void __thiscall sub_4476F1(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AF8);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AF8 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044773E) --------------------------------------------------------
void __thiscall sub_44773E(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481AFC);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481AFC = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044778B) --------------------------------------------------------
void __thiscall sub_44778B(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B00);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B00 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (004477D8) --------------------------------------------------------
void __thiscall sub_4477D8(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B04);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B04 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (00447CCC) --------------------------------------------------------
int __stdcall sub_447CCC(int a1, int a2)
{
  return 0;
}

//----- (00447CD1) --------------------------------------------------------
_BYTE *__thiscall sub_447CD1(int this, _BYTE *a2, int a3, int a4, int a5, _BYTE *a6)
{
  const char *v6; // edi@2
  _BYTE *v7; // esi@2
  char v8; // al@2
  size_t v9; // eax@5

  if ( a5 )
  {
    if ( a5 != 1 )
    {
      v7 = a2;
      *a2 = *a6;
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
      std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(a6, 0, -1);
      return v7;
    }
    v6 = *(const char **)(this + 12);
    v7 = a2;
    v8 = BYTE3(a2);
  }
  else
  {
    v6 = *(const char **)(this + 8);
    v7 = a2;
    v8 = BYTE3(a2);
  }
  *v7 = v8;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  v9 = strlen(v6);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign((void *)v6, v9);
  return v7;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 435960: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(_DWORD, _DWORD, _DWORD);

//----- (00447E73) --------------------------------------------------------
int __stdcall sub_447E73(int a1, int a2, int a3, char a4, int a5, char a6, int a7, _DWORD *a8, int a9)
{
  bool v9; // zf@1
  _DWORD *v10; // eax@1
  char v12; // [sp+4h] [bp-1Ch]@1
  int v13; // [sp+Ch] [bp-14h]@3
  int v14; // [sp+1Ch] [bp-4h]@1

  std::money_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getmfld(&v12, &a2, &a4, a6, a7);
  v14 = 0;
  v9 = (unsigned __int8)sub_440C62((int)&a2, (int)&a4) == 0;
  v10 = a8;
  if ( !v9 )
    *a8 |= 1u;
  if ( v13 )
    std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(&v12, 0, -1);
  else
    *v10 |= 2u;
  v14 = -1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(1);
  return a1;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);
// 435960: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign(_DWORD, _DWORD, _DWORD);
// 4487BD: using guessed type _DWORD __stdcall std::money_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Getmfld(_DWORD, _DWORD, _DWORD, char, _DWORD);

//----- (0044813F) --------------------------------------------------------
char __thiscall sub_44813F(int this)
{
  return *(_BYTE *)(this + 12);
}

//----- (00448143) --------------------------------------------------------
char __thiscall sub_448143(int this)
{
  return *(_BYTE *)(this + 13);
}

//----- (004481E9) --------------------------------------------------------
_BYTE *__thiscall sub_4481E9(int this, _BYTE *a2)
{
  const char *v2; // edi@1
  size_t v3; // eax@1

  v2 = *(const char **)(this + 24);
  *a2 = BYTE3(a2);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(0);
  v3 = strlen(v2);
  std::basic_string<char,std::char_traits<char>,std::allocator<char>>::assign((void *)v2, v3);
  return a2;
}
// 41FF10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::_Tidy(_DWORD);

//----- (0044821F) --------------------------------------------------------
int __thiscall sub_44821F(int this)
{
  return *(_DWORD *)(this + 28);
}

//----- (0044823B) --------------------------------------------------------
signed int sub_44823B()
{
  return 2;
}

//----- (004485C0) --------------------------------------------------------
void *__thiscall sub_4485C0(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4485DC(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004485DC) --------------------------------------------------------
void __thiscall sub_4485DC(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (004485E3) --------------------------------------------------------
void *__thiscall sub_4485E3(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4485FF((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004485FF) --------------------------------------------------------
void __thiscall sub_4485FF(int this)
{
  int v1; // esi@1
  void *v2; // ST04_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_46016C;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 12));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 46016C: using guessed type int (__stdcall *off_46016C)(char);

//----- (00448622) --------------------------------------------------------
void *__thiscall sub_448622(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_44863E(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0044863E) --------------------------------------------------------
void __thiscall sub_44863E(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (00448645) --------------------------------------------------------
void *__thiscall sub_448645(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_448661(this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (00448661) --------------------------------------------------------
void __thiscall sub_448661(void *this)
{
  *(_DWORD *)this = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (00448668) --------------------------------------------------------
void *__thiscall sub_448668(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_448715();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 448715: using guessed type int sub_448715(void);

//----- (00448684) --------------------------------------------------------
void *__thiscall sub_448684(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_44876A();
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}
// 44876A: using guessed type int sub_44876A(void);

//----- (004486A0) --------------------------------------------------------
void *__thiscall sub_4486A0(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4486BC((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004486BC) --------------------------------------------------------
void __thiscall sub_4486BC(int this)
{
  int v1; // esi@1
  void *v2; // ST04_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_4600D4;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 12));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 4600D4: using guessed type int (__stdcall *off_4600D4)(char);

//----- (004486DF) --------------------------------------------------------
void *__thiscall sub_4486DF(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_4486FB((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (004486FB) --------------------------------------------------------
void __thiscall sub_4486FB(int this)
{
  _DWORD *v1; // esi@1
  void *v2; // ST00_4@1

  v1 = (_DWORD *)this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_4600C8;
  sub_44BDA0(v2);
  *v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 4600C8: using guessed type int (__stdcall *off_4600C8)(char);

//----- (0044871A) --------------------------------------------------------
void __thiscall sub_44871A(int this)
{
  int v1; // esi@1
  void *v2; // ST0C_4@1

  v1 = this;
  v2 = *(void **)(this + 8);
  *(_DWORD *)this = &off_460194;
  sub_43CA18(v2);
  sub_43CA18(*(LPVOID *)(v1 + 16));
  sub_43CA18(*(LPVOID *)(v1 + 20));
  sub_43CA18(*(LPVOID *)(v1 + 24));
  *(_DWORD *)v1 = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);
// 460194: using guessed type int (__stdcall *off_460194)(char);

//----- (0044874E) --------------------------------------------------------
void *__thiscall sub_44874E(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_44871A((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0044876F) --------------------------------------------------------
int __thiscall sub_44876F(int this, unsigned int a2)
{
  unsigned int v2; // edx@1
  int result; // eax@2

  v2 = *(_DWORD *)(this + 8);
  if ( a2 > v2 )
    result = std::basic_string<char,std::char_traits<char>,std::allocator<char>>::append(a2 - v2, 0);
  else
    result = std::basic_string<char,std::char_traits<char>,std::allocator<char>>::erase(a2, -1);
  return result;
}
// 41FE10: using guessed type _DWORD __stdcall std::basic_string<char,std::char_traits<char>,std::allocator<char>>::erase(_DWORD, _DWORD);

//----- (004495DD) --------------------------------------------------------
int __thiscall sub_4495DD(int this, int a2, int a3, char a4)
{
  int v4; // esi@1

  v4 = this;
  *(_DWORD *)(this + 4) = a3;
  *(_BYTE *)(this + 40) = a4;
  *(_DWORD *)this = &off_460194;
  std::_Mpunct<char>::_Init(a2);
  return v4;
}
// 44988A: using guessed type _DWORD __stdcall std::_Mpunct<char>::_Init(_DWORD);
// 460194: using guessed type int (__stdcall *off_460194)(char);

//----- (004499C5) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_4499C5(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B24);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481B28;
    if ( !dword_481B28 )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_44A02B((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481B28 = (int)sub_44A1B7(v6);
      v4 = (const struct std::locale::facet *)dword_481B28;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481B28: using guessed type int dword_481B28;

//----- (00449A89) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449A89(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B18);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481B2C;
    if ( !dword_481B2C )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_44A07F((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481B2C = (int)sub_44A205(v6);
      v4 = (const struct std::locale::facet *)dword_481B2C;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481B2C: using guessed type int dword_481B2C;

//----- (00449B4D) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449B4D(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B20);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481B30;
    if ( !dword_481B30 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_46015C;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_44A253(v7);
      dword_481B30 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 46015C: using guessed type int (__stdcall *off_46015C)(char);
// 481B30: using guessed type int dword_481B30;

//----- (00449C29) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449C29(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@4
  std::locale::facet *v6; // eax@5
  std::locale::facet *v7; // esi@5
  char v9; // [sp+4h] [bp-5Ch]@6
  int (__stdcall **v10)(int); // [sp+44h] [bp-1Ch]@12
  char v11; // [sp+50h] [bp-10h]@1
  int v12; // [sp+5Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v11);
  v12 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B08);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v10 = &off_45FD64;
      _CxxThrowException(&v10, &unk_462ED8);
    }
    v5 = (std::locale::facet *)dword_481B34;
    if ( !dword_481B34 )
    {
      v6 = (std::locale::facet *)operator new(8u);
      v7 = v6;
      a3 = (int)v6;
      if ( v6 )
      {
        *((_DWORD *)v6 + 1) = 0;
        LOBYTE(v12) = 2;
        *(_DWORD *)v6 = &off_46014C;
        std::_Locinfo::_Locinfo((std::_Locinfo *)&v9, aC_0);
        std::_Locinfo::~_Locinfo((std::_Locinfo *)&v9);
      }
      else
      {
        v7 = 0;
      }
      LOBYTE(v12) = 0;
      v5 = sub_44A2A1(v7);
      dword_481B34 = (int)v5;
    }
    v4 = v5;
  }
  v12 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v11);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 46014C: using guessed type int (__stdcall *off_46014C)(char);
// 481B34: using guessed type int dword_481B34;

//----- (00449D05) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449D05(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@5
  std::locale::facet *v6; // esi@5
  int (__stdcall **v8)(int); // [sp+8h] [bp-1Ch]@11
  char v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+20h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B1C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481B38;
    if ( !dword_481B38 )
    {
      v5 = (std::locale::facet *)operator new(0x2Cu);
      v6 = v5;
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
      {
        sub_44A427((int)v5, 0, 0);
        *(_DWORD *)v6 = &off_460120;
      }
      else
      {
        v6 = 0;
      }
      LOBYTE(v10) = 0;
      dword_481B38 = (int)sub_44A2EF(v6);
      v4 = (const struct std::locale::facet *)dword_481B38;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 460120: using guessed type int (__stdcall *off_460120)(char);
// 481B38: using guessed type int dword_481B38;

//----- (00449DD4) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449DD4(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  std::locale::facet *v5; // eax@5
  std::locale::facet *v6; // esi@5
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B0C);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481B3C;
    if ( !dword_481B3C )
    {
      v5 = (std::locale::facet *)operator new(0x2Cu);
      v6 = v5;
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
      {
        sub_44A427((int)v5, 0, 1);
        *(_DWORD *)v6 = &off_4600F4;
      }
      else
      {
        v6 = 0;
      }
      LOBYTE(v10) = 0;
      dword_481B3C = (int)sub_44A33D(v6);
      v4 = (const struct std::locale::facet *)dword_481B3C;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 4600F4: using guessed type int (__stdcall *off_4600F4)(char);
// 481B3C: using guessed type int dword_481B3C;

//----- (00449EA3) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449EA3(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B10);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481B40;
    if ( !dword_481B40 )
    {
      v5 = operator new(0x10u);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_44A0F1((int)v5, (int)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481B40 = (int)sub_44A38B(v6);
      v4 = (const struct std::locale::facet *)dword_481B40;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481B40: using guessed type int dword_481B40;

//----- (00449F67) --------------------------------------------------------
const struct std::locale::facet *__cdecl sub_449F67(std::locale *a1, int a2, int a3)
{
  unsigned int v3; // eax@1
  const struct std::locale::facet *v4; // esi@1
  void *v5; // ecx@5
  std::locale::facet *v6; // eax@6
  int (__stdcall **v8)(int); // [sp+4h] [bp-1Ch]@11
  char v9; // [sp+10h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v9);
  v10 = 0;
  v3 = std::locale::id::operator unsigned int(&unk_481B14);
  v4 = std::locale::_Getfacet(a1, v3, 1);
  if ( !v4 )
  {
    if ( !(_BYTE)a3 || !std::locale::_Iscloc(a1) )
    {
      a3 = (int)aMissingLocaleF;
      exception::exception(&a3);
      v8 = &off_45FD64;
      _CxxThrowException(&v8, &unk_462ED8);
    }
    v4 = (const struct std::locale::facet *)dword_481B44;
    if ( !dword_481B44 )
    {
      v5 = operator new(0xCu);
      a3 = (int)v5;
      LOBYTE(v10) = 1;
      if ( v5 )
        v6 = (std::locale::facet *)sub_44A14A((int)v5, (LPVOID)v4);
      else
        v6 = 0;
      LOBYTE(v10) = 0;
      dword_481B44 = (int)sub_44A3D9(v6);
      v4 = (const struct std::locale::facet *)dword_481B44;
    }
  }
  v10 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 423460: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 44DC0A: using guessed type _DWORD __stdcall exception::exception(_DWORD);
// 44DD82: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 45FD64: using guessed type int (__stdcall *off_45FD64)(int);
// 481B44: using guessed type int dword_481B44;

//----- (0044A02B) --------------------------------------------------------
int __thiscall sub_44A02B(int this, int a2)
{
  int v2; // esi@1
  int v3; // edx@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_460180;
  std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  *(_DWORD *)(v2 + 8) = sub_44A86E();
  *(_DWORD *)(v2 + 12) = v3;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 460180: using guessed type int (__stdcall *off_460180)(char);

//----- (0044A07F) --------------------------------------------------------
int __thiscall sub_44A07F(int this, int a2)
{
  int v2; // esi@1
  char *v3; // eax@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_46016C;
  std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v7) = 1;
  *(_DWORD *)(v2 + 8) = std::_Maklocstr("no", 0);
  v3 = std::_Maklocstr("yes", 0);
  LOBYTE(v7) = 0;
  *(_DWORD *)(v2 + 12) = v3;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 46016C: using guessed type int (__stdcall *off_46016C)(char);

//----- (0044A0F1) --------------------------------------------------------
int __thiscall sub_44A0F1(int this, int a2)
{
  int v2; // esi@1
  std::_Locinfo *v3; // eax@1
  char v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+44h] [bp-10h]@1
  int v7; // [sp+50h] [bp-4h]@1

  v2 = this;
  v6 = this;
  *(_DWORD *)(this + 4) = a2;
  v7 = 0;
  *(_DWORD *)this = &off_4600D4;
  v3 = (std::_Locinfo *)std::_Locinfo::_Locinfo((std::_Locinfo *)&v5, aC_0);
  LOBYTE(v7) = 1;
  std::time_get<char,std::istreambuf_iterator<char,std::char_traits<char>>>::_Init(v3);
  LOBYTE(v7) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v5);
  return v2;
}
// 4600D4: using guessed type int (__stdcall *off_4600D4)(char);

//----- (0044A14A) --------------------------------------------------------
int __thiscall sub_44A14A(int this, LPVOID lpMem)
{
  int v2; // esi@1
  int v3; // eax@1
  _DWORD *v4; // eax@1
  char v6; // [sp+4h] [bp-50h]@1
  int v7; // [sp+44h] [bp-10h]@1
  int v8; // [sp+50h] [bp-4h]@1

  v2 = this;
  v7 = this;
  *(_DWORD *)(this + 4) = lpMem;
  v8 = 0;
  *(_DWORD *)(this + 8) = 0;
  LOBYTE(v8) = 1;
  *(_DWORD *)this = &off_4600C8;
  v3 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v6, aC_0);
  v4 = (_DWORD *)std::_Locinfo::_Gettnames(v3, &lpMem);
  *(_DWORD *)(v2 + 8) = *v4;
  *v4 = 0;
  sub_44BDA0(lpMem);
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v6);
  return v2;
}
// 4438F7: using guessed type int __thiscall std::_Locinfo::_Gettnames(_DWORD, _DWORD);
// 4600C8: using guessed type int (__stdcall *off_4600C8)(char);

//----- (0044A1B7) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A1B7(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B48 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A486);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A205) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A205(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B4C = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A4D3);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A253) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A253(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B50 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A520);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A2A1) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A2A1(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B54 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A56D);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A2EF) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A2EF(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B58 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A5BA);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A33D) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A33D(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B5C = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A607);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A38B) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A38B(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B60 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A654);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A3D9) --------------------------------------------------------
std::locale::facet *__cdecl sub_44A3D9(std::locale::facet *a1)
{
  char v2; // [sp+4h] [bp-10h]@1
  int v3; // [sp+10h] [bp-4h]@1

  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  dword_481B64 = a1;
  std::locale::facet::_Incref(a1);
  atexit((void (__cdecl *)())sub_44A6A1);
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
  return a1;
}

//----- (0044A427) --------------------------------------------------------
int __thiscall sub_44A427(int this, int a2, char a3)
{
  int v3; // esi@1
  int v4; // eax@1
  char v6; // [sp+4h] [bp-50h]@1
  int v7; // [sp+44h] [bp-10h]@1
  int v8; // [sp+50h] [bp-4h]@1

  v3 = this;
  v7 = this;
  *(_DWORD *)(this + 4) = a2;
  v8 = 0;
  *(_BYTE *)(this + 40) = a3;
  *(_DWORD *)this = &off_460194;
  v4 = std::_Locinfo::_Locinfo((std::_Locinfo *)&v6, aC_0);
  LOBYTE(v8) = 1;
  std::_Mpunct<char>::_Init(v4);
  LOBYTE(v8) = 0;
  std::_Locinfo::~_Locinfo((std::_Locinfo *)&v6);
  return v3;
}
// 44988A: using guessed type _DWORD __stdcall std::_Mpunct<char>::_Init(_DWORD);
// 460194: using guessed type int (__stdcall *off_460194)(char);

//----- (0044A486) --------------------------------------------------------
void __thiscall sub_44A486(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B48);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B48 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A4D3) --------------------------------------------------------
void __thiscall sub_44A4D3(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B4C);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B4C = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A520) --------------------------------------------------------
void __thiscall sub_44A520(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B50);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B50 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A56D) --------------------------------------------------------
void __thiscall sub_44A56D(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B54);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B54 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A5BA) --------------------------------------------------------
void __thiscall sub_44A5BA(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B58);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B58 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A607) --------------------------------------------------------
void __thiscall sub_44A607(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B5C);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B5C = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A654) --------------------------------------------------------
void __thiscall sub_44A654(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B60);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B60 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A6A1) --------------------------------------------------------
void __thiscall sub_44A6A1(void *this)
{
  struct std::locale::facet *v1; // eax@1
  void *v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v2);
  v3 = 0;
  v1 = std::locale::facet::_Decref(dword_481B64);
  if ( v1 )
    (**(void (__thiscall ***)(struct std::locale::facet *, signed int))v1)(v1, 1);
  dword_481B64 = 0;
  v3 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)&v2);
}

//----- (0044A74B) --------------------------------------------------------
double __cdecl sub_44A74B(char *a1, char **a2, __int32 a3)
{
  return _Stod(a1, a2, a3);
}

//----- (0044A86E) --------------------------------------------------------
LCID sub_44A86E()
{
  signed int v0; // eax@1
  LCID v1; // ebx@3

  InterlockedIncrement(&dword_4832D8);
  v0 = 0;
  if ( dword_4832D4 )
  {
    InterlockedDecrement(&dword_4832D8);
    _lock(19);
    v0 = 1;
  }
  v1 = dword_481C5C;
  if ( v0 )
    _unlock(19);
  else
    InterlockedDecrement(&dword_4832D8);
  return v1;
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 4832D4: using guessed type int dword_4832D4;

//----- (0044BDA0) --------------------------------------------------------
void __cdecl sub_44BDA0(LPVOID lpMem)
{
  unsigned int v1; // eax@3
  bool v2; // zf@5
  _BYTE *v3; // eax@7
  int v4; // [sp+Ch] [bp-28h]@7
  _BYTE *v5; // [sp+10h] [bp-24h]@7
  int v6; // [sp+14h] [bp-20h]@7
  unsigned int v7; // [sp+18h] [bp-1Ch]@3
  CPPEH_RECORD ms_exc; // [sp+1Ch] [bp-18h]@3

  if ( lpMem )
  {
    if ( dword_4832C8 == 3 )
    {
      _lock(9);
      ms_exc.registration.TryLevel = 0;
      v1 = __sbh_find_block(lpMem);
      v7 = v1;
      if ( v1 )
        sub_452FA5(v1, (int)lpMem);
      ms_exc.registration.TryLevel = -1;
      _unlock(9);
      v2 = v7 == 0;
    }
    else
    {
      if ( dword_4832C8 != 2 )
      {
        HeapFree(hHeap, 0, lpMem);
        return;
      }
      _lock(9);
      ms_exc.registration.TryLevel = 1;
      v3 = (_BYTE *)sub_4540F7((unsigned int)lpMem, (void ***)&v4, (unsigned int *)&v6);
      v5 = v3;
      if ( v3 )
        sub_45414E(v4, v6, v3);
      ms_exc.registration.TryLevel = -1;
      _unlock(9);
      v2 = v5 == 0;
    }
    if ( v2 )
      HeapFree(hHeap, 0, lpMem);
  }
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 452F7A: using guessed type _DWORD __cdecl __sbh_find_block(_DWORD);
// 4832C8: using guessed type int dword_4832C8;

//----- (0044BEC7) --------------------------------------------------------
LPVOID __cdecl sub_44BEC7(unsigned int a1)
{
  void *v1; // ST18_4@3
  LPVOID result; // eax@3
  unsigned int v3; // esi@7
  int v4; // ST18_4@10
  signed int v5; // eax@12
  SIZE_T v6; // eax@14

  if ( dword_4832C8 == 3 )
  {
    if ( a1 <= dword_4832C0 )
    {
      _lock(9);
      v1 = (void *)__sbh_alloc_block(a1);
      _unlock(9);
      result = v1;
      if ( v1 )
        return result;
    }
    goto LABEL_12;
  }
  if ( dword_4832C8 != 2 )
  {
LABEL_12:
    v5 = a1;
    if ( !a1 )
      v5 = 1;
    v6 = v5 + 15;
    LOBYTE(v6) = v6 & 0xF0;
    return HeapAlloc(hHeap, 0, v6);
  }
  if ( a1 )
    v3 = (a1 + 15) & 0xFFFFFFF0;
  else
    v3 = 16;
  if ( v3 > dword_47149C || (_lock(9), v4 = sub_454193(v3 >> 4), _unlock(9), (result = (LPVOID)v4) == 0) )
    result = HeapAlloc(hHeap, 0, v3);
  return result;
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 4532CE: using guessed type _DWORD __cdecl __sbh_alloc_block(_DWORD);
// 47149C: using guessed type int dword_47149C;
// 4832C0: using guessed type int dword_4832C0;
// 4832C8: using guessed type int dword_4832C8;

//----- (0044D37C) --------------------------------------------------------
void __noreturn sub_44D37C()
{
  _amsg_exit(0x19u);
}

//----- (0044D601) --------------------------------------------------------
size_t __cdecl sub_44D601(void *a1, size_t a2, size_t a3, FILE *a4)
{
  size_t v4; // esi@1

  _lock_file(a4);
  v4 = fwrite(a1, a2, a3, a4);
  _unlock_file(a4);
  return v4;
}
// 455ED8: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 455F2A: using guessed type _DWORD __cdecl _unlock_file(_DWORD);

//----- (0044D9D1) --------------------------------------------------------
int sub_44D9D1()
{
  return flsall(1);
}
// 44D9DA: using guessed type _DWORD __cdecl flsall(_DWORD);

//----- (0044DBEE) --------------------------------------------------------
void *__thiscall sub_44DBEE(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_44DCB0((int)this);
  if ( a2 & 1 )
    sub_43CA18(v2);
  return v2;
}

//----- (0044DCB0) --------------------------------------------------------
void __thiscall sub_44DCB0(int this)
{
  bool v1; // zf@1

  v1 = *(_DWORD *)(this + 8) == 0;
  *(_DWORD *)this = &off_460258;
  if ( !v1 )
    sub_43CA18(*(LPVOID *)(this + 4));
}
// 460258: using guessed type int (__stdcall *off_460258)(char);

//----- (0044EE45) --------------------------------------------------------
int sub_44EE45()
{
  return 0;
}

//----- (0044EF8C) --------------------------------------------------------
void *__cdecl sub_44EF8C(LPVOID lpMem, SIZE_T dwBytes)
{
  const void *v2; // ebx@1
  void *result; // eax@2
  unsigned int v4; // esi@3
  unsigned int v5; // eax@7
  size_t v6; // eax@12
  size_t v7; // eax@19
  _BYTE *v8; // eax@36
  _BYTE *v9; // edi@36
  size_t v10; // eax@41
  size_t v11; // eax@47
  int v12; // [sp+Ch] [bp-38h]@36
  size_t v13; // [sp+10h] [bp-34h]@41
  _BYTE *v14; // [sp+14h] [bp-30h]@36
  int v15; // [sp+18h] [bp-2Ch]@36
  unsigned int v16; // [sp+1Ch] [bp-28h]@7
  void *v17; // [sp+20h] [bp-24h]@6
  size_t v18; // [sp+24h] [bp-20h]@12
  CPPEH_RECORD ms_exc; // [sp+2Ch] [bp-18h]@7

  v2 = lpMem;
  if ( lpMem )
  {
    v4 = dwBytes;
    if ( dwBytes )
    {
      if ( dword_4832C8 == 3 )
      {
        while ( 1 )
        {
          v17 = 0;
          if ( v4 <= 0xFFFFFFE0 )
          {
            _lock(9);
            ms_exc.registration.TryLevel = 0;
            v5 = __sbh_find_block(lpMem);
            v16 = v5;
            if ( v5 )
            {
              if ( v4 <= dword_4832C0 )
              {
                if ( __sbh_resize_block(v5, lpMem, v4) )
                {
                  v17 = lpMem;
                }
                else
                {
                  v17 = (void *)__sbh_alloc_block(v4);
                  if ( v17 )
                  {
                    v6 = *((_DWORD *)lpMem - 1) - 1;
                    v18 = v6;
                    if ( v6 >= v4 )
                      v6 = v4;
                    memcpy(v17, lpMem, v6);
                    v16 = __sbh_find_block(lpMem);
                    sub_452FA5(v16, (int)lpMem);
                  }
                }
              }
              if ( !v17 )
              {
                if ( !v4 )
                  v4 = 1;
                v4 = (v4 + 15) & 0xFFFFFFF0;
                v17 = HeapAlloc(hHeap, 0, v4);
                if ( v17 )
                {
                  v7 = *((_DWORD *)lpMem - 1) - 1;
                  v18 = v7;
                  if ( v7 >= v4 )
                    v7 = v4;
                  memcpy(v17, lpMem, v7);
                  sub_452FA5(v16, (int)lpMem);
                }
              }
            }
            ms_exc.registration.TryLevel = -1;
            _unlock(9);
            if ( !v16 )
            {
              if ( !v4 )
                v4 = 1;
              v4 = (v4 + 15) & 0xFFFFFFF0;
              v17 = HeapReAlloc(hHeap, 0, lpMem, v4);
            }
          }
          result = v17;
          if ( v17 || !dword_481D68 )
            break;
          if ( !_callnewh(v4) )
            goto LABEL_63;
        }
      }
      else if ( dword_4832C8 == 2 )
      {
        if ( dwBytes <= 0xFFFFFFE0 )
        {
          if ( dwBytes <= 0 )
            v4 = 16;
          else
            v4 = (dwBytes + 15) & 0xFFFFFFF0;
        }
        while ( 1 )
        {
          v17 = 0;
          if ( v4 <= 0xFFFFFFE0 )
          {
            _lock(9);
            ms_exc.registration.TryLevel = 1;
            v8 = (_BYTE *)sub_4540F7((unsigned int)v2, (void ***)&v12, (unsigned int *)&v15);
            v9 = v8;
            v14 = v8;
            if ( v8 )
            {
              if ( v4 < dword_47149C )
              {
                if ( sub_4544BF(v12, v15, v8, v4 >> 4) )
                {
                  v17 = lpMem;
                }
                else
                {
                  v17 = (void *)sub_454193(v4 >> 4);
                  if ( v17 )
                  {
                    v10 = 16 * *v9;
                    v13 = v10;
                    if ( v10 >= v4 )
                      v10 = v4;
                    memcpy(v17, lpMem, v10);
                    sub_45414E(v12, v15, v9);
                  }
                }
                v2 = lpMem;
              }
              if ( !v17 )
              {
                v17 = HeapAlloc(hHeap, 0, v4);
                if ( v17 )
                {
                  v11 = 16 * *v9;
                  v13 = v11;
                  if ( v11 >= v4 )
                    v11 = v4;
                  memcpy(v17, v2, v11);
                  sub_45414E(v12, v15, v9);
                }
              }
            }
            else
            {
              v17 = HeapReAlloc(hHeap, 0, (LPVOID)v2, v4);
            }
            ms_exc.registration.TryLevel = -1;
            _unlock(9);
          }
          result = v17;
          if ( v17 || !dword_481D68 )
            break;
          if ( !_callnewh(v4) )
            goto LABEL_63;
        }
      }
      else
      {
        while ( 1 )
        {
          result = 0;
          if ( v4 <= 0xFFFFFFE0 )
          {
            if ( !v4 )
              v4 = 1;
            v4 = (v4 + 15) & 0xFFFFFFF0;
            result = HeapReAlloc(hHeap, 0, lpMem, v4);
          }
          if ( result || !dword_481D68 )
            break;
          if ( !_callnewh(v4) )
            goto LABEL_63;
        }
      }
    }
    else
    {
      sub_44BDA0(lpMem);
LABEL_63:
      result = 0;
    }
  }
  else
  {
    result = malloc(dwBytes);
  }
  return result;
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 452F7A: using guessed type _DWORD __cdecl __sbh_find_block(_DWORD);
// 4532CE: using guessed type _DWORD __cdecl __sbh_alloc_block(_DWORD);
// 453783: using guessed type _DWORD __cdecl __sbh_resize_block(_DWORD, _DWORD, _DWORD);
// 4546F0: using guessed type _DWORD __cdecl _callnewh(_DWORD);
// 47149C: using guessed type int dword_47149C;
// 481D68: using guessed type int dword_481D68;
// 4832C0: using guessed type int dword_4832C0;
// 4832C8: using guessed type int dword_4832C8;

//----- (0044F3A0) --------------------------------------------------------
void **sub_44F3A0()
{
  return off_46F018;
}
// 46F018: using guessed type void **off_46F018;

//----- (0044FB46) --------------------------------------------------------
int __cdecl sub_44FB46(unsigned __int8 *a1, unsigned int a2, unsigned __int8 *a3, int a4, void *a5)
{
  void *v5; // eax@4
  unsigned __int8 *v6; // esi@7
  unsigned __int8 v7; // al@8
  char *v8; // esi@14
  int result; // eax@22
  signed int v10; // [sp+Ch] [bp-8h]@2
  unsigned int v11; // [sp+10h] [bp-4h]@1

  v11 = a2;
  InterlockedIncrement(&dword_4832D8);
  if ( dword_4832D4 )
  {
    InterlockedDecrement(&dword_4832D8);
    _lock(19);
    v10 = 1;
  }
  else
  {
    v10 = 0;
  }
  v5 = a5;
  if ( !a5 )
    v5 = off_46F2F8;
  a5 = v5;
  if ( v11 > 0 )
  {
    v6 = a3;
    do
    {
      v7 = *v6;
      if ( !*v6 )
        break;
      if ( v7 == 37 )
      {
        dword_4832CC = 0;
        v8 = (char *)(v6 + 1);
        if ( *v8 == 35 )
        {
          dword_4832CC = 1;
          ++v8;
        }
        _expandtime(*v8, a4, &a1, &v11, a5);
        v6 = (unsigned __int8 *)(v8 + 1);
      }
      else
      {
        if ( *((_BYTE *)off_46F0E0 + 2 * v7 + 1) & 0x80 && v11 > 1 )
        {
          *a1++ = v7;
          ++v6;
          --v11;
        }
        *a1++ = *v6++;
        --v11;
      }
    }
    while ( v11 );
  }
  if ( v10 )
    _unlock(19);
  else
    InterlockedDecrement(&dword_4832D8);
  if ( v11 )
  {
    *a1 = 0;
    result = a2 - v11;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 44FC40: using guessed type _DWORD __cdecl _expandtime(char, _DWORD, _DWORD, _DWORD, _DWORD);
// 4832CC: using guessed type int dword_4832CC;
// 4832D4: using guessed type int dword_4832D4;

//----- (00452AF8) --------------------------------------------------------
SIZE_T __cdecl sub_452AF8(LPCVOID lpMem)
{
  int v1; // esi@3
  bool v2; // zf@5
  _BYTE *v3; // eax@7
  char v5; // [sp+Ch] [bp-2Ch]@7
  _BYTE *v6; // [sp+10h] [bp-28h]@7
  char v7; // [sp+14h] [bp-24h]@7
  int v8; // [sp+18h] [bp-20h]@3
  int v9; // [sp+1Ch] [bp-1Ch]@2
  CPPEH_RECORD ms_exc; // [sp+20h] [bp-18h]@2

  if ( dword_4832C8 == 3 )
  {
    _lock(9);
    ms_exc.registration.TryLevel = 0;
    v9 = __sbh_find_block(lpMem);
    if ( v9 )
    {
      v1 = *((_DWORD *)lpMem - 1) - 9;
      v8 = *((_DWORD *)lpMem - 1) - 9;
    }
    else
    {
      v1 = v8;
    }
    ms_exc.registration.TryLevel = -1;
    _unlock(9);
    v2 = v9 == 0;
  }
  else
  {
    if ( dword_4832C8 != 2 )
      return HeapSize(hHeap, 0, lpMem);
    _lock(9);
    ms_exc.registration.TryLevel = 1;
    v3 = (_BYTE *)sub_4540F7((unsigned int)lpMem, (void ***)&v5, (unsigned int *)&v7);
    v6 = v3;
    if ( v3 )
    {
      v1 = 16 * *v3;
      v8 = 16 * *v3;
    }
    else
    {
      v1 = v8;
    }
    ms_exc.registration.TryLevel = -1;
    _unlock(9);
    v2 = v6 == 0;
  }
  if ( v2 )
    return HeapSize(hHeap, 0, lpMem);
  return v1;
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 452F7A: using guessed type _DWORD __cdecl __sbh_find_block(_DWORD);
// 4832C8: using guessed type int dword_4832C8;

//----- (00452BE6) --------------------------------------------------------
char __cdecl sub_452BE6(int a1)
{
  HMODULE v1; // eax@1
  int v2; // ecx@2

  *(_DWORD *)a1 = 0;
  v1 = GetModuleHandleA(0);
  if ( *(_WORD *)v1 == 23117 )
  {
    v2 = *((_DWORD *)v1 + 15);
    if ( v2 )
    {
      v1 = (HMODULE)((char *)v1 + v2);
      *(_BYTE *)a1 = *((_BYTE *)v1 + 26);
      LOBYTE(v1) = *((_BYTE *)v1 + 27);
      *(_BYTE *)(a1 + 1) = (_BYTE)v1;
    }
  }
  return (unsigned int)v1;
}

//----- (00452C13) --------------------------------------------------------
__int32 sub_452C13()
{
  __int32 result; // eax@4
  CHAR *v1; // ecx@6
  CHAR v2; // al@7
  CHAR *v3; // eax@12
  CHAR *v4; // ecx@13
  CHAR v5; // al@14
  char *v6; // eax@20
  const char *v7; // eax@21
  char *v8; // ecx@21
  CHAR Buffer; // [sp+4h] [bp-122Ch]@5
  CHAR Filename; // [sp+1094h] [bp-19Ch]@13
  struct _OSVERSIONINFOA VersionInformation; // [sp+1198h] [bp-98h]@1
  unsigned __int8 v12; // [sp+122Ch] [bp-4h]@29

  VersionInformation.dwOSVersionInfoSize = 148;
  if ( GetVersionExA(&VersionInformation)
    && VersionInformation.dwPlatformId == 2
    && VersionInformation.dwMajorVersion >= 5 )
  {
    result = 1;
  }
  else
  {
    if ( !GetEnvironmentVariableA("__MSVCRT_HEAP_SELECT", &Buffer, 0x1090u) )
      goto LABEL_32;
    v1 = &Buffer;
    if ( Buffer )
    {
      do
      {
        v2 = *v1;
        if ( *v1 >= 97 && v2 <= 122 )
          *v1 = v2 - 32;
        ++v1;
      }
      while ( *v1 );
    }
    if ( !strncmp("__GLOBAL_HEAP_SELECTED", &Buffer, 0x16u) )
    {
      v3 = &Buffer;
    }
    else
    {
      GetModuleFileNameA(0, &Filename, 0x104u);
      v4 = &Filename;
      if ( Filename )
      {
        do
        {
          v5 = *v4;
          if ( *v4 >= 97 && v5 <= 122 )
            *v4 = v5 - 32;
          ++v4;
        }
        while ( *v4 );
      }
      v3 = strstr(&Buffer, &Filename);
    }
    if ( !v3 )
      goto LABEL_32;
    v6 = strchr(v3, 44);
    if ( !v6 )
      goto LABEL_32;
    v7 = v6 + 1;
    v8 = (char *)v7;
    if ( *v7 )
    {
      do
      {
        if ( *v8 == 59 )
          *v8 = 0;
        else
          ++v8;
      }
      while ( *v8 );
    }
    result = strtol(v7, 0, 10);
    if ( result != 2 && result != 3 && result != 1 )
    {
LABEL_32:
      sub_452BE6((int)&v12);
      result = 3 - (v12 < 6u);
    }
  }
  return result;
}

//----- (00452D5B) --------------------------------------------------------
signed int __cdecl sub_452D5B(int a1)
{
  __int32 v1; // eax@2
  void **v2; // eax@3

  hHeap = HeapCreate(a1 == 0, 0x1000u, 0);
  if ( !hHeap )
    return 0;
  v1 = sub_452C13();
  dword_4832C8 = v1;
  if ( v1 == 3 )
  {
    v2 = (void **)__sbh_heap_init(1016);
  }
  else
  {
    if ( v1 != 2 )
      return 1;
    v2 = sub_453E9B();
  }
  if ( !v2 )
  {
    HeapDestroy(hHeap);
    return 0;
  }
  return 1;
}
// 452F32: using guessed type _DWORD __cdecl __sbh_heap_init(_DWORD);
// 4832C8: using guessed type int dword_4832C8;

//----- (00452FA5) --------------------------------------------------------
char *__cdecl sub_452FA5(unsigned int a1, int a2)
{
  char *result; // eax@1
  int v3; // esi@1
  unsigned int v4; // edi@1
  signed int v5; // ecx@1
  int v6; // ebx@2
  unsigned int v7; // edx@3
  char *v8; // ecx@7
  unsigned int v9; // ebx@7
  bool v10; // zf@7
  char *v11; // ecx@9
  unsigned int v12; // ebx@9
  int v13; // ecx@11
  unsigned int v14; // edx@14
  unsigned int v15; // ebx@17
  unsigned int v16; // esi@24
  unsigned int v17; // esi@26
  int v18; // ecx@33
  void *v19; // eax@43
  char *v20; // [sp+Ch] [bp-10h]@1
  signed int v21; // [sp+10h] [bp-Ch]@2
  signed int v22; // [sp+14h] [bp-8h]@2
  int v23; // [sp+18h] [bp-4h]@1
  int v24; // [sp+28h] [bp+Ch]@2
  int v25; // [sp+28h] [bp+Ch]@17
  char v26; // [sp+2Bh] [bp+Fh]@34

  result = *(char **)(a1 + 16);
  v3 = a2 - 4;
  v4 = (unsigned int)(a2 - *(_DWORD *)(a1 + 12)) >> 15;
  v20 = &result[516 * v4 + 324];
  v5 = *(_DWORD *)(a2 - 4) - 1;
  v23 = *(_DWORD *)(a2 - 4) - 1;
  if ( !(v5 & 1) )
  {
    v6 = v5 + v3;
    v21 = *(_DWORD *)(v5 + v3);
    v22 = *(_DWORD *)(a2 - 8);
    v24 = v5 + v3;
    if ( !(v21 & 1) )
    {
      v7 = (v21 >> 4) - 1;
      if ( v7 > 0x3F )
        v7 = 63;
      if ( *(_DWORD *)(v6 + 4) == *(_DWORD *)(v6 + 8) )
      {
        if ( v7 >= 0x20 )
        {
          v11 = &result[v7 + 4];
          v12 = ~(0x80000000 >> (v7 - 32));
          *(_DWORD *)&result[4 * v4 + 196] &= v12;
          v10 = (*v11)-- == 1;
          if ( v10 )
            *(_DWORD *)(a1 + 4) &= v12;
        }
        else
        {
          v8 = &result[v7 + 4];
          v9 = ~(0x80000000 >> v7);
          *(_DWORD *)&result[4 * v4 + 68] &= v9;
          v10 = (*v8)-- == 1;
          if ( v10 )
            *(_DWORD *)a1 &= v9;
        }
        v13 = v23;
        v6 = v24;
      }
      else
      {
        v13 = v23;
      }
      v5 = v21 + v13;
      *(_DWORD *)(*(_DWORD *)(v6 + 8) + 4) = *(_DWORD *)(v6 + 4);
      v23 = v5;
      *(_DWORD *)(*(_DWORD *)(v24 + 4) + 8) = *(_DWORD *)(v24 + 8);
    }
    v14 = (v5 >> 4) - 1;
    if ( v14 > 0x3F )
      v14 = 63;
    if ( v22 & 1 )
    {
      v15 = a1;
    }
    else
    {
      v25 = v3 - v22;
      v15 = (v22 >> 4) - 1;
      if ( v15 > 0x3F )
        v15 = 63;
      v23 = v22 + v5;
      v14 = ((v22 + v5) >> 4) - 1;
      if ( v14 > 0x3F )
        v14 = 63;
      if ( v15 != v14 )
      {
        if ( *(_DWORD *)(v25 + 4) == *(_DWORD *)(v25 + 8) )
        {
          if ( v15 >= 0x20 )
          {
            v17 = ~(0x80000000 >> (v15 - 32));
            *(_DWORD *)&result[4 * v4 + 196] &= v17;
            v10 = result[v15 + 4]-- == 1;
            if ( v10 )
              *(_DWORD *)(a1 + 4) &= v17;
          }
          else
          {
            v16 = ~(0x80000000 >> v15);
            *(_DWORD *)&result[4 * v4 + 68] &= v16;
            v10 = result[v15 + 4]-- == 1;
            if ( v10 )
              *(_DWORD *)a1 &= v16;
          }
        }
        *(_DWORD *)(*(_DWORD *)(v25 + 8) + 4) = *(_DWORD *)(v25 + 4);
        *(_DWORD *)(*(_DWORD *)(v25 + 4) + 8) = *(_DWORD *)(v25 + 8);
      }
      v3 = v25;
    }
    if ( v22 & 1 || v15 != v14 )
    {
      v18 = (int)&v20[8 * v14];
      *(_DWORD *)(v3 + 4) = *(_DWORD *)&v20[8 * v14 + 4];
      *(_DWORD *)(v3 + 8) = v18;
      *(_DWORD *)(v18 + 4) = v3;
      *(_DWORD *)(*(_DWORD *)(v3 + 4) + 8) = v3;
      if ( *(_DWORD *)(v3 + 4) == *(_DWORD *)(v3 + 8) )
      {
        v26 = result[v14 + 4];
        result[v14 + 4] = v26 + 1;
        if ( v14 >= 0x20 )
        {
          if ( !v26 )
            *(_DWORD *)(a1 + 4) |= 0x80000000 >> (v14 - 32);
          *(_DWORD *)&result[4 * v4 + 196] |= 0x80000000 >> (v14 - 32);
        }
        else
        {
          if ( !v26 )
            *(_DWORD *)a1 |= 0x80000000 >> v14;
          *(_DWORD *)&result[4 * v4 + 68] |= 0x80000000 >> v14;
        }
      }
    }
    *(_DWORD *)v3 = v23;
    *(_DWORD *)(v23 + v3 - 4) = v23;
    result += 516 * v4 + 324;
    v10 = *(_DWORD *)v20 == 1;
    --*(_DWORD *)result;
    if ( v10 )
    {
      if ( dword_4832B4 )
      {
        VirtualFree((LPVOID)(*((_DWORD *)dword_4832B4 + 3) + (dword_4832A8 << 15)), 0x8000u, 0x4000u);
        *((_DWORD *)dword_4832B4 + 2) |= 0x80000000 >> dword_4832A8;
        *(_DWORD *)(*((_DWORD *)dword_4832B4 + 4) + 4 * dword_4832A8 + 196) = 0;
        --*(_BYTE *)(*((_DWORD *)dword_4832B4 + 4) + 67);
        v19 = dword_4832B4;
        if ( !*(_BYTE *)(*((_DWORD *)dword_4832B4 + 4) + 67) )
        {
          *((_DWORD *)dword_4832B4 + 1) &= 0xFFFFFFFE;
          v19 = dword_4832B4;
        }
        if ( *((_DWORD *)v19 + 2) == -1 )
        {
          VirtualFree(*((LPVOID *)v19 + 3), 0, 0x8000u);
          HeapFree(hHeap, 0, *((LPVOID *)dword_4832B4 + 4));
          memcpy_0(dword_4832B4, (char *)dword_4832B4 + 20, (size_t)lp + 20 * dword_4832B8 - (_DWORD)dword_4832B4 - 20);
          --dword_4832B8;
          if ( a1 > (unsigned int)dword_4832B4 )
            a1 -= 20;
          dword_4832AC = (int)lp;
        }
      }
      result = (char *)a1;
      dword_4832A8 = v4;
      dword_4832B4 = (void *)a1;
    }
  }
  return result;
}
// 4832A8: using guessed type int dword_4832A8;
// 4832AC: using guessed type int dword_4832AC;
// 4832B8: using guessed type int dword_4832B8;

//----- (00453E9B) --------------------------------------------------------
void **sub_453E9B()
{
  void **v0; // esi@2
  void *v1; // eax@4
  unsigned int v2; // edi@4
  int v3; // eax@12
  signed int v4; // ebp@12
  int v5; // edx@13

  if ( dword_46F488 == -1 )
  {
    v0 = &off_46F478;
  }
  else
  {
    v0 = (void **)HeapAlloc(hHeap, 0, 0x2020u);
    if ( !v0 )
      return 0;
  }
  v1 = VirtualAlloc(0, 0x400000u, 0x2000u, 4u);
  v2 = (unsigned int)v1;
  if ( !v1 )
  {
LABEL_19:
    if ( v0 != &off_46F478 )
      HeapFree(hHeap, 0, v0);
    return 0;
  }
  if ( !VirtualAlloc(v1, 0x10000u, 0x1000u, 4u) )
  {
    VirtualFree((LPVOID)v2, 0, 0x8000u);
    goto LABEL_19;
  }
  if ( v0 == &off_46F478 )
  {
    if ( !off_46F478 )
      off_46F478 = &off_46F478;
    if ( !lpMem )
      lpMem = &off_46F478;
  }
  else
  {
    *v0 = &off_46F478;
    v0[1] = lpMem;
    lpMem = v0;
    *(_DWORD *)v0[1] = v0;
  }
  v0[5] = (void *)(v2 + 0x400000);
  v3 = (int)(v0 + 6);
  v0[3] = v0 + 38;
  v0[4] = (void *)v2;
  v0[2] = v0 + 6;
  v4 = 0;
  do
  {
    v5 = v4++ >= 16;
    *(_DWORD *)v3 = ((v5 - 1) & 0xF1) - 1;
    *(_DWORD *)(v3 + 4) = 241;
    v3 += 8;
  }
  while ( v4 < 1024 );
  memset((void *)v2, 0, 0x10000u);
  while ( v2 < (unsigned int)v0[4] + 0x10000 )
  {
    *(_BYTE *)(v2 + 248) = -1;
    *(_DWORD *)v2 = v2 + 8;
    *(_DWORD *)(v2 + 4) = 240;
    v2 += 4096;
  }
  return v0;
}
// 46F478: using guessed type void *off_46F478;
// 46F488: using guessed type int dword_46F488;

//----- (00453FDF) --------------------------------------------------------
int __cdecl sub_453FDF(LPVOID lpMem)
{
  int result; // eax@1

  result = VirtualFree(*((LPVOID *)lpMem + 4), 0, 0x8000u);
  if ( off_471498 == lpMem )
  {
    result = *((_DWORD *)lpMem + 1);
    off_471498 = (void **)*((_DWORD *)lpMem + 1);
  }
  if ( lpMem == &off_46F478 )
  {
    dword_46F488 = -1;
  }
  else
  {
    **((_DWORD **)lpMem + 1) = *(_DWORD *)lpMem;
    *(_DWORD *)(*(_DWORD *)lpMem + 4) = *((_DWORD *)lpMem + 1);
    result = HeapFree(hHeap, 0, lpMem);
  }
  return result;
}
// 46F478: using guessed type void *off_46F478;
// 46F488: using guessed type int dword_46F488;
// 471498: using guessed type void **off_471498;

//----- (00454035) --------------------------------------------------------
void __cdecl sub_454035(int a1)
{
  LPVOID v1; // esi@1
  _DWORD *v2; // edi@3
  signed int v3; // ebx@3
  unsigned int v4; // eax@6
  LPVOID v5; // ecx@11
  _DWORD *v6; // eax@13
  signed int v7; // edx@13
  int v8; // [sp+Ch] [bp-4h]@3

  v1 = lpMem;
  do
  {
    if ( *((_DWORD *)v1 + 4) != -1 )
    {
      v8 = 0;
      v2 = (char *)v1 + 8208;
      v3 = 4190208;
      do
      {
        if ( *v2 == 240 && VirtualFree((LPVOID)(*((_DWORD *)v1 + 4) + v3), 0x1000u, 0x4000u) )
        {
          *v2 = -1;
          --dword_481D64;
          v4 = *((_DWORD *)v1 + 3);
          if ( !v4 || v4 > (unsigned int)v2 )
            *((_DWORD *)v1 + 3) = v2;
          ++v8;
          if ( !--a1 )
            break;
        }
        v3 -= 4096;
        v2 -= 2;
      }
      while ( v3 >= 0 );
      v5 = v1;
      v1 = (LPVOID)*((_DWORD *)v1 + 1);
      if ( v8 && *((_DWORD *)v5 + 6) == -1 )
      {
        v6 = (char *)v5 + 32;
        v7 = 1;
        do
        {
          if ( *v6 != -1 )
            break;
          ++v7;
          v6 += 2;
        }
        while ( v7 < 1024 );
        if ( v7 == 1024 )
          sub_453FDF(v5);
      }
    }
  }
  while ( v1 != lpMem && a1 > 0 );
}
// 481D64: using guessed type int dword_481D64;

//----- (004540F7) --------------------------------------------------------
unsigned int __cdecl sub_4540F7(unsigned int a1, void ***a2, unsigned int *a3)
{
  void **v3; // ecx@1

  v3 = &off_46F478;
  while ( a1 <= (unsigned int)v3[4] || a1 >= (unsigned int)v3[5] )
  {
    v3 = (void **)*v3;
    if ( v3 == &off_46F478 )
      return 0;
  }
  if ( !(a1 & 0xF) && (a1 & 0xFFF) >= 0x100 )
  {
    *a2 = v3;
    *a3 = a1 & 0xFFFFF000;
    return ((signed int)(a1 - (a1 & 0xFFFFF000) - 256) >> 4) + (a1 & 0xFFFFF000) + 8;
  }
  return 0;
}
// 46F478: using guessed type void *off_46F478;

//----- (0045414E) --------------------------------------------------------
void __cdecl sub_45414E(int a1, int a2, _BYTE *a3)
{
  int v3; // eax@1
  bool v4; // zf@1

  v3 = a1 + 8 * ((a2 - *(_DWORD *)(a1 + 16)) >> 12) + 24;
  *(_DWORD *)v3 += *a3;
  *a3 = 0;
  v4 = *(_DWORD *)v3 == 240;
  *(_DWORD *)(v3 + 4) = 241;
  if ( v4 && ++dword_481D64 == 32 )
    sub_454035(16);
}
// 481D64: using guessed type int dword_481D64;

//----- (00454193) --------------------------------------------------------
int __cdecl sub_454193(unsigned int a1)
{
  void **v1; // esi@1
  char *v2; // edx@2
  unsigned int v3; // edi@3
  int v4; // eax@3
  unsigned int v5; // ebx@4
  int result; // eax@6
  void **v7; // edi@22
  _DWORD *v8; // ebx@27
  _DWORD *v9; // eax@27
  int i; // esi@27
  _DWORD *v11; // ecx@31
  int v12; // eax@32
  unsigned int v13; // eax@34
  bool v14; // cf@35
  void **v15; // eax@40
  _BYTE *v16; // ecx@41
  unsigned int v17; // [sp+Ch] [bp-8h]@11
  int v18; // [sp+10h] [bp-4h]@3
  int v19; // [sp+10h] [bp-4h]@11
  signed int v20; // [sp+10h] [bp-4h]@27

  v1 = off_471498;
  do
  {
    v2 = (char *)v1[4];
    if ( v2 == (char *)-1 )
    {
      v5 = a1;
    }
    else
    {
      v3 = (unsigned int)v1[2];
      v4 = (int)&v2[4096 * (((_BYTE *)v1[2] - (_BYTE *)v1 - 24) >> 3)];
      v18 = (int)&v2[4096 * (((_BYTE *)v1[2] - (_BYTE *)v1 - 24) >> 3)];
      if ( v3 < (unsigned int)(v1 + 2054) )
      {
        while ( 1 )
        {
          v5 = a1;
          if ( *(_DWORD *)v3 >= (signed int)a1 && *(_DWORD *)(v3 + 4) > a1 )
          {
            result = sub_45439B(v4, *(_DWORD *)v3, a1);
            if ( result )
            {
LABEL_21:
              off_471498 = v1;
              *(_DWORD *)v3 -= v5;
              v1[2] = (void *)v3;
              return result;
            }
            v4 = v18;
            *(_DWORD *)(v3 + 4) = a1;
          }
          v3 += 8;
          v4 += 4096;
          v18 = v4;
          if ( v3 >= (unsigned int)(v1 + 2054) )
            goto LABEL_11;
        }
      }
      v5 = a1;
LABEL_11:
      v3 = (unsigned int)(v1 + 6);
      v17 = (unsigned int)v1[2];
      v19 = (int)v1[4];
      if ( (unsigned int)(v1 + 6) < v17 )
      {
        do
        {
          if ( *(_DWORD *)v3 >= (signed int)v5 && *(_DWORD *)(v3 + 4) > v5 )
          {
            result = sub_45439B(v19, *(_DWORD *)v3, v5);
            if ( result )
              goto LABEL_21;
            *(_DWORD *)(v3 + 4) = v5;
          }
          v19 += 4096;
          v3 += 8;
        }
        while ( v3 < v17 );
      }
    }
    v1 = (void **)*v1;
  }
  while ( v1 != off_471498 );
  v7 = &off_46F478;
  while ( v7[4] == (void *)-1 || !v7[3] )
  {
    v7 = (void **)*v7;
    if ( v7 == &off_46F478 )
    {
      v15 = sub_453E9B();
      if ( v15 )
      {
        v16 = v15[4];
        v16[8] = v5;
        off_471498 = v15;
        *(_DWORD *)v16 = &v16[v5 + 8];
        *((_DWORD *)v16 + 1) = 240 - v5;
        v15[6] = (char *)v15[6] - (unsigned __int8)v5;
        return (int)(v16 + 256);
      }
      return 0;
    }
  }
  v8 = v7[3];
  v20 = 0;
  v9 = v8;
  for ( i = (int)v7[4] + 4096 * (((char *)v8 - (char *)v7 - 24) >> 3); *v9 == -1; ++v20 )
  {
    if ( v20 >= 16 )
      break;
    v9 += 2;
  }
  if ( VirtualAlloc((LPVOID)i, v20 << 12, 0x1000u, 4u) != (LPVOID)i )
    return 0;
  v11 = v8;
  if ( v20 > 0 )
  {
    v12 = i + 4;
    do
    {
      *(_BYTE *)(v12 + 244) = -1;
      *(_DWORD *)(v12 - 4) = v12 + 4;
      *(_DWORD *)v12 = 240;
      *v11 = 240;
      v11[1] = 241;
      v12 += 4096;
      v11 += 2;
      --v20;
    }
    while ( v20 );
  }
  off_471498 = v7;
  v13 = (unsigned int)(v7 + 2054);
  while ( 1 )
  {
    v14 = (unsigned int)v11 < v13;
    if ( (unsigned int)v11 >= v13 )
      break;
    if ( *v11 == -1 )
    {
      v14 = (unsigned int)v11 < v13;
      break;
    }
    v11 += 2;
  }
  v7[3] = (void *)(v14 ? (unsigned int)v11 : 0);
  *(_BYTE *)(i + 8) = a1;
  v7[2] = v8;
  *v8 -= a1;
  *(_DWORD *)(i + 4) -= a1;
  result = i + 256;
  *(_DWORD *)i = i + a1 + 8;
  return result;
}
// 46F478: using guessed type void *off_46F478;
// 471498: using guessed type void **off_471498;

//----- (0045439B) --------------------------------------------------------
int __cdecl sub_45439B(int a1, unsigned int a2, unsigned int a3)
{
  int v3; // ecx@1
  unsigned int v4; // esi@1
  _BYTE *v5; // edi@1
  unsigned int v6; // ebx@1
  _BYTE *v7; // eax@1
  int v8; // eax@5
  _BYTE *v9; // esi@6
  _BYTE *v10; // ebx@10
  unsigned int v11; // esi@10
  _BYTE *v12; // esi@20
  _BYTE *v13; // ebx@24
  unsigned int v14; // eax@24
  _BYTE *v16; // [sp+Ch] [bp-4h]@1
  unsigned int v17; // [sp+18h] [bp+8h]@1

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v5 = *(_BYTE **)a1;
  v6 = a1 + 248;
  v16 = *(_BYTE **)a1;
  v7 = *(_BYTE **)a1;
  v17 = a1 + 248;
  if ( v4 >= a3 )
  {
    *v5 = a3;
    if ( (unsigned int)&v5[a3] >= v6 )
    {
      *(_DWORD *)(v3 + 4) = 0;
      *(_DWORD *)v3 = v3 + 8;
    }
    else
    {
      *(_DWORD *)v3 += a3;
      *(_DWORD *)(v3 + 4) -= a3;
    }
    v8 = (int)(v5 + 8);
    return 16 * v8 - 15 * v3;
  }
  v9 = &v5[v4];
  if ( *v9 )
    v7 = v9;
  if ( (unsigned int)&v7[a3] >= v6 )
  {
LABEL_20:
    v12 = (_BYTE *)(v3 + 8);
    while ( v12 < v5 && (unsigned int)&v12[a3] < v17 )
    {
      if ( *v12 )
      {
        v12 += *v12;
      }
      else
      {
        v13 = v12 + 1;
        v14 = 1;
        while ( !*v13 )
        {
          ++v13;
          ++v14;
        }
        if ( v14 >= a3 )
        {
          if ( (unsigned int)&v12[a3] >= v17 )
          {
            *(_DWORD *)(v3 + 4) = 0;
            *(_DWORD *)v3 = v3 + 8;
          }
          else
          {
            *(_DWORD *)v3 = &v12[a3];
            *(_DWORD *)(v3 + 4) = v14 - a3;
          }
          *v12 = a3;
          v8 = (int)(v12 + 8);
          return 16 * v8 - 15 * v3;
        }
        a2 -= v14;
        if ( a2 < a3 )
          return 0;
        v12 = v13;
      }
    }
    return 0;
  }
  while ( *v7 )
  {
    v7 += *v7;
LABEL_19:
    if ( (unsigned int)&v7[a3] >= v17 )
      goto LABEL_20;
  }
  v10 = v7 + 1;
  v11 = 1;
  while ( !*v10 )
  {
    ++v10;
    ++v11;
  }
  if ( v11 < a3 )
  {
    if ( v7 == v16 )
    {
      *(_DWORD *)(v3 + 4) = v11;
    }
    else
    {
      a2 -= v11;
      if ( a2 < a3 )
        return 0;
    }
    v5 = v16;
    v7 = v10;
    goto LABEL_19;
  }
  if ( (unsigned int)&v7[a3] >= v17 )
  {
    *(_DWORD *)(v3 + 4) = 0;
    *(_DWORD *)v3 = v3 + 8;
  }
  else
  {
    *(_DWORD *)v3 = &v7[a3];
    *(_DWORD *)(v3 + 4) = v11 - a3;
  }
  *v7 = a3;
  v8 = (int)(v7 + 8);
  return 16 * v8 - 15 * v3;
}

//----- (004544BF) --------------------------------------------------------
signed int __cdecl sub_4544BF(int a1, int a2, _BYTE *a3, unsigned int a4)
{
  unsigned int v4; // ecx@1
  int v5; // edi@1
  _BYTE *v6; // esi@4
  _BYTE *i; // eax@5
  bool v8; // zf@6
  int v9; // eax@14
  int v11; // [sp+Ch] [bp-4h]@1

  v4 = *a3;
  v11 = 0;
  v5 = a1 + 8 * ((a2 - *(_DWORD *)(a1 + 16)) >> 12) + 24;
  if ( v4 > a4 )
  {
    *a3 = a4;
    *(_DWORD *)v5 += v4 - a4;
    *(_DWORD *)(v5 + 4) = 241;
    return 1;
  }
  if ( v4 < a4 )
  {
    v6 = &a3[a4];
    if ( a2 + 248 >= (unsigned int)&a3[a4] )
    {
      for ( i = &a3[v4]; ; ++i )
      {
        v8 = i == v6;
        if ( i >= v6 )
          break;
        if ( *i )
        {
          v8 = i == v6;
          break;
        }
      }
      if ( v8 )
      {
        *a3 = a4;
        if ( (unsigned int)a3 <= *(_DWORD *)a2 && (unsigned int)v6 > *(_DWORD *)a2 )
        {
          if ( (unsigned int)v6 >= a2 + 248 )
          {
            *(_DWORD *)(a2 + 4) = 0;
            *(_DWORD *)a2 = a2 + 8;
          }
          else
          {
            v9 = 0;
            *(_DWORD *)a2 = v6;
            if ( !*v6 )
            {
              do
                ++v9;
              while ( !v6[v9] );
            }
            *(_DWORD *)(a2 + 4) = v9;
          }
        }
        *(_DWORD *)v5 += v4 - a4;
        return 1;
      }
    }
  }
  return v11;
}

//----- (004567A9) --------------------------------------------------------
void *__cdecl sub_4567A9(int a1, int a2)
{
  unsigned int v2; // esi@1
  void *result; // eax@19
  size_t v4; // [sp-4h] [bp-38h]@9
  void *v5; // [sp+14h] [bp-20h]@5
  unsigned int v6; // [sp+18h] [bp-1Ch]@1

  v2 = a2 * a1;
  v6 = a2 * a1;
  if ( (unsigned int)(a2 * a1) <= 0xFFFFFFE0 )
  {
    if ( !v2 )
      v2 = 1;
    v2 = (v2 + 15) & 0xFFFFFFF0;
  }
  while ( 1 )
  {
    v5 = 0;
    if ( v2 <= 0xFFFFFFE0 )
    {
      if ( dword_4832C8 == 3 )
      {
        if ( v6 > dword_4832C0 )
          goto LABEL_15;
        _lock(9);
        v5 = (void *)__sbh_alloc_block(v6);
        _unlock(9);
        if ( v5 )
        {
          v4 = a2 * a1;
LABEL_14:
          memset(v5, 0, v4);
          goto LABEL_15;
        }
      }
      else
      {
        if ( dword_4832C8 != 2 || v2 > dword_47149C )
        {
LABEL_15:
          if ( v5 )
            return v5;
          goto LABEL_16;
        }
        _lock(9);
        v5 = (void *)sub_454193(v2 >> 4);
        _unlock(9);
        if ( v5 )
        {
          v4 = v2;
          goto LABEL_14;
        }
      }
LABEL_16:
      v5 = HeapAlloc(hHeap, 8u, v2);
    }
    if ( v5 || !dword_481D68 )
      return v5;
    result = (void *)_callnewh(v2);
    if ( !result )
      return result;
  }
}
// 44F483: using guessed type _DWORD __cdecl _lock(_DWORD);
// 44F4E4: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 4532CE: using guessed type _DWORD __cdecl __sbh_alloc_block(_DWORD);
// 4546F0: using guessed type _DWORD __cdecl _callnewh(_DWORD);
// 47149C: using guessed type int dword_47149C;
// 481D68: using guessed type int dword_481D68;
// 4832C0: using guessed type int dword_4832C0;
// 4832C8: using guessed type int dword_4832C8;

//----- (00457FCC) --------------------------------------------------------
int sub_457FCC()
{
  return 0;
}

//----- (00459225) --------------------------------------------------------
__int16 __cdecl sub_459225(wchar_t a1, FILE *a2)
{
  __int16 v2; // si@1

  _lock_file(a2);
  v2 = _putwc_lk(a1, a2);
  _unlock_file(a2);
  return v2;
}
// 455ED8: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 455F2A: using guessed type _DWORD __cdecl _unlock_file(_DWORD);

//----- (00459DB3) --------------------------------------------------------
signed int __cdecl sub_459DB3(unsigned __int8 a1, int a2, unsigned __int8 a3)
{
  signed int result; // eax@3

  if ( a3 & (unsigned __int8)byte_482061[a1]
    || (!a2 ? (result = 0) : (result = (unsigned __int16)(a2 & _ctype[a1 + 1])), result) )
  {
    result = 1;
  }
  return result;
}

//----- (0045A964) --------------------------------------------------------
int __cdecl sub_45A964(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_472170);
}
// 45A7F8: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (0045A97A) --------------------------------------------------------
int __cdecl sub_45A97A(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_472188);
}
// 45A7F8: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (0045AA0A) --------------------------------------------------------
int __cdecl sub_45AA0A(int a1, int a2)
{
  char v3; // [sp+0h] [bp-Ch]@1

  __strgtold12(&v3, &a2, a2, 0, 0, 0, 0);
  return sub_45A964((int)&v3, a1);
}
// 45AC24: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045AA65) --------------------------------------------------------
int __cdecl sub_45AA65(int a1, int a2)
{
  char v3; // [sp+0h] [bp-Ch]@1

  __strgtold12(&v3, &a2, a2, 0, 0, 0, 0);
  return sub_45A97A((int)&v3, a1);
}
// 45AC24: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C440) --------------------------------------------------------
void __usercall sub_45C440(int a1@<ebp>)
{
  sub_413F5F(a1 - 572);
}

//----- (0045C456) --------------------------------------------------------
void __usercall sub_45C456(int a1@<ebp>)
{
  sub_413F5F(a1 - 336);
}

//----- (0045C46C) --------------------------------------------------------
void __usercall sub_45C46C(int a1@<ebp>)
{
  sub_413F5F(a1 - 56);
}

//----- (0045C47F) --------------------------------------------------------
void __usercall sub_45C47F(int a1@<ebp>)
{
  sub_413F5F(a1 - 300);
}

//----- (0045C495) --------------------------------------------------------
void __usercall sub_45C495(int a1@<ebp>)
{
  sub_413F5F(a1 - 360);
}

//----- (0045C4B0) --------------------------------------------------------
int __usercall sub_45C4B0@<eax>(int a1@<ebp>)
{
  return unknown_libname_1(*(_DWORD *)(a1 - 24) + 4);
}
// 4051C0: using guessed type int __thiscall unknown_libname_1(_DWORD);

//----- (0045C4C6) --------------------------------------------------------
int __usercall sub_45C4C6@<eax>(int a1@<ebp>)
{
  return unknown_libname_1(*(_DWORD *)(a1 - 16) + 4);
}
// 4051C0: using guessed type int __thiscall unknown_libname_1(_DWORD);

//----- (0045C4DC) --------------------------------------------------------
void __usercall sub_45C4DC(int a1@<ebp>)
{
  sub_413F5F(a1 - 448);
}

//----- (0045C4E8) --------------------------------------------------------
void __usercall sub_45C4E8(int a1@<ebp>)
{
  sub_413F5F(a1 - 736);
}

//----- (0045C4F4) --------------------------------------------------------
void __usercall sub_45C4F4(int a1@<ebp>)
{
  sub_413F5F(a1 - 1032);
}

//----- (0045C50A) --------------------------------------------------------
void __usercall sub_45C50A(int a1@<ebp>)
{
  sub_413F5F(a1 - 308);
}

//----- (0045C520) --------------------------------------------------------
void __usercall sub_45C520(int a1@<ebp>)
{
  sub_413F5F(a1 - 40);
}

//----- (0045C533) --------------------------------------------------------
void __usercall sub_45C533(int a1@<ebp>)
{
  sub_413F5F(a1 - 36);
}

//----- (0045C546) --------------------------------------------------------
void __usercall sub_45C546(int a1@<ebp>)
{
  sub_413F5F(a1 - 36);
}

//----- (0045C559) --------------------------------------------------------
void __usercall sub_45C559(int a1@<ebp>)
{
  sub_413F5F(a1 - 36);
}

//----- (0045C570) --------------------------------------------------------
int __usercall sub_45C570@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045C590) --------------------------------------------------------
int __usercall sub_45C590@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045C5B0) --------------------------------------------------------
int __usercall sub_45C5B0@<eax>(int a1@<ebp>)
{
  return sub_40B0F0(a1 - 244);
}

//----- (0045C5BC) --------------------------------------------------------
int __usercall sub_45C5BC@<eax>(int a1@<ebp>)
{
  return unknown_libname_20(a1 - 372);
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0045C5C8) --------------------------------------------------------
int __usercall sub_45C5C8@<eax>(int a1@<ebp>)
{
  return unknown_libname_20(a1 - 392);
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0045C5D4) --------------------------------------------------------
int __usercall sub_45C5D4@<eax>(int a1@<ebp>)
{
  return sub_40B140((char *)(a1 - 356));
}

//----- (0045C5F0) --------------------------------------------------------
int __usercall sub_45C5F0@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
    result = sub_40B190((std::ios_base *)(*(_DWORD *)(a1 - 20) + 88));
  return result;
}

//----- (0045C60A) --------------------------------------------------------
char *__usercall sub_45C60A@<eax>(int a1@<ebp>)
{
  return sub_40B2E0((char *)(*(_DWORD *)(a1 - 20) + 8));
}

//----- (0045C620) --------------------------------------------------------
int __usercall sub_45C620@<eax>(int a1@<ebp>)
{
  return sub_40B490(*(_DWORD *)(a1 - 16));
}

//----- (0045C640) --------------------------------------------------------
int __usercall sub_45C640@<eax>(int a1@<ebp>)
{
  return unknown_libname_20(*(_DWORD *)(a1 - 16));
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0045C6B0) --------------------------------------------------------
int __usercall sub_45C6B0@<eax>(int a1@<ebp>)
{
  return unknown_libname_20(*(_DWORD *)(a1 - 16));
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0045C6D0) --------------------------------------------------------
int __usercall sub_45C6D0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045C6F0) --------------------------------------------------------
int __usercall sub_45C6F0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045C720) --------------------------------------------------------
void __usercall sub_45C720(int a1@<ebp>)
{
  int v1; // ST04_4@1
  int v2; // ST00_4@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 20);
  sub_40E4B0();
}

//----- (0045C740) --------------------------------------------------------
int __usercall sub_45C740@<eax>(int a1@<ebp>)
{
  return unknown_libname_20(*(_DWORD *)(a1 - 16));
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0045C760) --------------------------------------------------------
void __usercall sub_45C760(int a1@<ebp>)
{
  sub_413F5F(a1 - 32);
}

//----- (0045C769) --------------------------------------------------------
int __cdecl SEH_40E6E3(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C773) --------------------------------------------------------
void *__usercall sub_45C773@<eax>(int a1@<ebp>)
{
  return sub_401074((void *)(a1 - 468));
}

//----- (0045C77F) --------------------------------------------------------
int __cdecl SEH_40EB66(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C789) --------------------------------------------------------
void *__usercall sub_45C789@<eax>(int a1@<ebp>)
{
  return sub_401074((void *)(a1 - 404));
}

//----- (0045C795) --------------------------------------------------------
int __cdecl SEH_40EDD3(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C79F) --------------------------------------------------------
void *__usercall sub_45C79F@<eax>(int a1@<ebp>)
{
  return sub_401074((void *)(a1 - 112));
}

//----- (0045C7A8) --------------------------------------------------------
int __cdecl SEH_40EFC9(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C7D0) --------------------------------------------------------
void __usercall sub_45C7D0(int a1@<ebp>)
{
  sub_413F5F(a1 - 32);
}

//----- (0045C7D9) --------------------------------------------------------
int __cdecl SEH_40FBBE(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C7E3) --------------------------------------------------------
void __usercall sub_45C7E3(int a1@<ebp>)
{
  sub_413F5F(a1 - 32);
}

//----- (0045C7EC) --------------------------------------------------------
int __cdecl SEH_40FC7A(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C7F6) --------------------------------------------------------
void __usercall sub_45C7F6(int a1@<ebp>)
{
  sub_413F5F(a1 - 144);
}

//----- (0045C802) --------------------------------------------------------
int __cdecl SEH_40FD0D(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C80C) --------------------------------------------------------
void __usercall sub_45C80C(int a1@<ebp>)
{
  sub_413F5F(a1 - 128);
}

//----- (0045C815) --------------------------------------------------------
int __cdecl SEH_41070C(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C81F) --------------------------------------------------------
void *__usercall sub_45C81F@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045C832) --------------------------------------------------------
void *__usercall sub_45C832@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045C85A) --------------------------------------------------------
void __usercall sub_45C85A(int a1@<ebp>)
{
  sub_413F5F(a1 - 72);
}

//----- (0045C863) --------------------------------------------------------
int __cdecl SEH_410D11(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045C86D) --------------------------------------------------------
void __usercall sub_45C86D(int a1@<ebp>)
{
  sub_413F5F(a1 - 32);
}

//----- (0045C880) --------------------------------------------------------
int __usercall sub_45C880@<eax>(int a1@<ebp>)
{
  return unknown_libname_20(a1 - 60);
}
// 40B120: using guessed type int __thiscall unknown_libname_20(_DWORD);

//----- (0045C889) --------------------------------------------------------
int __usercall sub_45C889@<eax>(int a1@<ebp>)
{
  return unknown_libname_53(a1 - 44);
}
// 4116F0: using guessed type int __thiscall unknown_libname_53(_DWORD);

//----- (0045C8A0) --------------------------------------------------------
int __usercall sub_45C8A0@<eax>(int a1@<ebp>)
{
  return unknown_libname_51(*(_DWORD *)(a1 - 24));
}
// 411610: using guessed type int __thiscall unknown_libname_51(_DWORD);

//----- (0045C8C0) --------------------------------------------------------
int __usercall sub_45C8C0@<eax>(int a1@<ebp>)
{
  return unknown_libname_51(*(_DWORD *)(a1 - 16));
}
// 411610: using guessed type int __thiscall unknown_libname_51(_DWORD);

//----- (0045C8E0) --------------------------------------------------------
int __usercall sub_45C8E0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045C900) --------------------------------------------------------
int __usercall sub_45C900@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045C920) --------------------------------------------------------
void __usercall sub_45C920(int a1@<ebp>)
{
  int v1; // ST04_4@1
  int v2; // ST00_4@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 20);
  sub_40E4B0();
}

//----- (0045C940) --------------------------------------------------------
void *__usercall sub_45C940@<eax>(int a1@<ebp>)
{
  return sub_418081(*(void **)(a1 - 16));
}

//----- (0045C953) --------------------------------------------------------
void *__usercall sub_45C953@<eax>(int a1@<ebp>)
{
  return sub_418081(*(void **)(a1 - 20));
}

//----- (0045C95C) --------------------------------------------------------
void __usercall sub_45C95C(int a1@<ebp>)
{
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 20) + 8));
}

//----- (0045C980) --------------------------------------------------------
void sub_45C980()
{
  sub_417CC0();
}

//----- (0045C993) --------------------------------------------------------
void sub_45C993()
{
  sub_417CC0();
}

//----- (0045C9A9) --------------------------------------------------------
void sub_45C9A9()
{
  sub_417CC0();
}

//----- (0045C9BC) --------------------------------------------------------
void sub_45C9BC()
{
  sub_417CC0();
}

//----- (0045C9D0) --------------------------------------------------------
void __usercall sub_45C9D0(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 28));
}

//----- (0045C9F0) --------------------------------------------------------
void *__usercall sub_45C9F0@<eax>(int a1@<ebp>)
{
  return sub_418081(*(void **)(a1 - 16));
}

//----- (0045CA03) --------------------------------------------------------
void *__usercall sub_45CA03@<eax>(int a1@<ebp>)
{
  return sub_4182F0(*(void **)(a1 - 24));
}

//----- (0045CA16) --------------------------------------------------------
void *__usercall sub_45CA16@<eax>(int a1@<ebp>)
{
  return sub_4182F0(*(void **)(a1 - 16));
}

//----- (0045CA29) --------------------------------------------------------
void *__usercall sub_45CA29@<eax>(int a1@<ebp>)
{
  return sub_418081(*(void **)(a1 - 24));
}

//----- (0045CA32) --------------------------------------------------------
int __usercall sub_45CA32@<eax>(int a1@<ebp>)
{
  return unknown_libname_75(*(_DWORD *)(a1 - 24) + 8);
}
// 419730: using guessed type int __thiscall unknown_libname_75(_DWORD);

//----- (0045CA51) --------------------------------------------------------
int __usercall sub_45CA51@<eax>(int a1@<ebp>)
{
  return unknown_libname_75(*(_DWORD *)(a1 - 16) + 8);
}
// 419730: using guessed type int __thiscall unknown_libname_75(_DWORD);

//----- (0045CA70) --------------------------------------------------------
int __usercall sub_45CA70@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045CA90) --------------------------------------------------------
int __usercall sub_45CA90@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045CAB0) --------------------------------------------------------
int __usercall sub_45CAB0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045CAD0) --------------------------------------------------------
int __usercall sub_45CAD0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045CAF0) --------------------------------------------------------
void *__usercall sub_45CAF0@<eax>(int a1@<ebp>)
{
  return sub_418081(*(void **)(a1 - 16));
}

//----- (0045CB03) --------------------------------------------------------
void *__usercall sub_45CB03@<eax>(int a1@<ebp>)
{
  return sub_418081(*(void **)(a1 - 20));
}

//----- (0045CB16) --------------------------------------------------------
int __usercall sub_45CB16@<eax>(int a1@<ebp>)
{
  return unknown_libname_48(*(LPVOID *)(a1 - 28));
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0045CB30) --------------------------------------------------------
int __usercall sub_45CB30@<eax>(int a1@<ebp>)
{
  return sub_41F170(*(_DWORD *)(a1 - 20));
}

//----- (0045CB43) --------------------------------------------------------
int __usercall sub_45CB43@<eax>(int a1@<ebp>)
{
  return std::istrstream::`vbase destructor(a1 - 160);
}
// 41EEB0: using guessed type int __thiscall std::istrstream::`vbase destructor(_DWORD);

//----- (0045CB60) --------------------------------------------------------
int __usercall sub_45CB60@<eax>(int a1@<ebp>)
{
  return sub_41F170(*(_DWORD *)(a1 - 16));
}

//----- (0045CB80) --------------------------------------------------------
int __usercall sub_45CB80@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
    result = sub_40B190((std::ios_base *)(*(_DWORD *)(a1 - 20) + 92));
  return result;
}

//----- (0045CB9A) --------------------------------------------------------
char *__usercall sub_45CB9A@<eax>(int a1@<ebp>)
{
  return sub_40B2E0((char *)(*(_DWORD *)(a1 - 20) + 8));
}

//----- (0045CBA6) --------------------------------------------------------
int __usercall sub_45CBA6@<eax>(int a1@<ebp>)
{
  return sub_41F440(*(_DWORD *)(a1 - 20) + 8);
}

//----- (0045CBC0) --------------------------------------------------------
char *__usercall sub_45CBC0@<eax>(int a1@<ebp>)
{
  return sub_40B2E0((char *)(*(_DWORD *)(a1 - 16) - 84));
}

//----- (0045CBE9) --------------------------------------------------------
int __usercall sub_45CBE9@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(*(_DWORD *)(a1 - 24) + 76));
}

//----- (0045CC00) --------------------------------------------------------
int __usercall sub_45CC00@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 20));
}

//----- (0045CC30) --------------------------------------------------------
int __usercall sub_45CC30@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 28));
}

//----- (0045CC50) --------------------------------------------------------
int __usercall sub_45CC50@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045CC79) --------------------------------------------------------
int __usercall sub_45CC79@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(*(_DWORD *)(a1 - 16) + 76));
}

//----- (0045CC90) --------------------------------------------------------
int __usercall sub_45CC90@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 16));
}

//----- (0045CC99) --------------------------------------------------------
void __usercall sub_45CC99(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 32));
}

//----- (0045CCC0) --------------------------------------------------------
int __usercall sub_45CCC0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045CCE9) --------------------------------------------------------
void __usercall sub_45CCE9(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 44));
}

//----- (0045CD09) --------------------------------------------------------
int __usercall sub_45CD09@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CD12) --------------------------------------------------------
int __usercall sub_45CD12@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045CD30) --------------------------------------------------------
int __usercall sub_45CD30@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CD59) --------------------------------------------------------
void __usercall sub_45CD59(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 44));
}

//----- (0045CD70) --------------------------------------------------------
int __usercall sub_45CD70@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 12));
}

//----- (0045CD79) --------------------------------------------------------
int __usercall sub_45CD79@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CD82) --------------------------------------------------------
int __usercall sub_45CD82@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 20) & 1;
  if ( result )
    result = std::locale::~locale(*(std::locale **)(a1 + 8));
  return result;
}

//----- (0045CDB9) --------------------------------------------------------
int __usercall sub_45CDB9@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 76));
}

//----- (0045CDD0) --------------------------------------------------------
int __usercall sub_45CDD0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CDF0) --------------------------------------------------------
int __usercall sub_45CDF0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CE10) --------------------------------------------------------
int __usercall sub_45CE10@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CE30) --------------------------------------------------------
int __usercall sub_45CE30@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045CE50) --------------------------------------------------------
int __usercall sub_45CE50@<eax>(int a1@<ebp>)
{
  return unknown_libname_48(*(LPVOID *)(a1 - 28));
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0045CE65) --------------------------------------------------------
int __usercall sub_45CE65@<eax>(int a1@<ebp>)
{
  return unknown_libname_141(*(_DWORD *)(a1 - 32) + 4);
}
// 426A00: using guessed type int __thiscall unknown_libname_141(_DWORD);

//----- (0045CE71) --------------------------------------------------------
int __usercall sub_45CE71@<eax>(int a1@<ebp>)
{
  return unknown_libname_142(*(_DWORD *)(a1 - 32) + 20);
}
// 426A20: using guessed type int __thiscall unknown_libname_142(_DWORD);

//----- (0045CE7D) --------------------------------------------------------
void __usercall sub_45CE7D(int a1@<ebp>)
{
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 32) + 36));
}

//----- (0045CE93) --------------------------------------------------------
int __usercall sub_45CE93@<eax>(int a1@<ebp>)
{
  return unknown_libname_141(*(_DWORD *)(a1 - 16) + 4);
}
// 426A00: using guessed type int __thiscall unknown_libname_141(_DWORD);

//----- (0045CE9F) --------------------------------------------------------
int __usercall sub_45CE9F@<eax>(int a1@<ebp>)
{
  return unknown_libname_142(*(_DWORD *)(a1 - 16) + 20);
}
// 426A20: using guessed type int __thiscall unknown_libname_142(_DWORD);

//----- (0045CEAB) --------------------------------------------------------
void __usercall sub_45CEAB(int a1@<ebp>)
{
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 36));
}

//----- (0045CED6) --------------------------------------------------------
void *__usercall sub_45CED6@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045CEE9) --------------------------------------------------------
void *__usercall sub_45CEE9@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045CF00) --------------------------------------------------------
int __usercall sub_45CF00@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045CF20) --------------------------------------------------------
int __usercall sub_45CF20@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 28));
}

//----- (0045CF40) --------------------------------------------------------
int __usercall sub_45CF40@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045CF60) --------------------------------------------------------
int __usercall sub_45CF60@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}

//----- (0045CF80) --------------------------------------------------------
void __usercall sub_45CF80(int a1@<ebp>)
{
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 52) + 4));
}

//----- (0045CF8C) --------------------------------------------------------
int __usercall sub_45CF8C@<eax>(int a1@<ebp>)
{
  return unknown_libname_164(*(_DWORD *)(a1 - 52) + 48);
}
// 42AC50: using guessed type int __thiscall unknown_libname_164(_DWORD);

//----- (0045CF98) --------------------------------------------------------
int __usercall sub_45CF98@<eax>(int a1@<ebp>)
{
  return unknown_libname_165(*(_DWORD *)(a1 - 52) + 64);
}
// 42AC70: using guessed type int __thiscall unknown_libname_165(_DWORD);

//----- (0045CFA4) --------------------------------------------------------
int __usercall sub_45CFA4@<eax>(int a1@<ebp>)
{
  return unknown_libname_166(*(_DWORD *)(a1 - 52) + 80);
}
// 42AC90: using guessed type int __thiscall unknown_libname_166(_DWORD);

//----- (0045CFB0) --------------------------------------------------------
int __usercall sub_45CFB0@<eax>(int a1@<ebp>)
{
  return unknown_libname_48(*(LPVOID *)(a1 - 36));
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0045CFC5) --------------------------------------------------------
void __usercall sub_45CFC5(int a1@<ebp>)
{
  sub_42D46B((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 4));
}

//----- (0045CFD1) --------------------------------------------------------
int __usercall sub_45CFD1@<eax>(int a1@<ebp>)
{
  return unknown_libname_164(*(_DWORD *)(a1 - 16) + 48);
}
// 42AC50: using guessed type int __thiscall unknown_libname_164(_DWORD);

//----- (0045CFDD) --------------------------------------------------------
int __usercall sub_45CFDD@<eax>(int a1@<ebp>)
{
  return unknown_libname_165(*(_DWORD *)(a1 - 16) + 64);
}
// 42AC70: using guessed type int __thiscall unknown_libname_165(_DWORD);

//----- (0045D000) --------------------------------------------------------
int __usercall sub_45D000@<eax>(int a1@<ebp>)
{
  return unknown_libname_48(*(LPVOID *)(a1 - 28));
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0045D015) --------------------------------------------------------
void *__usercall sub_45D015@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045D028) --------------------------------------------------------
void *__usercall sub_45D028@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045D050) --------------------------------------------------------
void __usercall sub_45D050(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 24));
}

//----- (0045D070) --------------------------------------------------------
int __usercall sub_45D070@<eax>(int a1@<ebp>)
{
  return unknown_libname_48(*(LPVOID *)(a1 - 28));
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0045D0B0) --------------------------------------------------------
void __usercall sub_45D0B0(int a1@<ebp>)
{
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 24) + 16));
}

//----- (0045D0C6) --------------------------------------------------------
void __usercall sub_45D0C6(int a1@<ebp>)
{
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 24) + 16));
}

//----- (0045D0DC) --------------------------------------------------------
void __usercall sub_45D0DC(int a1@<ebp>)
{
  sub_413F5F(a1 - 40);
}

//----- (0045D0EF) --------------------------------------------------------
void __usercall sub_45D0EF(int a1@<ebp>)
{
  sub_413F5F(a1 - 548);
}

//----- (0045D110) --------------------------------------------------------
int sub_45D110()
{
  return sub_41FD50();
}

//----- (0045D130) --------------------------------------------------------
void __usercall sub_45D130(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 16));
}

//----- (0045D150) --------------------------------------------------------
void __usercall sub_45D150(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 16));
}

//----- (0045D170) --------------------------------------------------------
void __usercall sub_45D170(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 20));
}

//----- (0045D190) --------------------------------------------------------
int __usercall sub_45D190@<eax>(int a1@<ebp>)
{
  return unknown_libname_192(*(_DWORD *)(a1 - 20) + 8);
}
// 4352C0: using guessed type int __thiscall unknown_libname_192(_DWORD);

//----- (0045D1A6) --------------------------------------------------------
int __usercall sub_45D1A6@<eax>(int a1@<ebp>)
{
  return unknown_libname_192(*(_DWORD *)(a1 - 36) + 8);
}
// 4352C0: using guessed type int __thiscall unknown_libname_192(_DWORD);

//----- (0045D1B2) --------------------------------------------------------
void __usercall sub_45D1B2(int a1@<ebp>)
{
  sub_42D5FA((struct _RTL_CRITICAL_SECTION *)(*(_DWORD *)(a1 - 36) + 44));
}

//----- (0045D1C8) --------------------------------------------------------
void __usercall sub_45D1C8(int a1@<ebp>)
{
  sub_413F5F(a1 - 136);
}

//----- (0045D1D4) --------------------------------------------------------
void __usercall sub_45D1D4(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 160));
}

//----- (0045D1EC) --------------------------------------------------------
void __usercall sub_45D1EC(int a1@<ebp>)
{
  sub_413F5F(a1 - 160);
}

//----- (0045D1F8) --------------------------------------------------------
void __usercall sub_45D1F8(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 212));
}

//----- (0045D210) --------------------------------------------------------
void __usercall sub_45D210(int a1@<ebp>)
{
  sub_435FF8(a1 - 2120);
}

//----- (0045D230) --------------------------------------------------------
void *__usercall sub_45D230@<eax>(int a1@<ebp>)
{
  return sub_401074((void *)(a1 - 148));
}

//----- (0045D23C) --------------------------------------------------------
void __usercall sub_45D23C(int a1@<ebp>)
{
  sub_413F5F(a1 - 4328);
}

//----- (0045D252) --------------------------------------------------------
void __usercall sub_45D252(int a1@<ebp>)
{
  sub_413F5F(a1 - 80);
}

//----- (0045D25B) --------------------------------------------------------
int __cdecl SEH_43925D(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045D265) --------------------------------------------------------
void __usercall sub_45D265(int a1@<ebp>)
{
  sub_413F5F(a1 - 44);
}

//----- (0045D26E) --------------------------------------------------------
int __cdecl SEH_439436(int a1, int a2, int a3, int a4)
{
  return __CxxFrameHandler(a1, a2, a3, a4);
}
// 44B10C: using guessed type _DWORD __cdecl __CxxFrameHandler(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045D278) --------------------------------------------------------
void *__usercall sub_45D278@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 24));
}

//----- (0045D2A0) --------------------------------------------------------
int __usercall sub_45D2A0@<eax>(int a1@<ebp>)
{
  return unknown_libname_48(*(LPVOID *)(a1 - 28));
}
// 40F620: using guessed type _DWORD __cdecl unknown_libname_48(LPVOID lpMem);

//----- (0045D2CA) --------------------------------------------------------
void *__usercall sub_45D2CA@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045D2DD) --------------------------------------------------------
void *__usercall sub_45D2DD@<eax>(int a1@<ebp>)
{
  return sub_41D583(*(_DWORD *)(a1 - 16));
}

//----- (0045D322) --------------------------------------------------------
int __usercall sub_45D322@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(**(_DWORD **)(a1 - 20) + 4);
  *(_DWORD *)(result + *(_DWORD *)(a1 - 20) + 4 - 4) = &off_45FADC;
  return result;
}
// 45FADC: using guessed type int (__stdcall *off_45FADC)(char);

//----- (0045D32D) --------------------------------------------------------
int __usercall sub_45D32D@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(*(_DWORD *)(a1 + 16) + 52));
}

//----- (0045D338) --------------------------------------------------------
int __usercall sub_45D338@<eax>(int a1@<ebp>)
{
  return sub_40B490(*(_DWORD *)(a1 + 16));
}

//----- (0045D37E) --------------------------------------------------------
int __usercall sub_45D37E@<eax>(int a1@<ebp>)
{
  return std::basic_iostream<char,std::char_traits<char>>::~basic_iostream<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 12);
}
// 43D3DA: using guessed type int __thiscall std::basic_iostream<char,std::char_traits<char>>::~basic_iostream<char,std::char_traits<char>>(_DWORD);

//----- (0045D389) --------------------------------------------------------
int __usercall sub_45D389@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(*(_DWORD *)(a1 + 20) + 52));
}

//----- (0045D394) --------------------------------------------------------
int __usercall sub_45D394@<eax>(int a1@<ebp>)
{
  return sub_40B490(*(_DWORD *)(a1 + 20));
}

//----- (0045D3C0) --------------------------------------------------------
int __usercall sub_45D3C0@<eax>(int a1@<ebp>)
{
  return sub_40B490(*(_DWORD *)(a1 - 16));
}

//----- (0045D412) --------------------------------------------------------
char *__usercall sub_45D412@<eax>(int a1@<ebp>)
{
  return sub_40B2E0((char *)(*(_DWORD *)(a1 - 20) + 8));
}

//----- (0045D428) --------------------------------------------------------
int sub_45D428()
{
  return sub_41FD50();
}

//----- (0045D43C) --------------------------------------------------------
void __usercall sub_45D43C(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 20));
}

//----- (0045D450) --------------------------------------------------------
void __usercall sub_45D450(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 16));
}

//----- (0045D464) --------------------------------------------------------
void __usercall sub_45D464(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 16));
}

//----- (0045D478) --------------------------------------------------------
void __usercall sub_45D478(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 16));
}

//----- (0045D48C) --------------------------------------------------------
int __usercall sub_45D48C@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 16));
}

//----- (0045D4B8) --------------------------------------------------------
int sub_45D4B8()
{
  return sub_41FD50();
}

//----- (0045D4CC) --------------------------------------------------------
void __usercall sub_45D4CC(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 16));
}

//----- (0045D4E8) --------------------------------------------------------
int sub_45D4E8()
{
  return sub_41FD50();
}

//----- (0045D4F0) --------------------------------------------------------
int sub_45D4F0()
{
  return sub_41FD50();
}

//----- (0045D504) --------------------------------------------------------
int __usercall sub_45D504@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D50C) --------------------------------------------------------
void __usercall sub_45D50C(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 20));
}

//----- (0045D520) --------------------------------------------------------
int __usercall sub_45D520@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D534) --------------------------------------------------------
void *__usercall sub_45D534@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 - 16));
}

//----- (0045D548) --------------------------------------------------------
void *__usercall sub_45D548@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 - 20));
}

//----- (0045D550) --------------------------------------------------------
int __usercall sub_45D550@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  return sub_41FD50();
}

//----- (0045D55B) --------------------------------------------------------
int __usercall sub_45D55B@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D570) --------------------------------------------------------
int sub_45D570()
{
  return sub_41FD50();
}

//----- (0045D584) --------------------------------------------------------
void __usercall sub_45D584(int a1@<ebp>)
{
  sub_44DCB0(*(_DWORD *)(a1 - 16));
}

//----- (0045D598) --------------------------------------------------------
int sub_45D598()
{
  return sub_41FD50();
}

//----- (0045D5B6) --------------------------------------------------------
int __usercall sub_45D5B6@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045D5D2) --------------------------------------------------------
int __usercall sub_45D5D2@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 124));
}

//----- (0045D5DA) --------------------------------------------------------
int sub_45D5DA()
{
  return sub_41FD50();
}

//----- (0045D5E2) --------------------------------------------------------
int sub_45D5E2()
{
  return sub_41FD50();
}

//----- (0045D5FE) --------------------------------------------------------
int __usercall sub_45D5FE@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 124));
}

//----- (0045D606) --------------------------------------------------------
int sub_45D606()
{
  return sub_41FD50();
}

//----- (0045D60E) --------------------------------------------------------
int sub_45D60E()
{
  return sub_41FD50();
}

//----- (0045D620) --------------------------------------------------------
void __usercall sub_45D620(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 16));
}

//----- (0045D63C) --------------------------------------------------------
int __usercall sub_45D63C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 24));
}

//----- (0045D644) --------------------------------------------------------
void __usercall sub_45D644(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 12));
}

//----- (0045D64E) --------------------------------------------------------
int __usercall sub_45D64E@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 20) & 1;
  if ( result )
    result = std::locale::~locale(*(std::locale **)(a1 + 8));
  return result;
}

//----- (0045D678) --------------------------------------------------------
void __usercall sub_45D678(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045D682) --------------------------------------------------------
int __usercall sub_45D682@<eax>(int a1@<ebp>)
{
  return unknown_libname_130(*(_DWORD *)(a1 + 16));
}
// 423680: using guessed type int __thiscall unknown_libname_130(_DWORD);

//----- (0045D68A) --------------------------------------------------------
void __usercall sub_45D68A(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045D694) --------------------------------------------------------
void *__usercall sub_45D694@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045D69C) --------------------------------------------------------
int sub_45D69C()
{
  return sub_41FD50();
}

//----- (0045D6B8) --------------------------------------------------------
int __usercall sub_45D6B8@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  return sub_41FD50();
}

//----- (0045D6C3) --------------------------------------------------------
int __usercall sub_45D6C3@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D6CB) --------------------------------------------------------
int __usercall sub_45D6CB@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 84));
}

//----- (0045D6D3) --------------------------------------------------------
int __usercall sub_45D6D3@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 + 8));
}

//----- (0045D6E8) --------------------------------------------------------
int __usercall sub_45D6E8@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D704) --------------------------------------------------------
int __usercall sub_45D704@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  return sub_41FD50();
}

//----- (0045D70F) --------------------------------------------------------
int __usercall sub_45D70F@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  return sub_41FD50();
}

//----- (0045D71A) --------------------------------------------------------
int __usercall sub_45D71A@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  return sub_41FD50();
}

//----- (0045D738) --------------------------------------------------------
int __usercall sub_45D738@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  return sub_41FD50();
}

//----- (0045D743) --------------------------------------------------------
int __usercall sub_45D743@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  return sub_41FD50();
}

//----- (0045D74E) --------------------------------------------------------
int __usercall sub_45D74E@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  return sub_41FD50();
}

//----- (0045D76C) --------------------------------------------------------
int __usercall sub_45D76C@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  return sub_41FD50();
}

//----- (0045D777) --------------------------------------------------------
int __usercall sub_45D777@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  return sub_41FD50();
}

//----- (0045D794) --------------------------------------------------------
int sub_45D794()
{
  return sub_41FD50();
}

//----- (0045D79C) --------------------------------------------------------
int sub_45D79C()
{
  return sub_41FD50();
}

//----- (0045D7A4) --------------------------------------------------------
int sub_45D7A4()
{
  return sub_41FD50();
}

//----- (0045D7AC) --------------------------------------------------------
int __usercall sub_45D7AC@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 20));
}

//----- (0045D7C0) --------------------------------------------------------
int __usercall sub_45D7C0@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D7D4) --------------------------------------------------------
int __usercall sub_45D7D4@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D7E8) --------------------------------------------------------
int __usercall sub_45D7E8@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D7FC) --------------------------------------------------------
int __usercall sub_45D7FC@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D810) --------------------------------------------------------
int __usercall sub_45D810@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D824) --------------------------------------------------------
int __usercall sub_45D824@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D838) --------------------------------------------------------
int __usercall sub_45D838@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045D84C) --------------------------------------------------------
int __usercall sub_45D84C@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 32));
}

//----- (0045D868) --------------------------------------------------------
int sub_45D868()
{
  return sub_41FD50();
}

//----- (0045D870) --------------------------------------------------------
int sub_45D870()
{
  return sub_41FD50();
}

//----- (0045D878) --------------------------------------------------------
int sub_45D878()
{
  return sub_41FD50();
}

//----- (0045D894) --------------------------------------------------------
int sub_45D894()
{
  return sub_41FD50();
}

//----- (0045D8A8) --------------------------------------------------------
int __usercall sub_45D8A8@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 20));
}

//----- (0045D8C4) --------------------------------------------------------
int sub_45D8C4()
{
  return sub_41FD50();
}

//----- (0045D8E0) --------------------------------------------------------
void __usercall sub_45D8E0(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045D8EA) --------------------------------------------------------
void *__usercall sub_45D8EA@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045D904) --------------------------------------------------------
void __usercall sub_45D904(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045D90E) --------------------------------------------------------
void *__usercall sub_45D90E@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045D928) --------------------------------------------------------
void __usercall sub_45D928(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045D93C) --------------------------------------------------------
int sub_45D93C()
{
  return sub_41FD50();
}

//----- (0045D958) --------------------------------------------------------
int __usercall sub_45D958@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045D96C) --------------------------------------------------------
int __usercall sub_45D96C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D980) --------------------------------------------------------
int __usercall sub_45D980@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D994) --------------------------------------------------------
int __usercall sub_45D994@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D9A8) --------------------------------------------------------
int __usercall sub_45D9A8@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D9BC) --------------------------------------------------------
int __usercall sub_45D9BC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D9D0) --------------------------------------------------------
int __usercall sub_45D9D0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045D9EC) --------------------------------------------------------
void __usercall sub_45D9EC(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 28));
}

//----- (0045D9F6) --------------------------------------------------------
void *__usercall sub_45D9F6@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 - 28));
}

//----- (0045D9FE) --------------------------------------------------------
void __usercall sub_45D9FE(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 28));
}

//----- (0045DA08) --------------------------------------------------------
void __usercall sub_45DA08(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 28) = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (0045DA10) --------------------------------------------------------
void __usercall sub_45DA10(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 28));
}

//----- (0045DA1A) --------------------------------------------------------
void __usercall sub_45DA1A(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 28));
}

//----- (0045DA24) --------------------------------------------------------
void __usercall sub_45DA24(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 12));
}

//----- (0045DA2E) --------------------------------------------------------
void __usercall sub_45DA2E(int a1@<ebp>)
{
  **(_DWORD **)(a1 + 12) = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (0045DA36) --------------------------------------------------------
void __usercall sub_45DA36(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 12));
}

//----- (0045DA40) --------------------------------------------------------
void __usercall sub_45DA40(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 + 12);
  JUMPOUT(&loc_441D4D);
}

//----- (0045DA48) --------------------------------------------------------
void __usercall sub_45DA48(int a1@<ebp>)
{
  sub_44BDA0(*(LPVOID *)(*(_DWORD *)(a1 + 12) + 8));
}

//----- (0045DA60) --------------------------------------------------------
int sub_45DA60()
{
  return sub_41FD50();
}

//----- (0045DA7C) --------------------------------------------------------
int sub_45DA7C()
{
  return std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(1);
}
// 445D22: using guessed type _DWORD __stdcall std::basic_string<unsigned short,std::char_traits<unsigned short>,std::allocator<unsigned short>>::_Tidy(char);

//----- (0045DA84) --------------------------------------------------------
void sub_45DA84()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DA8C) --------------------------------------------------------
void sub_45DA8C()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DA94) --------------------------------------------------------
int __usercall sub_45DA94@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 20));
}

//----- (0045DAA8) --------------------------------------------------------
int __usercall sub_45DAA8@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DABC) --------------------------------------------------------
int __usercall sub_45DABC@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DAD0) --------------------------------------------------------
int __usercall sub_45DAD0@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DAE4) --------------------------------------------------------
int __usercall sub_45DAE4@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DAF8) --------------------------------------------------------
int __usercall sub_45DAF8@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DB0C) --------------------------------------------------------
int __usercall sub_45DB0C@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DB20) --------------------------------------------------------
int __usercall sub_45DB20@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 28));
}

//----- (0045DB34) --------------------------------------------------------
int __usercall sub_45DB34@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 + 32));
}

//----- (0045DB50) --------------------------------------------------------
void sub_45DB50()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DB58) --------------------------------------------------------
void sub_45DB58()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DB60) --------------------------------------------------------
void sub_45DB60()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DB7C) --------------------------------------------------------
int __usercall sub_45DB7C@<eax>(int a1@<ebp>)
{
  int result; // eax@1
  int v2; // ecx@2

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
  {
    v2 = *(_DWORD *)(a1 + 8);
    JUMPOUT(&loc_4455F6);
  }
  return result;
}

//----- (0045DBA8) --------------------------------------------------------
int sub_45DBA8()
{
  return sub_41FD50();
}

//----- (0045DBBC) --------------------------------------------------------
void sub_45DBBC()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DBD0) --------------------------------------------------------
void sub_45DBD0()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DBEC) --------------------------------------------------------
void sub_45DBEC()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DC08) --------------------------------------------------------
int sub_45DC08()
{
  return sub_41FD50();
}

//----- (0045DC1C) --------------------------------------------------------
int __usercall sub_45DC1C@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 20));
}

//----- (0045DC38) --------------------------------------------------------
int sub_45DC38()
{
  return sub_41FD50();
}

//----- (0045DC54) --------------------------------------------------------
int __usercall sub_45DC54@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 112));
}

//----- (0045DC5C) --------------------------------------------------------
int __usercall sub_45DC5C@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 104));
}

//----- (0045DC64) --------------------------------------------------------
void sub_45DC64()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DC6C) --------------------------------------------------------
void sub_45DC6C()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DC74) --------------------------------------------------------
int sub_45DC74()
{
  return sub_41FD50();
}

//----- (0045DC7F) --------------------------------------------------------
int sub_45DC7F()
{
  return sub_41FD50();
}

//----- (0045DC87) --------------------------------------------------------
void sub_45DC87()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DC92) --------------------------------------------------------
void sub_45DC92()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DC9D) --------------------------------------------------------
void sub_45DC9D()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DCA8) --------------------------------------------------------
void sub_45DCA8()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DCB3) --------------------------------------------------------
void sub_45DCB3()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DCBE) --------------------------------------------------------
void sub_45DCBE()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DCC9) --------------------------------------------------------
void sub_45DCC9()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DCD1) --------------------------------------------------------
int __usercall sub_45DCD1@<eax>(int a1@<ebp>)
{
  int result; // eax@1
  int v2; // ecx@2

  result = *(_DWORD *)(a1 - 120) & 1;
  if ( result )
  {
    v2 = *(_DWORD *)(a1 + 8);
    JUMPOUT(&loc_4455F6);
  }
  return result;
}

//----- (0045DCFC) --------------------------------------------------------
int __usercall sub_45DCFC@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 48));
}

//----- (0045DD04) --------------------------------------------------------
int __usercall sub_45DD04@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 48));
}

//----- (0045DD0C) --------------------------------------------------------
int sub_45DD0C()
{
  return sub_41FD50();
}

//----- (0045DD17) --------------------------------------------------------
void sub_45DD17()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DD1F) --------------------------------------------------------
void sub_45DD1F()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DD27) --------------------------------------------------------
void sub_45DD27()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DD2F) --------------------------------------------------------
void sub_45DD2F()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DD3A) --------------------------------------------------------
void sub_45DD3A()
{
  JUMPOUT(&loc_4455F6);
}

//----- (0045DD4C) --------------------------------------------------------
void __usercall sub_45DD4C(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &off_45FBB0;
}
// 45FBB0: using guessed type int (__stdcall *off_45FBB0)(int);

//----- (0045DD74) --------------------------------------------------------
void __usercall sub_45DD74(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DD90) --------------------------------------------------------
void __usercall sub_45DD90(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DD9A) --------------------------------------------------------
void *__usercall sub_45DD9A@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045DDB4) --------------------------------------------------------
void __usercall sub_45DDB4(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DDBE) --------------------------------------------------------
void *__usercall sub_45DDBE@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045DDD8) --------------------------------------------------------
void __usercall sub_45DDD8(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DDF4) --------------------------------------------------------
void __usercall sub_45DDF4(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DE10) --------------------------------------------------------
void __usercall sub_45DE10(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DE2C) --------------------------------------------------------
void __usercall sub_45DE2C(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DE36) --------------------------------------------------------
void *__usercall sub_45DE36@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045DE50) --------------------------------------------------------
void __usercall sub_45DE50(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DE5A) --------------------------------------------------------
void *__usercall sub_45DE5A@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045DE74) --------------------------------------------------------
void __usercall sub_45DE74(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DE90) --------------------------------------------------------
void __usercall sub_45DE90(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DEAC) --------------------------------------------------------
void __usercall sub_45DEAC(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DEC8) --------------------------------------------------------
void __usercall sub_45DEC8(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DEE4) --------------------------------------------------------
void __usercall sub_45DEE4(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045DEF8) --------------------------------------------------------
int __usercall sub_45DEF8@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1

  v2 = *(_DWORD *)(a1 - 16);
  return unknown_libname_135(a2);
}
// 423E50: using guessed type int __cdecl unknown_libname_135(_DWORD);

//----- (0045DF0C) --------------------------------------------------------
int sub_45DF0C()
{
  return sub_41FD50();
}

//----- (0045DF20) --------------------------------------------------------
int __usercall sub_45DF20@<eax>(int a1@<ebp>)
{
  return unknown_libname_130(*(_DWORD *)(a1 - 16));
}
// 423680: using guessed type int __thiscall unknown_libname_130(_DWORD);

//----- (0045DF34) --------------------------------------------------------
void __usercall sub_45DF34(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_441D4D);
}

//----- (0045DF3C) --------------------------------------------------------
void __usercall sub_45DF3C(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_441B73);
}

//----- (0045DF5C) --------------------------------------------------------
int __usercall sub_45DF5C@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045DF70) --------------------------------------------------------
void *__usercall sub_45DF70@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 - 16));
}

//----- (0045DF8C) --------------------------------------------------------
int __usercall sub_45DF8C@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045DFA8) --------------------------------------------------------
int __usercall sub_45DFA8@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045DFBC) --------------------------------------------------------
int __usercall sub_45DFBC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045DFD0) --------------------------------------------------------
int __usercall sub_45DFD0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045DFE4) --------------------------------------------------------
int __usercall sub_45DFE4@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045DFF8) --------------------------------------------------------
int __usercall sub_45DFF8@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E00C) --------------------------------------------------------
int __usercall sub_45E00C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E020) --------------------------------------------------------
int __usercall sub_45E020@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E034) --------------------------------------------------------
int __usercall sub_45E034@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E048) --------------------------------------------------------
int __usercall sub_45E048@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E05C) --------------------------------------------------------
int __usercall sub_45E05C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E070) --------------------------------------------------------
int __usercall sub_45E070@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E084) --------------------------------------------------------
int __usercall sub_45E084@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E098) --------------------------------------------------------
int __usercall sub_45E098@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E0AC) --------------------------------------------------------
int __usercall sub_45E0AC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E0C8) --------------------------------------------------------
int __usercall sub_45E0C8@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045E0DC) --------------------------------------------------------
int __usercall sub_45E0DC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E0F0) --------------------------------------------------------
int __usercall sub_45E0F0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E104) --------------------------------------------------------
int __usercall sub_45E104@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E118) --------------------------------------------------------
int __usercall sub_45E118@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E12C) --------------------------------------------------------
int __usercall sub_45E12C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E140) --------------------------------------------------------
int __usercall sub_45E140@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E154) --------------------------------------------------------
int __usercall sub_45E154@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E168) --------------------------------------------------------
int __usercall sub_45E168@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E17C) --------------------------------------------------------
int __usercall sub_45E17C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E190) --------------------------------------------------------
int __usercall sub_45E190@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E1A4) --------------------------------------------------------
int __usercall sub_45E1A4@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E1B8) --------------------------------------------------------
int __usercall sub_45E1B8@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E1CC) --------------------------------------------------------
int __usercall sub_45E1CC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E1E8) --------------------------------------------------------
void __usercall sub_45E1E8(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 20));
}

//----- (0045E1F2) --------------------------------------------------------
void __usercall sub_45E1F2(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  JUMPOUT(&loc_441D54);
}

//----- (0045E1FA) --------------------------------------------------------
void __usercall sub_45E1FA(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 20));
}

//----- (0045E204) --------------------------------------------------------
void __usercall sub_45E204(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 - 20));
}

//----- (0045E20E) --------------------------------------------------------
void __usercall sub_45E20E(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 12));
}

//----- (0045E218) --------------------------------------------------------
void __usercall sub_45E218(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 + 12);
  JUMPOUT(&loc_441D4D);
}

//----- (0045E220) --------------------------------------------------------
void __usercall sub_45E220(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 20));
}

//----- (0045E22A) --------------------------------------------------------
void __usercall sub_45E22A(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 + 20);
  JUMPOUT(&loc_441D4D);
}

//----- (0045E232) --------------------------------------------------------
void __usercall sub_45E232(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 + 20);
  JUMPOUT(&loc_441B73);
}

//----- (0045E250) --------------------------------------------------------
int __usercall sub_45E250@<eax>(int a1@<ebp>)
{
  int result; // eax@1
  int v2; // ecx@2

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
  {
    v2 = *(_DWORD *)(a1 + 8);
    result = sub_41FD50();
  }
  return result;
}

//----- (0045E27C) --------------------------------------------------------
int sub_45E27C()
{
  return sub_41FD50();
}

//----- (0045E290) --------------------------------------------------------
int sub_45E290()
{
  return sub_41FD50();
}

//----- (0045E2A4) --------------------------------------------------------
int sub_45E2A4()
{
  return sub_41FD50();
}

//----- (0045E2C0) --------------------------------------------------------
int sub_45E2C0()
{
  return sub_41FD50();
}

//----- (0045E2D4) --------------------------------------------------------
int sub_45E2D4()
{
  return sub_41FD50();
}

//----- (0045E2F0) --------------------------------------------------------
int __usercall sub_45E2F0@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 72));
}

//----- (0045E2F8) --------------------------------------------------------
int __usercall sub_45E2F8@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 112));
}

//----- (0045E300) --------------------------------------------------------
int sub_45E300()
{
  return sub_41FD50();
}

//----- (0045E308) --------------------------------------------------------
int sub_45E308()
{
  return sub_41FD50();
}

//----- (0045E310) --------------------------------------------------------
int sub_45E310()
{
  return sub_41FD50();
}

//----- (0045E31B) --------------------------------------------------------
int sub_45E31B()
{
  return sub_41FD50();
}

//----- (0045E323) --------------------------------------------------------
int sub_45E323()
{
  return sub_41FD50();
}

//----- (0045E32E) --------------------------------------------------------
int sub_45E32E()
{
  return sub_41FD50();
}

//----- (0045E339) --------------------------------------------------------
int sub_45E339()
{
  return sub_41FD50();
}

//----- (0045E344) --------------------------------------------------------
int sub_45E344()
{
  return sub_41FD50();
}

//----- (0045E34F) --------------------------------------------------------
int sub_45E34F()
{
  return sub_41FD50();
}

//----- (0045E35A) --------------------------------------------------------
int sub_45E35A()
{
  return sub_41FD50();
}

//----- (0045E365) --------------------------------------------------------
int sub_45E365()
{
  return sub_41FD50();
}

//----- (0045E380) --------------------------------------------------------
int __usercall sub_45E380@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 40));
}

//----- (0045E388) --------------------------------------------------------
int __usercall sub_45E388@<eax>(int a1@<ebp>)
{
  return std::locale::~locale((std::locale *)(a1 - 40));
}

//----- (0045E390) --------------------------------------------------------
int sub_45E390()
{
  return sub_41FD50();
}

//----- (0045E39B) --------------------------------------------------------
int sub_45E39B()
{
  return sub_41FD50();
}

//----- (0045E3A3) --------------------------------------------------------
int sub_45E3A3()
{
  return sub_41FD50();
}

//----- (0045E3AB) --------------------------------------------------------
int sub_45E3AB()
{
  return sub_41FD50();
}

//----- (0045E3B3) --------------------------------------------------------
int sub_45E3B3()
{
  return sub_41FD50();
}

//----- (0045E3BE) --------------------------------------------------------
int sub_45E3BE()
{
  return sub_41FD50();
}

//----- (0045E3D0) --------------------------------------------------------
void __usercall sub_45E3D0(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_4456CD);
}

//----- (0045E3EC) --------------------------------------------------------
void __usercall sub_45E3EC(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E408) --------------------------------------------------------
void __usercall sub_45E408(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E424) --------------------------------------------------------
void __usercall sub_45E424(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E42E) --------------------------------------------------------
void *__usercall sub_45E42E@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045E448) --------------------------------------------------------
void __usercall sub_45E448(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E452) --------------------------------------------------------
void *__usercall sub_45E452@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 + 16));
}

//----- (0045E46C) --------------------------------------------------------
void __usercall sub_45E46C(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E488) --------------------------------------------------------
void __usercall sub_45E488(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E4A4) --------------------------------------------------------
void __usercall sub_45E4A4(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E4C0) --------------------------------------------------------
void __usercall sub_45E4C0(int a1@<ebp>)
{
  sub_43CA18(*(LPVOID *)(a1 + 16));
}

//----- (0045E4D4) --------------------------------------------------------
void *__usercall sub_45E4D4@<eax>(int a1@<ebp>)
{
  return sub_423630(*(void **)(a1 - 16));
}

//----- (0045E4F0) --------------------------------------------------------
int __usercall sub_45E4F0@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045E50C) --------------------------------------------------------
int __usercall sub_45E50C@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045E520) --------------------------------------------------------
void __usercall sub_45E520(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_441D4D);
}

//----- (0045E528) --------------------------------------------------------
void __usercall sub_45E528(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_441B73);
}

//----- (0045E540) --------------------------------------------------------
int __usercall sub_45E540@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E554) --------------------------------------------------------
int __usercall sub_45E554@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E568) --------------------------------------------------------
int __usercall sub_45E568@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E57C) --------------------------------------------------------
int __usercall sub_45E57C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E590) --------------------------------------------------------
int __usercall sub_45E590@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E5A4) --------------------------------------------------------
int __usercall sub_45E5A4@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E5B8) --------------------------------------------------------
int __usercall sub_45E5B8@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E5CC) --------------------------------------------------------
int __usercall sub_45E5CC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E5E8) --------------------------------------------------------
int __usercall sub_45E5E8@<eax>(int a1@<ebp>)
{
  return std::_Locinfo::~_Locinfo((std::_Locinfo *)(a1 - 80));
}

//----- (0045E5FC) --------------------------------------------------------
int __usercall sub_45E5FC@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E610) --------------------------------------------------------
int __usercall sub_45E610@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E624) --------------------------------------------------------
int __usercall sub_45E624@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E638) --------------------------------------------------------
int __usercall sub_45E638@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E64C) --------------------------------------------------------
int __usercall sub_45E64C@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E660) --------------------------------------------------------
int __usercall sub_45E660@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E674) --------------------------------------------------------
int __usercall sub_45E674@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

//----- (0045E688) --------------------------------------------------------
int __usercall sub_45E688@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 16));
}

// ALL OK, 2015 function(s) have been successfully decompiled
